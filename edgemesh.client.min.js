!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){"use strict";t.exports=function(){return e("./prod-config")}},{"./dev-config":2,"./prod-config":3}],2:[function(e,t){"use strict";t.exports={version:"1.3.5",host:"sig.edgemesh.dev",clientUrl:"https://edgemesh.com",logLevel:"debug",signaling:{iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},server:{httpPort:8e3,httpsPort:4e3,wsAPIPort:3e3,wsCDNPort:9e3}}},{}],3:[function(e,t){"use strict";t.exports={version:"1.3.4",host:"sig.edgeno.de",clientUrl:"https://www.edgemesh.com",logLevel:"info",signaling:{iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},server:{httpPort:80,httpsPort:443,wsAPIPort:3e3,wsCDNPort:9e3}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.browserSupport={chrome:["48","49","50","51","52","53","54","55","56","57"],firefox:[],msie:[],msedge:[],safari:[],android:[],ios:[],opera:[],samsungBrowser:[],phantom:[],blackberry:[],webos:[],silk:[],bada:[],tizen:[],seamonkey:[],sailfish:[],ucbrowser:[],qupzilla:[],vivaldi:[],sleipnir:[],kMeleon:[]},n.tagSupport=["img","source","div","a","blockquote","button","nav"],n.extSupport=["jpg","jpeg","gif","png","bmp","svg","webp"]},{}],5:[function(e,t){function n(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}t.exports=n},{}],6:[function(e,t){function n(e){"object"!=typeof e&&(e={}),this._identifier=e.identifier||"id",this._store=[],this._idx=[],e.emitEvents?(this._emitEvents=!0,this.events=new r):this._emitEvents=!1}var r=e("tiny-emitter");n.prototype.emitEvent=function(e,t,n){this._emitEvents&&!n&&this.events.emit(e,t)},n.prototype.getIdentifiers=function(){for(var e=[],t=this._store.length-1;t>=0;t-=1)e[e.length]=this._store[t][this._identifier];return e},n.prototype.getRecord=function(e){for(var t=this._store.length-1;t>=0;t-=1)if(this._store[t][this._identifier]===e)return this._store[t];return void 0},n.prototype.exists=function(e){return this.getIndex(e)>=0?!0:!1},n.prototype.getIndex=function(e){for(var t=this._idx.length-1;t>=0;t-=1)if(this._idx[t]===e)return t;return-1},n.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var t=this.removeRecord(e[this._identifier],!0);return this._idx[this._idx.length]=e[this._identifier],this._store[this._store.length]=e,setTimeout(function(){t?setTimeout(this.emitEvent.bind(this,"update",e),0):setTimeout(this.emitEvent.bind(this,"add",e),0)}.bind(this),0),!0},n.prototype.removeRecord=function(e,t){var n=this.getIndex(e);if(0>n)return!1;for(var r=n;r>=0;r-=1)if(this._store[r]&&this._store[r][this._identifier]===e)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;for(var i=this._store.length-1;i>=n;i-=1)if(this._store[r]&&this._store[i][this._identifier]===e)return this._store.splice(i,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;return!1},n.prototype.forEachRecord=function(e){var t=0,n=this,r=function(){};return setTimeout(function(){for(var i=n._store.length-1;i>=0;i-=1)t+=1,setTimeout(e.bind(null,n._store[i],i),0);setTimeout(r.bind(null,t),0)},0),{"finally":function(e){r=e}}},n.prototype.mapRecords=function(e){for(var t=0,n=this,r=[],i=n._store.length-1;i>=0;i-=1)t+=1,r.push(e(n._store[i],i));return r},n.prototype.getCount=function(){return this._store.length},n.prototype.removeAll=function(){for(var e=this._store.length-1;e>=0;e-=1)delete this._store[e];this._store=[]},t.exports=n},{"tiny-emitter":128}],7:[function(e,t){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(0>t&&(t+=r),0>n&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;n>s;s++,a++)o[a]=i[s];return o.buffer}},{}],8:[function(e,t){(function(e){function n(){for(;i.next;){i=i.next;var e=i.task;i.task=void 0;var t=i.domain;t&&(i.domain=void 0,t.enter());try{e()}catch(r){if(u)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}s=!1}function r(t){o=o.next={task:t,domain:u&&e.domain,next:null},s||(s=!0,a())}var i={task:void 0,next:null},o=i,s=!1,a=void 0,u=!1;if("undefined"!=typeof e&&e.nextTick)u=!0,a=function(){e.nextTick(n)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=n,a=function(){c.port2.postMessage(0)}}else a=function(){setTimeout(n,0)};t.exports=r}).call(this,e("_process"))},{_process:81}],9:[function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},{}],10:[function(e,t,n){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),r=0;r<e.length;r++)t[e.charCodeAt(r)]=r;n.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;i>n;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,s,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),l=new Uint8Array(f);for(n=0;u>n;n+=4)r=t[e.charCodeAt(n)],i=t[e.charCodeAt(n+1)],o=t[e.charCodeAt(n+2)],s=t[e.charCodeAt(n+3)],l[c++]=r<<2|i>>4,l[c++]=(15&i)<<4|o>>2,l[c++]=(3&o)<<6|63&s;return f}}()},{}],11:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,s,a,u=e.length;s=r(e),a=new l(3*u/4-s),i=s>0?u-4:u;var c=0;for(t=0,n=0;i>t;t+=4,n+=3)o=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===s?(o=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,a[c++]=255&o):1===s&&(o=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function a(e,t,n){for(var r,i=[],o=t;n>o;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,u=0,f=n-r;f>u;u+=s)o.push(a(e,u,u+s>f?f:u+s));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=u;for(var c=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;p>d;++d)c[d]=h[d],f[h.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],12:[function(e,t){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new o;n(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),u=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return s?a?e.Blob:i:u?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t){!function(e,n){"undefined"!=typeof t&&t.exports?t.exports=n():"function"==typeof define&&define.amd?define(e,n):this[e]=n()}("bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var r,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),a=!o&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),c=!u&&/nexus\s*[0-9]+/i.test(e),f=/CrOS/.test(e),l=/silk/i.test(e),h=/sailfish/i.test(e),d=/tizen/i.test(e),p=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),m=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),y=!i&&!l&&/macintosh/i.test(e),v=!a&&!h&&!d&&!p&&/linux/i.test(e),b=t(/edge\/(\d+(\.\d+)?)/i),_=t(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e),k=!w&&/[^-]mobi/i.test(e),E=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:s,version:_||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?r={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:s,version:_||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:s,version:_||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:s,version:_||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(r={name:"Windows Phone",windowsphone:s},b?(r.msedge=s,r.version=b):(r.msie=s,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:f?r={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:s,version:b}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||_}:h?r={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=s)):l?r={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:s,version:_||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(r={name:"WebOS",webos:s,version:_||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=s)):/bada/i.test(e)?r={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:d?r={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_}:/chromium/i.test(e)?r={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:_}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:s},_&&(r.version=_)):i?(r={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},_&&(r.version=_)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||_}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=s):(r.name=r.name||"Webkit",r.webkit=s),!r.version&&_&&(r.version=_)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=s,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||r.msedge||!a&&!r.silk?r.windowsphone||r.msedge||!i?y?r.mac=s:E?r.xbox=s:m?r.windows=s:v&&(r.linux=s):(r[i]=s,r.ios=s):r.android=s;var S="";r.windowsphone?S=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(S=t(/os (\d+([_\s]\d+)*) like mac os x/i),S=S.replace(/[_\s]/g,".")):a?S=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?S=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?S=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?S=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(S=t(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(r.osversion=S);var A=S.split(".")[0];return w||c||"ipad"==i||a&&(3==A||A>=4&&!k)||r.silk?r.tablet=s:(k||"iphone"==i||"ipod"==i||a||u||r.blackberry||r.webos||r.bada)&&(r.mobile=s),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=s:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=s:r.x=s,r}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),i=n(e,function(e){var i=r-t(e);return e+=new Array(i+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(t,n,i){var o=a;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=e(i));var s=""+o.version;for(var u in t)if(t.hasOwnProperty(u)&&o[u]){if("string"!=typeof t[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(t));return r([s,t[u]])<0}return n}function o(e,t,n){return!i(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=i,a.compareVersions=r,a.check=o,a._detect=e,a})},{}],14:[function(){},{}],15:[function(e,t,n){(function(t){"use strict";var r=e("buffer"),i=r.Buffer,o=r.SlowBuffer,s=r.kMaxLength||2147483647;n.alloc=function(e,t,n){if("function"==typeof i.alloc)return i.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var r=n,o=t;void 0===o&&(r=void 0,o=0);var a=new i(e);if("string"==typeof o)for(var u=new i(o,r),c=u.length,f=-1;++f<e;)a[f]=u[f%c];else a.fill(o);return a},n.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new i(e)},n.from=function(e,n,r){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,n,r);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(e);"undefined"==typeof o&&(o=0);var s=r;if("undefined"==typeof s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+s))}if(i.isBuffer(e)){var a=new i(e.length);return e.copy(a,0,0,e.length),a}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},n.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:16}],16:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?l(e,t,n):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return u(t),0>=t?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function f(e,t){if(u(t),e=o(e,0>t?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;++n)e[n]=0;return e}function l(e,t,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function h(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function p(e,t){if(s.isBuffer(t)){var n=0|g(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&Q(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),s.alloc(+e)}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,t>=n)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return B(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t=255&t,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var f=-1;for(c=n;a>c;c++)if(o(e,c)===o(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*s}else-1!==f&&(c-=c-f),f=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var l=!0,h=0;u>h;h++)if(o(e,c+h)!==o(t,h)){l=!1;break}if(l)return c}return-1}function k(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function E(e,t,n,r){return V(K(t,e.length-n),e,n,r)}function S(e,t,n,r){return V(Y(t),e,n,r)}function A(e,t,n,r){return S(e,t,n,r)}function T(e,t,n,r){return V(J(t),e,n,r)}function x(e,t,n,r){return V(G(t,e.length-n),e,n,r)}function R(e,t,n){return Z.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=i+a){var u,c,f,l;switch(a){case 1:128>o&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return O(r)}function O(e){var t=e.length;if(ee>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;++i)r+=String.fromCharCode(127&e[i]);return r}function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;++o)i+=W(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||o>t)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,i){return i||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function q(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return 16>e?"0"+e.toString(16):e.toString(16)}function K(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;++s){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function J(e){return Z.toByteArray(q(e))}function V(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $(e){return e!==e}var Z=e("base64-js"),X=e("ieee754"),Q=e("isarray");n.Buffer=s,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),n.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return a(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return c(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return r>n?-1:n>r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)b(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),0>t||n>e.length||0>r||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,u=Math.min(o,a),c=this.slice(r,i),f=e.slice(t,n),l=0;u>l;++l)if(c[l]!==f[l]){o=c[l],a=f[l];break}return a>o?-1:o>a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return A(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=s.prototype;else{var i=t-e;r=new s(i,void 0);for(var o=0;i>o;++o)r[o]=this[o+e]}return r},s.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3];

},s.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),X.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),X.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),X.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),X.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;j(this,e,t,n,i,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;j(this,e,t,n,i,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||j(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&t>n&&r>t)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(i=0;o>i;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);256>i&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e=255&e);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(t>=n)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;n>o;++o)this[o]=e;else{var a=s.isBuffer(e)?e:K(new s(e,r).toString()),u=a.length;for(o=0;n-t>o;++o)this[o+t]=a[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":11,ieee754:52,isarray:57}],17:[function(e,t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],18:[function(e,t){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},{}],19:[function(e,t){function n(e){return e?r(e):void 0}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}"undefined"!=typeof t&&(t.exports=n),n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],20:[function(e,t){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],21:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function f(e){return"[object RegExp]"===m(e)}function l(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function d(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=f,n.isObject=l,n.isDate=h,n.isError=d,n.isFunction=p,n.isPrimitive=g,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":55}],22:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=o,n.formatArgs=i,n.save=s,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":23}],23:[function(e,t,n){function r(){return n.colors[f++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(c||t);e.diff=o,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var u=i.log||n.log||console.log.bind(console);u.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=u,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,f=0},{ms:59}],24:[function(e,t,n){(function(e){!function(e,r){"object"==typeof n&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.Dexie=r()}(this,function(){"use strict";function t(e,t){return"object"!=typeof t?e:(Ae(t).forEach(function(n){e[n]=t[n]}),e)}function n(e,t){return Ce.call(e,t)}function r(e,t){"function"==typeof t&&(t=t(Re(e))),Ae(t).forEach(function(n){i(e,n,t[n])})}function i(e,r,i,o){Object.defineProperty(e,r,t(i&&n(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function o(e){return{from:function(t){return e.prototype=Object.create(t.prototype),i(e.prototype,"constructor",e),{extend:r.bind(null,e.prototype)}}}}function s(e,t){var n,r=Oe(e,t);return r||(n=Re(e))&&s(n,t)}function a(e,t,n){return De.call(e,t,n)}function u(e,t){return t(e)}function c(e){var t=setTimeout(e,1e3);clearTimeout(t)}function f(e){if(!e)throw new Error("Assertion Failed")}function l(e){xe.setImmediate?setImmediate(e):setTimeout(e,0)}function h(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function d(e,t){return function(){try{e.apply(this,arguments)}catch(n){t(n)}}}function p(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function g(e,t){if(n(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],i=0,o=t.length;o>i;++i){var s=g(e,t[i]);r.push(s)}return r}var a=t.indexOf(".");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:g(u,t.substr(a+1))}return void 0}function m(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){f("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;i>r;++r)m(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var u=e[s];u||(u=e[s]={}),m(u,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function y(e,t){"string"==typeof t?m(e,t,void 0):"length"in t&&[].map.call(t,function(t){m(e,t,void 0)})}function v(e){var t={};for(var r in e)n(e,r)&&(t[r]=e[r]);return t}function b(e){if(!e||"object"!=typeof e)return e;var t;if(Te(e)){t=[];for(var r=0,i=e.length;i>r;++r)t.push(b(e[r]))}else if(e instanceof Date)t=new Date,t.setTime(e.getTime());else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var o in e)n(e,o)&&(t[o]=b(e[o]))}return t}function _(e,t,r,i){return r=r||{},i=i||"",Ae(e).forEach(function(o){if(n(t,o)){var s=e[o],a=t[o];"object"==typeof s&&"object"==typeof a&&s&&a&&s.constructor===a.constructor?_(s,a,r,i+o+"."):s!==a&&(r[i+o]=t[o])}else r[i+o]=void 0}),Ae(t).forEach(function(o){n(e,o)||(r[i+o]=t[o])}),r}function w(e){var t,n,r,i;if(1===arguments.length){if(Te(e))return e.slice();if(this===Pe&&"string"==typeof e)return[e];if(i=Ie(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"==typeof t){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function k(e){return Ne.apply([],e)}function E(){}function S(e){return e}function A(e,t){return null==e||e===S?t:function(n){return t(e(n))}}function T(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function x(e,t){return e===E?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?T(r,this.onsuccess):r),i&&(this.onerror=this.onerror?T(i,this.onerror):i),void 0!==o?o:n}}function R(e,t){return e===E?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?T(n,this.onsuccess):n),r&&(this.onerror=this.onerror?T(r,this.onerror):r)}}function C(e,n){return e===E?n:function(r){var i=e.apply(this,arguments);t(r,i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?T(o,this.onsuccess):o),s&&(this.onerror=this.onerror?T(s,this.onerror):s),void 0===i?void 0===a?void 0:a:t(i,a)}}function O(e,t){return e===E?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function D(e,t){return e===E?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function B(e,t){je=e,Me=t}function I(){if(Le)try{throw I.arguments,new Error}catch(e){return e}return new Error}function P(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Me).map(function(e){return"\n"+e}).join("")):""}function N(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+P(I(),1)),t.apply(this,arguments)}}function j(e,t){this._e=I(),this.name=e,this.message=t}function M(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function L(e,t,n,r){this._e=I(),this.failures=t,this.failedKeys=r,this.successCount=n}function U(e,t){this._e=I(),this.name="BulkError",this.failures=t,this.message=M(e,t)}function F(e,t){if(!e||e instanceof j||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ye[e.name])return e;var n=new Ye[e.name](t||e.message,e);return"stack"in e&&i(n,"stack",{get:function(){return this.inner.stack}}),n}function z(e){function t(e,t,o){if("object"==typeof e)return n(e);t||(t=O),o||(o=E);var s={subscribers:[],fire:o,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=t(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter(function(t){return t!==e}),s.fire=s.subscribers.reduce(t,o)}};return r[e]=i[e]=s,s}function n(e){Ae(e).forEach(function(n){var r=e[n];if(Te(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new Ke.InvalidArgument("Invalid event config");var i=t(n,S,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];i.subscribers.forEach(function(e){l(function(){e.apply(null,t)})})})}})}var r={},i=function(t,n){if(n){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[t].subscribe.apply(null,o),e}return"string"==typeof t?r[t]:void 0};i.addEventType=t;for(var o=1,s=arguments.length;s>o;++o)t(arguments[o]);return i}function q(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=E,this._lib=!1;var t=this._PSD=at;if(je&&(this._stackHolder=I(),this._prev=null,this._numPrev=0,$(this,it)),"function"!=typeof e){if(e!==Je)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&K(this,this._value))}this._state=null,this._value=null,++t.ref,W(this,e)}function H(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=at}function W(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&X();t&&"function"==typeof t.then?W(e,function(e,n){t instanceof q?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Y(e)),n&&Q()}},K.bind(null,e))}catch(n){K(e,n)}}function K(e,t){if(rt.push(t),null===e._state){var n=e._lib&&X();t=ot(t),e._state=!1,e._value=t,je&&null!==t&&"object"==typeof t&&!t._promise&&p(function(){var n=s(t,"stack");t._promise=e,i(t,"stack",{get:function(){return Ze?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),ne(e),Y(e),n&&Q()}}function Y(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;r>n;++n)G(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===ct&&(++ct,Qe(function(){0===--ct&&ee()},[]))}function G(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);var r=t.psd;++r.ref,++ct,Qe(J,[n,e,t])}function J(e,t,n){var r=at,i=n.psd;try{i!==r&&(at=i),it=t;var o,s=t._value;t._state?o=e(s):(rt.length&&(rt=[]),o=e(s),-1===rt.indexOf(s)&&re(t)),n.resolve(o)}catch(a){n.reject(a)}finally{i!==r&&(at=r),it=null,0===--ct&&ee(),--i.ref||i.finalize()}}function V(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=P(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return je&&(r=P(e._stackHolder,2),r&&-1===t.indexOf(r)&&t.push(r),e._prev&&V(e._prev,t,n)),t}function $(e,t){var n=t?t._numPrev+1:0;Ve>n&&(e._prev=t,e._numPrev=n)}function Z(){X()&&Q()}function X(){var e=et;return et=!1,tt=!1,e}function Q(){var e,t,n;do for(;ut.length>0;)for(e=ut,ut=[],n=e.length,t=0;n>t;++t){var r=e[t];r[0].apply(null,r[1])}while(ut.length>0);et=!0,tt=!0}function ee(){var e=nt;nt=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=ft.slice(0),n=t.length;n;)t[--n]()}function te(e){function t(){e(),ft.splice(ft.indexOf(t),1)}ft.push(t),++ct,Qe(function(){0===--ct&&ee()},[])}function ne(e){nt.some(function(t){return t._value===e._value})||nt.push(e)}function re(e){for(var t=nt.length;t;)if(nt[--t]._value===e._value)return void nt.splice(t,1)}function ie(e){console.warn("Unhandled rejection: "+(e.stack||e))}function oe(e){return new q(Je,!1,e)}function se(e,t){var n=at;return function(){var r=X(),i=at;try{return i!==n&&(at=n),e.apply(this,arguments)}catch(o){t&&t(o)}finally{i!==n&&(at=i),r&&Q()}}}function ae(e,t,n,r){var i=at,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ue(o,e,t,n,r);return 0===o.ref&&o.finalize(),s}function ue(e,t,n,r,i){var o=at;try{return e!==o&&(at=e),t(n,r,i)}finally{e!==o&&(at=o)}}function ce(e,n){var r;try{r=n.onuncatched(e)}catch(i){}if(r!==!1)try{var o,s={promise:n,reason:e};if(xe.document&&document.createEvent?(o=document.createEvent("Event"),o.initEvent(ht,!0,!0),t(o,s)):xe.CustomEvent&&(o=new CustomEvent(ht,{detail:s}),t(o,s)),o&&xe.dispatchEvent&&(dispatchEvent(o),!xe.PromiseRejectionEvent&&xe.onunhandledrejection))try{xe.onunhandledrejection(o)}catch(a){}o.defaultPrevented||q.on.error.fire(e,n)}catch(i){}}function fe(e,t){var n=q.reject(e);return t?n.uncaught(t):n}function le(e,s){function l(){rt.on("versionchange",function(e){console.warn(e.newVersion>0?"Another connection wants to upgrade database '"+rt.name+"'. Closing db now to resume the upgrade.":"Another connection wants to delete database '"+rt.name+"'. Closing db now to resume the delete request."),rt.close()}),rt.on("blocked",function(e){console.warn(!e.newVersion||e.newVersion<e.oldVersion?"Dexie.delete('"+rt.name+"') was blocked":"Upgrade '"+rt.name+"' blocked by other connection holding version "+e.oldVersion/10)})}function y(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function T(e,t,n){var r=rt._createTransaction(nt,Ve,Ge);r.create(t),r._completion["catch"](n);var i=r._reject.bind(r);ae(function(){at.trans=r,0===e?(Ae(Ge).forEach(function(e){P(t,e,Ge[e].primKey,Ge[e].indexes)}),q.follow(function(){return rt.on.populate.fire(r)})["catch"](i)):O(e,r,t)["catch"](i)})}function O(e,t,n){function r(){return i.length?q.resolve(i.shift()(t.idbtrans)).then(r):q.resolve()}var i=[],o=Je.filter(function(t){return t._cfg.version===e})[0];if(!o)throw new Ke.Upgrade("Dexie specification of currently installed DB version is missing");Ge=rt._dbSchema=o._cfg.dbschema;var s=!1,a=Je.filter(function(t){return t._cfg.version>e});return a.forEach(function(e){i.push(function(){var r=Ge,i=e._cfg.dbschema;Ie(r,n),Ie(i,n),Ge=rt._dbSchema=i;var o=B(r,i);return o.add.forEach(function(e){P(n,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new Ke.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){F(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),F(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade?(s=!0,q.follow(function(){e._cfg.contentUpgrade(t)})):void 0}),i.push(function(t){if(!s||!_t){var n=e._cfg.dbschema;M(n,t)}})}),r().then(function(){j(Ge,n)})}function B(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,n.change.push(s);else{var a=i.idxByName,u=o.idxByName;for(var c in a)u[c]||s.del.push(c);for(c in u){var f=a[c],l=u[c];f?f.src!==l.src&&s.change.push(l):s.add.push(l)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function P(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){F(i,e)}),i}function j(e,t){Ae(e).forEach(function(n){t.db.objectStoreNames.contains(n)||P(t,n,e[n].primKey,e[n].indexes)})}function M(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function F(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function H(e){return rt.on.error.fire(e)}function W(e,t,n){if(et||at.letThrough){var r=rt._createTransaction(e,t,Ge);return r._promise(e,function(e,t){ae(function(){at.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!Qe){if(!He)return fe(new Ke.DatabaseClosed,H);rt.open()["catch"](E)}return it.then(function(){return W(e,t,n)})}function K(e,t,n){this.name=e,this.schema=t,this.hook=$e[e]?$e[e].hook:z(null,{creating:[x,E],reading:[A,S],updating:[C,E],deleting:[R,E]}),this._collClass=n||Z}function Y(e,t,n){K.call(this,e,t,n||Q)}function G(e,t,n){return(n?ye:me)(function(n){e.push(n),t&&t()})}function J(e,t,n,r,i){return new q(function(o,s){var a=n.length,u=a-1;if(0===a)return o();if(r){var c,f=ye(s),l=ge(null);p(function(){for(var r=0;a>r;++r){c={onsuccess:null,onerror:null};var s=n[r];i.call(c,s[0],s[1],t);var h=e["delete"](s[0]);h._hookCtx=c,h.onerror=f,h.onsuccess=r===u?ge(o):l}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var h=0;a>h;++h){var d=e["delete"](n[h]);d.onerror=se(me(s)),h===u&&(d.onsuccess=se(function(){return o()}))}}).uncaught(H)}function V(e,t,n,r){var i=this;this.db=rt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=z(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=n,this._resolve=null,this._reject=null,this._completion=new q(function(e,t){i._resolve=e,i._reject=t}).uncaught(H),this._completion.then(function(){i.on.complete.fire()},function(e){return i.on.error.fire(e),i.parent?i.parent._reject(e):i.active&&i.idbtrans&&i.idbtrans.abort(),i.active=!1,fe(e)})}function $(e,t,n){this._ctx={table:e,index:":id"===t?null:t,collClass:e._collClass,or:n}}function Z(e,t){var n=null,r=null;if(t)try{n=t()}catch(i){r=i}var o=e._ctx,s=o.table;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:s.hook.reading.fire}}function X(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Q(){Z.apply(this,arguments)}function ee(e,t){return e._cfg.version-t._cfg.version}function te(e,t,n,r){t.forEach(function(t){var i=rt._tableFactory(n,r[t]);e.forEach(function(e){t in e||(e[t]=i)})})}function ne(e){e.forEach(function(e){for(var t in e)e[t]instanceof K&&delete e[t]})}function re(e,t,n,r,i,o){var s=o?function(e,t,r){return n(o(e),t,r)}:n,a=se(s,i);e.onerror||(e.onerror=me(i)),e.onsuccess=t?d(function(){var n=e.result;if(n){var o=function(){n["continue"]()};t(n,function(e){o=e},r,i)&&a(n.value,n,function(e){o=e}),o()}else r()},i):d(function(){var t=e.result;if(t){var n=function(){t["continue"]()};a(t.value,t,function(e){n=e}),n()}else r()},i)}function ie(e){var t=[];return e.split(",").forEach(function(e){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new we(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Te(r),/\./.test(e)))}),t}function oe(e,t){return We.cmp(e,t)}function ce(e,t){return oe(e,t)<0?e:t}function he(e,t){return oe(e,t)>0?e:t}function xe(e,t){return We.cmp(e,t)}function Re(e,t){return We.cmp(t,e)}function Ce(e,t){return t>e?-1:e===t?0:1}function Oe(e,t){return e>t?-1:e===t?0:1}function De(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Be(){if(rt.verno=Ze.version/10,rt._dbSchema=Ge={},Ve=a(Ze.objectStoreNames,0),0!==Ve.length){var e=Ze.transaction(Ee(Ve),"readonly");Ve.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new we(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),s=[],a=0;a<n.indexNames.length;++a){var u=n.index(n.indexNames[a]);r=u.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new we(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);s.push(c)}Ge[t]=new ke(t,o,s,{})}),te([$e,V.prototype],Ae(Ge),nt,Ge)}}function Ie(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],o=t.objectStore(i);Ue="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var u=o.indexNames[s],c=o.index(u).keyPath,f="string"==typeof c?c:"["+a(c).join("+")+"]";if(e[i]){var l=e[i].idxByName[f];l&&(l.name=u)}}}}function Ne(e){rt.on("blocked").fire(e),vt.filter(function(e){return e.name===rt.name&&e!==rt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var Me,Le,Ue,Fe=le.dependencies,ze=t({addons:le.addons,autoOpen:!0,indexedDB:Fe.indexedDB,IDBKeyRange:Fe.IDBKeyRange},s),qe=ze.addons,He=ze.autoOpen,We=ze.indexedDB,Ye=ze.IDBKeyRange,Ge=this._dbSchema={},Je=[],Ve=[],$e={},Ze=null,Xe=null,Qe=!1,et=!1,tt="readonly",nt="readwrite",rt=this,it=new q(function(e){Me=e}),ot=new q(function(e,t){Le=t}),st=!0,ut=!!Se(We);this.version=function(e){if(Ze||Qe)throw new Ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=Je.filter(function(t){return t._cfg.version===e})[0];return t?t:(t=new y(e),Je.push(t),Je.sort(ee),t)},t(y.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?t(this._cfg.storesSource,e):e;var n={};Je.forEach(function(e){t(n,e._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),Ge=rt._dbSchema=r,ne([$e,rt,V.prototype]),te([$e,rt,V.prototype,this._cfg.tables],Ae(r),nt,r),Ve=Ae(r),this},upgrade:function(e){var t=this;return Et(function(){e(rt._createTransaction(nt,Ae(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){Ae(e).forEach(function(n){if(null!==e[n]){var r={},i=ie(e[n]),o=i.shift();if(o.multi)throw new Ke.Schema("Primary key cannot be multi-valued");o.keyPath&&m(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(e){if(e.auto)throw new Ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Ke.Schema("Index must have a name and cannot be an empty string");m(r,e.keyPath,e.compound?e.keyPath.map(function(){return"";

}):"")}),t[n]=new ke(n,o,i,r)}})}}),this._allTables=$e,this._tableFactory=function(e,t){return e===tt?new K(t.name,t,Z):new Y(t.name,t)},this._createTransaction=function(e,t,n,r){return new V(e,t,n,r)},this._whenReady=function(e){return new q(St||et||at.letThrough?e:function(t,n){if(!Qe){if(!He)return void n(new Ke.DatabaseClosed);rt.open()["catch"](E)}it.then(function(){e(t,n)})}).uncaught(H)},this.verno=0,this.open=function(){if(Qe||Ze)return it.then(function(){return Xe?fe(Xe,H):rt});je&&(ot._stackHolder=I()),Qe=!0,Xe=null,et=!1;var t=Me,n=null;return q.race([ot,new q(function(t,r){if(c(function(){return t()}),Je.length>0&&(st=!1),!We)throw new Ke.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=st?We.open(e):We.open(e,Math.round(10*rt.verno));if(!i)throw new Ke.MissingAPI("IndexedDB API not available");i.onerror=se(me(r)),i.onblocked=se(Ne),i.onupgradeneeded=se(function(t){if(n=i.transaction,st&&!rt._allowEmptyDB){i.onerror=ve,n.abort(),i.result.close();var o=We.deleteDatabase(e);o.onsuccess=o.onerror=se(function(){r(new Ke.NoSuchDatabase("Database "+e+" doesnt exist"))})}else{n.onerror=se(me(r));var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;T(s/10,n,r,i)}},r),i.onsuccess=se(function(){if(n=null,Ze=i.result,vt.push(rt),st)Be();else if(Ze.objectStoreNames.length>0)try{Ie(Ge,Ze.transaction(Ee(Ze.objectStoreNames),tt))}catch(r){}Ze.onversionchange=se(function(e){rt._vcFired=!0,rt.on("versionchange").fire(e)}),ut||be(function(t){return-1===t.indexOf(e)?t.push(e):void 0}),t()},r)})]).then(function(){return le.vip(rt.on.ready.fire)}).then(function(){return Qe=!1,rt})["catch"](function(e){try{n&&n.abort()}catch(t){}return Qe=!1,rt.close(),Xe=e,fe(Xe,H)})["finally"](function(){et=!0,t()})},this.close=function(){var e=vt.indexOf(rt);if(e>=0&&vt.splice(e,1),Ze){try{Ze.close()}catch(t){}Ze=null}He=!1,Xe=new Ke.DatabaseClosed,Qe&&Le(Xe),it=new q(function(e){Me=e}),ot=new q(function(e,t){Le=t})},this["delete"]=function(){var t=arguments.length>0;return new q(function(n,r){function i(){rt.close();var t=We.deleteDatabase(e);t.onsuccess=se(function(){ut||be(function(t){var n=t.indexOf(e);return n>=0?t.splice(n,1):void 0}),n()}),t.onerror=se(me(r)),t.onblocked=Ne}if(t)throw new Ke.InvalidArgument("Arguments not allowed in db.delete()");Qe?it.then(i):i()}).uncaught(H)},this.backendDB=function(){return Ze},this.isOpen=function(){return null!==Ze},this.hasFailed=function(){return null!==Xe},this.dynamicallyOpened=function(){return st},this.name=e,i(this,"tables",{get:function(){return Ae($e).map(function(e){return $e[e]})}}),this.on=z(this,"error","populate","blocked","versionchange",{ready:[D,E]}),this.on.error.subscribe=N("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=N("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=u(this.on.ready.subscribe,function(e){return function(t,n){le.vip(function(){et?(Xe||q.resolve().then(t),n&&e(t)):(e(t),n||e(function r(){rt.on.ready.unsubscribe(t),rt.on.ready.unsubscribe(r)}))})}}),Et(function(){rt.on("populate").fire(rt._createTransaction(nt,Ve,Ge)),rt.on("error").fire(new Error)}),this.transaction=function(e,t,r){function i(t){var i=at;t(q.resolve().then(function(){return ae(function(){at.transless=at.transless||i;var t=rt._createTransaction(e,f,Ge,u);at.trans=t,u?t.idbtrans=u.idbtrans:t.create();var o=f.map(function(e){return $e[e]});o.push(t);var s;return q.follow(function(){if(s=r.apply(t,o))if("function"==typeof s.next&&"function"==typeof s["throw"])s=_e(s);else if("function"==typeof s.then&&!n(s,"_PSD"))throw new Ke.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+r.toString())}).uncaught(H).then(function(){return u&&t._resolve(),t._completion}).then(function(){return s})["catch"](function(e){return t._reject(e),fe(e)})})}))}var o=arguments.length;if(2>o)throw new Ke.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];r=s.pop();var a=k(s),u=at.trans;u&&u.db===rt&&-1===e.indexOf("!")||(u=null);var c=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var f=a.map(function(e){var t=e instanceof K?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||e==tt)e=tt;else{if("rw"!=e&&e!=nt)throw new Ke.InvalidArgument("Invalid transaction mode: "+e);e=nt}if(u){if(u.mode===tt&&e===nt){if(!c)throw new Ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&f.forEach(function(e){if(u&&-1===u.storeNames.indexOf(e)){if(!c)throw new Ke.SubTransaction("Table "+e+" not included in parent transaction.");u=null}})}}catch(l){return u?u._promise(null,function(e,t){t(l)}):fe(l,H)}return u?u._promise(e,i,"lock"):rt._whenReady(i)},this.table=function(e){if(St&&st)return new Y(e);if(!n($e,e))throw new Ke.InvalidTable("Table "+e+" does not exist");return $e[e]},r(K.prototype,{_trans:function(e,t,n){var r=at.trans;return r&&r.db===rt?r._promise(e,t,n):W(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){t(e,n,r.idbtrans.objectStore(o),r)}if(St)return new q(t);var i=at.trans,o=this.name;return i&&i.db===rt?i._promise(e,r,n):W(e,[this.name],r)},get:function(e,t){var n=this;return this._idbstore(tt,function(t,r,i){St&&t(n.schema.instanceTemplate);var o=i.get(e);o.onerror=me(r),o.onsuccess=se(function(){t(n.hook.reading.fire(o.result))},r)}).then(t)},where:function(e){return new $(this,e)},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new this._collClass(new $(this,e))},toCollection:function(){return new this._collClass(new $(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var r=Object.create(e.prototype);t&&de(r,t),this.schema.instanceTemplate=r;var i=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var i in t)if(n(t,i))try{r[i]=t[i]}catch(o){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e},defineClass:function(e){return this.mapToClass(le.defineClass(e),e)}}),o(Y).from(K).extend({bulkDelete:function(e){return this.hook.deleting.fire===E?this._idbstore(nt,function(t,n,r,i){t(J(r,i,e,!1,E))}):this.where(":id").anyOf(e)["delete"]().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(nt,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new Ke.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new Ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ke.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var s,a,u=function(e){0===c.length?r(e):i(new U(n.name+".bulkPut(): "+c.length+" of "+f+" operations failed",c))},c=[],f=e.length,l=n;if(n.hook.creating.fire===E&&n.hook.updating.fire===E){a=G(c);for(var d=0,p=e.length;p>d;++d)s=t?o.put(e[d],t[d]):o.put(e[d]),s.onerror=a;s.onerror=G(c,u),s.onsuccess=pe(u)}else{var m=t||o.keyPath&&e.map(function(e){return g(e,o.keyPath)}),y=m&&h(m,function(t,n){return null!=t&&[t,e[n]]}),v=m?l.where(":id").anyOf(m.filter(function(e){return null!=e})).modify(function(){this.value=y[this.primKey],y[this.primKey]=null})["catch"](L,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],i=m.length-1;i>=0;--i){var o=m[i];(null==o||y[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(y[o]=null))}return n.reverse(),t&&r.reverse(),l.bulkAdd(n,r)}).then(function(e){var t=m[m.length-1];return null!=t?t:e}):l.bulkAdd(e);v.then(u)["catch"](U,function(e){c=c.concat(e.failures),u()})["catch"](i)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(nt,function(i,o,s,a){function u(e){0===h.length?i(e):o(new U(n.name+".bulkAdd(): "+h.length+" of "+d+" operations failed",h))}if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new Ke.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new Ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ke.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();var c,f,l,h=[],d=e.length;if(r!==E){var y,v=s.keyPath;f=G(h,null,!0),l=ge(null),p(function(){for(var n=0,i=e.length;i>n;++n){y={onerror:null,onsuccess:null};var o=t&&t[n],u=e[n],h=t?o:v?g(u,v):void 0,d=r.call(y,h,u,a);null==h&&null!=d&&(v?(u=b(u),m(u,v,d)):o=d),c=null!=o?s.add(u,o):s.add(u),c._hookCtx=y,i-1>n&&(c.onerror=f,y.onsuccess&&(c.onsuccess=l))}},function(e){throw y.onerror&&y.onerror(e),e}),c.onerror=G(h,u,!0),c.onsuccess=ge(u)}else{f=G(h);for(var _=0,w=e.length;w>_;++_)c=t?s.add(e[_],t[_]):s.add(e[_]),c.onerror=f;c.onerror=G(h,u),c.onsuccess=pe(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(nt,function(r,i,o,s){var a={onsuccess:null,onerror:null};if(n!==E){var u=null!=t?t:o.keyPath?g(e,o.keyPath):void 0,c=n.call(a,u,e,s);null==u&&null!=c&&(o.keyPath?m(e,o.keyPath,c):t=c)}try{var f=null!=t?o.add(e,t):o.add(e);f._hookCtx=a,f.onerror=ye(i),f.onsuccess=ge(function(t){var n=o.keyPath;n&&m(e,n,t),r(t)})}catch(l){throw a.onerror&&a.onerror(l),l}})},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;return r!==E||i!==E?this._trans(nt,function(r,i,o){var s=void 0!==t?t:n.schema.primKey.keyPath&&g(e,n.schema.primKey.keyPath);null==s?n.add(e).then(r,i):(o._lock(),e=b(e),n.where(":id").equals(s).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):s})["finally"](function(){o._unlock()}).then(r,i))}):this._idbstore(nt,function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=me(r),o.onsuccess=function(t){var r=i.keyPath;r&&m(e,r,t.target.result),n(o.result)}})},"delete":function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e)["delete"]():this._idbstore(nt,function(t,n,r){var i=r["delete"](e);i.onerror=me(n),i.onsuccess=function(){t(i.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(nt,function(e,t,n){var r=n.clear();r.onerror=me(t),r.onsuccess=function(){e(r.result)}})},update:function(e,t){if("object"!=typeof t||Te(t))throw new Ke.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Te(e))return this.where(":id").equals(e).modify(t);Ae(t).forEach(function(n){m(e,n,t[n])});var n=g(e,this.schema.primKey.keyPath);return void 0===n?fe(new Ke.InvalidArgument("Given object does not contain its primary key"),H):this.where(":id").equals(n).modify(t)}}),r(V.prototype,{_lock:function(){return f(!at.global),++this._reculock,1!==this._reculock||at.global||(at.lockOwnerFor=this),this},_unlock:function(){if(f(!at.global),0===--this._reculock)for(at.global||(at.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ue(e[1],e[0])}catch(t){}}return this},_locked:function(){return this._reculock&&at.lockOwnerFor!==this},create:function(e){var t=this;if(f(!this.idbtrans),!e&&!Ze)switch(Xe&&Xe.name){case"DatabaseClosedError":throw new Ke.DatabaseClosed(Xe);case"MissingAPIError":throw new Ke.MissingAPI(Xe.message,Xe);default:throw new Ke.OpenFailed(Xe)}if(!this.active)throw new Ke.TransactionInactive;return f(null===this._completion._state),e=this.idbtrans=e||Ze.transaction(Ee(this.storeNames),this.mode),e.onerror=se(function(n){ve(n),t._reject(e.error)}),e.onabort=se(function(e){ve(e),t.active&&t._reject(new Ke.Abort),t.active=!1,t.on("abort").fire(e)}),e.oncomplete=se(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this,i=r._locked()?new q(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},at])}):ae(function(){var i=r.active?new q(function(i,o){if(e===nt&&r.mode!==nt)throw new Ke.ReadOnly("Transaction is readonly");!r.idbtrans&&e&&r.create(),n&&r._lock(),t(i,o,r)}):fe(new Ke.TransactionInactive);return r.active&&n&&i["finally"](function(){r._unlock()}),i});return i._lib=!0,i.uncaught(H)},abort:function(){this.active&&this._reject(new Ke.Abort),this.active=!1},tables:{get:N("Transaction.tables",function(){return h(this.storeNames,function(e){return[e,$e[e]]})},"Use db.tables()")},complete:N("Transaction.complete()",function(e){return this.on("complete",e)}),error:N("Transaction.error()",function(e){return this.on("error",e)}),table:N("Transaction.table()",function(e){if(-1===this.storeNames.indexOf(e))throw new Ke.InvalidTable("Table "+e+" not in transaction");return $e[e]})}),r($.prototype,function(){function e(e,t,n){var r=e instanceof $?new e._ctx.collClass(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new e._ctx.collClass(e,function(){return Ye.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function i(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,u=0;s>u;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[u],c)<0&&(a=u)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):0>a?null:e.substr(0,a)+r[a]+n.substr(a+1)}function o(t,o,s,a){function u(e){c=n(e),f=r(e),l="next"===e?Ce:Oe;var t=s.map(function(e){return{lower:f(e),upper:c(e)}}).sort(function(e,t){return l(e.lower,t.lower)});h=t.map(function(e){return e.upper}),d=t.map(function(e){return e.lower}),p=e,g="next"===e?"":a}var c,f,l,h,d,p,g,m=s.length;if(!s.every(function(e){return"string"==typeof e}))return e(t,yt);u("next");var y=new t._ctx.collClass(t,function(){return Ye.bound(h[0],d[m-1]+a)});y._ondirectionchange=function(e){u(e)};var v=0;return y._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var s=f(r);if(o(s,d,v))return!0;for(var a=null,u=v;m>u;++u){var c=i(r,s,h[u],d[u],l,p);null===c&&null===a?v=u+1:(null===a||l(a,c)>0)&&(a=c)}return t(null!==a?function(){e["continue"](a+g)}:n),!1}),y}return{between:function(n,r,i,o){i=i!==!1,o=o===!0;try{return oe(n,r)>0||0===oe(n,r)&&(i||o)&&(!i||!o)?t(this):new this._ctx.collClass(this,function(){return Ye.bound(n,r,!i,!o)})}catch(s){return e(this,mt)}},equals:function(e){return new this._ctx.collClass(this,function(){return Ye.only(e)})},above:function(e){return new this._ctx.collClass(this,function(){return Ye.lowerBound(e,!0)})},aboveOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ye.lowerBound(e)})},below:function(e){return new this._ctx.collClass(this,function(){return Ye.upperBound(e,!0)})},belowOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ye.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,yt):this.between(t,t+pt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):o(this,function(e,t){return 0===e.indexOf(t[0])},[e],pt)},equalsIgnoreCase:function(e){return o(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=w.apply(Pe,arguments);return 0===e.length?t(this):o(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=w.apply(Pe,arguments);return 0===e.length?t(this):o(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,pt)},anyOf:function(){var n=w.apply(Pe,arguments),r=xe;try{n.sort(r)}catch(i){return e(this,mt)}if(0===n.length)return t(this);var o=new this._ctx.collClass(this,function(){return Ye.bound(n[0],n[n.length-1])});o._ondirectionchange=function(e){r="next"===e?xe:Re,n.sort(r)};var s=0;return o._addAlgorithm(function(e,t,i){for(var o=e.key;r(o,n[s])>0;)if(++s,s===n.length)return t(i),!1;return 0===r(o,n[s])?!0:(t(function(){e["continue"](n[s])}),!1)}),o},notEqual:function(e){return this.inAnyRange([[-(1/0),e],[e,gt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=w.apply(Pe,arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(xe)}catch(n){return e(this,mt)}var r=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]},null);return r.push([t[t.length-1],gt]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function i(e,t){for(var n=0,r=e.length;r>n;++n){var i=e[n];if(oe(t[0],i[1])<0&&oe(t[1],i[0])>0){i[0]=ce(i[0],t[0]),i[1]=he(i[1],t[1]);break}}return n===r&&e.push(t),e}function o(e,t){return l(e[0],t[0])}function s(e){return!p(e)&&!g(e)}var a=this._ctx;if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&xe(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ke.InvalidArgument);var u,c=!r||r.includeLowers!==!1,f=r&&r.includeUppers===!0,l=xe;try{u=n.reduce(i,[]),u.sort(o)}catch(h){return e(this,mt)}var d=0,p=f?function(e){return xe(e,u[d][1])>0}:function(e){return xe(e,u[d][1])>=0},g=c?function(e){return Re(e,u[d][0])>0}:function(e){return Re(e,u[d][0])>=0},m=p,y=new a.collClass(this,function(){return Ye.bound(u[0][0],u[u.length-1][1],!c,!f)});return y._ondirectionchange=function(e){"next"===e?(m=p,l=xe):(m=g,l=Re),u.sort(o)},y._addAlgorithm(function(e,t,n){for(var r=e.key;m(r);)if(++d,d===u.length)return t(n),!1;return s(r)?!0:0===oe(r,u[d][1])||0===oe(r,u[d][0])?!1:(t(function(){e["continue"](l===xe?u[d][0]:u[d][1])}),!1)}),y},startsWithAnyOf:function(){var n=w.apply(Pe,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+pt]})):e(this,"startsWithAnyOf() only works with strings")}}}),r(Z.prototype,function(){function e(e,t){e.filter=De(e.filter,t)}function r(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return De(r(),t())}:t,e.justLimit=n&&!r}function i(e,t){e.isMatch=De(e.isMatch,t)}function o(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Ke.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function s(e,t){var n=o(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function a(e,t,r,i,o){var a=e.replayFilter?De(e.filter,e.replayFilter()):e.filter;e.or?function(){function u(){2===++l&&r()}function c(e,r,o){if(!a||a(r,o,u,i)){var s=r.primaryKey.toString();n(f,s)||(f[s]=!0,t(e,r,o))}}var f={},l=0;e.or._iterate(c,u,i,o),re(s(e,o),e.algorithm,c,u,i,!e.keysOnly&&e.valueMapper)}():re(s(e,o),De(e.algorithm,a),t,r,i,!e.keysOnly&&e.valueMapper)}function u(e){return e.table.schema.instanceTemplate}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,function(e,t){t(n.error)}):n.table._idbstore(tt,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,function(e,n){n(t.error)}):t.table._idbstore(nt,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=De(t.algorithm,e)},_iterate:function(e,t,n,r){return a(this._ctx,e,t,n,r)},clone:function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&t(r,e),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;if(St){var n=u(t),r=t.table.schema.primKey.keyPath,i=g(n,t.index?t.table.schema.idxByName[t.index].keyPath:r),o=g(n,r);e(n,{key:i,primaryKey:o})}return this._read(function(n,r,i){a(t,e,n,r,i)})},count:function(e){if(St)return q.resolve(0).then(e);var t=this._ctx;if(X(t,!0))return this._read(function(e,n,r){var i=o(t,r),s=t.range?i.count(t.range):i.count();s.onerror=me(n),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,i){a(t,function(){return++n,!1},function(){e(n)},r,i)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[i[t]],t-1):e[o]}function r(e,t){var r=n(e,s),i=n(t,s);return i>r?-a:r>i?a:0}var i=e.split(".").reverse(),o=i[0],s=i.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(St&&e([u(t)]),Ue&&"next"===t.dir&&X(t,!0)&&t.limit>0){var i=t.table.hook.reading.fire,s=o(t,r),c=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);c.onerror=me(n),c.onsuccess=i===S?pe(e):se(pe(function(t){try{e(t.map(i))}catch(r){n(r)}}))}else{var f=[];a(t,function(e){f.push(e)},function(){e(f)},n,r)}},e)},offset:function(e){var t=this._ctx;return 0>=e?this:(t.offset+=e,X(t)?r(t,function(){var t=e;return function(e,n){return 0===t?!0:1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1)}}):r(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),r(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(t,n){var r=this._ctx;return St&&t(u(r)),e(this._ctx,function(e,r,i){return t(e.value)?(r(i),n):!0}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return St&&t(u(this._ctx)),e(this._ctx,function(e){return t(e.value)}),i(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new $(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(Ue&&"next"===t.dir&&X(t,!0)&&t.limit>0)return this._read(function(e,n,r){var i=o(t,r),s=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);s.onerror=me(n),s.onsuccess=pe(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var i={};return e(this._ctx,function(e){var t=e.primaryKey.toString(),r=n(i,t);return i[t]=!0,!r}),this}}}),o(Q).from(Z).extend({modify:function(e){var r=this,i=this._ctx,o=i.table.hook,s=o.updating.fire,a=o.deleting.fire;return St&&"function"==typeof e&&e.call({value:i.table.schema.instanceTemplate},i.table.schema.instanceTemplate),this._write(function(i,o,u,c){function f(e,t){function r(e){return x.push(e),R.push(i.primKey),h(),!0}C=t.primaryKey;var i={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};if(d.call(i,e,i)!==!1){var o=!n(i,"value");++S,p(function(){var e=o?t["delete"]():t.update(i.value);e._hookCtx=i,e.onerror=ye(r),e.onsuccess=ge(function(){++A,h()})},r)}else i.onsuccess&&i.onsuccess(i.value)}function l(e){return e&&(x.push(e),R.push(C)),o(new L("Error modifying one or more objects",x,A,R))}function h(){T&&A+x.length===S&&(x.length>0?l():i(A))}var d;if("function"==typeof e)d=s===E&&a===E?e:function(t){var r=b(t);if(e.call(this,t,this)===!1)return!1;if(n(this,"value")){var i=_(r,this.value),o=s.call(this,i,this.primKey,r,c);o&&(t=this.value,Ae(o).forEach(function(e){m(t,e,o[e])}))}else a.call(this,this.primKey,t,c)};else if(s===E){var y=Ae(e),w=y.length;d=function(t){for(var n=!1,r=0;w>r;++r){var i=y[r],o=e[i];g(t,i)!==o&&(m(t,i,o),n=!0)}return n}}else{var k=e;e=v(k),d=function(n){var r=!1,i=s.call(this,e,this.primKey,b(n),c);return i&&t(e,i),Ae(e).forEach(function(t){var i=e[t];g(n,t)!==i&&(m(n,t,i),r=!0)}),i&&(e=v(k)),r}}var S=0,A=0,T=!1,x=[],R=[],C=null;r.clone().raw()._iterate(f,function(){T=!0,h()},l,u)})},"delete":function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==E;if(!i&&X(t)&&(t.isPrimKey&&!wt||!n))return this._write(function(e,t,r){var i=me(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var s=o.result;p(function(){var t=n?r["delete"](n):r.clear();t.onerror=i,t.onsuccess=function(){return e(s)}},function(e){return t(e)})}});var o=i?2e3:1e4;return this._write(function(n,s,a,u){var c=0,f=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),l=[],h=function(){return f.each(i?function(e,t){l.push([t.primaryKey,t.value])}:function(e,t){l.push(t.primaryKey)}).then(function(){return l.sort(i?function(e,t){return xe(e[0],t[0])}:xe),J(a,u,l,i,r)}).then(function(){var e=l.length;return c+=e,l=[],o>e?c:h()})};n(h())})}}),t(this,{Collection:Z,Table:K,Transaction:V,Version:y,WhereClause:$,WriteableCollection:Q,WriteableTable:Y}),l(),qe.forEach(function(e){e(rt)})}function he(e){if("function"==typeof e)return new e;if(Te(e))return[he(e[0])];if(e&&"object"==typeof e){var t={};return de(t,e),t}return e}function de(e,t){return Ae(t).forEach(function(n){var r=he(t[n]);e[n]=r}),e}function pe(e){return function(t){e(t.target.result)}}function ge(e){return se(function(t){var n=t.target,r=n.result,i=n._hookCtx,o=i&&i.onsuccess;o&&o(r),e&&e(r)},e)}function me(e){return function(t){return ve(t),e(t.target.error),!1}}function ye(e){return se(function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),ve(t),e(r),!1})}function ve(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function be(e){var t,n=le.dependencies.localStorage;if(!n)return e([]);try{t=JSON.parse(n.getItem("Dexie.DatabaseNames")||"[]")}catch(r){t=[]}e(t)&&n.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function _e(e){function t(e){return function(t){var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(i,o):Te(r)?q.all(r).then(i,o):i(r)}}var n=function(t){return e.next(t)},r=function(t){return e["throw"](t)},i=t(n),o=t(r);return t(n)()}function we(e,t,n,r,i,o,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+a}function ke(e,t,n,r){this.name=e,this.primKey=t||new we,this.indexes=n||[new we],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=h(n,function(e){return[e.name,e]})}function Ee(e){return 1===e.length?e[0]:e}function Se(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var Ae=Object.keys,Te=Array.isArray,xe="undefined"!=typeof self?self:"undefined"!=typeof window?window:e,Re=Object.getPrototypeOf,Ce={}.hasOwnProperty,Oe=Object.getOwnPropertyDescriptor,De=[].slice,Be="undefined"!=typeof Symbol&&Symbol.iterator,Ie=Be?function(e){var t;return null!=e&&(t=e[Be])&&t.apply(e)}:function(){return null},Pe={},Ne=[].concat,je="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Me=function(){return!0},Le=!new Error("").stack,Ue=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"],Fe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ze=Ue.concat(Fe),qe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};o(j).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+P(this._e,2))}},toString:function(){return this.name+": "+this.message}}),o(L).from(j),o(U).from(j);var He=ze.reduce(function(e,t){return e[t]=t+"Error",e},{}),We=j,Ke=ze.reduce(function(e,t){function n(e,n){this._e=I(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=qe[t]||r,this.inner=null)}var r=t+"Error";return o(n).from(We),e[t]=n,e},{});Ke.Syntax=SyntaxError,Ke.Type=TypeError,Ke.Range=RangeError;var Ye=Fe.reduce(function(e,t){return e[t+"Error"]=Ke[t],e},{}),Ge=ze.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Ke[t]),e},{});Ge.ModifyError=L,Ge.DexieError=j,Ge.BulkError=U;var Je={},Ve=100,$e=20,Ze=!1,Xe=xe.setImmediate?setImmediate.bind(null,Z):xe.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Z(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Z,0)},Qe=function(e,t){ut.push([e,t]),tt&&(Xe(),tt=!1)},et=!0,tt=!0,nt=[],rt=[],it=null,ot=S,st={global:!0,ref:0,unhandleds:[],onunhandled:ce,finalize:function(){this.unhandleds.forEach(function(e){try{ce(e[0],e[1])}catch(t){}})}},at=st,ut=[],ct=0,ft=[];r(q.prototype,{then:function(e,t){var n=this,r=new q(function(r,i){G(n,new H(e,t,r,i))});return je&&(!this._prev||null===this._state)&&$(r,this),r},_then:function(e,t){G(this,new H(null,null,e,t))},"catch":function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):oe(e)}):this.then(null,function(e){return e&&e.name===t?n(e):oe(e)})},"finally":function(e){return this.then(function(t){return e(),t},function(t){return e(),oe(t)})},uncaught:function(e){var t=this;return this.onuncatched=O(this.onuncatched,e),this._state===!1&&-1===nt.indexOf(this)&&nt.some(function(e,n,r){return e._value===t._value&&(r[n]=t)}),this},stack:{get:function(){if(this._stack)return this._stack;try{Ze=!0;var e=V(this,[],$e),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{Ze=!1}}}}),r(q,{all:function(){var e=w.apply(null,arguments);return new q(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return q.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof q?e:e&&"function"==typeof e.then?new q(function(t,n){e.then(t,n)}):new q(Je,!0,e)},reject:oe,race:function(){var e=w.apply(null,arguments);return new q(function(t,n){e.map(function(e){return q.resolve(e).then(t,n)})})},PSD:{get:function(){return at},set:function(e){return at=e}},newPSD:ae,usePSD:ue,scheduler:{get:function(){return Qe},set:function(e){Qe=e}},rejectionMapper:{get:function(){return ot},set:function(e){ot=e}},follow:function(e){return new q(function(t,n){return ae(function(t,n){var r=at;r.unhandleds=[],r.onunhandled=n,r.finalize=T(function(){var e=this;te(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n)})},on:z(null,{error:[O,ie]})});var lt=q.on.error;lt.subscribe=N("Promise.on('error')",lt.subscribe),lt.unsubscribe=N("Promise.on('error').unsubscribe",lt.unsubscribe);var ht="unhandledrejection";c(function(){Qe=function(e,t){setTimeout(function(){
e.apply(null,t)},0)}});var dt="1.5.1",pt=String.fromCharCode(65535),gt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return pt}}(),mt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt="String expected.",vt=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),_t=bt,wt=bt,kt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};B(je,kt);var Et=function(){},St=!1,At=xe.idbModules&&xe.idbModules.shimIndexedDB?xe.idbModules:{};return r(le,Ge),r(le,{"delete":function(e){var t=new le(e),n=t["delete"]();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new le(e).open().then(function(e){return e.close(),!0})["catch"](le.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){return new q(function(e,t){var n=Se(indexedDB);if(n){var r=n();r.onsuccess=function(t){e(a(t.target.result,0))},r.onerror=me(t)}else be(function(t){return e(t),!1})}).then(e)},defineClass:function(e){function n(n){n?t(this,n):St&&de(this,e)}return n},applyStructure:de,ignoreTransaction:function(e){return at.trans?ue(at.transless,e):e()},vip:function(e){return ae(function(){return at.letThrough=!0,e()})},async:function(e){return function(){try{var t=_e(e.apply(this,arguments));return t&&"function"==typeof t.then?t:q.resolve(t)}catch(n){return fe(n)}}},spawn:function(e,t,n){try{var r=_e(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:q.resolve(r)}catch(i){return fe(i)}},currentTransaction:{get:function(){return at.trans||null}},Promise:q,debug:{get:function(){return je},set:function(e){B(e,"dexie"===e?function(){return!0}:kt)}},derive:o,extend:t,props:r,override:u,Events:z,events:{get:N(function(){return z})},getByKeyPath:g,setByKeyPath:m,delByKeyPath:y,shallowClone:v,deepClone:b,getObjectDiff:_,asap:l,maxKey:gt,addons:[],connections:vt,MultiModifyError:Ke.Modify,errnames:He,IndexSpec:we,TableSchema:ke,dependencies:{indexedDB:At.shimIndexedDB||xe.indexedDB||xe.mozIndexedDB||xe.webkitIndexedDB||xe.msIndexedDB,IDBKeyRange:At.IDBKeyRange||xe.IDBKeyRange||xe.webkitIDBKeyRange},semVer:dt,version:dt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),fakeAutoComplete:Et,"default":le}),p(function(){le.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:xe.localStorage}),q.rejectionMapper=F,c(function(){le.fakeAutoComplete=Et=c,le.fake=St=!0}),le})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){(function(t){var r=e("isarray"),i=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var u in e)s[u]=t(e[u]);return s}return e}var n=[],o=e.data,s=e;return s.data=t(o),s.attachments=n.length,{packet:s,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var i=t[e.num];return i}if(r(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=n(e[s]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,u,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var f=new FileReader;f.onload=function(){c?c[u]=this.result:a=this.result,--s||n(a)},f.readAsArrayBuffer(e)}else if(r(e))for(var l=0;l<e.length;l++)o(e[l],l,e);else if(e&&"object"==typeof e&&!i(e))for(var h in e)o(e[h],h,e)}var s=0,a=e;o(a),s||n(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":27,isarray:28}],26:[function(e,t,n){function r(){}function i(e){var t="",r=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=l.stringify(e.data)),f("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=d.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}d.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return c();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++r);)t.attachments+=e.charAt(r);t.attachments=Number(t.attachments)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var i=e.charAt(r);if(","==i)break;if(t.nsp+=i,r+1==e.length)break}else t.nsp="/";var o=e.charAt(r+1);if(""!=o&&Number(o)==o){for(t.id="";++r;){var i=e.charAt(r);if(null==i||Number(i)!=i){--r;break}if(t.id+=e.charAt(r),r+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++r))try{t.data=l.parse(e.substr(r))}catch(s){return c()}return f("decoded %s as %j",e,t),t}function u(e){this.reconPack=e,this.buffers=[]}function c(){return{type:n.ERROR,data:"parser error"}}var f=e("debug")("socket.io-parser"),l=e("json3"),h=(e("isarray"),e("component-emitter")),d=e("./binary"),p=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=s,r.prototype.encode=function(e,t){if(f("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var r=i(e);t([r])}},h(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new u(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){this.reconPack.data.data=this.buffers.reduce(function(e,t){return this._appendBuffer(e,t)}.bind(this)),d.reconstructPacket(this.reconPack,[this.reconPack.data.data]);var t=this.reconPack;return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},u.prototype._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}},{"./binary":25,"./is-buffer":27,"component-emitter":19,debug:22,isarray:28,json3:29}],27:[function(e,t){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||t instanceof Uint8Array}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],29:[function(e,t,n){(function(e){(function(){function r(e,t){function n(e){if(n[e]!==m)return n[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=n("json-stringify")&&n("json-parse");else{var o,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,f="function"==typeof u&&b;if(f){(o=function(){return 1}).toJSON=o;try{f="0"===u(0)&&"0"===u(new i)&&'""'==u(new s)&&u(v)===m&&u(m)===m&&u()===m&&"1"===u(o)&&"[1]"==u([o])&&"[null]"==u([m])&&"null"==u(null)&&"[null,null,null]"==u([m,v,null])&&u({a:[o,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===u(null,o)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(l){f=!1}}r=f}if("json-parse"==e){var h=t.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){o=h(a);var d=5==o.a.length&&1===o.a[0];if(d){try{d=!h('"	"')}catch(l){}if(d)try{d=1!==h("01")}catch(l){}if(d)try{d=1!==h("1.")}catch(l){}}}}catch(l){d=!1}r=d}}return n[e]=!!r}e||(e=a.Object()),t||(t=a.Object());var i=e.Number||a.Number,s=e.String||a.String,u=e.Object||a.Object,c=e.Date||a.Date,f=e.SyntaxError||a.SyntaxError,l=e.TypeError||a.TypeError,h=e.Math||a.Math,d=e.JSON||a.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p,g,m,y=u.prototype,v=y.toString,b=new c(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(_){}if(!n("json")){var w="[object Function]",k="[object Date]",E="[object Number]",S="[object String]",A="[object Array]",T="[object Boolean]",x=n("bug-string-char-index");if(!b)var R=h.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],O=function(e,t){return C[t]+365*(e-1970)+R((e-1969+(t=+(t>1)))/4)-R((e-1901+t)/100)+R((e-1601+t)/400)};if((p=y.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),g=function(e,t){var n,r,i,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)p.call(r,i)&&s++;return n=r=null,s?g=2==s?function(e,t){var n,r={},i=v.call(e)==w;for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i=v.call(e)==w;for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,s=v.call(e)==w,a=!s&&"function"!=typeof e.constructor&&o[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)s&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),g(e,t)},!n("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},B="000000",I=function(e,t){return(B+(t||0)).slice(-e)},P="\\u00",N=function(e){for(var t='"',n=0,r=e.length,i=!x||r>10,o=i&&(x?e.split(""):e);r>n;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[s];break;default:if(32>s){t+=P+I(2,s.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},j=function(e,t,n,r,i,o,s){var a,u,c,f,h,d,y,b,_,w,x,C,D,B,P,M;try{a=t[e]}catch(L){}if("object"==typeof a&&a)if(u=v.call(a),u!=k||p.call(a,"toJSON"))"function"==typeof a.toJSON&&(u!=E&&u!=S&&u!=A||p.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(O){for(h=R(a/864e5),c=R(h/365.2425)+1970-1;O(c+1,0)<=h;c++);for(f=R((h-O(c,0))/30.42);O(c,f+1)<=h;f++);h=1+h-O(c,f),d=(a%864e5+864e5)%864e5,y=R(d/36e5)%24,b=R(d/6e4)%60,_=R(d/1e3)%60,w=d%1e3}else c=a.getUTCFullYear(),f=a.getUTCMonth(),h=a.getUTCDate(),y=a.getUTCHours(),b=a.getUTCMinutes(),_=a.getUTCSeconds(),w=a.getUTCMilliseconds();a=(0>=c||c>=1e4?(0>c?"-":"+")+I(6,0>c?-c:c):I(4,c))+"-"+I(2,f+1)+"-"+I(2,h)+"T"+I(2,y)+":"+I(2,b)+":"+I(2,_)+"."+I(3,w)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if(u=v.call(a),u==T)return""+a;if(u==E)return a>-1/0&&1/0>a?""+a:"null";if(u==S)return N(""+a);if("object"==typeof a){for(B=s.length;B--;)if(s[B]===a)throw l();if(s.push(a),x=[],P=o,o+=i,u==A){for(D=0,B=a.length;B>D;D++)C=j(D,a,n,r,i,o,s),x.push(C===m?"null":C);M=x.length?i?"[\n"+o+x.join(",\n"+o)+"\n"+P+"]":"["+x.join(",")+"]":"[]"}else g(r||a,function(e){var t=j(e,a,n,r,i,o,s);t!==m&&x.push(N(e)+":"+(i?" ":"")+t)}),M=x.length?i?"{\n"+o+x.join(",\n"+o)+"\n"+P+"}":"{"+x.join(",")+"}":"{}";return s.pop(),M}};t.stringify=function(e,t,n){var r,i,s,a;if(o[typeof t]&&t)if((a=v.call(t))==w)i=t;else if(a==A){s={};for(var u,c=0,f=t.length;f>c;u=t[c++],a=v.call(u),(a==S||a==E)&&(s[u]=1));}if(n)if((a=v.call(n))==E){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==S&&(r=n.length<=10?n:n.slice(0,10));return j("",(u={},u[""]=e,u),i,s,r,"",[])}}if(!n("json-parse")){var M,L,U=s.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},z=function(){throw M=L=null,f()},q=function(){for(var e,t,n,r,i,o=L,s=o.length;s>M;)switch(i=o.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=x?o.charAt(M):o[M],M++,e;case 34:for(e="@",M++;s>M;)if(i=o.charCodeAt(M),32>i)z();else if(92==i)switch(i=o.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[i],M++;break;case 117:for(t=++M,n=M+4;n>M;M++)i=o.charCodeAt(M),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||z();e+=U("0x"+o.slice(t,M));break;default:z()}else{if(34==i)break;for(i=o.charCodeAt(M),t=M;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++M);e+=o.slice(t,M)}if(34==o.charCodeAt(M))return M++,e;z();default:if(t=M,45==i&&(r=!0,i=o.charCodeAt(++M)),i>=48&&57>=i){for(48==i&&(i=o.charCodeAt(M+1),i>=48&&57>=i)&&z(),r=!1;s>M&&(i=o.charCodeAt(M),i>=48&&57>=i);M++);if(46==o.charCodeAt(M)){for(n=++M;s>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==M&&z(),M=n}if(i=o.charCodeAt(M),101==i||69==i){for(i=o.charCodeAt(++M),(43==i||45==i)&&M++,n=M;s>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==M&&z(),M=n}return+o.slice(t,M)}if(r&&z(),"true"==o.slice(M,M+4))return M+=4,!0;if("false"==o.slice(M,M+5))return M+=5,!1;if("null"==o.slice(M,M+4))return M+=4,null;z()}return"$"},H=function(e){var t,n;if("$"==e&&z(),"string"==typeof e){if("@"==(x?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=q(),"]"!=e;n||(n=!0))n&&(","==e?(e=q(),"]"==e&&z()):z()),","==e&&z(),t.push(H(e));return t}if("{"==e){for(t={};e=q(),"}"!=e;n||(n=!0))n&&(","==e?(e=q(),"}"==e&&z()):z()),(","==e||"string"!=typeof e||"@"!=(x?e.charAt(0):e[0])||":"!=q())&&z(),t[e.slice(1)]=H(q());return t}z()}return e},W=function(e,t,n){var r=K(e,t,n);r===m?delete e[t]:e[t]=r},K=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(v.call(i)==A)for(r=i.length;r--;)W(i,r,n);else g(i,function(e){W(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return M=0,L=""+e,n=H(q()),"$"!=q()&&z(),M=L=null,t&&v.call(t)==w?K((r={},r[""]=n,r),"",t):n}}}return t.runInContext=r,t}var i="function"==typeof define&&define.amd,o={"function":!0,object:!0},s=o[typeof n]&&n&&!n.nodeType&&n,a=o[typeof window]&&window||this,u=s&&o[typeof t]&&t&&!t.nodeType&&"object"==typeof e&&e;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(a=u),s&&!i)r(a,s);else{var c=a.JSON,f=a.JSON3,l=!1,h=r(a,a.JSON3={noConflict:function(){return l||(l=!0,a.JSON=c,a.JSON3=f,c=f=null),h}});a.JSON={parse:h.parse,stringify:h.stringify}}i&&define(function(){return h})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(e,t){t.exports=e("./lib/index")},{"./lib/index":31}],31:[function(e,t){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":32,"engine.io-parser":43}],32:[function(e,t){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=f(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=f(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate?t.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized,this.forceNode=!!t.forceNode;var i="object"==typeof n&&n;i.global===i&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports/index"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),u=e("indexof"),c=e("engine.io-parser"),f=e("parseuri"),l=e("parsejson"),h=e("parseqs");t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=c.protocol,r.Socket=r,r.Transport=e("./transport"),r.transports=e("./transports/index"),r.parser=e("engine.io-parser"),r.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=i(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return n},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;l=l||t}l||(a('probe transport "%s" opened',e),f.send([{type:"ping",data:"probe"}]),f.once("packet",function(t){if(!l)if("pong"===t.type&&"probe"===t.data){if(a('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",f),!f)return;r.priorWebsocketSuccess="websocket"===f.name,a('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){l||"closed"!==h.readyState&&(a("changing transport and sending upgrade packet"),c(),h.setTransport(f),f.send([{type:"upgrade"}]),h.emit("upgrade",f),f=null,h.upgrading=!1,h.flush())})}else{a('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=f.name,h.emit("upgradeError",n)}}))}function n(){l||(l=!0,c(),f.close(),f=null)}function i(t){var r=new Error("probe error: "+t);r.transport=f.name,n(),a('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",r)}function o(){i("transport closed")}function s(){i("socket closed")}function u(e){f&&e.name!==f.name&&(a('"%s" works - aborting "%s"',e.name,f.name),n())}function c(){f.removeListener("open",t),f.removeListener("error",i),f.removeListener("close",o),h.removeListener("close",s),h.removeListener("upgrading",u)}a('probing transport "%s"',e);var f=this.createTransport(e,{probe:1}),l=!1,h=this;r.priorWebsocketSuccess=!1,f.once("open",t),f.once("error",i),f.once("close",o),this.once("close",s),this.once("upgrading",u),f.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(l(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){a("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;r>n;n++)~u(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":33,"./transports/index":34,"component-emitter":19,debug:40,"engine.io-parser":43,indexof:53,parsejson:76,parseqs:77,parseuri:78}],33:[function(e,t){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var r=e("engine.io-parser"),i=e("component-emitter");t.exports=n,i(n.prototype),n.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},n.prototype.open=function(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":19,"engine.io-parser":43}],34:[function(e,t,n){(function(t){function r(e){var n,r=!1,a=!1,u=!1!==e.jsonp;if(t.location){var c="https:"===location.protocol,f=location.port;f||(f=c?443:80),r=e.hostname!==location.hostname||f!==e.port,a=e.secure!==c}if(e.xdomain=r,e.xscheme=a,n=new i(e),"open"in n&&!e.forceJSONP)return new o(e);if(!u)throw new Error("JSONP disabled");return new s(e)}var i=e("xmlhttprequest-ssl"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");n.polling=r,n.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":35,"./polling-xhr":36,"./websocket":38,"xmlhttprequest-ssl":39}],35:[function(e,t){(function(n){function r(){}function i(e){o.call(this,e),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=r)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=i;var a,u=/\n/g,c=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),f=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=f,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(c,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":37,"component-inherit":20}],36:[function(e,t){(function(n){function r(){}function i(e){if(u.call(this,e),this.requestTimeout=e.requestTimeout,n.location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd=e.hostname!==n.location.hostname||r!==e.port,this.xs=e.secure!==t}else this.extraHeaders=e.extraHeaders}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest-ssl"),u=e("./polling"),c=e("component-emitter"),f=e("component-inherit"),l=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,f(i,u),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new o(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},i.prototype.doPoll=function(){l("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),r=this;try{l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i]);

}}catch(s){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{t.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout(function(){r.onError(t.status)},0))},l("xhr data %s",this.data),t.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(t){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var r=new Uint8Array(this.xhr.response),i=[],o=0,s=r.length;s>o;o++)i.push(r[o]);e=String.fromCharCode.apply(null,i)}else e=this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},n.document&&(n.attachEvent?n.attachEvent("onunload",s):n.addEventListener&&n.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":37,"component-emitter":19,"component-inherit":20,debug:40,"xmlhttprequest-ssl":39}],37:[function(e,t){function n(e){var t=e&&e.forceBase64;(!c||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),i=e("parseqs"),o=e("engine.io-parser"),s=e("component-inherit"),a=e("yeast"),u=e("debug")("engine.io-client:polling");t.exports=n;var c=function(){var t=e("xmlhttprequest-ssl"),n=new t({xdomain:!1});return null!=n.responseType}();s(n,r),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){u("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||t()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||t()}))}else t()},n.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;u("polling got data %s",e);var n=function(e){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};o.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){u("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var r=-1!==this.hostname.indexOf(":");return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":33,"component-inherit":20,debug:40,"engine.io-parser":43,parseqs:77,"xmlhttprequest-ssl":39,yeast:141}],38:[function(e,t){(function(n){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=l&&!e.forceNode,this.usingBrowserWebSocket||(d=i),o.call(this,e)}var i,o=e("../transport"),s=e("engine.io-parser"),a=e("parseqs"),u=e("component-inherit"),c=e("yeast"),f=e("debug")("engine.io-client:websocket"),l=n.WebSocket||n.MozWebSocket;if("undefined"==typeof window)try{i=e("ws")}catch(h){}var d=l;d||"undefined"!=typeof window||(d=i),t.exports=r,u(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new d(e):new d(e,t,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){function t(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=e.length,o=0,a=i;a>o;o++)!function(e){s.encodePacket(e,r.supportsBinary,function(o){if(!r.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),r.perMessageDeflate){var a="string"==typeof o?n.Buffer.byteLength(o):o.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,s)}catch(u){f("websocket closed before onclose event")}--i||t()})}(e[o])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e);var r=-1!==this.hostname.indexOf(":");return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===r.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":33,"component-inherit":20,debug:40,"engine.io-parser":43,parseqs:77,ws:14,yeast:141}],39:[function(e,t){(function(n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(s){}if(!t)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":51}],40:[function(e,t,n){(function(r){function i(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function u(){try{return n.storage.debug}catch(e){}return"undefined"!=typeof r&&"env"in r?r.env.DEBUG:void 0}function c(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=o,n.save=a,n.load=u,n.useColors=i,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},n.enable(u())}).call(this,e("_process"))},{"./debug":41,_process:81}],41:[function(e,t,n){function r(){return n.colors[f++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(c||t);e.diff=o,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var o=s[u];t=i.call(e,o),s.splice(u,1),u--}return t}),s=n.formatArgs.apply(e,s);var f=i.log||n.log||console.log.bind(console);f.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i.debug=i,n.coerce=u,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,f=0},{ms:42}],42:[function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return void 0}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,c,"day")||o(e,u,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,f=365.25*c;t.exports=function(e,t){t=t||{};var o=typeof e;if("string"===o&&e.length>0)return n(e);if("number"===o&&isNaN(e)===!1)return t["long"]?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],43:[function(e,t,n){(function(t){function r(e,t){var r="b"+n.packets[e.type]+e.data.data;return t(r)}function i(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=v[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}function o(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,r)},i.readAsArrayBuffer(e.data)}function s(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(y)return o(e,t,r);var i=new Uint8Array(1);i[0]=v[e.type];var s=new w([i.buffer,e.data]);return r(s)}function a(e){try{e=p.decode(e)}catch(t){return!1}return e}function u(e,t,n){for(var r=new Array(e.length),i=d(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},s=0;s<e.length;s++)o(s,e[s],i)}var c,f=e("./keys"),l=e("has-binary"),h=e("arraybuffer.slice"),d=e("after"),p=e("wtf-8");t&&t.ArrayBuffer&&(c=e("base64-arraybuffer"));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=g||m;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=f(v),_={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var u=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&u instanceof ArrayBuffer)return i(e,n,a);if(w&&u instanceof t.Blob)return s(e,n,a);if(u&&u.base64)return r(e,a);var c=v[e.type];return void 0!==e.data&&(c+=o?p.encode(String(e.data)):String(e.data)),a(""+c)},n.encodeBase64Packet=function(e,r){var i="b"+n.packets[e.type];if(w&&e.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var u=new Uint8Array(e.data),c=new Array(u.length),f=0;f<u.length;f++)c[f]=u[f];s=String.fromCharCode.apply(null,c)}return i+=t.btoa(s),r(i)},n.decodePacket=function(e,t,r){if(void 0===e)return _;if("string"==typeof e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r&&(e=a(e),e===!1))return _;var i=e.charAt(0);return Number(i)==i&&b[i]?e.length>1?{type:b[i],data:e.substring(1)}:{type:b[i]}:_}var o=new Uint8Array(e),i=o[0],s=h(e,1);return w&&"blob"===t&&(s=new w([s])),{type:b[i],data:s}},n.decodeBase64Packet=function(e,t){var n=b[e.charAt(0)];if(!c)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=c.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},n.encodePayload=function(e,t,r){function i(e){return e.length+":"+e}function o(e,r){n.encodePacket(e,s?t:!1,!0,function(e){r(null,i(e))})}"function"==typeof t&&(r=t,t=null);var s=l(e);return t&&s?w&&!y?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void u(e,o,function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);"function"==typeof t&&(r=t,t=null);var i;if(""==e)return r(_,0,1);for(var o,s,a="",u=0,c=e.length;c>u;u++){var f=e.charAt(u);if(":"!=f)a+=f;else{if(""==a||a!=(o=Number(a)))return r(_,0,1);if(s=e.substr(u+1,o),a!=s.length)return r(_,0,1);if(s.length){if(i=n.decodePacket(s,t,!0),_.type==i.type&&_.data==i.data)return r(_,0,1);var l=r(i,u+o,c);if(!1===l)return}u+=o,a=""}}return""!=a?r(_,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void u(e,r,function(e,n){var r=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}i[o++]=t?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),t(i.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,w){var u=new w([n.buffer,a.buffer,e]);t(null,u)}})}u(e,r,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var i=e,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),u=0===a[0],c="",f=1;255!=a[f];f++){if(c.length>310){s=!0;break}c+=a[f]}if(s)return r(_,0,1);i=h(i,2+c.length),c=parseInt(c);var l=h(i,0,c);if(u)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(d){var p=new Uint8Array(l);l="";for(var f=0;f<p.length;f++)l+=String.fromCharCode(p[f])}o.push(l),i=h(i,c)}var g=o.length;o.forEach(function(e,i){r(n.decodePacket(e,t,!0),i,g)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":44,after:5,"arraybuffer.slice":7,"base64-arraybuffer":10,blob:12,"has-binary":45,"wtf-8":139}],44:[function(e,t){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],45:[function(e,t){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:46}],46:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],47:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],48:[function(e,t){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],49:[function(e,t){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var i=e("isarray");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:50}],50:[function(e,t,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],51:[function(e,t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},{}],52:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:(d?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*g}},{}],53:[function(e,t){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},{}],54:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],55:[function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},{}],56:[function(e,t,n){(function(e){!function(e,r){"function"==typeof define&&define.amd?define(function(){return e.is=r()}):"object"==typeof n?t.exports=r():e.is=r()}(this,function(){function t(e){return function(){return!e.apply(null,f.call(arguments))}}function n(e){return function(){for(var t=o(arguments),n=t.length,r=0;n>r;r++)if(!e.call(null,t[r]))return!1;return!0}}function r(e){return function(){for(var t=o(arguments),n=t.length,r=0;n>r;r++)if(e.call(null,t[r]))return!0;return!1}}function i(e,t){var n=t+"",r=+(n.match(/\d+/)||0/0),i=n.match(/^[<>]=?|/)[0];return h[i]?h[i](e,r):e==r||r!==r}function o(e){var t=f.call(e),n=t.length;return 1===n&&u.array(t[0])&&(t=t[0]),t}function s(e,t){u[e]=function(n){return t[e].test(n)}}function a(){var e=u;for(var i in e)if(l.call(e,i)&&u["function"](e[i]))for(var o=e[i].api||["not","all","any"],s=0;s<o.length;s++)"not"===o[s]&&(u.not[i]=t(u[i])),"all"===o[s]&&(u.all[i]=n(u[i])),"any"===o[s]&&(u.any[i]=r(u[i]))}var u={};u.VERSION="0.8.0",u.not={},u.all={},u.any={};var c=Object.prototype.toString,f=Array.prototype.slice,l=Object.prototype.hasOwnProperty,h={"<":function(e,t){return t>e},"<=":function(e,t){return t>=e},">":function(e,t){return e>t},">=":function(e,t){return e>=t}};u.arguments=function(e){return"[object Arguments]"===c.call(e)||null!=e&&"object"==typeof e&&"callee"in e},u.array=Array.isArray||function(e){return"[object Array]"===c.call(e)},u["boolean"]=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},u["char"]=function(e){return u.string(e)&&1===e.length},u.date=function(e){return"[object Date]"===c.call(e)},u.domNode=function(e){return u.object(e)&&e.nodeType>0},u.error=function(e){return"[object Error]"===c.call(e)},u["function"]=function(e){return"[object Function]"===c.call(e)||"function"==typeof e},u.json=function(e){return"[object Object]"===c.call(e)},u.nan=function(e){return e!==e},u["null"]=function(e){return null===e},u.number=function(e){return u.not.nan(e)&&"[object Number]"===c.call(e)},u.object=function(e){return Object(e)===e},u.regexp=function(e){return"[object RegExp]"===c.call(e)},u.sameType=function(e,t){var n=c.call(e);return n!==c.call(t)?!1:"[object Number]"===n?!u.any.nan(e,t)||u.all.nan(e,t):!0},u.sameType.api=["not"],u.string=function(e){return"[object String]"===c.call(e)},u.undefined=function(e){return void 0===e},u.windowObject=function(e){return null!=e&&"object"==typeof e&&"setInterval"in e},u.empty=function(e){if(u.object(e)){var t=Object.getOwnPropertyNames(e).length;return 0===t||1===t&&u.array(e)||2===t&&u.arguments(e)?!0:!1}return""===e},u.existy=function(e){return null!=e},u.falsy=function(e){return!e},u.truthy=t(u.falsy),u.above=function(e,t){return u.all.number(e,t)&&e>t},u.above.api=["not"],u.decimal=function(e){return u.number(e)&&e%1!==0},u.equal=function(e,t){return u.all.number(e,t)?e===t&&1/e===1/t:u.all.string(e,t)||u.all.regexp(e,t)?""+e==""+t:u.all["boolean"](e,t)?e===t:!1},u.equal.api=["not"],u.even=function(e){return u.number(e)&&e%2===0},u.finite=isFinite||function(e){return u.not.infinite(e)&&u.not.nan(e)},u.infinite=function(e){return e===1/0||e===-(1/0)},u.integer=function(e){return u.number(e)&&e%1===0},u.negative=function(e){return u.number(e)&&0>e},u.odd=function(e){return u.number(e)&&e%2===1},u.positive=function(e){return u.number(e)&&e>0},u.under=function(e,t){return u.all.number(e,t)&&t>e},u.under.api=["not"],u.within=function(e,t,n){return u.all.number(e,t,n)&&e>t&&n>e},u.within.api=["not"];var d={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/};for(var p in d)d.hasOwnProperty(p)&&s(p,d);u.ip=function(e){return u.ipv4(e)||u.ipv6(e)},u.capitalized=function(e){if(u.not.string(e))return!1;for(var t=e.split(" "),n=0;n<t.length;n++){var r=t[n];if(r.length){var i=r.charAt(0);if(i!==i.toUpperCase())return!1}}return!0},u.endWith=function(e,t){if(u.not.string(e))return!1;t+="";var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},u.endWith.api=["not"],u.include=function(e,t){return e.indexOf(t)>-1},u.include.api=["not"],u.lowerCase=function(e){return u.string(e)&&e===e.toLowerCase()},u.palindrome=function(e){if(u.not.string(e))return!1;e=e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();for(var t=e.length-1,n=0,r=Math.floor(t/2);r>=n;n++)if(e.charAt(n)!==e.charAt(t-n))return!1;return!0},u.space=function(e){if(u.not["char"](e))return!1;var t=e.charCodeAt(0);return t>8&&14>t||32===t},u.startWith=function(e,t){return u.string(e)&&0===e.indexOf(t)},u.startWith.api=["not"],u.upperCase=function(e){return u.string(e)&&e===e.toUpperCase()};var g=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],m=["january","february","march","april","may","june","july","august","september","october","november","december"];

u.day=function(e,t){return u.date(e)&&t.toLowerCase()===g[e.getDay()]},u.day.api=["not"],u.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),r=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<r},u.future=function(e){var t=new Date;return u.date(e)&&e.getTime()>t.getTime()},u.inDateRange=function(e,t,n){if(u.not.date(e)||u.not.date(t)||u.not.date(n))return!1;var r=e.getTime();return r>t.getTime()&&r<n.getTime()},u.inDateRange.api=["not"],u.inLastMonth=function(e){return u.inDateRange(e,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},u.inLastWeek=function(e){return u.inDateRange(e,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},u.inLastYear=function(e){return u.inDateRange(e,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},u.inNextMonth=function(e){return u.inDateRange(e,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},u.inNextWeek=function(e){return u.inDateRange(e,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},u.inNextYear=function(e){return u.inDateRange(e,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},u.leapYear=function(e){return u.number(e)&&(e%4===0&&e%100!==0||e%400===0)},u.month=function(e,t){return u.date(e)&&t.toLowerCase()===m[e.getMonth()]},u.month.api=["not"],u.past=function(e){var t=new Date;return u.date(e)&&e.getTime()<t.getTime()},u.quarterOfYear=function(e,t){return u.date(e)&&u.number(t)&&t===Math.floor((e.getMonth()+3)/3)},u.quarterOfYear.api=["not"],u.today=function(e){var t=new Date,n=t.toDateString();return u.date(e)&&e.toDateString()===n},u.tomorrow=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()+1)).toDateString();return u.date(e)&&e.toDateString()===n},u.weekend=function(e){return u.date(e)&&(6===e.getDay()||0===e.getDay())},u.weekday=t(u.weekend),u.year=function(e,t){return u.date(e)&&u.number(t)&&t===e.getFullYear()},u.year.api=["not"],u.yesterday=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()-1)).toDateString();return u.date(e)&&e.toDateString()===n};var y=u.windowObject("object"==typeof e&&e)&&e,v=u.windowObject("object"==typeof self&&self)&&self,b=u.windowObject("object"==typeof this&&this)&&this,_=y||v||b||Function("return this")(),w=v&&v.document,k=_.is,E=v&&v.navigator,S=(E&&E.appVersion||"").toLowerCase(),A=(E&&E.userAgent||"").toLowerCase(),T=(E&&E.vendor||"").toLowerCase();return u.android=function(){return/android/.test(A)},u.android.api=["not"],u.androidPhone=function(){return/android/.test(A)&&/mobile/.test(A)},u.androidPhone.api=["not"],u.androidTablet=function(){return/android/.test(A)&&!/mobile/.test(A)},u.androidTablet.api=["not"],u.blackberry=function(){return/blackberry/.test(A)||/bb10/.test(A)},u.blackberry.api=["not"],u.chrome=function(e){var t=/google inc/.test(T)?A.match(/(?:chrome|crios)\/(\d+)/):null;return null!==t&&i(t[1],e)},u.chrome.api=["not"],u.desktop=function(){return u.not.mobile()&&u.not.tablet()},u.desktop.api=["not"],u.edge=function(e){var t=A.match(/edge\/(\d+)/);return null!==t&&i(t[1],e)},u.edge.api=["not"],u.firefox=function(e){var t=A.match(/(?:firefox|fxios)\/(\d+)/);return null!==t&&i(t[1],e)},u.firefox.api=["not"],u.ie=function(e){var t=A.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&i(t[1],e)},u.ie.api=["not"],u.ios=function(){return u.iphone()||u.ipad()||u.ipod()},u.ios.api=["not"],u.ipad=function(e){var t=A.match(/ipad.+?os (\d+)/);return null!==t&&i(t[1],e)},u.ipad.api=["not"],u.iphone=function(e){var t=A.match(/iphone(?:.+?os (\d+))?/);return null!==t&&i(t[1]||1,e)},u.iphone.api=["not"],u.ipod=function(e){var t=A.match(/ipod.+?os (\d+)/);return null!==t&&i(t[1],e)},u.ipod.api=["not"],u.linux=function(){return/linux/.test(S)},u.linux.api=["not"],u.mac=function(){return/mac/.test(S)},u.mac.api=["not"],u.mobile=function(){return u.iphone()||u.ipod()||u.androidPhone()||u.blackberry()||u.windowsPhone()},u.mobile.api=["not"],u.offline=t(u.online),u.offline.api=["not"],u.online=function(){return!E||E.onLine===!0},u.online.api=["not"],u.opera=function(e){var t=A.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==t&&i(t[1],e)},u.opera.api=["not"],u.phantom=function(e){var t=A.match(/phantomjs\/(\d+)/);return null!==t&&i(t[1],e)},u.phantom.api=["not"],u.safari=function(e){var t=A.match(/version\/(\d+).+?safari/);return null!==t&&i(t[1],e)},u.safari.api=["not"],u.tablet=function(){return u.ipad()||u.androidTablet()||u.windowsTablet()},u.tablet.api=["not"],u.touchDevice=function(){return!!w&&("ontouchstart"in v||"DocumentTouch"in v&&w instanceof DocumentTouch)},u.touchDevice.api=["not"],u.windows=function(){return/win/.test(S)},u.windows.api=["not"],u.windowsPhone=function(){return u.windows()&&/phone/.test(A)},u.windowsPhone.api=["not"],u.windowsTablet=function(){return u.windows()&&u.not.windowsPhone()&&/touch/.test(A)},u.windowsTablet.api=["not"],u.propertyCount=function(e,t){if(u.not.object(e)||u.not.number(t))return!1;var n=0;for(var r in e)if(l.call(e,r)&&++n>t)return!1;return n===t},u.propertyCount.api=["not"],u.propertyDefined=function(e,t){return u.object(e)&&u.string(t)&&t in e},u.propertyDefined.api=["not"],u.inArray=function(e,t){if(u.not.array(t))return!1;for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},u.inArray.api=["not"],u.sorted=function(e,t){if(u.not.array(e))return!1;for(var n=h[t]||h[">="],r=1;r<e.length;r++)if(!n(e[r],e[r-1]))return!1;return!0},a(),u.setNamespace=function(){return _.is=k,this},u.setRegexp=function(e,t){for(var n in d)l.call(d,n)&&t===n&&(d[n]=e)},u})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{dup:28}],58:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],59:[function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,c,"day")||o(e,u,"hour")||o(e,a,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,c=24*u,f=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?i(e):r(e)}},{}],60:[function(e,t){"use strict";var n=e("./lib/utils/common").assign,r=e("./lib/deflate"),i=e("./lib/inflate"),o=e("./lib/zlib/constants"),s={};n(s,r,i,o),t.exports=s},{"./lib/deflate":61,"./lib/inflate":62,"./lib/utils/common":63,"./lib/zlib/constants":66}],61:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=u.assign({level:v,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==g)throw new Error(f[n]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?c.string2buf(t.dictionary):"[object ArrayBuffer]"===h.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=a.deflateSetDictionary(this.strm,i),n!==g)throw new Error(f[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function s(e,t){return t=t||{},t.gzip=!0,i(e,t)}var a=e("./zlib/deflate"),u=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/messages"),l=e("./zlib/zstream"),h=Object.prototype.toString,d=0,p=4,g=0,m=1,y=2,v=-1,b=0,_=8;r.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?p:d,i.input="string"==typeof e?c.string2buf(e):"[object ArrayBuffer]"===h.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),n=a.deflate(i,r),n!==m&&n!==g)return this.onEnd(n),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(r===p||r===y))&&this.onData("string"===this.options.to?c.buf2binstring(u.shrinkBuf(i.output,i.next_out)):u.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&n!==m);return r===p?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===g):r===y?(this.onEnd(g),i.avail_out=0,!0):!0},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===g&&(this.result="string"===this.options.to?this.chunks.join(""):u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=r,n.deflate=i,n.deflateRaw=o,n.gzip=s},{"./utils/common":63,"./utils/strings":64,"./zlib/deflate":68,"./zlib/messages":73,"./zlib/zstream":75}],62:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=s.inflateInit2(this.strm,t.windowBits);if(n!==c.Z_OK)throw new Error(f[n]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var s=e("./zlib/inflate"),a=e("./utils/common"),u=e("./utils/strings"),c=e("./zlib/constants"),f=e("./zlib/messages"),l=e("./zlib/zstream"),h=e("./zlib/gzheader"),d=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,o,f,l,h=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?c.Z_FINISH:c.Z_NO_FLUSH,h.input="string"==typeof e?u.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?new Uint8Array(e):e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new a.Buf8(p),h.next_out=0,h.avail_out=p),n=s.inflate(h,c.Z_NO_FLUSH),n===c.Z_NEED_DICT&&g&&(l="string"==typeof g?u.string2buf(g):"[object ArrayBuffer]"===d.call(g)?new Uint8Array(g):g,n=s.inflateSetDictionary(this.strm,l)),n===c.Z_BUF_ERROR&&m===!0&&(n=c.Z_OK,m=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0===h.avail_out||n===c.Z_STREAM_END||0===h.avail_in&&(r===c.Z_FINISH||r===c.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=u.utf8border(h.output,h.next_out),o=h.next_out-i,f=u.buf2string(h.output,i),h.next_out=o,h.avail_out=p-o,o&&a.arraySet(h.output,h.output,i,o,0),this.onData(f)):this.onData(a.shrinkBuf(h.output,h.next_out))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(r=c.Z_FINISH),r===c.Z_FINISH?(n=s.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):r===c.Z_SYNC_FLUSH?(this.onEnd(c.Z_OK),h.avail_out=0,!0):!0},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=r,n.inflate=i,n.inflateRaw=o,n.ungzip=i},{"./utils/common":63,"./utils/strings":64,"./zlib/constants":66,"./zlib/gzheader":69,"./zlib/inflate":71,"./zlib/messages":73,"./zlib/zstream":75}],63:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;n>t;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;n>t;t++)o=e[t],s.set(o,i),i+=o.length;return s}},o={arraySet:function(e,t,n,r,i){for(var o=0;r>o;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],64:[function(e,t,n){"use strict";function r(e,t){if(65537>t&&(e.subarray&&s||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;t>r;r++)n+=String.fromCharCode(e[r]);return n}var i=e("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var u=new i.Buf8(256),c=0;256>c;c++)u[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;u[254]=u[254]=1,n.string2buf=function(e){var t,n,r,o,s,a=e.length,u=0;for(o=0;a>o;o++)n=e.charCodeAt(o),55296===(64512&n)&&a>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),u+=128>n?1:2048>n?2:65536>n?3:4;for(t=new i.Buf8(u),s=0,o=0;u>s;o++)n=e.charCodeAt(o),55296===(64512&n)&&a>o+1&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),128>n?t[s++]=n:2048>n?(t[s++]=192|n>>>6,t[s++]=128|63&n):65536>n?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;r>n;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,o,s,a=t||e.length,c=new Array(2*a);for(i=0,n=0;a>n;)if(o=e[n++],128>o)c[i++]=o;else if(s=u[o],s>4)c[i++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>n;)o=o<<6|63&e[n++],s--;s>1?c[i++]=65533:65536>o?c[i++]=o:(o-=65536,c[i++]=55296|o>>10&1023,c[i++]=56320|1023&o)}return r(c,i)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+u[e[n]]>t?n:t}},{"./common":63}],65:[function(e,t){"use strict";function n(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do i=i+t[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}t.exports=n},{}],66:[function(e,t){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],67:[function(e,t){"use strict";function n(){for(var e,t=[],n=0;256>n;n++){e=n;for(var r=0;8>r;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,r){var o=i,s=r+n;e^=-1;for(var a=r;s>a;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}var i=n();t.exports=r},{}],68:[function(e,t,n){"use strict";function r(e,t){return e.msg=P[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){D._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function f(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,O.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=B(e.adler,t,i,n):2===e.state.wrap&&(e.adler=I(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function l(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-le?e.strstart-(e.w_size-le):0,c=e.window,f=e.w_mask,l=e.prev,h=e.strstart+fe,d=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do if(n=t,c[n+s]===p&&c[n+s-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do;while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&h>o);if(r=fe-(h-o),o=h-fe,r>s){if(e.match_start=t,s=r,r>=a)break;d=c[o+s-1],p=c[o+s]}}while((t=l[t&f])>u&&0!==--i);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,r,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-le)){O.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=s?r-s:0;while(--n);n=s,t=n;do r=e.prev[--t],e.prev[t]=r>=s?r-s:0;while(--n);i+=s}if(0===e.strm.avail_in)break;if(n=f(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ce)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ce-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ce)););}while(e.lookahead<le&&0!==e.strm.avail_in)}function d(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===N)return _e;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,a(e,!1),0===e.strm.avail_out))return _e;if(e.strstart-e.block_start>=e.w_size-le&&(a(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===L?(a(e,!0),0===e.strm.avail_out?ke:Ee):e.strstart>e.block_start&&(a(e,!1),0===e.strm.avail_out)?_e:_e}function p(e,t){for(var n,r;;){if(e.lookahead<le){if(h(e),e.lookahead<le&&t===N)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=ce&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-le&&(e.match_length=l(e,n)),e.match_length>=ce)if(r=D._tr_tally(e,e.strstart-e.match_start,e.match_length-ce),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ce){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(a(e,!1),0===e.strm.avail_out))return _e}return e.insert=e.strstart<ce-1?e.strstart:ce-1,t===L?(a(e,!0),0===e.strm.avail_out?ke:Ee):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?_e:we}function g(e,t){for(var n,r,i;;){if(e.lookahead<le){if(h(e),e.lookahead<le&&t===N)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=ce&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ce-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-le&&(e.match_length=l(e,n),e.match_length<=5&&(e.strategy===Y||e.match_length===ce&&e.strstart-e.match_start>4096)&&(e.match_length=ce-1)),e.prev_length>=ce&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ce,r=D._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ce),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ce-1,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return _e}else if(e.match_available){if(r=D._tr_tally(e,0,e.window[e.strstart-1]),r&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return _e}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=D._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ce-1?e.strstart:ce-1,t===L?(a(e,!0),0===e.strm.avail_out?ke:Ee):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?_e:we}function m(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=fe){if(h(e),e.lookahead<=fe&&t===N)return _e;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ce&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+fe;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&o>i);e.match_length=fe-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ce?(n=D._tr_tally(e,1,e.match_length-ce),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===L?(a(e,!0),0===e.strm.avail_out?ke:Ee):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?_e:we}function y(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===N)return _e;break}if(e.match_length=0,n=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===L?(a(e,!0),0===e.strm.avail_out?ke:Ee):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?_e:we}function v(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ce-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*ae),this.dyn_dtree=new O.Buf16(2*(2*oe+1)),this.bl_tree=new O.Buf16(2*(2*se+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(ue+1),this.heap=new O.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:ve,e.adler=2===t.wrap?0:1,t.last_flush=N,D._tr_init(t),F):r(e,q)}function k(e){var t=w(e);return t===F&&b(e.state),t}function E(e,t){return e&&e.state?2!==e.state.wrap?q:(e.state.gzhead=t,F):q}function S(e,t,n,i,o,s){if(!e)return q;var a=1;if(t===K&&(t=6),0>i?(a=0,i=-i):i>15&&(a=2,i-=16),1>o||o>Q||n!==X||8>i||i>15||0>t||t>9||0>s||s>V)return r(e,q);8===i&&(i=9);var u=new _;return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+ce-1)/ce),u.window=new O.Buf8(2*u.w_size),u.head=new O.Buf16(u.hash_size),u.prev=new O.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new O.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=n,k(e)}function A(e,t){return S(e,t,X,ee,te,$)}function T(e,t){var n,a,f,l;if(!e||!e.state||t>U||0>t)return e?r(e,q):q;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===be&&t!==L)return r(e,0===e.avail_out?W:q);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===de)if(2===a.wrap)e.adler=0,u(a,31),u(a,139),u(a,8),a.gzhead?(u(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),u(a,255&a.gzhead.time),u(a,a.gzhead.time>>8&255),u(a,a.gzhead.time>>16&255),u(a,a.gzhead.time>>24&255),u(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),u(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(u(a,255&a.gzhead.extra.length),u(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=I(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=pe):(u(a,0),u(a,0),u(a,0),u(a,0),u(a,0),u(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),u(a,Se),a.status=ve);else{var h=X+(a.w_bits-8<<4)<<8,d=-1;d=a.strategy>=G||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=d<<6,0!==a.strstart&&(h|=he),h+=31-h%31,a.status=ve,c(a,h),0!==a.strstart&&(c(a,e.adler>>>16),c(a,65535&e.adler)),e.adler=1}if(a.status===pe)if(a.gzhead.extra){for(f=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>f&&(e.adler=I(e.adler,a.pending_buf,a.pending-f,f)),s(e),f=a.pending,a.pending!==a.pending_buf_size));)u(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>f&&(e.adler=I(e.adler,a.pending_buf,a.pending-f,f)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ge)}else a.status=ge;if(a.status===ge)if(a.gzhead.name){f=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>f&&(e.adler=I(e.adler,a.pending_buf,a.pending-f,f)),s(e),f=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,u(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>f&&(e.adler=I(e.adler,a.pending_buf,a.pending-f,f)),0===l&&(a.gzindex=0,a.status=me)}else a.status=me;if(a.status===me)if(a.gzhead.comment){f=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>f&&(e.adler=I(e.adler,a.pending_buf,a.pending-f,f)),s(e),f=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,u(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>f&&(e.adler=I(e.adler,a.pending_buf,a.pending-f,f)),0===l&&(a.status=ye)}else a.status=ye;if(a.status===ye&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(u(a,255&e.adler),u(a,e.adler>>8&255),e.adler=0,a.status=ve)):a.status=ve),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,F}else if(0===e.avail_in&&i(t)<=i(n)&&t!==L)return r(e,W);if(a.status===be&&0!==e.avail_in)return r(e,W);if(0!==e.avail_in||0!==a.lookahead||t!==N&&a.status!==be){var p=a.strategy===G?y(a,t):a.strategy===J?m(a,t):C[a.level].func(a,t);if((p===ke||p===Ee)&&(a.status=be),p===_e||p===ke)return 0===e.avail_out&&(a.last_flush=-1),F;if(p===we&&(t===j?D._tr_align(a):t!==U&&(D._tr_stored_block(a,0,0,!1),t===M&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,F}return t!==L?F:a.wrap<=0?z:(2===a.wrap?(u(a,255&e.adler),u(a,e.adler>>8&255),u(a,e.adler>>16&255),u(a,e.adler>>24&255),u(a,255&e.total_in),u(a,e.total_in>>8&255),u(a,e.total_in>>16&255),u(a,e.total_in>>24&255)):(c(a,e.adler>>>16),c(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?F:z)}function x(e){var t;return e&&e.state?(t=e.state.status,t!==de&&t!==pe&&t!==ge&&t!==me&&t!==ye&&t!==ve&&t!==be?r(e,q):(e.state=null,t===ve?r(e,H):F)):q}function R(e,t){var n,r,i,s,a,u,c,f,l=t.length;if(!e||!e.state)return q;if(n=e.state,s=n.wrap,2===s||1===s&&n.status!==de||n.lookahead)return q;for(1===s&&(e.adler=B(e.adler,t,l,0)),n.wrap=0,l>=n.w_size&&(0===s&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new O.Buf8(n.w_size),O.arraySet(f,t,l-n.w_size,n.w_size,0),t=f,l=n.w_size),a=e.avail_in,u=e.next_in,c=e.input,e.avail_in=l,e.next_in=0,e.input=t,h(n);n.lookahead>=ce;){r=n.strstart,i=n.lookahead-(ce-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+ce-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=ce-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ce-1,n.match_available=0,e.next_in=u,e.input=c,e.avail_in=a,n.wrap=s,F}var C,O=e("../utils/common"),D=e("./trees"),B=e("./adler32"),I=e("./crc32"),P=e("./messages"),N=0,j=1,M=3,L=4,U=5,F=0,z=1,q=-2,H=-3,W=-5,K=-1,Y=1,G=2,J=3,V=4,$=0,Z=2,X=8,Q=9,ee=15,te=8,ne=29,re=256,ie=re+1+ne,oe=30,se=19,ae=2*ie+1,ue=15,ce=3,fe=258,le=fe+ce+1,he=32,de=42,pe=69,ge=73,me=91,ye=103,ve=113,be=666,_e=1,we=2,ke=3,Ee=4,Se=3;C=[new v(0,0,0,0,d),new v(4,4,8,4,p),new v(4,5,16,8,p),new v(4,6,32,32,p),new v(4,4,16,16,g),new v(8,16,32,32,g),new v(8,16,128,128,g),new v(8,32,128,256,g),new v(32,128,258,1024,g),new v(32,258,258,4096,g)],n.deflateInit=A,n.deflateInit2=S,n.deflateReset=k,n.deflateResetKeep=w,n.deflateSetHeader=E,n.deflate=T,n.deflateEnd=x,n.deflateSetDictionary=R,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":63,"./adler32":65,"./crc32":67,"./messages":73,"./trees":74}],69:[function(e,t){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},{}],70:[function(e,t){"use strict";var n=30,r=12;t.exports=function(e,t){var i,o,s,a,u,c,f,l,h,d,p,g,m,y,v,b,_,w,k,E,S,A,T,x,R;i=e.state,o=e.next_in,x=e.input,s=o+(e.avail_in-5),a=e.next_out,R=e.output,u=a-(t-e.avail_out),c=a+(e.avail_out-257),f=i.dmax,l=i.wsize,h=i.whave,d=i.wnext,p=i.window,g=i.hold,m=i.bits,y=i.lencode,v=i.distcode,b=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{15>m&&(g+=x[o++]<<m,m+=8,g+=x[o++]<<m,m+=8),w=y[g&b];t:for(;;){if(k=w>>>24,g>>>=k,m-=k,k=w>>>16&255,0===k)R[a++]=65535&w;else{if(!(16&k)){if(0===(64&k)){w=y[(65535&w)+(g&(1<<k)-1)];continue t}if(32&k){i.mode=r;break e}e.msg="invalid literal/length code",i.mode=n;break e}E=65535&w,k&=15,k&&(k>m&&(g+=x[o++]<<m,m+=8),E+=g&(1<<k)-1,g>>>=k,m-=k),15>m&&(g+=x[o++]<<m,m+=8,g+=x[o++]<<m,m+=8),w=v[g&_];n:for(;;){if(k=w>>>24,g>>>=k,m-=k,k=w>>>16&255,!(16&k)){if(0===(64&k)){w=v[(65535&w)+(g&(1<<k)-1)];continue n}e.msg="invalid distance code",i.mode=n;break e}if(S=65535&w,k&=15,k>m&&(g+=x[o++]<<m,m+=8,k>m&&(g+=x[o++]<<m,m+=8)),S+=g&(1<<k)-1,S>f){e.msg="invalid distance too far back",i.mode=n;break e}if(g>>>=k,m-=k,k=a-u,S>k){if(k=S-k,k>h&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(A=0,T=p,0===d){if(A+=l-k,E>k){E-=k;do R[a++]=p[A++];while(--k);A=a-S,T=R}}else if(k>d){if(A+=l+d-k,k-=d,E>k){E-=k;do R[a++]=p[A++];while(--k);if(A=0,E>d){k=d,E-=k;do R[a++]=p[A++];
while(--k);A=a-S,T=R}}}else if(A+=d-k,E>k){E-=k;do R[a++]=p[A++];while(--k);A=a-S,T=R}for(;E>2;)R[a++]=T[A++],R[a++]=T[A++],R[a++]=T[A++],E-=3;E&&(R[a++]=T[A++],E>1&&(R[a++]=T[A++]))}else{A=a-S;do R[a++]=R[A++],R[a++]=R[A++],R[a++]=R[A++],E-=3;while(E>2);E&&(R[a++]=R[A++],E>1&&(R[a++]=R[A++]))}break}}break}}while(s>o&&c>a);E=m>>3,o-=E,m-=E<<3,g&=(1<<m)-1,e.next_in=o,e.next_out=a,e.avail_in=s>o?5+(s-o):5-(o-s),e.avail_out=c>a?257+(c-a):257-(a-c),i.hold=g,i.bits=m}},{}],71:[function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(ge),t.distcode=t.distdyn=new v.Buf32(me),t.sane=1,t.back=-1,C):B}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):B}function a(e,t){var n,r;return e&&e.state?(r=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?B:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,s(e))):B}function u(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=a(e,t),n!==C&&(e.state=null),n):B}function c(e){return u(e,ve)}function f(e){if(be){var t;for(m=new v.Buf32(512),y=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(k(S,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;k(A,e.lens,0,32,y,0,e.work,{bits:5}),be=!1}e.lencode=m,e.lenbits=9,e.distcode=y,e.distbits=5}function l(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),r>=o.wsize?(v.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),v.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(v.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(e,t){var n,i,o,s,a,u,c,h,d,p,g,m,y,ge,me,ye,ve,be,_e,we,ke,Ee,Se,Ae,Te=0,xe=new v.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return B;n=e.state,n.mode===J&&(n.mode=V),a=e.next_out,o=e.output,c=e.avail_out,s=e.next_in,i=e.input,u=e.avail_in,h=n.hold,d=n.bits,p=u,g=c,Ee=C;e:for(;;)switch(n.mode){case M:if(0===n.wrap){n.mode=V;break}for(;16>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(2&n.wrap&&35615===h){n.check=0,xe[0]=255&h,xe[1]=h>>>8&255,n.check=_(n.check,xe,2,0),h=0,d=0,n.mode=L;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=he;break}if((15&h)!==j){e.msg="unknown compression method",n.mode=he;break}if(h>>>=4,d-=4,ke=(15&h)+8,0===n.wbits)n.wbits=ke;else if(ke>n.wbits){e.msg="invalid window size",n.mode=he;break}n.dmax=1<<ke,e.adler=n.check=1,n.mode=512&h?Y:J,h=0,d=0;break;case L:for(;16>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(n.flags=h,(255&n.flags)!==j){e.msg="unknown compression method",n.mode=he;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=he;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,n.check=_(n.check,xe,2,0)),h=0,d=0,n.mode=U;case U:for(;32>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}n.head&&(n.head.time=h),512&n.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,xe[2]=h>>>16&255,xe[3]=h>>>24&255,n.check=_(n.check,xe,4,0)),h=0,d=0,n.mode=F;case F:for(;16>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,n.check=_(n.check,xe,2,0)),h=0,d=0,n.mode=z;case z:if(1024&n.flags){for(;16>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,n.check=_(n.check,xe,2,0)),h=0,d=0}else n.head&&(n.head.extra=null);n.mode=q;case q:if(1024&n.flags&&(m=n.length,m>u&&(m=u),m&&(n.head&&(ke=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v.arraySet(n.head.extra,i,s,m,ke)),512&n.flags&&(n.check=_(n.check,i,m,s)),u-=m,s+=m,n.length-=m),n.length))break e;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===u)break e;m=0;do ke=i[s+m++],n.head&&ke&&n.length<65536&&(n.head.name+=String.fromCharCode(ke));while(ke&&u>m);if(512&n.flags&&(n.check=_(n.check,i,m,s)),u-=m,s+=m,ke)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===u)break e;m=0;do ke=i[s+m++],n.head&&ke&&n.length<65536&&(n.head.comment+=String.fromCharCode(ke));while(ke&&u>m);if(512&n.flags&&(n.check=_(n.check,i,m,s)),u-=m,s+=m,ke)break e}else n.head&&(n.head.comment=null);n.mode=K;case K:if(512&n.flags){for(;16>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=he;break}h=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=J;break;case Y:for(;32>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}e.adler=n.check=r(h),h=0,d=0,n.mode=G;case G:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,n.hold=h,n.bits=d,D;e.adler=n.check=1,n.mode=J;case J:if(t===x||t===R)break e;case V:if(n.last){h>>>=7&d,d-=7&d,n.mode=ce;break}for(;3>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}switch(n.last=1&h,h>>>=1,d-=1,3&h){case 0:n.mode=$;break;case 1:if(f(n),n.mode=ne,t===R){h>>>=2,d-=2;break e}break;case 2:n.mode=Q;break;case 3:e.msg="invalid block type",n.mode=he}h>>>=2,d-=2;break;case $:for(h>>>=7&d,d-=7&d;32>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=he;break}if(n.length=65535&h,h=0,d=0,n.mode=Z,t===R)break e;case Z:n.mode=X;case X:if(m=n.length){if(m>u&&(m=u),m>c&&(m=c),0===m)break e;v.arraySet(o,i,s,m,a),u-=m,s+=m,c-=m,a+=m,n.length-=m;break}n.mode=J;break;case Q:for(;14>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(n.nlen=(31&h)+257,h>>>=5,d-=5,n.ndist=(31&h)+1,h>>>=5,d-=5,n.ncode=(15&h)+4,h>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=he;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;3>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}n.lens[Re[n.have++]]=7&h,h>>>=3,d-=3}for(;n.have<19;)n.lens[Re[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},Ee=k(E,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid code lengths set",n.mode=he;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Te=n.lencode[h&(1<<n.lenbits)-1],me=Te>>>24,ye=Te>>>16&255,ve=65535&Te,!(d>=me);){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(16>ve)h>>>=me,d-=me,n.lens[n.have++]=ve;else{if(16===ve){for(Ae=me+2;Ae>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(h>>>=me,d-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=he;break}ke=n.lens[n.have-1],m=3+(3&h),h>>>=2,d-=2}else if(17===ve){for(Ae=me+3;Ae>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}h>>>=me,d-=me,ke=0,m=3+(7&h),h>>>=3,d-=3}else{for(Ae=me+7;Ae>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}h>>>=me,d-=me,ke=0,m=11+(127&h),h>>>=7,d-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=he;break}for(;m--;)n.lens[n.have++]=ke}}if(n.mode===he)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=he;break}if(n.lenbits=9,Se={bits:n.lenbits},Ee=k(S,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid literal/lengths set",n.mode=he;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},Ee=k(A,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,Ee){e.msg="invalid distances set",n.mode=he;break}if(n.mode=ne,t===R)break e;case ne:n.mode=re;case re:if(u>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,n.hold=h,n.bits=d,w(e,g),a=e.next_out,o=e.output,c=e.avail_out,s=e.next_in,i=e.input,u=e.avail_in,h=n.hold,d=n.bits,n.mode===J&&(n.back=-1);break}for(n.back=0;Te=n.lencode[h&(1<<n.lenbits)-1],me=Te>>>24,ye=Te>>>16&255,ve=65535&Te,!(d>=me);){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(ye&&0===(240&ye)){for(be=me,_e=ye,we=ve;Te=n.lencode[we+((h&(1<<be+_e)-1)>>be)],me=Te>>>24,ye=Te>>>16&255,ve=65535&Te,!(d>=be+me);){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}h>>>=be,d-=be,n.back+=be}if(h>>>=me,d-=me,n.back+=me,n.length=ve,0===ye){n.mode=ue;break}if(32&ye){n.back=-1,n.mode=J;break}if(64&ye){e.msg="invalid literal/length code",n.mode=he;break}n.extra=15&ye,n.mode=ie;case ie:if(n.extra){for(Ae=n.extra;Ae>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Te=n.distcode[h&(1<<n.distbits)-1],me=Te>>>24,ye=Te>>>16&255,ve=65535&Te,!(d>=me);){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(0===(240&ye)){for(be=me,_e=ye,we=ve;Te=n.distcode[we+((h&(1<<be+_e)-1)>>be)],me=Te>>>24,ye=Te>>>16&255,ve=65535&Te,!(d>=be+me);){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}h>>>=be,d-=be,n.back+=be}if(h>>>=me,d-=me,n.back+=me,64&ye){e.msg="invalid distance code",n.mode=he;break}n.offset=ve,n.extra=15&ye,n.mode=se;case se:if(n.extra){for(Ae=n.extra;Ae>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=he;break}n.mode=ae;case ae:if(0===c)break e;if(m=g-c,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=he;break}m>n.wnext?(m-=n.wnext,y=n.wsize-m):y=n.wnext-m,m>n.length&&(m=n.length),ge=n.window}else ge=o,y=a-n.offset,m=n.length;m>c&&(m=c),c-=m,n.length-=m;do o[a++]=ge[y++];while(--m);0===n.length&&(n.mode=re);break;case ue:if(0===c)break e;o[a++]=n.length,c--,n.mode=re;break;case ce:if(n.wrap){for(;32>d;){if(0===u)break e;u--,h|=i[s++]<<d,d+=8}if(g-=c,e.total_out+=g,n.total+=g,g&&(e.adler=n.check=n.flags?_(n.check,o,g,a-g):b(n.check,o,g,a-g)),g=c,(n.flags?h:r(h))!==n.check){e.msg="incorrect data check",n.mode=he;break}h=0,d=0}n.mode=fe;case fe:if(n.wrap&&n.flags){for(;32>d;){if(0===u)break e;u--,h+=i[s++]<<d,d+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=he;break}h=0,d=0}n.mode=le;case le:Ee=O;break e;case he:Ee=I;break e;case de:return P;case pe:default:return B}return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,n.hold=h,n.bits=d,(n.wsize||g!==e.avail_out&&n.mode<he&&(n.mode<ce||t!==T))&&l(e,e.output,e.next_out,g-e.avail_out)?(n.mode=de,P):(p-=e.avail_in,g-=e.avail_out,e.total_in+=p,e.total_out+=g,n.total+=g,n.wrap&&g&&(e.adler=n.check=n.flags?_(n.check,o,g,e.next_out-g):b(n.check,o,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===J?128:0)+(n.mode===ne||n.mode===Z?256:0),(0===p&&0===g||t===T)&&Ee===C&&(Ee=N),Ee)}function d(e){if(!e||!e.state)return B;var t=e.state;return t.window&&(t.window=null),e.state=null,C}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?B:(n.head=t,t.done=!1,C)):B}function g(e,t){var n,r,i,o=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==G?B:n.mode===G&&(r=1,r=b(r,t,o,0),r!==n.check)?I:(i=l(e,t,o,o))?(n.mode=de,P):(n.havedict=1,C)):B}var m,y,v=e("../utils/common"),b=e("./adler32"),_=e("./crc32"),w=e("./inffast"),k=e("./inftrees"),E=0,S=1,A=2,T=4,x=5,R=6,C=0,O=1,D=2,B=-2,I=-3,P=-4,N=-5,j=8,M=1,L=2,U=3,F=4,z=5,q=6,H=7,W=8,K=9,Y=10,G=11,J=12,V=13,$=14,Z=15,X=16,Q=17,ee=18,te=19,ne=20,re=21,ie=22,oe=23,se=24,ae=25,ue=26,ce=27,fe=28,le=29,he=30,de=31,pe=32,ge=852,me=592,ye=15,ve=ye,be=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=o,n.inflateInit=c,n.inflateInit2=u,n.inflate=h,n.inflateEnd=d,n.inflateGetHeader=p,n.inflateSetDictionary=g,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":63,"./adler32":65,"./crc32":67,"./inffast":70,"./inftrees":72}],72:[function(e,t){"use strict";var n=e("../utils/common"),r=15,i=852,o=592,s=0,a=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,d,p,g,m,y,v){var b,_,w,k,E,S,A,T,x,R=v.bits,C=0,O=0,D=0,B=0,I=0,P=0,N=0,j=0,M=0,L=0,U=null,F=0,z=new n.Buf16(r+1),q=new n.Buf16(r+1),H=null,W=0;for(C=0;r>=C;C++)z[C]=0;for(O=0;p>O;O++)z[t[d+O]]++;for(I=R,B=r;B>=1&&0===z[B];B--);if(I>B&&(I=B),0===B)return g[m++]=20971520,g[m++]=20971520,v.bits=1,0;for(D=1;B>D&&0===z[D];D++);for(D>I&&(I=D),j=1,C=1;r>=C;C++)if(j<<=1,j-=z[C],0>j)return-1;if(j>0&&(e===s||1!==B))return-1;for(q[1]=0,C=1;r>C;C++)q[C+1]=q[C]+z[C];for(O=0;p>O;O++)0!==t[d+O]&&(y[q[t[d+O]]++]=O);if(e===s?(U=H=y,S=19):e===a?(U=c,F-=257,H=f,W-=257,S=256):(U=l,H=h,S=-1),L=0,O=0,C=D,E=m,P=I,N=0,w=-1,M=1<<I,k=M-1,e===a&&M>i||e===u&&M>o)return 1;for(var K=0;;){K++,A=C-N,y[O]<S?(T=0,x=y[O]):y[O]>S?(T=H[W+y[O]],x=U[F+y[O]]):(T=96,x=0),b=1<<C-N,_=1<<P,D=_;do _-=b,g[E+(L>>N)+_]=A<<24|T<<16|x|0;while(0!==_);for(b=1<<C-1;L&b;)b>>=1;if(0!==b?(L&=b-1,L+=b):L=0,O++,0===--z[C]){if(C===B)break;C=t[d+y[O]]}if(C>I&&(L&k)!==w){for(0===N&&(N=I),E+=D,P=C-N,j=1<<P;B>P+N&&(j-=z[P+N],!(0>=j));)P++,j<<=1;if(M+=1<<P,e===a&&M>i||e===u&&M>o)return 1;w=L&k,g[w]=I<<24|P<<16|E-m|0}}return 0!==L&&(g[E+L]=C-N<<24|64<<16|0),v.bits=I,0}},{"../utils/common":63}],73:[function(e,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],74:[function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return 256>e?ue[e]:ue[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,n){e.bi_valid>V-n?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>V-e.bi_valid,e.bi_valid+=n-V):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function c(e,t,n){u(e,n[2*t],n[2*t+1])}function f(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function l(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var n,r,i,o,s,a,u=t.dyn_tree,c=t.max_code,f=t.stat_desc.static_tree,l=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;J>=o;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;G>n;n++)r=e.heap[n],o=u[2*u[2*r+1]+1]+1,o>p&&(o=p,g++),u[2*r+1]=o,r>c||(e.bl_count[o]++,s=0,r>=d&&(s=h[r-d]),a=u[2*r],e.opt_len+=a*(o+s),l&&(e.static_len+=a*(f[2*r+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--n],i>c||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}function d(e,t,n){var r,i,o=new Array(J+1),s=0;for(r=1;J>=r;r++)o[r]=s=s+n[r-1]<<1;for(i=0;t>=i;i++){var a=e[2*i+1];0!==a&&(e[2*i]=f(o[a]++,a))}}function p(){var e,t,n,r,o,s=new Array(J+1);for(n=0,r=0;q-1>r;r++)for(fe[r]=n,e=0;e<1<<te[r];e++)ce[n++]=r;for(ce[n-1]=r,o=0,r=0;16>r;r++)for(le[r]=o,e=0;e<1<<ne[r];e++)ue[o++]=r;for(o>>=7;K>r;r++)for(le[r]=o<<7,e=0;e<1<<ne[r]-7;e++)ue[256+o++]=r;for(t=0;J>=t;t++)s[t]=0;for(e=0;143>=e;)se[2*e+1]=8,e++,s[8]++;for(;255>=e;)se[2*e+1]=9,e++,s[9]++;for(;279>=e;)se[2*e+1]=7,e++,s[7]++;for(;287>=e;)se[2*e+1]=8,e++,s[8]++;for(d(se,W+1,s),e=0;K>e;e++)ae[2*e+1]=5,ae[2*e]=f(e,5);he=new i(se,te,H+1,W,J),de=new i(ae,ne,0,K,J),pe=new i(new Array(0),re,0,Y,$)}function g(e){var t;for(t=0;W>t;t++)e.dyn_ltree[2*t]=0;for(t=0;K>t;t++)e.dyn_dtree[2*t]=0;for(t=0;Y>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function y(e,t,n,r){m(e),r&&(a(e,n),a(e,~n)),B.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function v(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&v(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!v(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function _(e,t,n){var r,i,o,a,f=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],i=e.pending_buf[e.l_buf+f],f++,0===r?c(e,i,t):(o=ce[i],c(e,o+H+1,t),a=te[o],0!==a&&(i-=fe[o],u(e,i,a)),r--,o=s(r),c(e,o,n),a=ne[o],0!==a&&(r-=le[o],u(e,r,a)));while(f<e.last_lit);c(e,Z,t)}function w(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=G,n=0;u>n;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>c?++c:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)b(e,o,n);i=u;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,b(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),d(o,c,e.bl_count)}function k(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;n>=r;r++)i=s,s=t[2*(r+1)+1],++a<u&&i===s||(c>a?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*X]++):10>=a?e.bl_tree[2*Q]++:e.bl_tree[2*ee]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function E(e,t,n){var r,i,o=-1,s=t[1],a=0,f=7,l=4;for(0===s&&(f=138,l=3),r=0;n>=r;r++)if(i=s,s=t[2*(r+1)+1],!(++a<f&&i===s)){if(l>a){do c(e,i,e.bl_tree);while(0!==--a)}else 0!==i?(i!==o&&(c(e,i,e.bl_tree),a--),c(e,X,e.bl_tree),u(e,a-3,2)):10>=a?(c(e,Q,e.bl_tree),u(e,a-3,3)):(c(e,ee,e.bl_tree),u(e,a-11,7));a=0,o=i,0===s?(f=138,l=3):i===s?(f=6,l=3):(f=7,l=4)}}function S(e){var t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=Y-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function A(e,t,n,r){var i;for(u(e,t-257,5),u(e,n-1,5),u(e,r-4,4),i=0;r>i;i++)u(e,e.bl_tree[2*ie[i]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,n-1)}function T(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return P;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return N;for(t=32;H>t;t++)if(0!==e.dyn_ltree[2*t])return N;return P}function x(e){ge||(p(),ge=!0),e.l_desc=new o(e.dyn_ltree,he),e.d_desc=new o(e.dyn_dtree,de),e.bl_desc=new o(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,g(e)}function R(e,t,n,r){u(e,(M<<1)+(r?1:0),3),y(e,t,n,!0)}function C(e){u(e,L<<1,3),c(e,Z,se),l(e)}function O(e,t,n,r){var i,o,s=0;e.level>0?(e.strm.data_type===j&&(e.strm.data_type=T(e)),w(e,e.l_desc),w(e,e.d_desc),s=S(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,i>=o&&(i=o)):i=o=n+5,i>=n+4&&-1!==t?R(e,t,n,r):e.strategy===I||o===i?(u(e,(L<<1)+(r?1:0),3),_(e,se,ae)):(u(e,(U<<1)+(r?1:0),3),A(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),_(e,e.dyn_ltree,e.dyn_dtree)),g(e),r&&m(e)}function D(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ce[n]+H+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1}var B=e("../utils/common"),I=4,P=0,N=1,j=2,M=0,L=1,U=2,F=3,z=258,q=29,H=256,W=H+1+q,K=30,Y=19,G=2*W+1,J=15,V=16,$=7,Z=256,X=16,Q=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,se=new Array(2*(W+2));r(se);var ae=new Array(2*K);r(ae);var ue=new Array(oe);r(ue);var ce=new Array(z-F+1);r(ce);var fe=new Array(q);r(fe);var le=new Array(K);r(le);var he,de,pe,ge=!1;n._tr_init=x,n._tr_stored_block=R,n._tr_flush_block=O,n._tr_tally=D,n._tr_align=C},{"../utils/common":63}],75:[function(e,t){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}],76:[function(e,t){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],77:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;i>r;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],78:[function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=n.exec(e||""),a={},u=14;u--;)a[r[u]]=s[u]||"";return-1!=i&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],79:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,i="/"===s.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===s(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),s=Math.min(i.length,o.length),a=s,u=0;s>u;u++)if(i[u]!==o[u]){a=u;break}for(var c=[],u=a;u<i.length;u++)c.push("..");return c=c.concat(o.slice(a)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:81}],80:[function(e,t){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?n:e.nextTick}).call(this,e("_process"))},{_process:81}],81:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){g&&d&&(g=!1,d.length?p=d.concat(p):m=-1,p.length&&a())}function a(){if(!g){var e=i(s);g=!0;for(var t=p.length;t;){for(d=p,p=[];++m<t;)d&&d[m].run();m=-1,t=p.length}d=null,g=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,l,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,p=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||g||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],82:[function(e,t){(function(e){function n(t){return null==t&&(t=e.Promise),this instanceof n?r(t,this):r(t,Object.create(n.prototype))}function r(e,t){return t.promise=new e(function(e,n){t.resolve=e,t.reject=n}),t}t.exports=n,n.defer=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],83:[function(e,t){"use strict";t.exports=e("./lib/core.js"),e("./lib/done.js"),e("./lib/es6-extensions.js"),e("./lib/node-extensions.js")},{"./lib/core.js":84,"./lib/done.js":85,"./lib/es6-extensions.js":86,"./lib/node-extensions.js":87}],84:[function(e,t){"use strict";function n(e){function t(e){return null===u?void f.push(e):void o(function(){var t=u?e.onFulfilled:e.onRejected;if(null===t)return void(u?e.resolve:e.reject)(c);var n;try{n=t(c)}catch(r){return void e.reject(r)}e.resolve(n)})}function n(e){try{if(e===l)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void i(t.bind(e),n,s)}u=!0,c=e,a()}catch(r){s(r)}}function s(e){u=!1,c=e,a()}function a(){for(var e=0,n=f.length;n>e;e++)t(f[e]);f=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var u=null,c=null,f=[],l=this;this.then=function(e,n){return new l.constructor(function(i,o){t(new r(e,n,i,o))})},i(e,n,s)}function r(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function i(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(i){if(r)return;r=!0,n(i)}}var o=e("asap");t.exports=n},{asap:8}],85:[function(e,t){"use strict";var n=e("./core.js"),r=e("asap");t.exports=n,n.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){r(function(){throw e})})}},{"./core.js":84,asap:8}],86:[function(e,t){"use strict";function n(e){this.then=function(t){return"function"!=typeof t?this:new r(function(n,r){i(function(){try{n(t(e))}catch(i){r(i)}})})}}var r=e("./core.js"),i=e("asap");t.exports=r,n.prototype=r.prototype;var o=new n(!0),s=new n(!1),a=new n(null),u=new n(void 0),c=new n(0),f=new n("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return u;if(e===!0)return o;if(e===!1)return s;if(0===e)return c;if(""===e)return f;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(i){return new r(function(e,t){t(i)})}return new n(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function r(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(o,e)},n)}t[o]=s,0===--i&&e(t)}catch(u){n(u)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":84,asap:8}],87:[function(e,t){"use strict";var n=e("./core.js"),r=e("asap");t.exports=n,n.denodeify=function(e,t){return t=t||1/0,function(){var r=this,i=Array.prototype.slice.call(arguments);return new n(function(n,o){for(;i.length&&i.length>t;)i.pop();i.push(function(e,t){e?o(e):n(t)});var s=e.apply(r,i);!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then||n(s)})}},n.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),i="function"==typeof t[t.length-1]?t.pop():null,o=this;try{return e.apply(this,arguments).nodeify(i,o)}catch(s){if(null===i||"undefined"==typeof i)return new n(function(e,t){t(s)});r(function(){i.call(o,s)})}}},n.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){r(function(){e.call(t,null,n)})},function(n){r(function(){e.call(t,n)})})}},{"./core.js":84,asap:8}],88:[function(e,t,n){(function(e){!function(r){function i(e){throw new RangeError(I[e])}function o(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(B,".");var i=e.split("."),s=o(i,t).join(".");return r+s}function a(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:k}function f(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function l(e,t,n){var r=0;for(e=n?N(e/T):e>>1,e+=N(e/t);e>P*S>>1;r+=k)e=N(e/P);return N(r+(P+1)*e/(e+A))}function h(e){
var t,n,r,o,s,a,f,h,d,p,g=[],m=e.length,y=0,v=R,b=x;for(n=e.lastIndexOf(C),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&i("not-basic"),g.push(e.charCodeAt(r));for(o=n>0?n+1:0;m>o;){for(s=y,a=1,f=k;o>=m&&i("invalid-input"),h=c(e.charCodeAt(o++)),(h>=k||h>N((w-y)/a))&&i("overflow"),y+=h*a,d=b>=f?E:f>=b+S?S:f-b,!(d>h);f+=k)p=k-d,a>N(w/p)&&i("overflow"),a*=p;t=g.length+1,b=l(y-s,t,0==s),N(y/t)>w-v&&i("overflow"),v+=N(y/t),y%=t,g.splice(y++,0,v)}return u(g)}function d(e){var t,n,r,o,s,u,c,h,d,p,g,m,y,v,b,_=[];for(e=a(e),m=e.length,t=R,n=0,s=x,u=0;m>u;++u)g=e[u],128>g&&_.push(j(g));for(r=o=_.length,o&&_.push(C);m>r;){for(c=w,u=0;m>u;++u)g=e[u],g>=t&&c>g&&(c=g);for(y=r+1,c-t>N((w-n)/y)&&i("overflow"),n+=(c-t)*y,t=c,u=0;m>u;++u)if(g=e[u],t>g&&++n>w&&i("overflow"),g==t){for(h=n,d=k;p=s>=d?E:d>=s+S?S:d-s,!(p>h);d+=k)b=h-p,v=k-p,_.push(j(f(p+b%v,0))),h=N(b/v);_.push(j(f(h,0))),s=l(n,y,r==o),n=0,++r}++n,++t}return _.join("")}function p(e){return s(e,function(e){return O.test(e)?h(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return D.test(e)?"xn--"+d(e):e})}var m="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof t&&t&&!t.nodeType&&t,v="object"==typeof e&&e;(v.global===v||v.window===v||v.self===v)&&(r=v);var b,_,w=2147483647,k=36,E=1,S=26,A=38,T=700,x=72,R=128,C="-",O=/^xn--/,D=/[^\x20-\x7E]/,B=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=k-E,N=Math.floor,j=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:a,encode:u},decode:h,encode:d,toASCII:g,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&y)if(t.exports==m)y.exports=b;else for(_ in b)b.hasOwnProperty(_)&&(m[_]=b[_]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],89:[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,o){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;c>f;++f){var l,h,d,p,g=e[f].replace(a,"%20"),m=g.indexOf(i);m>=0?(l=g.substr(0,m),h=g.substr(m+1)):(l=g,h=""),d=decodeURIComponent(l),p=decodeURIComponent(h),n(s,d)?r(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],90:[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?n(o(e),function(o){var a=encodeURIComponent(r(o))+s;return i(e[o])?n(e[o],function(e){return a+encodeURIComponent(r(e))}).join(t):a+encodeURIComponent(r(e[o]))}).join(t):a?encodeURIComponent(r(a))+s+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],91:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":89,"./encode":90}],92:[function(e,t){(function(e,n,r){"use strict";function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(t,i){if(t>65536)throw new Error("requested too many random bytes");var o=new n.Uint8Array(t);t>0&&s.getRandomValues(o);var a=new r(o.buffer);return"function"==typeof i?e.nextTick(function(){i(null,a)}):a}var s=n.crypto||n.msCrypto;t.exports=s&&s.getRandomValues?o:i}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{_process:81,buffer:16}],93:[function(e,t){"use strict";function n(e){return this instanceof n?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new n(e)}function r(){this.allowHalfOpen||this._writableState.ended||s(i,this)}function i(e){e.end()}var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=n;var s=e("process-nextick-args"),a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(n,u);for(var f=o(c.prototype),l=0;l<f.length;l++){var h=f[l];n.prototype[h]||(n.prototype[h]=c.prototype[h])}},{"./_stream_readable":95,"./_stream_writable":97,"core-util-is":21,inherits:54,"process-nextick-args":80}],94:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":96,"core-util-is":21,inherits:54}],95:[function(e,t){(function(n){"use strict";function r(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function i(t,n){C=C||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof C&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(U||(U=e("string_decoder/").StringDecoder),this.decoder=new U(t.encoding),this.encoding=t.encoding)}function o(t){return C=C||e("./_stream_duplex"),this instanceof o?(this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void B.call(this)):new o(t)}function s(e,t,n,r,i){var o=f(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var c;!t.decoder||i||r||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e))),p(e,t)}else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=z?e=z:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function f(e,t){var n=null;return P.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(L("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?O(d,e):d(e))}function d(e){L("emit readable"),e.emit("readable"),_(e)}function p(e,t){t.readingMore||(t.readingMore=!0,O(g,e,t))}function g(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(L("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;L("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,_(e))}}function y(e){L("readable nexttick read 0"),e.read(0)}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,O(b,e,t))}function b(e,t){t.reading||(L("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),_(e),t.flowing&&!t.reading&&e.read(0)}function _(e){var t=e._readableState;for(L("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=k(e,t.buffer,t.decoder),n}function k(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?E(e,t):S(e,t),r}function E(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(i+=s===o.length?o:o.slice(0,e),e-=s,0===e){s===o.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function S(e,t){var n=N.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),e-=s,0===e){s===o.length?(++i,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,O(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function x(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function R(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=o;var C,O=e("process-nextick-args"),D=e("isarray");o.ReadableState=i;var B,I=(e("events").EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{B=e("stream")}catch(t){}finally{B||(B=e("events").EventEmitter)}}();var P=e("buffer").Buffer,N=e("buffer-shims"),j=e("core-util-is");j.inherits=e("inherits");var M=e("util"),L=void 0;L=M&&M.debuglog?M.debuglog("stream"):function(){};var U,F=e("./internal/streams/BufferList");j.inherits(o,B),o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=N.from(e,t),t="")),s(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return U||(U=e("string_decoder/").StringDecoder),this._readableState.decoder=new U(t),this._readableState.encoding=t,this};var z=8388608;o.prototype.read=function(e){L("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return L("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&A(this),null;var r=t.needReadable;L("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,L("length less than watermark",r)),t.ended||t.reading?(r=!1,L("reading or ended",r)):r&&(L("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(n,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function i(e){L("onunpipe"),e===h&&s()}function o(){L("onend"),e.end()}function s(){L("cleanup"),e.removeListener("close",c),e.removeListener("finish",f),e.removeListener("drain",y),e.removeListener("error",u),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",a),v=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||y()}function a(t){L("ondata"),b=!1;var n=e.write(t);!1!==n||b||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==R(d.pipes,e))&&!v&&(L("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,b=!0),h.pause())}function u(t){L("onerror",t),l(),e.removeListener("error",u),0===I(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",f),l()}function f(){L("onfinish"),e.removeListener("close",c),l()}function l(){L("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,L("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,g=p?o:s;d.endEmitted?O(g):h.once("end",g),e.on("unpipe",i);var y=m(h);e.on("drain",y);var v=!1,b=!1;return h.on("data",a),r(e,"error",u),e.once("close",c),e.once("finish",f),e.emit("pipe",h),d.flowing||(L("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var o=R(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=B.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&h(this,r):O(y,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(L("resume"),e.flowing=!0,v(this,e)),this},o.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(L("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(L("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){L("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":93,"./internal/streams/BufferList":98,_process:81,buffer:16,"buffer-shims":15,"core-util-is":21,events:47,inherits:54,isarray:57,"process-nextick-args":80,"string_decoder/":119,util:14}],96:[function(e,t){"use strict";function n(e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":93,"core-util-is":21,inherits:54}],97:[function(e,t){(function(n){"use strict";function r(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(t,n){E=E||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof E&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function s(t){return E=E||e("./_stream_duplex"),D.call(s,this)||this instanceof E?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void x.call(this)):new s(t)}function a(e,t){var n=new Error("write after end");e.emit("error",n),S(t,n)}function u(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):C.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),S(r,o),i=!1),i}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=O.from(t,n)),t}function f(e,t,n,r,o){n=c(t,n,r),C.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,r,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,n,r,o);return a}function l(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,r,i){--t.pendingcb,n?S(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(d(n),t)h(e,n,r,t,i);else{var o=v(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?A(g,e,n,o,i):g(e,n,o,i)}}function g(e,t,n,r){n||m(e,t),t.pendingcb--,r(),_(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;l(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;n;){var a=n.chunk,u=n.encoding,c=n.callback,f=t.objectMode?1:a.length;if(l(e,t,!1,f,a,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _(e,t){var n=v(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function w(e,t,n){t.ending=!0,_(e,t),n&&(t.finished?S(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var E,S=e("process-nextick-args"),A=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:S;s.WritableState=o;var T=e("core-util-is");T.inherits=e("inherits");var x,R={deprecate:e("util-deprecate")};!function(){try{x=e("stream")}catch(t){}finally{x||(x=e("events").EventEmitter)}}();var C=e("buffer").Buffer,O=e("buffer-shims");T.inherits(s,x),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:R.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var D;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return D.call(this,e)?!0:e&&e._writableState instanceof o}})):D=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),C.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?a(this,n):u(this,i,e,n)&&(i.pendingcb++,o=f(this,i,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":93,_process:81,buffer:16,"buffer-shims":15,"core-util-is":21,events:47,inherits:54,"process-nextick-args":80,"util-deprecate":133}],98:[function(e,t){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var r=(e("buffer").Buffer,e("buffer-shims"));t.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},n.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t}},{buffer:16,"buffer-shims":15}],99:[function(e,t,n){(function(r){var i=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=i||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":93,"./lib/_stream_passthrough.js":94,"./lib/_stream_readable.js":95,"./lib/_stream_transform.js":96,"./lib/_stream_writable.js":97,_process:81}],100:[function(e,t){(function(n){function r(e){var t=this;if(!(t instanceof r))return new r(e);if(t.channelName=e.initiator?e.channelName||u(20).toString("hex"):null,t._debug("new peer %o",e),e||(e={}),e.allowHalfOpen=!1,null==e.highWaterMark&&(e.highWaterMark=1048576),c.Duplex.call(t,e),t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||r.channelConfig,t.config=e.config||r.config,t.constraints=e.constraints||r.constraints,t.offerConstraints=e.offerConstraints||{},t.answerConstraints=e.answerConstraints||{},t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0!==e.trickle?e.trickle:!0,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._isWrtc=!!e.wrtc,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:s(),!t._wrtc)throw new Error("undefined"==typeof window?"No WebRTC support: Specify `opts.wrtc` option in this environment":"No WebRTC support: Not a supported browser");if(t._maxBufferedAmount=e.highWaterMark,t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._pc.oniceconnectionstatechange=function(){t._onIceConnectionStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.stream&&t._pc.addStream(t.stream),"ontrack"in t._pc?t._pc.ontrack=function(e){t._onTrack(e)}:t._pc.onaddstream=function(e){t._onAddStream(e)},t.initiator){t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)});var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},"undefined"!=typeof window&&window.webkitRTCPeerConnection||t._pc.onnegotiationneeded()}else t._pc.ondatachannel=function(e){t._setupData(e)};t.on("finish",function(){t.connected?setTimeout(function(){t._destroy()},100):t.once("connect",function(){setTimeout(function(){t._destroy()},100)})})}function i(){}t.exports=r;var o=e("debug")("simple-peer"),s=e("get-browser-rtc"),a=e("inherits"),u=e("randombytes"),c=e("readable-stream");a(r,c.Duplex),r.WEBRTC_SUPPORT=!!s(),r.config={iceServers:[{url:"stun:23.21.150.121",urls:"stun:23.21.150.121"}]},r.constraints={},r.channelConfig={},Object.defineProperty(r.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),r.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}},r.prototype.signal=function(e){function t(e){try{n._pc.addIceCandidate(new n._wrtc.RTCIceCandidate(e),i,function(e){n._onError(e)})}catch(t){n._destroy(new Error("error adding candidate: "+t.message))}}var n=this;if(n.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(r){e={}}n._debug("signal()"),e.sdp&&n._pc.setRemoteDescription(new n._wrtc.RTCSessionDescription(e),function(){n.destroyed||("offer"===n._pc.remoteDescription.type&&n._createAnswer(),n._pendingCandidates.forEach(t),n._pendingCandidates=[])},function(e){n._onError(e)}),e.candidate&&(n._pc.remoteDescription?t(e.candidate):n._pendingCandidates.push(e.candidate)),e.sdp||e.candidate||n._destroy(new Error("signal() called with invalid signal data"))},r.prototype.send=function(e){var t=this;n.isBuffer(e)&&t._isWrtc&&(e=new Uint8Array(e));var r=e.length||e.byteLength||e.size;t._channel.send(e),t._debug("write: %d bytes",r)},r.prototype.destroy=function(e){var t=this;t._destroy(null,e)},r.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&e.message),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._chunk=null,n._cb=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"ontrack"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},r.prototype._setupData=function(e){var t=this;t._channel=e.channel,t.channelName=t._channel.label,t._channel.binaryType="arraybuffer",t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()}},r.prototype._read=function(){},r.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(i){return r._onError(i)}r._channel.bufferedAmount>r._maxBufferedAmount?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},r.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){if(!e.destroyed){t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,i,function(t){e._onError(t)});var n=function(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})};e.trickle||e._iceComplete?n():e.once("_iceComplete",n)}},function(t){e._onError(t)},e.offerConstraints)},r.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){if(!e.destroyed){t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,i,function(t){e._onError(t)});var n=function(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})};e.trickle||e._iceComplete?n():e.once("_iceComplete",n)}},function(t){e._onError(t)},e.answerConstraints)},r.prototype._onIceConnectionStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceGatheringState,n=e._pc.iceConnectionState;e._debug("iceConnectionStateChange %s %s",t,n),e.emit("iceConnectionStateChange",t,n),("connected"===n||"completed"===n)&&(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===n&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===n&&e._destroy(),"closed"===n&&e._destroy()}},r.prototype.getStats=function(e){var t=this;t._pc.getStats?"undefined"!=typeof window&&window.mozRTCPeerConnection?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){
n.push(e)}),e(n)},function(e){t._onError(e)}):t._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(n)}):e([])},r.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,e.getStats(function(t){function n(t){var n=i[t.localCandidateId],o=r[t.remoteCandidateId];n?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1])),e._debug("connect local: %s:%s",e.localAddress,e.localPort),o?(e.remoteAddress=o.ipAddress,e.remotePort=Number(o.portNumber),e.remoteFamily="IPv4"):"string"==typeof t.googRemoteAddress&&(o=t.googRemoteAddress.split(":"),e.remoteAddress=o[0],e.remotePort=Number(o[1]),e.remoteFamily="IPv4"),e._debug("connect remote: %s:%s",e.remoteAddress,e.remotePort)}e._connecting=!1,e.connected=!0;var r={},i={};if(t.forEach(function(e){"remotecandidate"===e.type&&(r[e.id]=e),"localcandidate"===e.type&&(i[e.id]=e)}),t.forEach(function(e){var t="googCandidatePair"===e.type&&"true"===e.googActiveConnection||"candidatepair"===e.type&&e.selected;t&&n(e)}),e._chunk){try{e.send(e._chunk)}catch(o){return e._onError(o)}e._chunk=null,e._debug('sent chunk from "write before connect"');var s=e._cb;e._cb=null,s(null)}e._interval=setInterval(function(){if(e._cb&&e._channel&&!(e._channel.bufferedAmount>e._maxBufferedAmount)){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},150),e._interval.unref&&e._interval.unref(),e._debug("connect"),e.emit("connect")}))},r.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},r.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},r.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var r=e.data;t._debug("read: %d bytes",r.byteLength||r.length),r instanceof ArrayBuffer&&(r=new n(r)),t.push(r)}},r.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},r.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},r.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},r.prototype._onTrack=function(e){var t=this;t.destroyed||(t._debug("on track"),t.emit("stream",e.streams[0]))},r.prototype._onError=function(e){var t=this;t.destroyed||(t._debug("error %s",e.message||e),t._destroy(e))},r.prototype._debug=function(){var e=this,t=[].slice.call(arguments),n=e.channelName&&e.channelName.substring(0,7);t[0]="["+n+"] "+t[0],o.apply(null,t)}}).call(this,e("buffer").Buffer)},{buffer:16,debug:22,"get-browser-rtc":48,inherits:54,randombytes:92,"readable-stream":99}],101:[function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=o(e),s=r.source,f=r.id,l=r.path,h=c[f]&&l in c[f].nsps,d=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return d?(u("ignoring socket cache for %s",s),n=a(s,t)):(c[f]||(u("new io instance for %s",s),c[f]=a(s,t)),n=c[f]),r.query&&!t.query?t.query=r.query:t&&"object"==typeof t.query&&(t.query=i(t.query)),n.socket(r.path,t)}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var o=e("./url"),s=e("socket.io-parser"),a=e("./manager"),u=e("debug")("socket.io-client");t.exports=n=r;var c=n.managers={};n.protocol=s.protocol,n.connect=r,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":102,"./socket":104,"./url":105,debug:106,"socket.io-parser":110}],102:[function(e,t){function n(e,t){return this instanceof n?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(e,t)}var r=e("engine.io-client"),i=e("./socket"),o=e("component-emitter"),s=e("socket.io-parser"),a=e("./on"),u=e("component-bind"),c=e("debug")("socket.io-client:manager"),f=e("indexof"),l=e("backo2"),h=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},n.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},o(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=a(t,"open",function(){n.onopen(),e&&e()}),o=a(t,"error",function(t){if(c("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var u=setTimeout(function(){c("connect attempt timed out after %d",s),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(i),this.subs.push(o),this},n.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",u(this,"ondata"))),this.subs.push(a(e,"ping",u(this,"onping"))),this.subs.push(a(e,"pong",u(this,"onpong"))),this.subs.push(a(e,"error",u(this,"onerror"))),this.subs.push(a(e,"close",u(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},n.prototype.socket=function(e,t){function n(){~f(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[e];if(!r){r=new i(this,e,t),this.nsps[e]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.engine.id}),this.autoConnect&&n()}return r},n.prototype.destroy=function(e){var t=f(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},n.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;e>t;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},n.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":103,"./socket":104,backo2:9,"component-bind":18,"component-emitter":19,debug:106,"engine.io-client":30,indexof:53,"socket.io-parser":110}],103:[function(e,t){function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=n},{}],104:[function(e,t,n){function r(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var i=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),u=e("component-bind"),c=e("debug")("socket.io-client:socket"),f=e("has-binary");t.exports=n=r;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",u(this,"onopen")),a(e,"packet",u(this,"onpacket")),a(e,"close",u(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(l.hasOwnProperty(e))return h.apply(this,arguments),this;var t=s(arguments),n=i.EVENT;f(t)&&(n=i.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&this.packet(this.query?{type:i.CONNECT,query:this.query}:{type:i.CONNECT})},r.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);c("sending ack %j",r);var o=f(r)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":103,"component-bind":18,"component-emitter":19,debug:106,"has-binary":49,"socket.io-parser":110,"to-array":129}],105:[function(e,t){(function(n){function r(e,t){var r=e;t=t||n.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=-1!==r.host.indexOf(":"),a=s?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}var i=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:106,parseuri:78}],106:[function(e,t,n){arguments[4][40][0].apply(n,arguments)},{"./debug":107,_process:81,dup:40}],107:[function(e,t,n){arguments[4][41][0].apply(n,arguments)},{dup:41,ms:108}],108:[function(e,t,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],109:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{"./is-buffer":111,dup:25,isarray:113}],110:[function(e,t,n){function r(){}function i(e){var t="",r=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=h.stringify(e.data)),l("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=p.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}p.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return f();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var i="";"-"!=e.charAt(++r)&&(i+=e.charAt(r),r!=e.length););if(i!=Number(i)||"-"!=e.charAt(r))throw new Error("Illegal attachments");t.attachments=Number(i)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(t.nsp+=o,r==e.length)break}else t.nsp="/";var s=e.charAt(r+1);if(""!==s&&Number(s)==s){for(t.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(t.id+=e.charAt(r),r==e.length)break}t.id=Number(t.id)}return e.charAt(++r)&&(t=u(t,e.substr(r))),l("decoded %s as %j",e,t),t}function u(e,t){try{e.data=h.parse(t)}catch(n){return f()}return e}function c(e){this.reconPack=e,this.buffers=[]}function f(){return{type:n.ERROR,data:"parser error"}}var l=e("debug")("socket.io-parser"),h=e("json3"),d=e("component-emitter"),p=e("./binary"),g=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=s,r.prototype.encode=function(e,t){if(l("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var r=i(e);t([r])}},d(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new c(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!g(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":109,"./is-buffer":111,"component-emitter":112,debug:22,json3:58}],111:[function(e,t){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],112:[function(e,t){function n(e){return e?r(e):void 0}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],113:[function(e,t,n){arguments[4][46][0].apply(n,arguments)},{dup:46}],114:[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var r;try{r=window}catch(i){r=self}r.SparkMD5=e()}}(function(e){"use strict";function t(e,t,n,r,i,o){return t=b(b(t,e),b(r,o)),b(t<<i|t>>>32-i,n)}function n(e,n,r,i,o,s,a){return t(n&r|~n&i,e,n,o,s,a)}function r(e,n,r,i,o,s,a){return t(n&i|r&~i,e,n,o,s,a)}function i(e,n,r,i,o,s,a){return t(n^r^i,e,n,o,s,a)}function o(e,n,r,i,o,s,a){return t(r^(n|~i),e,n,o,s,a)}function s(e,t){var s=e[0],a=e[1],u=e[2],c=e[3];s=n(s,a,u,c,t[0],7,-680876936),c=n(c,s,a,u,t[1],12,-389564586),u=n(u,c,s,a,t[2],17,606105819),a=n(a,u,c,s,t[3],22,-1044525330),s=n(s,a,u,c,t[4],7,-176418897),c=n(c,s,a,u,t[5],12,1200080426),u=n(u,c,s,a,t[6],17,-1473231341),a=n(a,u,c,s,t[7],22,-45705983),s=n(s,a,u,c,t[8],7,1770035416),c=n(c,s,a,u,t[9],12,-1958414417),u=n(u,c,s,a,t[10],17,-42063),a=n(a,u,c,s,t[11],22,-1990404162),s=n(s,a,u,c,t[12],7,1804603682),c=n(c,s,a,u,t[13],12,-40341101),u=n(u,c,s,a,t[14],17,-1502002290),a=n(a,u,c,s,t[15],22,1236535329),s=r(s,a,u,c,t[1],5,-165796510),c=r(c,s,a,u,t[6],9,-1069501632),u=r(u,c,s,a,t[11],14,643717713),a=r(a,u,c,s,t[0],20,-373897302),s=r(s,a,u,c,t[5],5,-701558691),c=r(c,s,a,u,t[10],9,38016083),u=r(u,c,s,a,t[15],14,-660478335),a=r(a,u,c,s,t[4],20,-405537848),s=r(s,a,u,c,t[9],5,568446438),c=r(c,s,a,u,t[14],9,-1019803690),u=r(u,c,s,a,t[3],14,-187363961),a=r(a,u,c,s,t[8],20,1163531501),s=r(s,a,u,c,t[13],5,-1444681467),c=r(c,s,a,u,t[2],9,-51403784),u=r(u,c,s,a,t[7],14,1735328473),a=r(a,u,c,s,t[12],20,-1926607734),s=i(s,a,u,c,t[5],4,-378558),c=i(c,s,a,u,t[8],11,-2022574463),u=i(u,c,s,a,t[11],16,1839030562),a=i(a,u,c,s,t[14],23,-35309556),s=i(s,a,u,c,t[1],4,-1530992060),c=i(c,s,a,u,t[4],11,1272893353),u=i(u,c,s,a,t[7],16,-155497632),a=i(a,u,c,s,t[10],23,-1094730640),s=i(s,a,u,c,t[13],4,681279174),c=i(c,s,a,u,t[0],11,-358537222),u=i(u,c,s,a,t[3],16,-722521979),a=i(a,u,c,s,t[6],23,76029189),s=i(s,a,u,c,t[9],4,-640364487),c=i(c,s,a,u,t[12],11,-421815835),u=i(u,c,s,a,t[15],16,530742520),a=i(a,u,c,s,t[2],23,-995338651),s=o(s,a,u,c,t[0],6,-198630844),c=o(c,s,a,u,t[7],10,1126891415),u=o(u,c,s,a,t[14],15,-1416354905),a=o(a,u,c,s,t[5],21,-57434055),s=o(s,a,u,c,t[12],6,1700485571),c=o(c,s,a,u,t[3],10,-1894986606),u=o(u,c,s,a,t[10],15,-1051523),a=o(a,u,c,s,t[1],21,-2054922799),s=o(s,a,u,c,t[8],6,1873313359),c=o(c,s,a,u,t[15],10,-30611744),u=o(u,c,s,a,t[6],15,-1560198380),a=o(a,u,c,s,t[13],21,1309151649),s=o(s,a,u,c,t[4],6,-145523070),c=o(c,s,a,u,t[11],10,-1120210379),u=o(u,c,s,a,t[2],15,718787259),a=o(a,u,c,s,t[9],21,-343485551),e[0]=b(s,e[0]),e[1]=b(a,e[1]),e[2]=b(u,e[2]),e[3]=b(c,e[3])}function a(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function u(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function c(e){var t,n,r,i,o,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)s(f,a(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(f,r),t=0;16>t;t+=1)r[t]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),u=parseInt(i[1],16)||0,r[14]=o,r[15]=u,s(f,r),f}function f(e){var t,n,r,i,o,a,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)s(f,u(e.subarray(t-64,t)));for(e=c>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(f,r),t=0;16>t;t+=1)r[t]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,s(f,r),f}function l(e){var t,n="";for(t=0;4>t;t+=1)n+=_[e>>8*t+4&15]+_[e>>8*t&15];return n}function h(e){var t;for(t=0;t<e.length;t+=1)e[t]=l(e[t]);return e.join("")}function d(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function p(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;r>n;n+=1)o[n]=e.charCodeAt(n);return t?o:i}function g(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function m(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function y(e){var t,n=[],r=e.length;for(t=0;r-1>t;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function v(){this.reset()}var b=function(e,t){return e+t&4294967295},_=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==h(c("hello"))&&(b=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,0>e?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,s,a,u=this.byteLength,c=t(n,u),f=u;return r!==e&&(f=t(r,u)),c>f?new ArrayBuffer(0):(i=f-c,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,c,i),s.set(a),o)}}(),v.prototype.append=function(e){return this.appendBinary(d(e)),this},v.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)s(this._hash,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},v.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=h(this._hash),e&&(n=y(n)),this.reset(),n},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},v.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(s(this._hash,e),o=0;16>o;o+=1)e[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,s(this._hash,e)},v.hash=function(e,t){return v.hashBinary(d(e),t)},v.hashBinary=function(e,t){var n=c(e),r=h(n);return t?y(r):r},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(e){var t,n=m(this._buff.buffer,e,!0),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)s(this._hash,u(n.subarray(t-64,t)));return this._buff=new Uint8Array(r>t-64?n.buffer.slice(t-64):0),this},v.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=h(this._hash),e&&(n=y(n)),this.reset(),n},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var e=v.prototype.getState.call(this);return e.buff=g(e.buff),e},v.ArrayBuffer.prototype.setState=function(e){return e.buff=p(e.buff,!0),v.prototype.setState.call(this,e)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(e,t){var n=f(new Uint8Array(e)),r=h(n);return t?y(r):r},v})},{}],115:[function(e,t,n){(function(t){var r=e("./lib/request"),i=e("xtend"),o=e("builtin-status-codes"),s=e("url"),a=n;a.request=function(e,n){e="string"==typeof e?s.parse(e):i(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||o,u=e.hostname||e.host,c=e.port,f=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?a+"//"+u:"")+(c?":"+c:"")+f,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var l=new r(e);return n&&l.on("response",n),l},a.get=function(e,t){var n=a.request(e,t);return n.end(),n},a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.STATUS_CODES=o,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":117,"builtin-status-codes":17,url:131,xtend:140}],116:[function(e,t,n){(function(e){function t(e){try{return o.responseType=e,o.responseType===e}catch(t){}return!1}function r(e){return"function"==typeof e}n.fetch=r(e.fetch)&&r(e.ReadableStream),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(i){}var o=new e.XMLHttpRequest;o.open("GET",e.XDomainRequest?"/":"https://example.com");var s="undefined"!=typeof e.ArrayBuffer,a=s&&r(e.ArrayBuffer.prototype.slice);n.arraybuffer=s&&t("arraybuffer"),n.msstream=!n.fetch&&a&&t("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&s&&t("moz-chunked-arraybuffer"),n.overrideMimeType=r(o.overrideMimeType),n.vbArray=r(e.VBArray),o=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],117:[function(e,t){(function(n,r,i){function o(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}function s(e){try{var t=e.status;return null!==t&&0!==t}catch(n){return!1}}var a=e("./capability"),u=e("inherits"),c=e("./response"),f=e("readable-stream"),l=e("to-arraybuffer"),h=c.IncomingMessage,d=c.readyStates,p=t.exports=function(e){var t=this;f.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(n){t.setHeader(n,e.headers[n])});var n,r=!0;if("disable-fetch"===e.mode)r=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}t._mode=o(n,r),t.on("finish",function(){t._onFinish()})};u(p,f.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();-1===g.indexOf(r)&&(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value},p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,o=e._opts,s=e._headers;if(("POST"===o.method||"PUT"===o.method||"PATCH"===o.method||"MERGE"===o.method)&&(t=a.blobConstructor?new r.Blob(e._body.map(function(e){return l(e)}),{type:(s["content-type"]||{}).value||""}):i.concat(e._body).toString()),"fetch"===e._mode){var u=Object.keys(s).map(function(e){return[s[e].name,s[e].value]});r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:t,mode:"cors",credentials:o.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)})}else{var c=e._xhr=new r.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(f){return void n.nextTick(function(){e.emit("error",f)})}"responseType"in c&&(c.responseType=e._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!o.withCredentials),"text"===e._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(s).forEach(function(e){c.setRequestHeader(s[e].name,s[e].value)}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(t)}catch(f){return void n.nextTick(function(){e.emit("error",f);

})}}}},p.prototype._onXHRProgress=function(){var e=this;s(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new h(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},p.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),f.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":116,"./response":118,_process:81,buffer:16,inherits:54,"readable-stream":99,"to-arraybuffer":130}],118:[function(e,t,n){(function(t,r,i){var o=e("./capability"),s=e("inherits"),a=e("readable-stream"),u=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=n.IncomingMessage=function(e,n,r){function s(){c.read().then(function(e){if(!u._destroyed){if(e.done)return void u.push(null);u.push(new i(e.value)),s()}})}var u=this;if(a.Readable.call(u),u._mode=r,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){t.nextTick(function(){u.emit("close")})}),"fetch"===r){u._fetchResponse=n,u.url=n.url,u.statusCode=n.status,u.statusMessage=n.statusText,n.headers.forEach(function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)});var c=n.body.getReader();s()}else{u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText;var f=e.getAllResponseHeaders().split(/\r?\n/);if(f.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===u.headers[n]&&(u.headers[n]=[]),u.headers[n].push(t[2])):void 0!==u.headers[n]?u.headers[n]+=", "+t[2]:u.headers[n]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!o.overrideMimeType){var l=u.rawHeaders["mime-type"];if(l){var h=l.match(/;\s*charset=([^;])(;|$)/);h&&(u._charset=h[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(c,a.Readable),c.prototype._read=function(){},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new r.VBArray(t.responseBody).toArray()}catch(o){}if(null!==n){e.push(new i(n));break}case"text":try{n=t.responseText}catch(o){e._mode="text:vbarray";break}if(n.length>e._pos){var s=n.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new i(s.length),c=0;c<s.length;c++)a[c]=255&s.charCodeAt(c);e.push(a)}else e.push(s,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;n=t.response,e.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var f=new r.MSStreamReader;f.onprogress=function(){f.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(f.result.slice(e._pos)))),e._pos=f.result.byteLength)},f.onload=function(){e.push(null)},f.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":116,_process:81,buffer:16,inherits:54,"readable-stream":99}],119:[function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:16}],120:[function(e,t){"use strict";t.exports="undefined"==typeof window||"undefined"==typeof window.Promise?e("promise"):window.Promise},{promise:83}],121:[function(e,t,n){"use strict";function r(e){var t={};return e.emit=function(e,n){var r=t[e];r&&r.forEach(function(e){return e(n)})},e.on=function(n,r){var i=t[n]||(t[n]=[]);return i.push(r),e},e.off=function(n,r){if(r){var i=t[n],o=i.indexOf(r);-1!==o&&i.splice(o,1),0===i.length&&delete t[n]}else delete t[n];return e},e.list=function(e){return t[e]||[]},e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],122:[function(e,t,n){"use strict";function r(e,t,n,r,i){try{var o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(4==o.readyState){var e=o.getResponseHeader("Content-Type");-1!==e.indexOf("json")?i(null,JSON.parse(o.responseText),o.status):i(null,o.responseText,o.status)}},r)for(var s in r)r.hasOwnProperty(s)&&o.setRequestHeader(s,r[s]);o.open(e,t,!0),"string"==typeof n?o.send(n):n?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(n))):o.send()}catch(a){i(a,null,0)}}function i(e,t,n){r("POST",e,t,null,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.fetch=r,n.post=i},{}],123:[function(e,t){"use strict";var n="undefined"!=typeof window;t.exports=e(n?"./request.browser":"./request.node")},{"./request.browser":122,"./request.node":124}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){var r="string"===t?t:JSON.stringify(t),i=c(e),o={host:i.hostname,port:i.port,path:i.path,method:"POST",headers:{"Content-Length":r.length}};"string"!==t&&(o.headers["Content-Type"]="application/json");var a=s["default"].request(o,function(e){e.setEncoding("utf8"),e.on("data",function(t){var r=e.headers["content-type"],i=r&&-1!==r.indexOf("json"),o=i?JSON.parse(t):t;n&&n(null,o,e.statusCode),n=null})});a.on("error",function(e){n&&n(e,null,null),n=null}),a.write(r),a.end()}Object.defineProperty(n,"__esModule",{value:!0}),n.post=i;var o=e("http"),s=r(o),a=e("url"),u=r(a),c=u["default"].parse},{http:115,url:131}],125:[function(e,t,n){"use strict";function r(e,t){return e>t?1:t>e?-1:0}function i(e,t){return e+t}function o(e){return e.reduce(i)}function s(e){return o(e)/e.length}function a(e){return Math.sqrt(u(e))}function u(e){if(e.length<2)return 0;var t=s(e);return e.map(function(e){return Math.pow(e-t,2)}).reduce(i)/(e.length-1)}function c(e){if(e.length<2)return e[0];var t=e.slice().sort(r);return t.length%2===0?(t[e.length/2-1]+t[e.length/2])/2:t[(e.length-1)/2]}Object.defineProperty(n,"__esModule",{value:!0}),n.compare=r,n.add=i,n.sum=o,n.mean=s,n.std=a,n.variance=u,n.median=c},{}],126:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){function t(e){n.list("error").length>0?n.emit("error",e):console.log("Error",e)}var n={options:{interval:36e5,timeout:1e4,delay:1e3,repeat:5,peers:[],server:null,now:Date.now},offset:0,_timeout:null,_inProgress:{},_isFirst:!0,send:function(e,r){try{l.post(e,r,function(r,i){r?t(r):n.receive(e,i)})}catch(i){t(i)}},receive:function(e,t){void 0===t&&(t=e,e=void 0),t&&t.id in n._inProgress?n._inProgress[t.id](t.result):t&&void 0!==t.id&&n.send(e,{jsonrpc:"2.0",id:t.id,result:n.now()})},rpc:function(e,t,r){return new p(function(i,o){var s=a.nextId(),u=setTimeout(function(){delete n._inProgress[s],o(new Error("Timeout"))},n.options.timeout);n._inProgress[s]=function(e){clearTimeout(u),delete n._inProgress[s],i(e)},n.send(e,{jsonrpc:"2.0",id:s,method:t,params:r})})},sync:function(){n.emit("sync","start");var e=n.options.server?[n.options.server]:n.options.peers;return p.all(e.map(function(e){return n._syncWithPeer(e)})).then(function(e){var t=e.filter(function(e){return n._validOffset(e)});t.length>0&&(n.offset=c.mean(t),n.emit("change",n.offset)),n.emit("sync","end")})},_validOffset:function(e){return null!==e&&!isNaN(e)&&isFinite(e)},_syncWithPeer:function(e){function t(){return n._getOffset(e).then(function(e){return o.push(e)})}function r(){return a.wait(n.options.delay).then(t)}function i(){return o.length<n.options.repeat}var o=[];return t().then(function(){return a.whilst(i,r)}).then(function(){var e=o.filter(function(e){return null!==e}),t=e.map(function(e){return e.roundtrip}),n=c.median(t)+c.std(t),r=e.filter(function(e){return e.roundtrip<n}),i=r.map(function(e){return e.offset});return i.length>0?c.mean(i):null})},_getOffset:function(e){var t=Date.now();return n.rpc(e,"timesync").then(function(e){var r=Date.now(),i=r-t,o=e-r+i/2;return n._isFirst&&(n._isFirst=!1,n.offset=o,n.emit("change",o)),{roundtrip:i,offset:o}})["catch"](function(){return null})},now:function(){return n.options.now()+n.offset},destroy:function(){clearTimeout(n._timeout)}};if(e){if(e.server&&e.peers)throw new Error('Configure either option "peers" or "server", not both.');for(var r in e)e.hasOwnProperty(r)&&("peers"===r&&"string"==typeof e.peers?n.options.peers=e.peers.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}):n.options[r]=e[r])}return d["default"](n),null!==n.options.interval&&(n._timeout=setInterval(n.sync,n.options.interval),setTimeout(function(){n.sync()["catch"](function(e){return t(e)})},0)),n}Object.defineProperty(n,"__esModule",{value:!0}),n.create=o;var s=e("./util.js"),a=i(s),u=e("./stat.js"),c=i(u),f=e("./request/request"),l=i(f),h=e("./emitter.js"),d=r(h),p=e("./Promise")},{"./Promise":120,"./emitter.js":121,"./request/request":123,"./stat.js":125,"./util.js":127}],127:[function(e,t,n){"use strict";function r(e){return new a(function(t){setTimeout(t,e)})}function i(e,t){return new a(function(n){function r(){t>i?(i++,e().then(function(e){o.push(e),r()})):n(o)}var i=0,o=[];r()})}function o(e,t){return new a(function(n){function r(){e()?t().then(function(){return r()}):n()}r()})}function s(){return u++}Object.defineProperty(n,"__esModule",{value:!0}),n.wait=r,n.repeat=i,n.whilst=o,n.nextId=s;var a=e("./Promise"),u=0},{"./Promise":120}],128:[function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;i>r;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,s=r.length;s>o;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},t.exports=n},{}],129:[function(e,t){function n(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}t.exports=n},{}],130:[function(e,t){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;r>i;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:16}],131:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=e("punycode"),c=e("./util");n.parse=i,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=r;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","	"],p=["{","}","|","\\","^","`"].concat(d),g=["'"].concat(p),m=["%","/","?",";","#"].concat(g),y=["/","?","#"],v=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(i);var a=e;if(a=a.trim(),!n&&1===e.split("#").length){var l=h.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?S.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=f.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(n||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===a.substr(0,2);!A||d&&k[d]||(a=a.substr(2),this.slashes=!0)}if(!k[d]&&(A||d&&!E[d])){for(var T=-1,x=0;x<y.length;x++){var R=a.indexOf(y[x]);-1!==R&&(-1===T||T>R)&&(T=R)}var C,O;O=-1===T?a.lastIndexOf("@"):a.lastIndexOf("@",T),-1!==O&&(C=a.slice(0,O),a=a.slice(O+1),this.auth=decodeURIComponent(C)),T=-1;for(var x=0;x<m.length;x++){var R=a.indexOf(m[x]);-1!==R&&(-1===T||T>R)&&(T=R)}-1===T&&(T=a.length),this.host=a.slice(0,T),a=a.slice(T),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var B=this.hostname.split(/\./),x=0,I=B.length;I>x;x++){var P=B[x];if(P&&!P.match(b)){for(var N="",j=0,M=P.length;M>j;j++)N+=P.charCodeAt(j)>127?"x":P[j];if(!N.match(b)){var L=B.slice(0,x),U=B.slice(x+1),F=P.match(_);F&&(L.push(F[1]),U.unshift(F[2])),U.length&&(a="/"+U.join(".")+a),this.hostname=L.join(".");break}}}this.hostname=this.hostname.length>v?"":this.hostname.toLowerCase(),D||(this.hostname=u.toASCII(this.hostname));var z=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+z,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!w[p])for(var x=0,I=g.length;I>x;x++){var H=g[x];if(-1!==a.indexOf(H)){var W=encodeURIComponent(H);W===H&&(W=escape(H)),a=a.split(H).join(W)}}var K=a.indexOf("#");-1!==K&&(this.hash=a.substr(K),a=a.slice(0,K));var Y=a.indexOf("?");if(-1!==Y?(this.search=a.substr(Y),this.query=a.substr(Y+1),t&&(this.query=S.parse(this.query)),a=a.slice(0,Y)):t&&(this.search="",this.query={}),a&&(this.pathname=a),E[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",G=this.search||"";this.path=z+G}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var f=a[u];"protocol"!==f&&(n[f]=e[f])}return E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!E[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var d=l[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=v||y||n.host&&e.pathname,_=b,w=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!E[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===w[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=w.shift();var A=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;A&&(n.auth=A.shift(),n.host=n.hostname=A.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var T=w.slice(-1)[0],x=(n.host||e.host||w.length>1)&&("."===T||".."===T)||""===T,R=0,C=w.length;C>=0;C--)T=w[C],"."===T?w.splice(C,1):".."===T?(w.splice(C,1),R++):R&&(w.splice(C,1),R--);if(!b&&!_)for(;R--;R)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),x&&"/"!==w.join("/").substr(-1)&&w.push("");var O=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(S){n.hostname=n.host=O?"":w.length?w.shift():"";var A=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;A&&(n.auth=A.shift(),n.host=n.hostname=A.shift())}return b=b||n.host&&w.length,b&&!O&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":132,punycode:88,querystring:91}],132:[function(e,t){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],133:[function(e,t){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null==r?!1:"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],134:[function(e,t){var n=e("./v1"),r=e("./v4"),i=r;i.v1=n,i.v4=r,t.exports=i},{"./v1":137,"./v4":138}],135:[function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;256>i;++i)r[i]=(i+256).toString(16).substr(1);t.exports=n},{}],136:[function(e,t){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],137:[function(e,t){function n(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var f=void 0!==e.clockseq?e.clockseq:a,l=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:c+1,d=l-u+(h-c)/1e4;if(0>d&&void 0===e.clockseq&&(f=f+1&16383),(0>d||l>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=l,c=h,a=f,l+=122192928e5;var p=(1e4*(268435455&l)+h)%4294967296;o[r++]=p>>>24&255,o[r++]=p>>>16&255,o[r++]=p>>>8&255,o[r++]=255&p;var g=l/4294967296*1e4&268435455;o[r++]=g>>>8&255,o[r++]=255&g,o[r++]=g>>>24&15|16,o[r++]=g>>>16&255,o[r++]=f>>>8|128,o[r++]=255&f;for(var m=e.node||s,y=0;6>y;++y)o[r+y]=m[y];return t?t:i(o)}var r=e("./lib/rng"),i=e("./lib/bytesToUuid"),o=r(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],a=16383&(o[6]<<8|o[7]),u=0,c=0;t.exports=n},{"./lib/bytesToUuid":135,"./lib/rng":136}],138:[function(e,t){function n(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;16>a;++a)t[o+a]=s[a];return t||i(s)}var r=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=n},{"./lib/bytesToUuid":135,"./lib/rng":136}],139:[function(e,t,n){(function(e){!function(r){function i(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function o(e){for(var t,n=e.length,r=-1,i="";++r<n;)t=e[r],t>65535&&(t-=65536,i+=v(t>>>10&1023|55296),t=56320|1023&t),i+=v(t);return i}function s(e,t){return v(e>>t&63|128)}function a(e){if(0==(4294967168&e))return v(e);var t="";return 0==(4294965248&e)?t=v(e>>6&31|192):0==(4294901760&e)?(t=v(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=v(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=v(63&e|128)}function u(e){for(var t,n=i(e),r=n.length,o=-1,s="";++o<r;)t=n[o],s+=a(t);return s}function c(){if(y>=m)throw Error("Invalid byte index");var e=255&g[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t,n,r,i;if(y>m)throw Error("Invalid byte index");if(y==m)return!1;if(e=255&g[y],y++,0==(128&e))return e;if(192==(224&e)){var t=c();if(i=(31&e)<<6|t,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=c(),n=c(),i=(15&e)<<12|t<<6|n,i>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=c(),n=c(),r=c(),i=(15&e)<<18|t<<12|n<<6|r,i>=65536&&1114111>=i))return i;throw Error("Invalid WTF-8 detected")}function l(e){g=i(e),m=g.length,y=0;for(var t,n=[];(t=f())!==!1;)n.push(t);return o(n)}var h="object"==typeof n&&n,d="object"==typeof t&&t&&t.exports==h&&t,p="object"==typeof e&&e;(p.global===p||p.window===p)&&(r=p);var g,m,y,v=String.fromCharCode,b={version:"1.0.0",encode:u,decode:l};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(h&&!h.nodeType)if(d)d.exports=b;else{var _={},w=_.hasOwnProperty;for(var k in b)w.call(b,k)&&(h[k]=b[k])}else r.wtf8=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],140:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}t.exports=n;var r=Object.prototype.hasOwnProperty},{}],141:[function(e,t){"use strict";function n(e){var t="";do t=s[e%a]+t,e=Math.floor(e/a);while(e>0);return t}function r(e){var t=0;for(f=0;f<e.length;f++)t=t*a+u[e.charAt(f)];return t}function i(){var e=n(+new Date);return e!==o?(c=0,o=e):e+"."+n(c++)}for(var o,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,u={},c=0,f=0;a>f;f++)u[s[f]]=f;i.encode=n,i.decode=r,t.exports=i},{}],142:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ERROR_LOG="Error.Log",n.SET_DEBUG="SET_DEBUG",n.DUMP_DEBUG="DUMP_DEBUG",n.DEBUG_DATA="DEBUG_DATA",n.HUB_REGISTER="Hub.Register",n.HUB_DEREGISTER="Hub.Deregister",n.HUB_SYNC_ADD="Hub.SyncAdd",n.HUB_SYNC_DEL="Hub.SyncRem",n.HUB_UPDATE="Hub.Update",n.HUB_ACTIVE="HUB_ACTIVE",n.HUB_IDLE="HUB_IDLE",n.HUB_DISABLE="HUB_DISABLE",n.HUB_ENABLE="HUB_ENABLE",n.CLIENT_REGISTER="Client.Register",n.CLIENT_DEREGISTER="Client.Deregister",n.SESSION_REGISTER="Session.Register",n.SESSION_DEREGISTER="Session.Deregister",n.SESSION_START="SESSION_START",n.ASSET_REGISTER="Asset.Register",n.ASSET_DEREGISTER="Asset.Deregister",n.ASSET_LOCATE="Asset.Locate",n.LOCATE_TIMEOUT=1e3,n.ASSET_REQUEST="ASSET_REQUEST",n.ASSET_META="ASSET_META",n.ASSET_CHUNK="ASSET_CHUNK",n.ASSET_STORE="ASSET_STORE",n.ASSET_STORE_META="ASSET_STORE_META",n.ASSET_STORE_CHUNK="ASSET_STORE_CHUNK",n.ASSET_NOT_FOUND="ASSET_NOT_FOUND",n.ASSET_REGISTER_META="ASSET_REGISTER_META",n.ASSET_REGISTER_CHUNK="ASSET_REGISTER_CHUNK",n.TRANSFER_RECORD="Transfer.Record",n.MESH_CONNECT_TIMEOUT=1e3,n.MAX_CONNECTED_PEERS=50,n.CHUNK_SIZE=15360,n.MESH_INTERCEPT="MESH_INTERCEPT",n.DOM_LOADED="DOM_LOADED",n.DOM_UNLOADED="DOM_UNLOADED",n.WORKER_REGISTER="WORKER_REGISTER",n.IDDB_NAME="edgemesh",n.IDDB_COLUMNS="id,content_type,blob",n.IDDB_DEFAULT_MOBILE_MB=5,n.IDDB_DEFAULT_DESKTOP_MB=50,n.CLIENT_ID="CLIENT_ID",n.HUB_ID="HUB_ID",n.MAX_PARALLEL=6,n.PROCESSING_FREQUENCY=30,n.SYNC_DELAY=1e4,n.ACCOUNT_CREATE="Account.Create",n.ACCOUNT_VERIFY="Account.Verify",n.ACCOUNT_LOGIN="Account.Login",n.ACCOUNT_RESET="Account.Reset",n.ACCOUNT_DELETE="Account.Delete"},{}],143:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.UNEXPECTED_ERR=100,n.MISSING_INPUT=101,n.JSON_PARSE_ERR=102,n.FETCH_ERR=103,n.PEER_CONNECT_ERR=104,n.SEND_EMAIL_ERR=105,n.CLIENT_REGISTER_ERR=200,n.INJECT_SW_ERR=201,n.INJECT_HUB_ERR=202,n.SW_NOT_FOUND=203,n.FRAME_NOT_INSTALLED=300,n.HUB_REGISTER_ERR=301,n.IDDB_CONN_ERR=400,n.IDDB_PK_ERR=401,n.IDDB_QUOTA_ERR=402,n.ELLE_CONN_ERR=900,n.ELLE_ASYNC_ERR=901,n.ELLE_ASSET_LOCATE_ERR=902,n.ELLE_ASSET_REGISTER_ERR=903,n.ELLE_ASSET_DEREGISTER_ERR=904,n.ELLE_SYNC_ADD_ERR=905,n.ELLE_SYNC_DEL_ERR=906,n.ASSET_LOCATE_UNRESPONSIVE=907,n.HUB_ALREADY_REGISTERED="ERROR:HubID_already_Used",n.USERNAME_IN_USE="ERROR:Username_already_Used",n.INVALID_CODE="ERROR:Invalid_code",n.ACCOUNT_NOT_FOUND="ERROR:Unknown_user",n.ACCOUNT_NOT_VERIFIED="ERROR:Account_not_verified"},{}],144:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});{var r=n.RESERVED_BYTES=8,i=n.UID_OFFSET=0,o=n.POSITION_OFFSET=4;n.pack=function(e,t,n){var s=new ArrayBuffer(n.byteLength+r),a=new DataView(s);return a.setInt32(i,e),a.setInt32(o,t),new Uint8Array(s,0,s.byteLength).set(new Uint8Array(n),r),s},n.getUnpackedChunk=function(e,t){var n=void 0;if(e._arrayBuffer){var r=e.payloadSize*(t+1)-e.payloadSize;if(r>=e.fileSize)return void 0;var i=r+e.payloadSize;i=i>e.fileSize?e.fileSize:i,n=e._arrayBuffer.slice(r,i)}else e._chunks[t]&&(n=e._chunks[t]);return n}}},{}],145:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./Internals"),s=function(){function e(t){r(this,e),this.scope=t,this.currentIndex=0}return i(e,[{key:"forEachChunk",value:function(e,t){for(var n=void 0,r=0;this.currentIndex<this.scope.totalChunks;)r=this.currentIndex,(n=this.getChunk())&&e(n,r);t()}},{key:"forEachReceivedChunk",value:function(e,t){var n=void 0,r=0,i=setInterval(function(){return r=this.currentIndex,(n=this.getUnpackedChunk())?e(chunk,r):this.currentIndex===self.totalChunks-1?(clearInterval(i),t()):void 0}.bind(this),100)}},{key:"getChunk",value:function(e){var t=this.currentIndex,n=void 0,r=void 0;if("number"==typeof e){if(0>e)return void 0;t=e}return(n=o.getUnpackedChunk(this.scope,t))&&(r=o.pack(this.scope.uid,this.currentIndex,n),r&&"number"!=typeof e&&(this.currentIndex+=1)),r}},{key:"getUnpackedChunk",value:function(e){var t=this.currentIndex,n=void 0;if("number"==typeof e){if(0>e)return void 0;t=e}return(n=o.getUnpackedChunk(this.scope,t))&&"number"!=typeof e&&(this.currentIndex+=1),n}}]),e}();n["default"]=s},{"./Internals":144}],146:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("array-keys"),u=r(a),c=e("spark-md5"),f=r(c),l=e("./TransferObject"),h=r(l),d=e("./Internals"),p=e("utils"),g=new u["default"]({identifier:"uid"}),m=function(){return Math.floor(65535*Math.random()+1);

},y=function(){function e(t){i(this,e);var n=void 0,r=void 0,s=void 0,a=void 0;if("object"!==("undefined"==typeof t?"undefined":o(t)))throw new Error("metadata object must be passed in");if(!t.mimeType)throw new Error("no mimeType specified");if(!t.chunkSize)throw new Error("no chunkSize specified");if(!t.name)throw new Error("No name specified");if(t.arrayBuffer&&("function"!=typeof t.arrayBuffer.toString||"[object ArrayBuffer]"!==t.arrayBuffer.toString()))throw new Error("arrayBuffer must be an actual ArrayBuffer object");if(!t.arrayBuffer&&!t.uid)throw new Error("arrayBuffer or uid must be specified");if(t.arrayBuffer&&t.uid)throw new Error("cannot manually assign uid");t.uid||(t.uid=m()),t.arrayBuffer?(r=t.chunkSize-d.RESERVED_BYTES,n=Math.ceil(t.arrayBuffer.byteLength/r),s=f["default"].ArrayBuffer.hash(t.arrayBuffer),a=!0):s=t.checksum,this.uid=t.uid,this.name=t.name,this.existsLocally=a||!1,this.mimeType=t.mimeType,this.chunkSize=t.chunkSize,this.payloadSize=r||t.payloadSize,this.reservedSize=d.RESERVED_BYTES,this.fileSize=t.arrayBuffer?t.arrayBuffer.byteLength:t.fileSize,this.totalChunks=n?n:t.totalChunks?t.totalChunks:0,this.checksum=s,this.generatedChecksum,this.currentIndex=0,this.chunksReceived=0,this._arrayBuffer=t.arrayBuffer?t.arrayBuffer:null,this._chunks=[],g.addRecord(this)}return s(e,[{key:"clearData",value:function(){g.removeRecord(this.uid),delete this._arrayBuffer,delete this}},{key:"getMetadata",value:function(){return{uid:this.uid,name:this.name,mimeType:this.mimeType,chunkSize:this.chunkSize,payloadSize:this.payloadSize,reservedSize:this.reservedSize,fileSize:this.fileSize,totalChunks:this.totalChunks,checksum:this.checksum}}},{key:"getFile",value:function(){var e=this;return new Promise(function(t){e._arrayBuffer=e._chunks[0];for(var n=1;n<e._chunks.length;n+=1)e._arrayBuffer=p.appendBuffer(e._arrayBuffer,e._chunks[n]);e.generatedChecksum=f["default"].ArrayBuffer.hash(e._arrayBuffer),t({ArrayBuffer:e._arrayBuffer,checksum:e.generatedChecksum,getChecksum:f["default"].ArrayBuffer.hash})})}},{key:"getTransferObject",value:function(){return new h["default"](this)}},{key:"getFileObject",value:function(e){return g.getRecord(parseInt(e))}},{key:"onChunkReceived",value:function(){}},{key:"onCompleted",value:function(){}}],[{key:"unpack",value:function(e){var t=new DataView(e),n=t.getInt32(d.UID_OFFSET),r=t.getInt32(d.POSITION_OFFSET),i=new Uint8Array(e.slice(d.RESERVED_BYTES));return[n,r,i]}},{key:"submitChunk",value:function(e){var t=this.unpack(e),n=t[0],r=t[1],i=t[2],o=g.getRecord(n);return o?(o._chunks[r]=i,o.chunksReceived+=1,o.onChunkReceived(i,r),o.chunksReceived===o.totalChunks&&(o.existsLocally=!0,o.onCompleted(o)),g.addRecord(o),!0):!1}}]),e}();n["default"]=y},{"./Internals":144,"./TransferObject":145,"array-keys":6,"spark-md5":114,utils:170}],147:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){this.debug&&o["default"].info("Cleaning up client..."),a.DOMUnloaded(),u.stop(),this.id&&this.hub_id&&this.io&&s.SessionDeregister(this.io,{hub_id:this.hub_id,client_id:this.id,origin_id:this.origin_hash}),this.coms&&this.coms.disconnect(),this.debug&&o["default"].info("Client clean.")};var i=e("utils/Log"),o=r(i),s=e("interface/Websocket"),a=e("interface/Postmessage"),u=e("utils/Time")},{"interface/Postmessage":160,"interface/Websocket":161,"utils/Log":166,"utils/Time":169}],148:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.deregisterServiceWorker=n.injectServiceWorker=n.injectHub=void 0;{var i=e("ERROR_CODES"),o=e("path"),s=r(o);n.injectHub=function(e,t,n,r){return new Promise(function(o,s){try{var a=document.body,u=document.createElement("iframe");return u.style.cssText="width: 0px; height: 0px; position: absolute; display: none;",u.id="EMHub",u.src="https://"+t,u.name=n+"|"+e+"|"+t+"|"+r.toString(),a.parentNode?(a.parentNode.insertBefore(u,a.nextSibling),o(!0)):s({code:i.INJECT_HUB_ERR,message:"Error injecting hub",error:"Could not find parent node."})}catch(c){return s({code:i.INJECT_HUB_ERR,message:"Error injecting hub",error:c})}})},n.injectServiceWorker=function(e,t){return new Promise(function(n,r){return navigator.serviceWorker?void navigator.serviceWorker.register(s["default"].resolve("https://",e,t,"/edgemesh.sw.js")).then(n)["catch"](function(e){return r({message:"Could not register Service Worker",code:i.INJECT_SW_ERR,error:e})}):r({message:"Service worker not supported by browser",code:i.INJECT_SW_ERR})})},n.deregisterServiceWorker=function(){return navigator.serviceWorker?navigator.serviceWorker.getRegistration().then(function(e){e&&e.unregister()}):Promise.reject("Could not unregister service worker")}}},{ERROR_CODES:143,path:79}],149:[function(e){(function(t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return new Promise(function(e,t){var n,r,i,o,s,a;n={status:{}};var u=function(t){return e(t)}.$asyncbind(this,t);try{return P.injectServiceWorker(this.origin,this.swPath).then(function(t){return r=t,n.status.sw=r.active?r.active.state:r.waiting||r.installing,this.coms.connect().then(function(t){return i=t,n=Object.assign(n,i),n.status.io=i.io.connected,n.status.rtc=i.rtc.ready,C.BindSWEvents(L["default"].bind(this)).then(function(t){return o=t,C.BindMTEvents(U.ClientPMEvents.bind(this)).then(function(t){return s=t,P.injectHub(i.id,this.host,this.origin,this.debug).then(function(t){return a=t,n.status.hub_injected=a,e(n)}.$asyncbind(this,u),u)}.$asyncbind(this,u),u)}.$asyncbind(this,u),u)}.$asyncbind(this,u),u)}.$asyncbind(this,u),u)}catch(c){u(c)}}.$asyncbind(this))}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("../../config/support"),c=e("array-keys"),f=r(c),l=e("url"),h=(r(l),e("bowser")),d=r(h),p=e("chunk"),g=r(p),m=e("uuid"),y=r(m),v=e("utils/Mesh"),b=r(v),_=e("utils/Hash"),w=r(_),k=e("utils/Fetch"),E=r(k),S=e("utils/Log"),A=r(S),T=e("utils/Time"),x=e("interface/Coms"),R=r(x),C=e("interface/Postmessage"),O=e("interface/Websocket"),D=e("interface/DOM"),B=e("CONSTANTS"),I=e("ERROR_CODES"),P=e("./ServiceInjection"),N=e("./Deconstructor"),j=r(N),M=e("events/SWEvents"),L=r(M),U=e("events/PMEvents"),F=e("../../config/config"),z=r(F);Function.prototype.$asyncbind=function W(e,n){function r(){return i.apply(e,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:W,enumerable:!1,configurable:!0,writable:!0}),W.trampoline||(W.trampoline=function(e,t,n,r,i){return function o(s){for(;s;){if(s.then)return s=s.then(o,r),i?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(a){return r(a)}}}}),W.LazyThenable||(W.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(s){n.reject(s)}}function n(){}function r(){}function i(e,t){this.resolve=e,this.reject=t}function o(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(s){t(o,s,i)}return o}function s(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:i},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),W.EagerThenable=W.Thenable=(W.EagerThenableFactory=function(e){function n(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function r(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(r){e.p.reject(r)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(r){e.p.reject(r)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof t?"undefined":s(t))&&t.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var o=function(){function t(){for(;n.length-r;)n[r](),n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r===1&&e(t)}}();return n.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":s(e))))try{var n=0,i=e.then;if("function"==typeof i)return void i.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(a){return void(n||this.reject(a))}this.state=r,this.v=e,t.c&&o(function(){for(var n=0,i=t.c.length;i>n;n++)r(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&o(function(){for(var n=0,r=t.length;r>n;n++)i(t[n],e)})}},then:function(e,t){var r=new n,i={y:e,n:t,p:r};if(void 0===this.state)this.c?this.c.push(i):this.c=[i];else{var s=this.state,a=this.v;o(function(){s(i,a)})}return r}},n.resolve=function(e){if(e&&e instanceof n)return e;var t=new n;return t.resolve(e),t},n.reject=function(e){if(e&&e instanceof n)return e;var t=new n;return t.reject(e),t},n.version="2.3.2-nodent",n})());var i=this;switch(n){case!0:return new W.Thenable(r);case 0:return new W.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(e,arguments)}catch(t){return n(t)}}}};var q=z["default"](),H=function(){function e(t){var n=this,r=t.host,s=t.swPath,a=t.debug;if(i(this,e),this.debug=!1,this.mesh_transfers=new f["default"],this.blob_urls=new f["default"],this.locate_requests=new f["default"],this.host=q.host,this.swPath="/",r&&(this.host=r),s&&(this.swPath=s),a){this.debug=a;var c=d["default"].name,l=d["default"].version,h=d["default"].chrome,p=d["default"].blink,g=d["default"].mac;A["default"].title(r,this.swPath),A["default"].info("Browser info.",{name:c,version:l,chrome:h,blink:p,mac:g})}var m=-1!==u.browserSupport[d["default"].name.toLowerCase()].indexOf(d["default"].version.split(".")[0]);return m?(T.start(this.host,!1),this.ua=navigator.userAgent,this.origin=document.location.hostname,this.origin_hash=w["default"](this.origin),this.coms=new R["default"](this,this.host),o.call(this).then(function(e){return e.id?(n.id=e.id,n.io=e.io,n.rtc=e.rtc,n.status=e.status,D.handleVisibilityChange.call(n),void D.handleDomMutation.call(n)):n.bail({func:"Client._bootstrap",message:"Unexpected error",code:I.UNEXPECTED_ERR,input:e})})["catch"](this.bail.bind(this)),void(window.onbeforeunload=j["default"].bind(this))):(this.debug&&A["default"].warn("The current browser is not supported.",{message:"If you think this is an error please submit an issue with the output from the log above (Browser Info)"}),P.deregisterServiceWorker(),!1)}return a(e,[{key:"bail",value:function(e){var t=e.func,n=e.message,r=e.code,i=e.input,o={func:t,message:n,code:r,input:i,level:"error",host:this.id};this.debug&&A["default"].error("BAILING...",o),this.io&&O.ErrorLog(this.io,o),C.DOMLoaded(),P.deregisterServiceWorker(),this.id&&this.hub_id&&O.SessionDeregister(this.io,{hub_id:this.hub_id,client_id:this.id,origin_id:this.origin_hash}),T.stop(),this.coms&&this.coms.disconnect()}},{key:"disable",value:function(){this.debug&&A["default"].info("DISABLING CLIENT...",{client_id:this.id}),C.DOMLoaded(),P.deregisterServiceWorker(),this.id&&this.hub_id&&O.SessionDeregister(this.io,{hub_id:this.hub_id,client_id:this.id,origin_id:this.origin_hash}),T.stop(),this.coms&&this.coms.disconnect()}},{key:"active",value:function(){this.debug&&A["default"].info("Client tab active."),this.coms.reconnect(),T.start(this.host,!1)}},{key:"idle",value:function(){this.debug&&A["default"].info("Client tab inactive."),this.coms.disconnect(),T.stop()}},{key:"setDebug",value:function(e){return e&&A["default"].title(this.host,this.origin),this.debug=e,C.SetDebug.call(this,e),"Edgemesh debug set to "+e.toString()+"."}},{key:"dumpDebug",value:function(){function e(e){C.DumpDebug.call(this);var t=new n(JSON.stringify(e)).toString("base64"),r=document.createElement("a");r.href="data:application/octet-stream;charset=utf-8;base64,"+t,r.setAttribute("download",i),document.body.appendChild(r),r.click(),document.body.removeChild(r),A["default"].info(i+" downloaded. Please submit to support@edgemesh.com")}var t=this,r=T.getTime(),i="em-debug-client-"+this.id+".json",o=navigator.serviceWorker.controller?navigator.serviceWorker.controller.state:"not found",s={sw:{state:o,path:this.swPath},pc:"initial",io:"initial",connected_peers:0,version:q.version,client:this.id,hub:this.hub_id,host:this.host,origin:this.origin,origin_hash:this.origin_hash,ua:this.ua,ts:r};return this.coms?this.coms.getStats().then(function(n){s.pc=n.pc,s.connected_peers=n.connected_peers,s.io=n.io,setTimeout(function(){e.call(t,s)},1e3)}):e.call(this,s),"success"}},{key:"locateAsset",value:function(e){var t=this,n=[],r=[];e.forEach(function(e){e=e.split("|"),n.push(parseInt(e[0],10)),r.push(parseInt(e[1],10))}),r.length&&!function(){var e=y["default"].v4();O.AssetLocate(t.io,{client_id:t.id,asset_id:r,origin_id:n,locate_id:e}),t.locate_requests.addRecord({id:e,timeout:setTimeout(function(){t.debug&&A["default"].error("No response from asset locate. Going to origin...",{assets:r,origins:n}),O.ErrorLog(t.io,{level:"error",host:t.id,func:"Client.AssetLocate",code:I.ASSET_LOCATE_UNRESPONSIVE,message:"Asset.Locate unresponsive",input:{assets:r,origins:n,locate_id:e}}),r.forEach(function(r,i){var o=n[i];t.fetchFromOrigin({origin:o,asset:r}),t.locate_requests.removeRecord(e)})},B.LOCATE_TIMEOUT)})}(),this.debug&&A["default"].info("Locating assets...",{assets:r,origins:n})}},{key:"fetchFromOrigin",value:function(e){var t=this,n=e.origin,r=e.asset,i=n+"|"+r;E["default"].call(this,n,r).then(function(e){var n=e.url,r=e.origin,o=e.asset,s=e.content_type,a=e.ab,u=e.xhrTransferStats;t.debug&&A["default"].info("Asset fetched from origin",{key:i,res:e}),D.createImage.call(t,i,n,a),O.TransferRecord(t.io,u),t.storeAsset({key:i,origin:r,asset:o,content_type:s,url:n,ab:a},!0)})["catch"](function(e){return e.xhrTransferStats?(O.TransferRecord(t.io,e.xhrTransferStats),O.ErrorLog(t.io,{level:"error",host:t.id,func:"Client.fetchFromOrigin",code:I.FETCH_ERR,message:"Could not get asset from origin",input:{error:e}}),void(t.debug&&A["default"].warn("Error fetching asset from origin",e))):(t.debug&&A["default"].error("Unexpected error",e),O.ErrorLog(t.io,{level:"error",host:t.id,func:"Client.fetchFromOrigin",code:I.FETCH_ERR,message:"Unexpected error",input:{error:e}}))})}},{key:"fetchFromPeer",value:function(e){var t=e.fromPeerId,n=e.origin,r=e.asset,i=e.hubs,o=e.checksum;return new b["default"](this,{protocol:"rtc_get",fromPeerId:t,origin:n,asset:r,hubs:i,checksum:o}).start()}},{key:"storeAsset",value:function(e){var t=this,n=e.key,r=e.origin,i=e.asset,o=e.content_type,s=e.url,a=e.ab,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,c=new g["default"]({name:n,mimeType:o,chunkSize:B.CHUNK_SIZE,arrayBuffer:a}),f={asset_id:i,origin_id:r,content_type:o,asset_url:s,protocol:"rtc_set",src:this.id,dst:this.hub_id,checksum:c.checksum,topic:this.origin_hash,handshake_ms:0,transfer_start:"",size_kb:0,chunk_id:-1},l=(c.checksum,c.getTransferObject()),h=performance.now();this.rtc.connect(this.hub_id).then(function(e){f.transfer_start=T.getTime(),f.handshake_ms=performance.now()-h,t.debug&&A["default"].info("Sending "+(u?"asset register meta":"asset store meta")+" to hub.",{hub_id:t.hub_id}),t.rtc.send(e,u?B.ASSET_REGISTER_META:B.ASSET_STORE_META,{meta:c.getMetadata(),stats:f});for(var n=0;n<c.totalChunks;n++){var r=l.getChunk();f.chunk_id=n+1,f.size_kb=r.byteLength/1024,f.transfer_start=T.getTime(),t.rtc.send(e,u?B.ASSET_REGISTER_CHUNK:B.ASSET_STORE_CHUNK,{chunk:r,rtcTransferStats:f})}})["catch"](function(e){O.ErrorLog(t.io,{level:"error",host:t.id,code:I.PEER_CONNECT_ERR,func:"Client.storeAsset",message:"Failed to connect to local hub",input:{hub:t.hub_id,error:e}})})}}]),e}();window.Edgemesh=H}).call(this,e("_process"),e("buffer").Buffer)},{"../../config/config":1,"../../config/support":4,"./Deconstructor":147,"./ServiceInjection":148,CONSTANTS:142,ERROR_CODES:143,_process:81,"array-keys":6,bowser:13,buffer:16,chunk:146,"events/PMEvents":152,"events/SWEvents":154,"interface/Coms":155,"interface/DOM":157,"interface/Postmessage":160,"interface/Websocket":161,url:131,"utils/Fetch":164,"utils/Hash":165,"utils/Log":166,"utils/Mesh":167,"utils/Time":169,uuid:134}],150:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.inflate=n.deflate=void 0;{var i=e("pako"),o=r(i);n.deflate=function(e){return o["default"].deflate(e,{level:9})},n.inflate=function(e){return o["default"].inflate(e)}}},{pako:60}],151:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.WorkerIOEvents=n.HubIOEvents=n.ClientIOEvents=void 0;{var o=e("utils/Log"),s=r(o),a=e("utils/Mesh"),u=r(a),c=e("../../server/CONSTANTS"),f=e("../../server/ERROR_CODES"),l=e("interface/Postmessage"),h=e("interface/Websocket"),d=e("tasks/DeleteFile"),p=r(d),g=e("utils");n.ClientIOEvents=function(e){var t=this;e.on(c.CLIENT_REGISTER+"-RESPONSE",function(n){try{n=JSON.parse(n)}catch(r){return h.ErrorLog(e,{level:"error",host:t.id,func:"IOEvents.ClientIOEvents.ClientRegister",code:f.JSON_PARSE_ERR,message:"Error parsing JSON.",input:{error:r,data:n}}),t.bail({func:"IOEvents.ClientIOEvents.ClientRegister",code:f.JSON_PARSE_ERR,message:"Error parsing JSON.",input:{error:r,data:n}})}if(!n.success)switch(n.message){case"ERROR:origin_not_verified":return t.disable();default:return t.bail({func:"IOEvents.ClientIOEvents.ClientRegister",code:f.CLIENT_REGISTER_ERR,message:"Error registering client.",input:{data:n}})}}),e.on(c.ASSET_LOCATE+"-RESPONSE",function(n){var r=n.locate_id,i=t.locate_requests.getRecord(r);i&&(clearTimeout(i.timeout),t.locate_requests.removeRecord(r));try{n=JSON.parse(n.data)}catch(o){return h.ErrorLog(e,{level:"error",host:t.id,func:"IOEvents.ClientIOEvents.AssetLocate",code:f.JSON_PARSE_ERR,message:"Error parsing JSON.",input:{error:o}}),t.bail({func:"IOEvents.ClientIOEvents.AssetLocate",code:f.JSON_PARSE_ERR,message:"Error parsing JSON.",input:{error:o}})}t.debug&&s["default"].info("Assets located.",n),n.AssetID.forEach(function(e,r){var i=n.OriginID[r],o=n.HubID[r],a=n.checksum[r];if(o.length){var u=t.id;t.fetchFromPeer({fromPeerId:u,origin:i,asset:e,hubs:o,checksum:a}),t.debug&&s["default"].info("Fetching from peer.",{origin:i,asset:e})}else t.fetchFromOrigin({origin:i,asset:e}),t.debug&&s["default"].info("Fetching from origin.",{origin:i,asset:e})})})},n.HubIOEvents=function(e){var t=this;e.on(c.HUB_REGISTER+"-RESPONSE",function(n){try{n=JSON.parse(n)}catch(r){return h.ErrorLog(e,{level:"error",host:t.id,func:"IOEvents.HubIOEvents.HubRegister",code:f.JSON_PARSE_ERR,message:"Error parsing JSON",input:{error:r}}),t.bail({func:"IOEvents.HubIOEvents.HubRegister",code:f.JSON_PARSE_ERR,message:"Error parsing JSON.",input:{error:r}})}return n.success?t.startup.call(t):t.bail({func:"IOEvents.HubIOEvents.HubRegister",code:f.HUB_REGISTER_ERR,message:"Error registering hub.",input:{data:n}})}),e.on(c.HUB_SYNC_ADD+"-RESPONSE",function(e){try{e=JSON.parse(e.data)}catch(n){return h.ErrorLog(t.socket,{level:"error",host:t.id,func:"IOEvents.HubIOEvents.HubSync",code:f.JSON_PARSE_ERR,message:"Error parsing JSON",input:{error:n,data:e}}),t.bail({func:"IOEvents.HubIOEvents.HubSync",code:f.JSON_PARSE_ERR,message:"Error parsing JSON.",input:{error:n}})}var r=e,i=r.OriginID,o=r.AssetID,a=r.HubID,c=r.checksum;o.length&&(t.debug&&s["default"].info("Syncing hub (add).",e),o.forEach(function(e,n){new u["default"](t,{protocol:"rtc_mesh",src_id:t.id,origin:i[n],asset:e,hubs:a[n],checksum:c[n]}).start(),g.isSupernode()&&t.updateState(t.getState())}))}),e.on(c.HUB_DISABLE,function(e){e===f.HUB_ALREADY_REGISTERED&&l.StartSession.call(t),t.disable()})},n.WorkerIOEvents=function(e){var t=this;e.on(c.ASSET_REGISTER+"-RESPONSE",function(e){try{e=JSON.parse(e.data)}catch(n){return t.debug&&s["default"].warn("Error parsing JSON.",{error:n}),h.ErrorLog(t.io,{level:"error",host:t.id,func:"IOEvents.WorkerIOEvents.Asset.Register.Response",code:f.JSON_PARSE_ERR,message:"Could not parse JSON",input:{error:n}})}Array.isArray(e.success)?e.success.forEach(function(n,r){n||t.queue.enqueue(p["default"].call(t,e.OriginID[r],e.AssetID[r]))}):e.success||t.queue.enqueue(p["default"].call(t,e.OriginID[i],e.AssetID[i]))}),e.on(c.HUB_SYNC_DEL+"-RESPONSE",function(e){try{e=JSON.parse(e.data)}catch(n){return t.debug&&s["default"].warn("Error parsing JSON.",{error:n}),h.ErrorLog(t.io,{level:"error",host:t.id,func:"IOEvents.WorkerIOEvents."+c.HUB_SYNC_DEL+"-RESPONSE",code:f.JSON_PARSE_ERR,message:"Could not parse JSON",input:{error:n}})}var r=e,i=r.AssetID,o=r.OriginID;i.length&&(t.debug&&s["default"].info("Syncing hub (delete).",e),i.forEach(function(e,n){t.queue.enqueue(p["default"].call(t,o[n],e))}),t.debug&&s["default"].info("Sync hub (delete) complete.",{count:i.length}))})}}},{"../../server/CONSTANTS":142,"../../server/ERROR_CODES":143,"interface/Postmessage":160,"interface/Websocket":161,"tasks/DeleteFile":162,utils:170,"utils/Log":166,"utils/Mesh":167}],152:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.HubPMEvents=n.ClientPMEvents=void 0;{var i=e("utils/Log"),o=r(i),s=e("../../server/CONSTANTS"),a=e("interface/Websocket"),u=e("interface/Postmessage");n.ClientPMEvents=function(e){var t=e.data;switch(t.channel){case s.SESSION_START:this.hub_id=t.data.hub_id,a.SessionRegister(this.io,{hub_id:t.data.hub_id,client_id:this.id,origin_id:this.origin_hash}),this.debug&&o["default"].info("Session registered.",{hub_id:this.hub_id,client_id:this.id}),u.DOMLoaded()}},n.HubPMEvents=function(e){var t=e.data;switch(t.channel){case s.DUMP_DEBUG:return this.dumpDebug.call(this);case s.SET_DEBUG:return this.setDebug.call(this,t.debug)}}}},{"../../server/CONSTANTS":142,"interface/Postmessage":160,"interface/Websocket":161,"utils/Log":166}],153:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.ClientEvents=n.HubEvents=void 0;{var i=e("chunk"),o=r(i),s=e("utils/Log"),a=r(s),u=e("utils/Time"),c=e("tasks/StreamAsset"),f=r(c),l=(e("interface/DOM"),e("interface/Websocket")),h=e("../../server/CONSTANTS");n.HubEvents=function(e,t){t.on(h.ASSET_REGISTER_META,function(t){e.debug&&a["default"].info("Asset register meta received.",t);var n=new o["default"](t.meta);n.onCompleted=function(r){e.storeAsset.call(e,Object.assign({key:t.meta.name},t.stats),r,!0),n.clearData()}}),t.on(h.ASSET_REGISTER_CHUNK,function(t){e.debug&&a["default"].info("Asset register chunk received",t),o["default"].submitChunk(t.chunk.buffer);var n=t.rtcTransferStats;n.transfer_end=u.getTime(),n.success=1,l.TransferRecord(e.io,n)}),t.on(h.ASSET_STORE_META,function(t){e.debug&&a["default"].info("Asset store meta received.",t);var n=new o["default"](t.meta);n.onCompleted=function(r){e.storeAsset.call(e,Object.assign({key:t.meta.name},t.stats),r),n.clearData()}}),t.on(h.ASSET_STORE_CHUNK,function(t){e.debug&&a["default"].info("Asset store chunk received.",t),o["default"].submitChunk(t.chunk.buffer);var n=t.rtcTransferStats;n.transfer_end=u.getTime(),n.success=1,l.TransferRecord(e.io,n)}),t.on(h.ASSET_META,function(t){var n=e.mesh_transfers.getRecord(t.name);n&&n.mesh.metaReceived(t)}),t.on(h.ASSET_CHUNK,function(t){var n=t.rtcTransferStats.origin_id+"|"+t.rtcTransferStats.asset_id,r=e.mesh_transfers.getRecord(n);r&&r.mesh.chunkReceived(t)}),t.on(h.ASSET_NOT_FOUND,function(t){var n=e.mesh_transfers.getRecord(t.key);n&&n.mesh.tryNextHub(t)}),t.on(h.ASSET_REQUEST,function(t){e.queue.enqueue(f["default"].call(e,t))})},n.ClientEvents=function(e,t){t.on(h.ASSET_META,function(t){var n=e.mesh_transfers.getRecord(t.name);n&&n.mesh.metaReceived(t)}),t.on(h.ASSET_CHUNK,function(t){var n=t.rtcTransferStats.origin_id+"|"+t.rtcTransferStats.asset_id,r=e.mesh_transfers.getRecord(n);r&&r.mesh.chunkReceived(t)}),t.on(h.ASSET_NOT_FOUND,function(t){var n=e.mesh_transfers.getRecord(t.key);n&&n.mesh.tryNextHub(t)})}}},{"../../server/CONSTANTS":142,chunk:146,"interface/DOM":157,"interface/Websocket":161,"tasks/StreamAsset":163,"utils/Log":166,"utils/Time":169}],154:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=function(e){var t,n=this,r=function(){switch(e.data.channel){case u.MESH_INTERCEPT:var r=e.data.value.assets;if(n.debug&&s["default"].info("Assets intercepted.",r),!r)return{v:void 0};Object.keys(r).length&&!function(){var e=c.setElementEMID(Object.keys(r));Object.keys(e).forEach(function(t){e[t].forEach(function(e){var t=e.element,n=e.url;t.setAttribute("data-edgemesh",r[n]),t.setAttribute("data-origin",n)})}),t=[],Object.keys(r).forEach(function(e){var i=r[e],o=n.blob_urls.getRecord(i);o?(c.render(i,o.url),f.TransferRecord(n.io,{origin_id:i.split("|")[0],asset_id:i.split("|")[1],chunk_id:0,src:n.hub_id,dst:n.id,topic:n.origin_hash,protocol:"idb_get",transfer_start:l.getTime(),transfer_end:l.getTime(),size_kb:o.size,handshake_ms:0,success:1})):t.push(i)}),t.length&&n.locateAsset(t)}()}}();return"object"===("undefined"==typeof r?"undefined":i(r))?r.v:void 0};var o=e("utils/Log"),s=r(o),a=e("url"),u=(r(a),e("CONSTANTS")),c=e("interface/DOM"),f=e("interface/Websocket"),l=(e("../../config/support"),e("utils/Time"))},{"../../config/support":4,CONSTANTS:142,"interface/DOM":157,"interface/Websocket":161,url:131,"utils/Log":166,"utils/Time":169}],155:[function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new Promise(function(t,n){var r,i;return g.getQuota("temporary").then(function(o){return r=o,g.getKeys(e).then(function(e){return i=e,t({quota:r,keys:i})}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("socket.io-client"),c=r(u),f=e("array-keys"),l=r(f),h=e("interface/Peer"),d=r(h),p=e("interface/Websocket"),g=e("interface/DB"),m=e("events/IOEvents"),y=e("events/RTCEvents"),v=e("utils/Log"),b=r(v),_=e("../../server/ERROR_CODES"),w=e("../../config/config"),k=r(w);Function.prototype.$asyncbind=function S(e,n){function r(){return i.apply(e,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:S,enumerable:!1,configurable:!0,writable:!0}),S.trampoline||(S.trampoline=function(e,t,n,r,i){return function o(s){for(;s;){if(s.then)return s=s.then(o,r),i?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(a){return r(a)}}}}),S.LazyThenable||(S.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(s){n.reject(s)}}function n(){}function r(){}function i(e,t){this.resolve=e,this.reject=t}function o(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(s){t(o,s,i)}return o}function s(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:i},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),S.EagerThenable=S.Thenable=(S.EagerThenableFactory=function(e){function n(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function r(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(r){e.p.reject(r)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(r){e.p.reject(r)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof t?"undefined":s(t))&&t.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var o=function(){function t(){for(;n.length-r;)n[r](),n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r===1&&e(t)}}();return n.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":s(e))))try{var n=0,i=e.then;if("function"==typeof i)return void i.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(a){return void(n||this.reject(a))}this.state=r,this.v=e,t.c&&o(function(){for(var n=0,i=t.c.length;i>n;n++)r(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&o(function(){for(var n=0,r=t.length;r>n;n++)i(t[n],e)})}},then:function(e,t){var r=new n,i={y:e,n:t,p:r};if(void 0===this.state)this.c?this.c.push(i):this.c=[i];else{var s=this.state,a=this.v;o(function(){s(i,a)})}return r}},n.resolve=function(e){if(e&&e instanceof n)return e;var t=new n;return t.resolve(e),t},n.reject=function(e){if(e&&e instanceof n)return e;var t=new n;return t.reject(e),t},n.version="2.3.2-nodent",n})());var i=this;switch(n){case!0:return new S.Thenable(r);case 0:return new S.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(e,arguments)}catch(t){return n(t)}}}};var E=(k["default"](),function(){function e(t,n,r){i(this,e),this.connections=new l["default"],this.ready=!1,this.host=n,this.scope=t,this.hub_id=r}return a(e,[{key:"connect",value:function(){var e=this;return new Promise(function(t){var n={};e.hub_id?(e.io=c["default"]("https://"+e.host+":9000",{query:"hub_id="+e.hub_id}),m.HubIOEvents.call(e.scope,e.io),n={peerId:e.hub_id}):(e.io=c["default"]("https://"+e.host+":9000",{query:"client=true"}),m.ClientIOEvents.call(e.scope,e.io)),e.io.on("connect",function(){return e.rtc=new d["default"](e.io,n),e.hub_id?(y.HubEvents(e.scope,e.rtc),e._registerHub()):(y.ClientEvents(e.scope,e.rtc),e._registerClient(),e.scope.debug&&b["default"].info("Client registered.",{client_id:e.io.id})),e.scope.debug&&b["default"].info("WebRTC ready.",{id:e.rtc.peerId}),t({id:e.io.id,io:e.io,rtc:e.rtc})}),e.io.on("disconnected",function(){e.io.removeAllListeners(),e.rtc.destroy()})})}},{key:"disconnect",value:function(){this.io&&(this.io.removeAllListeners(),this.io.disconnect(),this.rtc&&this.rtc.destroy())}},{key:"reconnect",value:function(){var e=this;this.connect().then(function(t){var n=t.id,r=t.rtc;e.hub_id||(e.scope.id=n),
e.scope.rtc=r,e.scope.io=e.io})}},{key:"getConnectedPeers",value:function(){return this.rtc.getConnectedPeers()}},{key:"getStats",value:function(){var e=this;return this.rtc&&this.io?this.rtc.getStats().then(function(t){return{pc:t,connected_peers:e.getConnectedPeers().length,io:{id:e.io.id,connected:e.io.connected,disconnected:e.io.disconnected,query:e.io.query,uri:e.io.io.uri,readyState:e.io.io.readyState}}}):Promise.resolve({})}},{key:"_registerHub",value:function(){var e=this;o(this.scope.db).then(function(t){var n=t.keys,r=t.quota;p.HubRegister(e.io,{hub_id:e.hub_id,browser_info:e.scope.ua,size:r,keys:{OriginID:n.origins,AssetID:n.assets}})})["catch"](function(t){b["default"].error("Error reregistering hub",{error:t}),p.ErrorLog(e.io,{level:"error",host:e.hub_id,func:"Coms.io.on.reconnect",message:"Could not reregister hub",code:_.HUB_REGISTER_ERR,input:{error:t}})})}},{key:"_registerClient",value:function(){p.ClientRegister(this.io,{client_id:this.io.id,origin_id:this.scope.origin_hash,browser_info:this.scope.ua})}}]),e}());n["default"]=E}).call(this,e("_process"))},{"../../config/config":1,"../../server/ERROR_CODES":143,_process:81,"array-keys":6,"events/IOEvents":151,"events/RTCEvents":153,"interface/DB":156,"interface/Peer":158,"interface/Websocket":161,"socket.io-client":101,"utils/Log":166}],156:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.getKeys=n.getQuota=n.open=void 0;{var i=e("is_js"),o=r(i),s=e("dexie"),a=r(s),u=e("../../server/CONSTANTS"),c=e("../../server/ERROR_CODES");n.open=function(){return new Promise(function(e,t){var n=new a["default"](u.IDDB_NAME);return n.version(1).stores({assets:u.IDDB_COLUMNS}),n.open().then(function(){e(n)})["catch"](function(e){t({func:"DB.open",code:c.IDDB_CONN_ERR,string:"Could not connect to IDDB",input:{error:e}})})})},n.getQuota=function(e){return new Promise(function(t,n){if(!e)return n("No type provided.  Must be one of `temporary` or `persistent`.");switch(e){case"temporary":case"TEMPORARY":if(!navigator.webkitTemporaryStorage)return t(o["default"].desktop()?u.IDDB_DEFAULT_DESKTOP_MB:u.IDDB_DEFAULT_MOBILE_MB);navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(o["default"].desktop()?u.IDDB_DEFAULT_DESKTOP_MB:u.IDDB_DEFAULT_MOBILE_MB)});break;case"persistent":case"PERSISTENT":if(!navigator.webkitPersistentStorage)return t(o["default"].desktop()?u.IDDB_DEFAULT_DESKTOP_MB:u.IDDB_DEFAULT_MOBILE_MB);navigator.webkitPersistentStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(o["default"].desktop()?u.IDDB_DEFAULT_DESKTOP_MB:u.IDDB_DEFAULT_MOBILE_MB)})}})},n.getKeys=function(e){return new Promise(function(t,n){var r=[],i=[];e.assets.toCollection().primaryKeys().then(function(e){return e.forEach(function(e){i.push(parseInt(e.split("|")[0],10)),r.push(parseInt(e.split("|")[1],10))}),t({assets:r,origins:i})})["catch"](function(e){return n({func:"DB.getKeys",code:c.IDDB_PK_ERR,string:"Could not get keys from IDDB",input:{error:e}})})})}}},{"../../server/CONSTANTS":142,"../../server/ERROR_CODES":143,dexie:24,is_js:56}],157:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){var r=void 0,i=void 0,s=void 0,a=void 0,u=y(t);switch(u){case"svg":n.buffer&&(n=n.buffer);var c=new TextDecoder("utf8");i=new DataView(n),n=btoa(c.decode(i)),a="data:image/svg+xml;base64,"+n;break;case"png":r=new Uint8Array(n),s=new Blob([r],{type:"image/png"}),a=p.createObjectURL(s);case"gif":r=new Uint8Array(n),s=new Blob([r],{type:"image/gif"}),a=p.createObjectURL(s);case"jpg":case"jpeg":r=new Uint8Array(n),s=new Blob([r],{type:"image/jpeg"}),a=p.createObjectURL(s);break;case"bmp":r=new Uint8Array(n),s=new Blob([r],{type:"image/bmp"}),a=p.createObjectURL(s);break;case"webp":r=new Uint8Array(n),s=new Blob([r],{type:"image/webp"}),a=p.createObjectURL(s);break;default:r=new Uint8Array(n),s=new Blob([r]),a=p.createObjectURL(s)}this.blob_urls.addRecord({id:e,url:a,size:n.byteLength/1024}),o(e,a)}function o(e,t){var n=g(e);Object.keys(n).forEach(function(e){n[e].forEach(function(n){var r=n.element,i=n.url;switch(p.revokeObjectURL(i),e){case"source":case"img":r[m(r)]=t;break;default:r.style.backgroundImage="url("+t+")"}})})}function s(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden?e.idle():e.active()},!1)}function a(){var e=this;new MutationObserver(function(t){var n=t,r=function i(t){t.forEach(function(t){var n=t.children;if(t.getAttribute){var r=t.getAttribute("data-edgemesh");if(n&&n.length){if(i(Array.from(n)),r){var o=e.blob_urls.getRecord(r);o&&(e.debug&&d["default"].info("Deleting object url.",o),p.revokeObjectURL(o.url),e.blob_urls.removeRecord(o.id))}}else if(r){var s=e.blob_urls.getRecord(r);s&&(e.debug&&d["default"].info("Deleting object url.",s),p.revokeObjectURL(s.url),e.blob_urls.removeRecord(s.id))}}})};n.forEach(function(e){e.removedNodes.length&&r(e.removedNodes)})}).observe(document.documentElement,{childList:!0,subtree:!0})}Object.defineProperty(n,"__esModule",{value:!0}),n.getOrigin=n.getCSSBackground=n.getExt=n.getSrc=n.getElementEMID=n.setElementEMID=n.urlCreator=void 0,n.createImage=i,n.render=o,n.handleVisibilityChange=s,n.handleDomMutation=a;{var u=e("array-keys"),c=(r(u),e("../../config/support")),f=e("url"),l=r(f),h=e("utils/Log"),d=r(h),p=n.urlCreator=URL||window.URL||window.webkitURL||window.mozURL||window.msURL,g=(n.setElementEMID=function(e){var t={};return c.tagSupport.forEach(function(n){var r=[].slice.call(document.getElementsByTagName(n)),i=void 0;switch(n){case"source":case"img":i=r.filter(function(t){return-1!==e.indexOf(l["default"].resolve(t.baseURI,t[m(t)]))}).map(function(e){return{element:e,url:l["default"].resolve(e.baseURI,e[m(e)])}});break;default:i=r.filter(function(t){return-1!==e.indexOf(v(t))}).map(function(e){return{element:e,url:v(e)}})}t[n]=i}),t},n.getElementEMID=function(e){var t={};return c.tagSupport.forEach(function(n){var r=[].slice.call(document.getElementsByTagName(n)),i=void 0;i=r.filter(function(t){return t.getAttribute("data-edgemesh")===e}).map(function(e){return{element:e,url:e.getAttribute("data-origin")}}),t[n]=i}),t}),m=n.getSrc=function(e){return e.src?"src":!e.src&&e.srcset?"srcset":!1},y=n.getExt=function(e){return e.substr((~-e.lastIndexOf(".")>>>0)+2)},v=n.getCSSBackground=function(e){var t=window.getComputedStyle(e).getPropertyValue("background-image");return"none"===t?t=!1:(t=t.split('url("')[1],t=t.split('")')[0]),t};n.getOrigin=function(e){var t=void 0,n=g(e);return Object.keys(n).forEach(function(e){n[e].length&&n[e].forEach(function(e){t=e.url})}),t}}},{"../../config/support":4,"array-keys":6,url:131,"utils/Log":166}],158:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("to-array"),c=r(u),f=e("simple-peer"),l=r(f),h=e("component-emitter"),d=r(h),p=e("em-rtc-parser"),g=r(p),m=e("has-binary"),y=r(m),v=e("array-keys"),b=r(v),_=e("../../server/CONSTANTS"),w=e("utils"),k=e("../../config/config"),E=r(k),S=E["default"](),A=d["default"].prototype.emit,T=new TextDecoder("utf-8"),x=!1,R=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.peers=new b["default"],r.peerEvents={upgrade:1,error:1,peer_signal:1,peer_ready:1,stream:1},r.peerOptions={config:S.signaling,channelName:"edgemesh"},r.peerId=n.peerId||e.id,r.emid=n.peerId,r.decoder=new g["default"].Decoder(r),r.decoder.on("decoded",r._ondecoded.bind(r)),r.options=n,r.socket=e,r.socket.on("offer",r._acceptConnection.bind(r)),r.socket.on("signal",r._activateConnection.bind(r)),r}return s(t,e),a(t,[{key:"on",value:function(e,t){var n=this;this.socket.addEventListener(e,function(t){A.call(n,e,t)}),this.addEventListener(e,t)}},{key:"destroy",value:function(){this.socket.removeAllListeners(),this.removeAllListeners(),this.peers.forEachRecord(function(e){e.peer.destroy()})}},{key:"send",value:function(e,t,n){var r=this;if("string"==typeof e)this.connect(e).then(function(e){r.send(e,t,n)})["catch"](function(e){A.call(r,"peer-error",e)});else{{this.peers.getRecord("o:"+e.emid)}this.peers.addRecord({id:"o:"+e.emid,last_active:new Date,peer:e});var i=new g["default"].Encoder;[].shift.apply(arguments);var o=g["default"].EVENT;y["default"](arguments)&&(o=g["default"].BINARY_EVENT);var s=c["default"](arguments),a={type:o,data:s};i.encode(a,function(t){if(t[1]instanceof ArrayBuffer)r._sendArray(e,t);else if(t)for(var n=0;n<t.length;n++){var i=w.str2ab(t[n]),o=new ArrayBuffer(8),s=new DataView(o);s.setInt32(0,i.byteLength);var a=w.appendBuffer(o,i);r._send(e,a)}else if(r.DEBUG)throw new Error("Encoding error")})}}},{key:"connect",value:function(e){var t=this;return this._closeStaleConnections(),new Promise(function(n,r){var i=t.peers.getRecord("o:"+e);i?i.peer._channelReady?n(i.peer):i.peer.once("connect",function(){n(i.peer)}):!function(){var i=new l["default"](Object.assign(t.peerOptions,{initiator:!0}));i.setMaxListeners(0),t._setupPeerEvents("o:"+e,i),i.on("signal",function(n){x&&console.log("SENDING OFFER",n),t.socket.emit("peer-offer",{offer:n,fromPeerId:t.peerId,toPeerId:e})}),i.once("connect",function(){x&&console.log("PEER CONNECTED",e),i.emid=e,i.removeListener("error",r),A.call(t,"peer-connected",e),n(i)}),i.on("error",r),t.peers.addRecord({id:"o:"+e,peer:i,last_active:new Date})}()})}},{key:"disconnect",value:function(e){var t=this.peers.getRecord(e);t&&(t.peer.destroy(),this.peers.removeRecord(e))}},{key:"getConnectedPeers",value:function(){return this.peers.getIdentifiers()}},{key:"getStats",value:function(){var e={},t=[];return this.peers.forEachRecord(function(n){t.push(new Promise(function(t){n.peer.getStats(function(r){e[n.id]=r,t()})}))}),Promise.all(t).then(function(){return e})}},{key:"_setupPeerEvents",value:function(e,t){var n=this;t.on("data",function(t){var r=n.peers.getRecord(e);if(n.peers.addRecord({id:r.id,peer:r.peer,last_active:new Date}),!n.destroyed){var i=t.buffer,o=new DataView(i),s=o.getInt32(0),a=T.decode(new Uint8Array(i.slice(8,s+8))),u=new Uint8Array(i.slice(8+s,i.byteLength));n.decoder.add(a),u.length&&n.decoder.add(u)}}),t.on("stream",function(e){n.emit("stream",e)}),t.on("close",function(){x&&console.log("PEER CLOSED",e),A.call(n,"peer-disconnected",e),t.removeAllListeners(),t.destroy(),n.peers.removeRecord(e)}),t.on("error",function(e){t.removeAllListeners(),t.destroy(),A.call(n,"peer-error",e)})}},{key:"_acceptConnection",value:function(e){var t=this,n=this.peers.getRecord("i:"+e.fromPeerId);if(n&&!n.peer.destroyed)n.peer.signal(e.offer);else{var r=new l["default"](Object.assign(this.peerOptions,{initiator:!1}));r.setMaxListeners(50),this._setupPeerEvents("i:"+e.fromPeerId,r),r.on("signal",function(n){x&&console.log("SENDING SIGNAL",n);var r={signal:n,fromPeerId:t.peerId,toPeerId:e.fromPeerId};t.socket.emit("peer-signal",r)}),x&&console.log("SIGNALING OFFER",e.offer),r.destroyed||r.signal(e.offer),this.peers.addRecord({id:"i:"+e.fromPeerId,peer:r,last_active:new Date})}}},{key:"_activateConnection",value:function(e){x&&console.log("ACTIVATE",e.signal);var t=this.peers.getRecord("o:"+e.fromPeerId);t&&!t.peer.destroyed&&t.peer.signal(e.signal)}},{key:"_sendArray",value:function(e,t){var n=w.str2ab(t[0]),r=t[1],i=new ArrayBuffer(8),o=new DataView(i),s=(o.setInt32(0,n.byteLength),w.appendBuffer(i,n));s=w.appendBuffer(s,r),this._send(e,s)}},{key:"_send",value:function(e,t){e.destroyed||e.send(t)}},{key:"_ondecoded",value:function(e){var t=e.data||[];A.apply(this,t)}},{key:"_closeStaleConnections",value:function(){var e=this.getConnectedPeers().length;if(e>_.MAX_CONNECTED_PEERS)for(var t=this.peers.mapRecords(function(e){return{id:e.id,last_active:e.last_active}}).sort(function(e,t){return e-t}).reverse(),n=e-_.MAX_CONNECTED_PEERS,r=0;n>r;r++)this.disconnect(t[r].id)}}]),t}(d["default"]);n["default"]=R},{"../../config/config":1,"../../server/CONSTANTS":142,"array-keys":6,"component-emitter":19,"em-rtc-parser":26,"has-binary":49,"simple-peer":100,"to-array":129,utils:170}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StoreAsset=n.RegisterWorker=n.StartSession=n.SetDebug=n.DumpDebug=n.DOMUnloaded=n.DOMLoaded=n.BindWorkerEvents=n.BindMTEvents=n.BindSWEvents=void 0;{var r=e("../../server/CONSTANTS"),i=(e("interface/DOM"),e("../../server/ERROR_CODES"));n.BindSWEvents=function(e){return new Promise(function(t,n){return window.navigator.serviceWorker?(window.navigator.serviceWorker.addEventListener("message",e),t(!0)):n({message:"Error binding sw events:  No service worker found",code:i.SW_NOT_FOUND})})},n.BindMTEvents=function(e){return new Promise(function(t){return window.addEventListener("message",e),t(!0)})},n.BindWorkerEvents=function(e){return new Promise(function(t){return self.addEventListener("message",e),t(!0)})},n.DOMLoaded=function(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({channel:r.DOM_LOADED})},n.DOMUnloaded=function(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({channel:r.DOM_UNLOADED})},n.DumpDebug=function(){var e=document.getElementById("EMHub").contentWindow;e.postMessage({channel:r.DUMP_DEBUG},"https://"+this.host)},n.SetDebug=function(e){var t=document.getElementById("EMHub").contentWindow;t.postMessage({channel:r.SET_DEBUG,debug:e},"https://"+this.host)},n.StartSession=function(){var e=this;return new Promise(function(t,n){try{parent.postMessage({channel:r.SESSION_START,data:{hub_id:e.id}},"https://"+e.origin),t()}catch(i){e.debug&&Log.warn("Error initializing session.",i),n({func:"Postmessgae.StartSession",code:FRAME_NOT_INSTALLED,string:"Storage frame not installed in iFrame",input:{origin:e.origin,error:i}})}})},n.RegisterWorker=function(e){e.postMessage({channel:r.WORKER_REGISTER,data:{hub_id:this.id,host:this.host,debug:this.debug}})},n.StoreAsset=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;e.postMessage({channel:r.ASSET_STORE,data:t,register:n,record:i})}}},{"../../server/CONSTANTS":142,"../../server/ERROR_CODES":143,"interface/DOM":157}],160:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StoreAsset=n.RegisterWorker=n.StartSession=n.SetDebug=n.DumpDebug=n.DOMUnloaded=n.DOMLoaded=n.BindWorkerEvents=n.BindMTEvents=n.BindSWEvents=void 0;{var r=e("../../server/CONSTANTS"),i=(e("interface/DOM"),e("../../server/ERROR_CODES"));n.BindSWEvents=function(e){return new Promise(function(t,n){return window.navigator.serviceWorker?(window.navigator.serviceWorker.addEventListener("message",e),t(!0)):n({message:"Error binding sw events:  No service worker found",code:i.SW_NOT_FOUND})})},n.BindMTEvents=function(e){return new Promise(function(t){return window.addEventListener("message",e),t(!0)})},n.BindWorkerEvents=function(e){return new Promise(function(t){return self.addEventListener("message",e),t(!0)})},n.DOMLoaded=function(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({channel:r.DOM_LOADED})},n.DOMUnloaded=function(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({channel:r.DOM_UNLOADED})},n.DumpDebug=function(){var e=document.getElementById("EMHub").contentWindow;e.postMessage({channel:r.DUMP_DEBUG},"https://"+this.host)},n.SetDebug=function(e){var t=document.getElementById("EMHub").contentWindow;t.postMessage({channel:r.SET_DEBUG,debug:e},"https://"+this.host)},n.StartSession=function(){var e=this;return new Promise(function(t,n){try{parent.postMessage({channel:r.SESSION_START,data:{hub_id:e.id}},"https://"+e.origin),t()}catch(i){e.debug&&Log.warn("Error initializing session.",i),n({func:"Postmessgae.StartSession",code:FRAME_NOT_INSTALLED,string:"Storage frame not installed in iFrame",input:{origin:e.origin,error:i}})}})},n.RegisterWorker=function(e){e.postMessage({channel:r.WORKER_REGISTER,data:{hub_id:this.id,host:this.host,debug:this.debug}})},n.StoreAsset=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;e.postMessage({channel:r.ASSET_STORE,data:t,register:n,record:i})}}},{"../../server/CONSTANTS":142,"../../server/ERROR_CODES":143,"interface/DOM":157}],161:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.TransferRecord=n.AssetLocate=n.AssetRegister=n.SessionDeregister=n.SessionRegister=n.ClientDeregister=n.ClientRegister=n.HubIdle=n.HubActive=n.HubSyncDel=n.HubSyncAdd=n.HubDeregister=n.HubRegister=n.ErrorLog=void 0;{var i=e("../../server/CONSTANTS"),o=e("../../config/config"),s=r(o),a=s["default"]();n.ErrorLog=function(e,t){e.emit(i.ERROR_LOG,{level:t.level,host:t.host,func:t.func,code:t.code,message:t.message,input:t.input})},n.HubRegister=function(e,t){e.emit(i.HUB_REGISTER,{hub_id:t.hub_id,browser_info:t.browser_info,size:t.size,keys:t.keys,version:a.version})},n.HubDeregister=function(e,t){e.emit(i.HUB_DEREGISTER,{hub_id:t.hub_id})},n.HubSyncAdd=function(e,t){e.emit(i.HUB_SYNC_ADD,{hub_id:t.hub_id,size:t.size,keys:t.keys})},n.HubSyncDel=function(e,t){e.emit(i.HUB_SYNC_DEL,{hub_id:t.hub_id,size:t.size,keys:t.keys})},n.HubActive=function(e,t){e.emit(i.HUB_ACTIVE,{hub_id:t.hub_id})},n.HubIdle=function(e,t){e.emit(i.HUB_IDLE,{hub_id:t.hub_id})},n.ClientRegister=function(e,t){e.emit(i.CLIENT_REGISTER,{client_id:t.client_id,origin_id:parseInt(t.origin_id,10),browser_info:t.browser_info,version:a.version})},n.ClientDeregister=function(e,t){e.emit(i.CLIENT_DEREGISTER,{client_id:t.client_id})},n.SessionRegister=function(e,t){e.emit(i.SESSION_REGISTER,{hub_id:t.hub_id,client_id:t.client_id,origin_id:parseInt(t.origin_id,10)})},n.SessionDeregister=function(e,t){e.emit(i.SESSION_DEREGISTER,{hub_id:t.hub_id,client_id:t.client_id,origin_id:parseInt(t.origin_id,10)})},n.AssetRegister=function(e,t){e.emit(i.ASSET_REGISTER,{origin_id:parseInt(t.origin_id,10),asset_id:parseInt(t.asset_id,10),topic:parseInt(t.topic,10),hub_id:t.hub_id,asset_url:t.asset_url,size_kb:parseFloat(t.size_kb),content_type:t.content_type,checksum:t.checksum})},n.AssetLocate=function(e,t){e.emit(i.ASSET_LOCATE,{client_id:t.client_id,origin_id:t.origin_id,asset_id:t.asset_id,locate_id:t.locate_id})},n.TransferRecord=function(e,t){e.emit(i.TRANSFER_RECORD,{asset_id:parseInt(t.asset_id,10),chunk_id:parseInt(t.chunk_id,10),origin_id:parseInt(t.origin_id,10),topic:parseInt(t.topic,10),src:t.src,dst:t.dst,size_kb:parseFloat(t.size_kb),protocol:t.protocol,transfer_start:t.transfer_start,transfer_end:t.transfer_end,handshake_ms:parseFloat(t.handshake_ms),success:t.success})}}},{"../../config/config":1,"../../server/CONSTANTS":142}],162:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){return new s.Task({priority:"high",callback:function(){return self.db.assets["delete"](e+"|"+t).then(function(){self.debug&&o["default"].info("File removed from hub.",{key:e+"|"+t})})}})};var i=e("utils/Log"),o=r(i),s=e("utils/Queue")},{"utils/Log":166,"utils/Queue":168}],163:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=this;return new u.Task({priority:"high",callback:function(){return new Promise(function(n,r){var i=e.fromPeerId,s=e.origin,u=e.asset,d=e.chunks,p=(e.handshake_ms,e.protocol),g=s+"|"+u;t.debug&&a["default"].info("Asset requested from hub.",{chunks:d});var m=performance.now();t.rtc.connect(i).then(function(e){var r=performance.now()-m;t.db.assets.where("id").equals(g).first(function(m){var y={handshake_ms:0,protocol:p,origin_id:s,asset_id:u,chunk_id:0,src:t.id,dst:i,content_type:m?m.content_type:"unknown",size_kb:0,topic:t.origin_hash,transfer_start:l.getTime()};if(!m)return t.rtc.send(i,h.ASSET_NOT_FOUND,{key:g,hub_id:t.id}),y.success=0,y.transfer_start=l.getTime(),y.transfer_end=l.getTime(),c.TransferRecord(t.io,y),t.debug&&a["default"].warn("Asset not found in database.",{key:g}),n("Asset not found in database.");var v=new o["default"]({name:m.id,mimeType:m.content_type,chunkSize:h.CHUNK_SIZE,arrayBuffer:m.blob});d.forEach(function(i){if(0===i){t.debug&&a["default"].info("Full asset requested."),t.rtc.send(e,h.ASSET_META,v.getMetadata()),f.isSupernode()&&t.outbound_transfers.addRecord({id:m.id,meta:v.getMetadata()});for(var o=v.getTransferObject(),s=0;s<v.totalChunks;s++){var u=o.getChunk();y.handshake_ms=r,y.chunk_id=s+1,y.size_kb=u.byteLength/1024,y.transfer_start=l.getTime(),t.rtc.send(e,h.ASSET_CHUNK,{chunk:u,rtcTransferStats:y}),f.isSupernode()&&(t.bytes_saved+=u.byteLength)}return f.isSupernode()&&t.outbound_transfers.removeRecord.bind(t.outbound_transfers,m.id),n({success:!0})}t.debug&&a["default"].info("Partial asset requested.",{chunk:c});var c=to.getChunk(i);return y.handshake_ms=r,y.chunk_id=i,y.size_kb=c.byteLength/1024,y.transfer_start=l.getTime(),t.rtc.send(e,h.ASSET_CHUNK,{chunk:c,rtcTransferStats:y}),f.isSupernode()&&(t.bytes_saved+=c.byteLength,t.outbound_transfers.removeRecord.bind(t.outbound_transfers,m.id)),n({success:!0})})})})["catch"](r)})}})};var i=e("chunk"),o=r(i),s=e("utils/Log"),a=r(s),u=e("utils/Queue"),c=e("interface/Websocket"),f=e("utils"),l=e("utils/Time"),h=e("../../server/CONSTANTS")},{"../../server/CONSTANTS":142,chunk:146,"interface/Websocket":161,utils:170,"utils/Log":166,"utils/Queue":168,"utils/Time":169}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FetchUrl=n.Fetch=void 0;var r=e("interface/DOM"),i=e("utils/Time"),o=n.Fetch=function(e,t){var n=this;return new Promise(function(o,s){var a=n,u=e+"|"+t,c={asset_id:t,origin_id:e,chunk_id:0,transfer_start:i.getTime(),protocol:"xhr_get",src:"origin",dst:a.id,topic:a.origin_hash},f=r.getOrigin(u);if(!f)return s("Url not found.");var l=performance.now(),h=new XMLHttpRequest;"withCredentials"in h?h.open("GET",f+"?edgemesh=origin",!0):"undefined"!=typeof XDomainRequest&&(h=new XDomainRequest,h.open("GET",f+"?edgemesh=origin")),h.responseType="arraybuffer",h.onload=function(){c.handshake_ms=performance.now()-l,c.transfer_end=i.getTime();var n=this.getResponseHeader("Content-Type"),r=this.getResponseHeader("Content-Length");return 200==this.status?(c.success=1,c.size_kb=r/1024,o({origin:e,asset:t,content_type:n,url:f,xhrTransferStats:c,ab:this.response})):(c.success=0,c.size_kb=0,s({asset:t,origin:e,content_type:n,url:f,xhrTransferStats:c,status:this.status}))},h.send()})};n["default"]=o;n.FetchUrl=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;"withCredentials"in r?r.open("GET",""+e,!0):"undefined"!=typeof XDomainRequest&&(r=new XDomainRequest,r.open("GET",""+e)),r.responseType="arraybuffer",r.onload=function(){200==this.status?t(this.response):n({func:"Fetch.FetchUrl",string:"Could not get file from ObjectURL",input:{url:e}})},r.send()})}},{"interface/DOM":157,"utils/Time":169}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=0,n=void 0,r=void 0;if(0==e.length)return t;for(n=0;n<e.length;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t&=t;return t}},{}],166:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.error=n.warn=n.info=n.title=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(e("utils"),"https://edgemesh.com/icons/favicon-16x16.png"),o="color: #9E9E9E;",s="color: #212121;",a="color: #AE4292;",u="color: #009688;",c="color: #F44336;",f="font-weight: inherit",l="font-weight: bold;",h="font-weight: lighter;",d="background: url("+i+");background-repeat: no-repeat;display: inline-block;background-size: 13px 13px;padding-left: 13px;border-radius: 8px;margin-left: 5px;",p=a+"font-size: 20px;font-weight: lighter",g=a+"font-size: 20px;font-weight: bold",m=n.title=function(e,t){console.log("\n        %cedge%cmesh\n    ",p,g),console.log("\n        Debug Mode: %cEnabled%c\n        Host:       %c"+e+"%c\n        Worker:     %c"+t+"%c\n\n        Turn off debug mode in production!\n\n        %cNeed help? %chttps://edgemesh.com/support%c\n        Found a Bug? %chttps://github.com/edgemesh/edgemesh/issues\n    ",u,s,a,s,a,s,o,a,o,a)},y=["blob","ab","chunk"],v=n.info=function(e,t){return t?(console.groupCollapsed("%c%c edge%cmesh %c"+e,d,a+h,a+l,s+f),Object.keys(t).forEach(function(e){return-1===y.indexOf(e)?Array.isArray(t[e])?k(e,t[e]):"object"===r(t[e])?w(e,t[e]):void console.log(e+": "+t[e]):void 0}),void console.groupEnd()):console.log("%c%c edge%cmesh %c"+e,d,a+h,a+l,s+f)},b=n.warn=function(e,t){console.groupCollapsed("%c%c edge%cmesh %c"+e,d,a+h,a+l,c+f),Object.keys(t).forEach(function(e){return-1===y.indexOf(e)?Array.isArray(t[e])?k(e,t[e]):"object"===r(t[e])?w(e,t[e]):void console.log(e+": "+t[e]):void 0}),console.groupEnd()},_=n.error=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.error("%c%c edge%cmesh %c"+e,d,a+h,a+l,c+f,t)},w=function E(e,t){console.group(e),Object.keys(t).forEach(function(e){var n=t[e];return Array.isArray(n)?k(e,n):"object"===("undefined"==typeof n?"undefined":r(n))?E(e,n):void console.log(e+": "+n)}),console.groupEnd()},k=function S(e,t){console.group(e),t.forEach(function(e,t){return Array.isArray(e)?S(t,e):"object"===("undefined"==typeof e?"undefined":r(e))?w(t,e):void console.log(t+": "+(e||null))}),console.groupEnd()};n["default"]={title:m,info:v,warn:b,error:_}},{utils:170}],167:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("chunk"),a=r(s),u=e("compress"),c=e("array-keys"),f=(r(c),e("../../server/CONSTANTS")),l=e("../../server/ERROR_CODES"),h=e("utils/Log"),d=r(h),p=e("utils/Time"),g=e("interface/Websocket"),m=e("interface/DOM"),y=(e("interface/PostMessage"),function(){function e(t,n){i(this,e),this.currentHubIndex=0,this.stats={},this.receivedChunks=0,this.complete=!1,this.locate_data={},this.meta={},this.key=n.origin+"|"+n.asset,this.scope=t,this.locate_data=n,this.rtc=t.rtc,this.debug=t.debug,this.rtc.on("peer-error",this.handleDisconnect.bind(this)),this.scope.mesh_transfers.addRecord({id:this.key,mesh:this})}return o(e,[{key:"deconstructor",value:function(){this.rtc.removeListener("peer-error",this.handleDisconnect),this.scope.mesh_transfers.removeRecord(this.key)}},{key:"start",value:function(){this.requestTransfer()}},{key:"requestTransfer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],n=this.locate_data,r=n.origin,i=n.asset,o=n.hubs,s=n.checksum,a=o[this.currentHubIndex];if(!a)return this.debug&&d["default"].info("No hubs. Fall back to origin.",{origin:r,asset:i}),this.scope.fetchFromOrigin&&this.scope.fetchFromOrigin.call(this.scope,{origin:r,asset:i}),this.deconstructor();this.debug&&d["default"].info("Starting mesh transfer from hub.",{hub_id:a});var u=performance.now();this.stats.transfer_start=p.getTime(),this.stats.src=a,this.checksum=s,this.connection_timeout=setTimeout(this.tryNextHub.bind(this),f.MESH_CONNECT_TIMEOUT),this.rtc.connect(a).then(function(n){clearTimeout(e.connection_timeout),e.stats.handshake_ms=performance.now()-u,e.rtc.send(n,f.ASSET_REQUEST,{origin:r,asset:i,fromPeerId:e.scope.id,chunks:t,handshake_ms:e.stats.handshake_ms,protocol:e.locate_data.protocol})})["catch"](function(t){e.debug&&d["default"].error("Error connecting to peer.",{error:t}),g.ErrorLog(e.scope.io,{level:"error",host:e.scope.id,code:l.PEER_CONNECT_ERR,message:t,func:"Mesh.requestTransfer",input:{hub:a}}),e.tryNextHub()})}},{key:"metaReceived",value:function(e){this.meta=e,this.scope.debug&&d["default"].info("Asset mesh meta received.",e);var t=new a["default"](e);t.onCompleted=this.transferComplete.bind(this)}},{key:"chunkReceived",value:function(e){a["default"].submitChunk(e.chunk.buffer);var t=e.rtcTransferStats;t.transfer_end=p.getTime(),t.success=1,t.topic=this.scope.origin_hash,g.TransferRecord(this.scope.io,t),this.debug&&d["default"].info("Asset mesh chunk received.",e),this.receivedChunks++}},{key:"transferComplete",value:function(e){var t=this,n=this.locate_data.origin,r=this.locate_data.asset,i=n+"|"+r;this.complete=!0,e.getFile().then(function(o){var s=o.ArrayBuffer;o.ArrayBuffer instanceof ArrayBuffer||(s=o.ArrayBuffer.buffer),e.totalChunks>1&&(s=u.inflate(s).buffer);var a=o.getChecksum(s),c={asset_id:r,origin_id:n,chunk_id:0,src:t.stats.src,dst:t.scope.id,size_kb:s.byteLength/1024,protocol:t.locate_data.protocol,transfer_start:t.stats.transfer_start,transfer_end:p.getTime(),handshake_ms:t.stats.handshake_ms,topic:t.scope.origin_hash,success:1};if(t.checksum===a){var f=m.getOrigin(i);t.scope.blob_urls&&m.createImage.call(t.scope,i,f,s),g.TransferRecord(t.scope.io,c),t.debug&&d["default"].info("Asset mesh transfer complete.",e.getMetadata());var l={key:i,origin:n,asset:r,ab:s,content_type:t.meta.mimeType};t.scope.storeAsset(l),t.debug&&d["default"].info("Sending asset to worker for processing...",l),e.clearData(),t.deconstructor()}else t.debug&&d["default"].warn("Checksum did not match.",{expected:t.checksum,generated:a}),t.tryNextHub()})}},{key:"handleDisconnect",value:function(){if(!this.complete&&this.receivedChunks<this.meta.totalChunks){if(this.debug&&d["default"].info("Peer disconnected midflight.",{receivedChunks:this.recievedChunks,totalChunks:this.meta.totalChunks}),0===this.receivedChunks)return this.tryNextHub();for(var e=[],t=this.receivedChunks;t<this.meta.totalChunks;t++)e.push(t);return this.tryNextHub(e)}}},{key:"tryNextHub",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],t={asset_id:this.locate_data.asset,origin_id:this.locate_data.origin,chunk_id:0,src:this.stats.src,dst:this.scope.id,size_kb:0,protocol:this.locate_data.protocol,transfer_start:this.stats.transfer_start,transfer_end:p.getTime(),handshake_ms:this.stats.handshake_ms,topic:this.scope.origin_hash,success:0};g.TransferRecord(this.scope.io,t),this.currentHubIndex++,this.requestTransfer(e)}}]),e}());n["default"]=y},{"../../server/CONSTANTS":142,"../../server/ERROR_CODES":143,"array-keys":6,chunk:146,compress:150,"interface/DOM":157,"interface/PostMessage":159,"interface/Websocket":161,"utils/Log":166,"utils/Time":169}],168:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e
}}Object.defineProperty(n,"__esModule",{value:!0}),n.Task=n.Queue=void 0;{var i=e("utils/log"),o=r(i),s=e("promise-defer"),a=r(s);n.Queue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({debug:!1,maxParallel:6,processingFrequency:30},e),n=t.debug,r=t.maxParallel,i=t.processingFrequency,s={low:[],mid:[],high:[]},a=[],u=void 0,c=0;n&&o["default"].info("Creating queue with max parallelism of "+r+" and processingFrequency of "+i+" ms.");var f=function(e){return function(){n&&o["default"].info("Removing resolved task from the active task list."),a.splice(a.indexOf(e))}};return{start:function(){u=setInterval(this.processQueue,i)},stop:function(){u&&clearInterval(u)},clear:function(e){s[e]=[]},enqueue:function(e){s[e.priority]&&s[e.priority].unshift(e)||console.error("Invalid priority: "+e.priority+". Please use 'low' 'mid' or 'high'")},getQueuedTasks:function(){var e={totalQueued:0,processed:c,started:u?!0:!1};for(var t in s)e[t]=s[t].length,e.totalQueued=e.totalQueued+s[t].length;return e},processQueue:function(){if(n&&o["default"].info("Processing task queue..."),n&&o["default"].info("Active tasks: "+a.length),a.length<=r){n&&console.log("high: "+s.high.length+", mid: "+s.mid.length+", low: "+s.low.length);var e=s.high.length>0?s.high.pop():s.mid.length>0?s.mid.pop():s.low.pop();e&&(n&&console.log("executing new task"),a.push(e),e.execute().then(f(e),f(e)),c++)}}}},n.Task=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{priority:"mid"},t=e.priority,n=e.callback,r=a["default"]();return{priority:t,promise:r.promise,execute:function(){return n().then(function(e){return r.resolve(e)},function(e){return r.reject(e)})}}}}},{"promise-defer":82,"utils/log":171}],169:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.stop=n.start=n.getTime=void 0;{var i=e("timesync/lib/timesync"),o=e("utils/Log"),s=r(o),a=null;n.getTime=function(){return a?new Date(a.now()).toISOString():(new Date).toISOString()},n.start=function(e,t){a=i.create({server:"https://"+e+"/timesync",interval:1e4}),t&&(a.on("sync",function(e){s["default"].info("Time sync "+e+"ed.")}),a.on("change",function(e){s["default"].info("Time offset changed: "+e)}))},n.stop=function(){a&&(a.destroy(),a=null)}}},{"timesync/lib/timesync":126,"utils/Log":166}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.singletonize=function(e){return Array.isArray(e)?1===e.length?e[0]:e:(Object.keys(e).forEach(function(t){Array.isArray(e[t])&&1===e[t].length&&(e[t]=e[t][0])}),e)},n.isSupernode=function(){try{return window.self===window.top}catch(e){return!1}},n.ab2str=function(e){return String.fromCharCode.apply(null,new Uint16Array(e))},n.str2ab=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,i=e.length;i>r;r++)n[r]=e.charCodeAt(r);return t},n.appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},n.isFunction=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)}},{}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.error=n.warn=n.info=n.title=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(e("utils"),"https://edgemesh.com/icons/favicon-16x16.png"),o="color: #9E9E9E;",s="color: #212121;",a="color: #AE4292;",u="color: #009688;",c="color: #F44336;",f="font-weight: inherit",l="font-weight: bold;",h="font-weight: lighter;",d="background: url("+i+");background-repeat: no-repeat;display: inline-block;background-size: 13px 13px;padding-left: 13px;border-radius: 8px;margin-left: 5px;",p=a+"font-size: 20px;font-weight: lighter",g=a+"font-size: 20px;font-weight: bold",m=n.title=function(e,t){console.log("\n        %cedge%cmesh\n    ",p,g),console.log("\n        Debug Mode: %cEnabled%c\n        Host:       %c"+e+"%c\n        Worker:     %c"+t+"%c\n\n        Turn off debug mode in production!\n\n        %cNeed help? %chttps://edgemesh.com/support%c\n        Found a Bug? %chttps://github.com/edgemesh/edgemesh/issues\n    ",u,s,a,s,a,s,o,a,o,a)},y=["blob","ab","chunk"],v=n.info=function(e,t){return t?(console.groupCollapsed("%c%c edge%cmesh %c"+e,d,a+h,a+l,s+f),Object.keys(t).forEach(function(e){return-1===y.indexOf(e)?Array.isArray(t[e])?k(e,t[e]):"object"===r(t[e])?w(e,t[e]):void console.log(e+": "+t[e]):void 0}),void console.groupEnd()):console.log("%c%c edge%cmesh %c"+e,d,a+h,a+l,s+f)},b=n.warn=function(e,t){console.groupCollapsed("%c%c edge%cmesh %c"+e,d,a+h,a+l,c+f),Object.keys(t).forEach(function(e){return-1===y.indexOf(e)?Array.isArray(t[e])?k(e,t[e]):"object"===r(t[e])?w(e,t[e]):void console.log(e+": "+t[e]):void 0}),console.groupEnd()},_=n.error=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.error("%c%c edge%cmesh %c"+e,d,a+h,a+l,c+f,t)},w=function E(e,t){console.group(e),Object.keys(t).forEach(function(e){var n=t[e];return Array.isArray(n)?k(e,n):"object"===("undefined"==typeof n?"undefined":r(n))?E(e,n):void console.log(e+": "+n)}),console.groupEnd()},k=function S(e,t){console.group(e),t.forEach(function(e,t){return Array.isArray(e)?S(t,e):"object"===("undefined"==typeof e?"undefined":r(e))?w(t,e):void console.log(t+": "+(e||null))}),console.groupEnd()};n["default"]={title:m,info:v,warn:b,error:_}},{utils:170}]},{},[149]);