!function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Ec;case"days":case"day":case"d":return n*xc;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ac;case"minutes":case"minute":case"mins":case"min":case"m":return n*kc;case"seconds":case"second":case"secs":case"sec":case"s":return n*_c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function n(e){return e>=xc?Math.round(e/xc)+"d":e>=Ac?Math.round(e/Ac)+"h":e>=kc?Math.round(e/kc)+"m":e>=_c?Math.round(e/_c)+"s":e+"ms"}function r(e){return o(e,xc,"day")||o(e,Ac,"hour")||o(e,kc,"minute")||o(e,_c,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(Bc===setTimeout)return setTimeout(e,0);if((Bc===i||!Bc)&&setTimeout)return Bc=setTimeout,setTimeout(e,0);try{return Bc(e,0)}catch(t){try{return Bc.call(null,e,0)}catch(t){return Bc.call(this,e,0)}}}function c(e){if(Dc===clearTimeout)return clearTimeout(e);if((Dc===s||!Dc)&&clearTimeout)return Dc=clearTimeout,clearTimeout(e);try{return Dc(e)}catch(t){try{return Dc.call(null,e)}catch(t){return Dc.call(this,e)}}}function u(){Ic&&Oc&&(Ic=!1,Oc.length?Pc=Oc.concat(Pc):jc=-1,Pc.length&&h())}function h(){if(!Ic){var e=a(u);Ic=!0;for(var t=Pc.length;t;){for(Oc=Pc,Pc=[];++jc<t;)Oc&&Oc[jc].run();jc=-1,t=Pc.length}Oc=null,Ic=!1,c(e)}}function f(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Pc.push(new l(e,t)),1!==Pc.length||Ic||a(h)}function l(e,t){this.fun=e,this.array=t}function p(){}function d(e){throw new Error("process.binding is not supported")}function g(){return"/"}function y(e){throw new Error("process.chdir is not supported")}function m(){return 0}function v(e){var t=.001*Qc.call(Gc),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],r-=e[1],r<0&&(n--,r+=1e9)),[n,r]}function b(){var e=new Date,t=e-eu;return t/1e3}function w(e,t){return t={exports:{}},e(t,t.exports),t.exports}function _(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*hu;case"days":case"day":case"d":return n*uu;case"hours":case"hour":case"hrs":case"hr":case"h":return n*cu;case"minutes":case"minute":case"mins":case"min":case"m":return n*au;case"seconds":case"second":case"secs":case"sec":case"s":return n*su;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function k(e){return e>=uu?Math.round(e/uu)+"d":e>=cu?Math.round(e/cu)+"h":e>=au?Math.round(e/au)+"m":e>=su?Math.round(e/su)+"s":e+"ms"}function A(e){return x(e,uu,"day")||x(e,cu,"hour")||x(e,au,"minute")||x(e,su,"second")||e+" ms"}function x(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function E(e,t){var n=e;t=t||nu.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(gu("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),gu("parse %s",e),n=du(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=n.host.indexOf(":")!==-1,o=r?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}function C(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*_u;case"days":case"day":case"d":return n*wu;case"hours":case"hour":case"hrs":case"hr":case"h":return n*bu;case"minutes":case"minute":case"mins":case"min":case"m":return n*vu;case"seconds":case"second":case"secs":case"sec":case"s":return n*mu;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function S(e){return e>=wu?Math.round(e/wu)+"d":e>=bu?Math.round(e/bu)+"h":e>=vu?Math.round(e/vu)+"m":e>=mu?Math.round(e/mu)+"s":e+"ms"}function R(e){return T(e,wu,"day")||T(e,bu,"hour")||T(e,vu,"minute")||T(e,mu,"second")||e+" ms"}function T(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function B(e){if(e)return D(e)}function D(e){for(var t in B.prototype)e[t]=B.prototype[t];return e}function O(e){return nu.Buffer&&nu.Buffer.isBuffer(e)||nu.ArrayBuffer&&e instanceof ArrayBuffer}function P(e){function t(e){if(!e)return!1;if(nu.Buffer&&nu.Buffer.isBuffer&&nu.Buffer.isBuffer(e)||nu.ArrayBuffer&&e instanceof ArrayBuffer||nu.Blob&&e instanceof Blob||nu.File&&e instanceof File)return!0;if(Mu(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0}return!1}return t(e)}function I(e,t,n){function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}var o=!1;return n=n||j,r.count=e,0===e?t():r}function j(){}function N(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}e[t]=r}}}function U(e,t){t=t||{};var n=new Ku;N(e);for(var r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}function L(e,t){return N(e),new Blob(e,t||{})}function z(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}function M(e){var t="";do t=ah[e%ch]+t,e=Math.floor(e/ch);while(e>0);return t}function F(e){var t=0;for(fh=0;fh<e.length;fh++)t=t*ch+uh[e.charAt(fh)];return t}function q(){var e=M(+new Date);return e!==nh?(hh=0,nh=e):e+"."+M(hh++)}function Y(e){var t=e&&e.forceBase64;kh&&!t||(this.supportsBinary=!1),gh.call(this,e)}function H(){}function $(e){if(xh.call(this,e),this.requestTimeout=e.requestTimeout,nu.location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!==nu.location.hostname||n!==e.port,this.xs=e.secure!==t}else this.extraHeaders=e.extraHeaders}function K(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function W(){for(var e in K.requests)K.requests.hasOwnProperty(e)&&K.requests[e].abort()}function J(){}function Z(e){Dh.call(this,e),this.query=this.query||{},Bh||(nu.___eio||(nu.___eio=[]),Bh=nu.___eio),this.index=Bh.length;var t=this;Bh.push(function(e){t.onData(e)}),this.query.j=this.index,nu.document&&nu.addEventListener&&nu.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=J)},!1)}function V(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=Kh&&!e.forceNode,this.usingBrowserWebSocket||(Wh=Nh),Mh.call(this,e)}function X(e){var t,n=!1,r=!1,o=!1!==e.jsonp;if(nu.location){var i="https:"===location.protocol,s=location.port;s||(s=i?443:80),n=e.hostname!==location.hostname||s!==e.port,r=e.secure!==i}if(e.xdomain=n,e.xscheme=r,t=new Zh(e),"open"in t&&!e.forceJSONP)return new Vh(e);if(!o)throw new Error("JSONP disabled");return new Xh(e)}function G(e,t){if(!(this instanceof G))return new G(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=mf(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=mf(t.host).host),this.secure=null!=t.secure?t.secure:nu.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(nu.location?location.hostname:"localhost"),this.port=t.port||(nu.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=bf.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized,this.forceNode=!!t.forceNode;var n="object"==typeof nu&&nu;n.global===n&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function Q(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ee(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}function te(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}function ne(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function re(e,t){return this instanceof re?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Lf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new Pf.Encoder,this.decoder=new Pf.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new re(e,t)}function oe(){}function ie(e){"object"!=typeof e&&(e={}),this._identifier=e.identifier||"id",this._store=[],this._idx=[],e.emitEvents?(this._emitEvents=!0,this.events=new Yf):this._emitEvents=!1}function se(e,t){return"object"!=typeof t?e:(xl(t).forEach(function(n){e[n]=t[n]}),e)}function ae(e,t){return Rl.call(e,t)}function ce(e,t){"function"==typeof t&&(t=t(Sl(e))),xl(t).forEach(n=>{ue(e,n,t[n])})}function ue(e,t,n,r){Object.defineProperty(e,t,se(n&&ae(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function he(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ue(e.prototype,"constructor",e),{extend:ce.bind(null,e.prototype)}}}}function fe(e,t){var n,r=Tl(e,t);return r||(n=Sl(e))&&fe(n,t)}function le(e,t,n){return Bl.call(e,t,n)}function pe(e,t){return t(e)}function de(e){var t=setTimeout(e,1e3);clearTimeout(t)}function ge(e){if(!e)throw new Error("Assertion Failed")}function ye(e){Cl.setImmediate?setImmediate(e):setTimeout(e,0)}function me(e,t){return e.reduce((e,n,r)=>{var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function ve(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function be(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function we(e,t){if(ae(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=we(e,t[r]);n.push(i)}return n}var s=t.indexOf(".");if(s!==-1){var a=e[t.substr(0,s)];return void 0===a?void 0:we(a,t.substr(s+1))}}function _e(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){ge("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)_e(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var s=t.substr(0,i),a=t.substr(i+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var c=e[s];c||(c=e[s]={}),_e(c,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function ke(e,t){"string"==typeof t?_e(e,t,void 0):"length"in t&&[].map.call(t,function(t){_e(e,t,void 0)})}function Ae(e){var t={};for(var n in e)ae(e,n)&&(t[n]=e[n]);return t}function xe(e){if(!e||"object"!=typeof e)return e;var t;if(El(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(xe(e[n]))}else if(e instanceof Date)t=new Date,t.setTime(e.getTime());else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var o in e)ae(e,o)&&(t[o]=xe(e[o]))}return t}function Ee(e,t,n,r){return n=n||{},r=r||"",xl(e).forEach(o=>{if(ae(t,o)){var i=e[o],s=t[o];"object"==typeof i&&"object"==typeof s&&i&&s&&i.constructor===s.constructor?Ee(i,s,n,r+o+"."):i!==s&&(n[r+o]=t[o])}else n[r+o]=void 0}),xl(t).forEach(o=>{ae(e,o)||(n[r+o]=t[o])}),n}function Ce(e){var t,n,r,o;if(1===arguments.length){if(El(e))return e.slice();if(this===Pl&&"string"==typeof e)return[e];if(o=Ol(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"==typeof t){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function Se(e){return Il.apply([],e)}function Re(){}function Te(e){return e}function Be(e,t){return null==e||e===Te?t:function(n){return t(e(n))}}function De(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Oe(e,t){return e===Re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?De(r,this.onsuccess):r),o&&(this.onerror=this.onerror?De(o,this.onerror):o),void 0!==i?i:n}}function Pe(e,t){return e===Re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?De(n,this.onsuccess):n),r&&(this.onerror=this.onerror?De(r,this.onerror):r)}}function Ie(e,t){return e===Re?t:function(n){var r=e.apply(this,arguments);se(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?De(o,this.onsuccess):o),i&&(this.onerror=this.onerror?De(i,this.onerror):i),void 0===r?void 0===s?void 0:s:se(r,s)}}function je(e,t){return e===Re?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ne(e,t){return e===Re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}function Ue(e,t){jl=e,Nl=t}function Le(){if(Ul)try{throw Le.arguments,new Error}catch(e){return e}return new Error}function ze(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Nl).map(e=>"\n"+e).join("")):""}function Me(e,t){return function(){return console.warn(`${e} is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. ${ze(Le(),1)}`),t.apply(this,arguments)}}function Fe(e,t){this._e=Le(),this.name=e,this.message=t}function qe(e,t){return e+". Errors: "+t.map(e=>e.toString()).filter((e,t,n)=>n.indexOf(e)===t).join("\n")}function Ye(e,t,n,r){this._e=Le(),this.failures=t,this.failedKeys=r,this.successCount=n}function He(e,t){this._e=Le(),this.name="BulkError",this.failures=t,this.message=qe(e,t)}function $e(e,t){if(!e||e instanceof Fe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!$l[e.name])return e;var n=new $l[e.name](t||e.message,e);return"stack"in e&&ue(n,"stack",{get:function(){return this.inner.stack}}),n}function Ke(e){function t(e,t,i){if("object"==typeof e)return n(e);t||(t=je),i||(i=Re);var s={subscribers:[],fire:i,subscribe:function(e){s.subscribers.indexOf(e)===-1&&(s.subscribers.push(e),s.fire=t(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter(function(t){return t!==e}),s.fire=s.subscribers.reduce(t,i)}};return r[e]=o[e]=s,s}function n(e){xl(e).forEach(function(n){var r=e[n];if(El(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new Hl.InvalidArgument("Invalid event config");var o=t(n,Te,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];o.subscribers.forEach(function(e){ye(function(){e.apply(null,t)})})})}})}var r={},o=function(t,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]};o.addEventType=t;for(var i=1,s=arguments.length;i<s;++i)t(arguments[i]);return o}function We(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Re,this._lib=!1;var t=this._PSD=sp;if(jl&&(this._stackHolder=Le(),this._prev=null,this._numPrev=0,tt(this,rp)),"function"!=typeof e){if(e!==Wl)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ve(this,this._value))}this._state=null,this._value=null,++t.ref,Ze(this,e)}function Je(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=sp}function Ze(e,t){try{t(t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&rt();t&&"function"==typeof t.then?Ze(e,(e,n)=>{t instanceof We?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Xe(e)),n&&ot()}},Ve.bind(null,e))}catch(t){Ve(e,t)}}function Ve(e,t){if(np.push(t),null===e._state){var n=e._lib&&rt();t=op(t),e._state=!1,e._value=t,jl&&null!==t&&"object"==typeof t&&!t._promise&&be(()=>{var n=fe(t,"stack");t._promise=e,ue(t,"stack",{get:()=>Vl?n&&(n.get?n.get.apply(t):n.value):e.stack})}),at(e),Xe(e),n&&ot()}}function Xe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ge(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===cp&&(++cp,Gl(()=>{0===--cp&&it()},[]))}function Ge(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);var r=t.psd;++r.ref,++cp,Gl(Qe,[n,e,t])}function Qe(e,t,n){var r=sp,o=n.psd;try{o!==r&&(sp=o),rp=t;var i,s=t._value;t._state?i=e(s):(np.length&&(np=[]),i=e(s),np.indexOf(s)===-1&&ct(t)),n.resolve(i)}catch(e){n.reject(e)}finally{o!==r&&(sp=r),rp=null,0===--cp&&it(),--o.ref||o.finalize()}}function et(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o,i,s=e._value;null!=s?(o=s.name||"Error",i=s.message||s,r=ze(s,0)):(o=s,i=""),t.push(o+(i?": "+i:"")+r)}return jl&&(r=ze(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&et(e._prev,t,n)),t}function tt(e,t){var n=t?t._numPrev+1:0;n<Jl&&(e._prev=t,e._numPrev=n)}function nt(){rt()&&ot()}function rt(){var e=Ql;return Ql=!1,ep=!1,e}function ot(){var e,t,n;do for(;ap.length>0;)for(e=ap,ap=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ap.length>0);Ql=!0,ep=!0}function it(){var e=tp;tp=[],e.forEach(e=>{e._PSD.onunhandled.call(null,e._value,e)});for(var t=up.slice(0),n=t.length;n;)t[--n]()}function st(e){function t(){e(),up.splice(up.indexOf(t),1)}up.push(t),++cp,Gl(()=>{0===--cp&&it()},[])}function at(e){tp.some(t=>t._value===e._value)||tp.push(e)}function ct(e){for(var t=tp.length;t;)if(tp[--t]._value===e._value)return void tp.splice(t,1)}function ut(e){console.warn(`Unhandled rejection: ${e.stack||e}`)}function ht(e){return new We(Wl,!1,e)}function ft(e,t){var n=sp;return function(){var r=rt(),o=sp;try{return o!==n&&(sp=n),e.apply(this,arguments)}catch(e){t&&t(e)}finally{o!==n&&(sp=o),r&&ot()}}}function lt(e,t,n,r){var o=sp,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=pt(i,e,t,n,r);return 0===i.ref&&i.finalize(),s}function pt(e,t,n,r,o){var i=sp;try{return e!==i&&(sp=e),t(n,r,o)}finally{e!==i&&(sp=i)}}function dt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(n!==!1)try{var r,o={promise:t,reason:e};if(Cl.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(fp,!0,!0),se(r,o)):Cl.CustomEvent&&(r=new CustomEvent(fp,{detail:o}),se(r,o)),r&&Cl.dispatchEvent&&(dispatchEvent(r),!Cl.PromiseRejectionEvent&&Cl.onunhandledrejection))try{Cl.onunhandledrejection(r)}catch(e){}r.defaultPrevented||We.on.error.fire(e,t)}catch(e){}}function gt(e,t){var n=We.reject(e);return t?n.uncaught(t):n}function yt(e,t){function n(){re.on("versionchange",function(e){e.newVersion>0?console.warn(`Another connection wants to upgrade database '${re.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${re.name}'. Closing db now to resume the delete request.`),re.close()}),re.on("blocked",e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${re.name}') was blocked`):console.warn(`Upgrade '${re.name}' blocked by other connection holding version ${e.oldVersion/10}`)})}function r(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function o(e,t,n){var r=re._createTransaction(ne,Z,W);r.create(t),r._completion.catch(n);var o=r._reject.bind(r);lt(function(){sp.trans=r,0===e?(xl(W).forEach(function(e){a(t,e,W[e].primKey,W[e].indexes)}),We.follow(()=>re.on.populate.fire(r)).catch(o)):i(e,r,t).catch(o)})}function i(e,t,n){function r(){return o.length?We.resolve(o.shift()(t.idbtrans)).then(r):We.resolve()}var o=[],i=J.filter(t=>t._cfg.version===e)[0];if(!i)throw new Hl.Upgrade("Dexie specification of currently installed DB version is missing");W=re._dbSchema=i._cfg.dbschema;var f=!1,l=J.filter(t=>t._cfg.version>e);return l.forEach(function(e){o.push(()=>{var r=W,o=e._cfg.dbschema;N(r,n),N(o,n),W=re._dbSchema=o;var i=s(r,o);if(i.add.forEach(function(e){a(n,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new Hl.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){h(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),h(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return f=!0,We.follow(()=>{e._cfg.contentUpgrade(t)})}),o.push(function(t){if(!f||!bp){var n=e._cfg.dbschema;u(n,t)}})}),r().then(()=>{c(W,n)})}function s(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)s.recreate=!0,n.change.push(s);else{var a=o.idxByName,c=i.idxByName;for(var u in a)c[u]||s.del.push(u);for(u in c){var h=a[u],f=c[u];h?h.src!==f.src&&s.change.push(f):s.add.push(f)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,i])}return n}function a(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){h(o,e)}),o}function c(e,t){xl(e).forEach(function(n){t.db.objectStoreNames.contains(n)||a(t,n,e[n].primKey,e[n].indexes)})}function u(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function h(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function f(e){return re.on.error.fire(e)}function l(e,t,n){if(ee||sp.letThrough){var r=re._createTransaction(e,t,W);return r._promise(e,function(e,t){lt(function(){sp.trans=r,n(e,t,r)})}).then(e=>{return r._completion.then(()=>e)})}if(!Q){if(!H)return gt(new Hl.DatabaseClosed,f);re.open().catch(Re)}return oe.then(()=>l(e,t,n))}function p(e,t,n){this.name=e,this.schema=t,this.hook=V[e]?V[e].hook:Ke(null,{creating:[Oe,Re],reading:[Be,Te],updating:[Ie,Re],deleting:[Pe,Re]}),this._collClass=n||b}function d(e,t,n){p.call(this,e,t,n||_)}function g(e,t,n){return(n?kt:_t)(n=>{e.push(n),t&&t()})}function y(e,t,n,r,o){return new We((i,s)=>{var a=n.length,c=a-1;if(0===a)return i();if(r){var u,h=kt(s),f=wt(null);be(()=>{for(var r=0;r<a;++r){u={onsuccess:null,onerror:null};var s=n[r];o.call(u,s[0],s[1],t);var l=e.delete(s[0]);l._hookCtx=u,l.onerror=h,r===c?l.onsuccess=wt(i):l.onsuccess=f}},e=>{throw u.onerror&&u.onerror(e),e})}else for(var l=0;l<a;++l){var p=e.delete(n[l]);p.onerror=ft(_t(s)),l===c&&(p.onsuccess=ft(()=>i()))}}).uncaught(f)}function m(e,t,n,r){this.db=re,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=Ke(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=n,this._resolve=null,this._reject=null,this._completion=new We((e,t)=>{this._resolve=e,this._reject=t}).uncaught(f),this._completion.then(()=>{this.on.complete.fire()},e=>{return this.on.error.fire(e),this.parent?this.parent._reject(e):this.active&&this.idbtrans&&this.idbtrans.abort(),this.active=!1,gt(e)})}function v(e,t,n){this._ctx={table:e,index:":id"===t?null:t,collClass:e._collClass,or:n}}function b(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var o=e._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function w(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function _(){b.apply(this,arguments)}function k(e,t){return e._cfg.version-t._cfg.version}function A(e,t,n,r){t.forEach(function(t){var o=re._tableFactory(n,r[t]);e.forEach(function(e){t in e||(e[t]=o)})})}function x(e){e.forEach(function(e){for(var t in e)e[t]instanceof p&&delete e[t]})}function E(e,t,n,r,o,i){var s=i?(e,t,r)=>n(i(e),t,r):n,a=ft(s,o);e.onerror||(e.onerror=_t(o)),t?e.onsuccess=ve(function(){var n=e.result;if(n){var i=function(){n.continue()};t(n,function(e){i=e},r,o)&&a(n.value,n,function(e){i=e}),i()}else r()},o):e.onsuccess=ve(function(){var t=e.result;if(t){var n=function(){t.continue()};a(t.value,t,function(e){n=e}),n()}else r()},o)}function C(e){var t=[];return e.split(",").forEach(function(e){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Ct(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),El(r),/\./.test(e)))}),t}function S(e,t){return $.cmp(e,t)}function R(e,t){return S(e,t)<0?e:t}function T(e,t){return S(e,t)>0?e:t}function B(e,t){return $.cmp(e,t)}function D(e,t){return $.cmp(t,e)}function O(e,t){return e<t?-1:e===t?0:1}function P(e,t){return e>t?-1:e===t?0:1}function I(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function j(){if(re.verno=X.version/10,re._dbSchema=W={},Z=le(X.objectStoreNames,0),0!==Z.length){var e=X.transaction(Rt(Z),"readonly");Z.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1,i=new Ct(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,o),s=[],a=0;a<n.indexNames.length;++a){var c=n.index(n.indexNames[a]);r=c.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1;var u=new Ct(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,o);s.push(u)}W[t]=new St(t,i,s,{})}),A([V,m.prototype],xl(W),ne,W)}}function N(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],i=t.objectStore(o);M="getAll"in i;for(var s=0;s<i.indexNames.length;++s){var a=i.indexNames[s],c=i.index(a).keyPath,u="string"==typeof c?c:"["+le(c).join("+")+"]";if(e[o]){var h=e[o].idxByName[u];h&&(h.name=a)}}}}function U(e){re.on("blocked").fire(e),mp.filter(e=>e.name===re.name&&e!==re&&!e._vcFired).map(t=>t.on("versionchange").fire(e))}var L,z,M,F=yt.dependencies,q=se({addons:yt.addons,autoOpen:!0,indexedDB:F.indexedDB,IDBKeyRange:F.IDBKeyRange},t),Y=q.addons,H=q.autoOpen,$=q.indexedDB,K=q.IDBKeyRange,W=this._dbSchema={},J=[],Z=[],V={},X=null,G=null,Q=!1,ee=!1,te="readonly",ne="readwrite",re=this,oe=new We(e=>{L=e}),ie=new We((e,t)=>{z=t}),fe=!0,ye=!!Tt($);this.version=function(e){if(X||Q)throw new Hl.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=J.filter(function(t){return t._cfg.version===e})[0];return t?t:(t=new r(e),J.push(t),J.sort(k),t)},se(r.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?se(this._cfg.storesSource,e):e;var t={};J.forEach(function(e){se(t,e._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),W=re._dbSchema=n,x([V,re,m.prototype]),A([V,re,m.prototype,this._cfg.tables],xl(n),ne,n),Z=xl(n),this},upgrade:function(e){var t=this;return kp(function(){e(re._createTransaction(ne,xl(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){xl(e).forEach(function(n){if(null!==e[n]){var r={},o=C(e[n]),i=o.shift();if(i.multi)throw new Hl.Schema("Primary key cannot be multi-valued");i.keyPath&&_e(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(e){if(e.auto)throw new Hl.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Hl.Schema("Index must have a name and cannot be an empty string");_e(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new St(n,i,o,r)}})}}),this._allTables=V,this._tableFactory=function(e,t){return e===te?new p(t.name,t,b):new d(t.name,t)},this._createTransaction=function(e,t,n,r){return new m(e,t,n,r)},this._whenReady=function(e){return new We(Ap||ee||sp.letThrough?e:(t,n)=>{if(!Q){if(!H)return void n(new Hl.DatabaseClosed);re.open().catch(Re)}oe.then(()=>{e(t,n)})}).uncaught(f)},this.verno=0,this.open=function(){if(Q||X)return oe.then(()=>G?gt(G,f):re);jl&&(ie._stackHolder=Le()),Q=!0,G=null,ee=!1;var t=L,n=null;return We.race([ie,new We((t,r)=>{if(de(()=>t()),J.length>0&&(fe=!1),!$)throw new Hl.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=fe?$.open(e):$.open(e,Math.round(10*re.verno));
if(!i)throw new Hl.MissingAPI("IndexedDB API not available");i.onerror=ft(_t(r)),i.onblocked=ft(U),i.onupgradeneeded=ft(function(t){if(n=i.transaction,fe&&!re._allowEmptyDB){i.onerror=At,n.abort(),i.result.close();var s=$.deleteDatabase(e);s.onsuccess=s.onerror=ft(function(){r(new Hl.NoSuchDatabase(`Database ${e} doesnt exist`))})}else{n.onerror=ft(_t(r));var a=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;o(a/10,n,r,i)}},r),i.onsuccess=ft(function(){if(n=null,X=i.result,mp.push(re),fe)j();else if(X.objectStoreNames.length>0)try{N(W,X.transaction(Rt(X.objectStoreNames),te))}catch(e){}X.onversionchange=ft(e=>{re._vcFired=!0,re.on("versionchange").fire(e)}),ye||xt(function(t){if(t.indexOf(e)===-1)return t.push(e)}),t()},r)})]).then(()=>{return yt.vip(re.on.ready.fire)}).then(()=>{return Q=!1,re}).catch(e=>{try{n&&n.abort()}catch(e){}return Q=!1,re.close(),G=e,gt(G,f)}).finally(()=>{ee=!0,t()})},this.close=function(){var e=mp.indexOf(re);if(e>=0&&mp.splice(e,1),X){try{X.close()}catch(e){}X=null}H=!1,G=new Hl.DatabaseClosed,Q&&z(G),oe=new We(e=>{L=e}),ie=new We((e,t)=>{z=t})},this.delete=function(){var t=arguments.length>0;return new We(function(n,r){function o(){re.close();var t=$.deleteDatabase(e);t.onsuccess=ft(function(){ye||xt(function(t){var n=t.indexOf(e);if(n>=0)return t.splice(n,1)}),n()}),t.onerror=ft(_t(r)),t.onblocked=U}if(t)throw new Hl.InvalidArgument("Arguments not allowed in db.delete()");Q?oe.then(o):o()}).uncaught(f)},this.backendDB=function(){return X},this.isOpen=function(){return null!==X},this.hasFailed=function(){return null!==G},this.dynamicallyOpened=function(){return fe},this.name=e,ue(this,"tables",{get:function(){return xl(V).map(function(e){return V[e]})}}),this.on=Ke(this,"error","populate","blocked","versionchange",{ready:[Ne,Re]}),this.on.error.subscribe=Me("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=Me("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=pe(this.on.ready.subscribe,function(e){return(t,n)=>{yt.vip(()=>{ee?(G||We.resolve().then(t),n&&e(t)):(e(t),n||e(function e(){re.on.ready.unsubscribe(t),re.on.ready.unsubscribe(e)}))})}}),kp(function(){re.on("populate").fire(re._createTransaction(ne,Z,W)),re.on("error").fire(new Error)}),this.transaction=function(e,t,n){function r(t){var r=sp;t(We.resolve().then(()=>lt(()=>{sp.transless=sp.transless||r;var t=re._createTransaction(e,u,W,a);sp.trans=t,a?t.idbtrans=a.idbtrans:t.create();var o=u.map(function(e){return V[e]});o.push(t);var i;return We.follow(()=>{if(i=n.apply(t,o))if("function"==typeof i.next&&"function"==typeof i.throw)i=Et(i);else if("function"==typeof i.then&&!ae(i,"_PSD"))throw new Hl.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+n.toString())}).uncaught(f).then(()=>{return a&&t._resolve(),t._completion}).then(()=>{return i}).catch(e=>{return t._reject(e),gt(e)})})))}var o=arguments.length;if(o<2)throw new Hl.InvalidArgument("Too few arguments");for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];n=i.pop();var s=Se(i),a=sp.trans;a&&a.db===re&&e.indexOf("!")===-1||(a=null);var c=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{var u=s.map(e=>{var t=e instanceof p?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||e==te)e=te;else{if("rw"!=e&&e!=ne)throw new Hl.InvalidArgument("Invalid transaction mode: "+e);e=ne}if(a){if(a.mode===te&&e===ne){if(!c)throw new Hl.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&u.forEach(function(e){if(a&&a.storeNames.indexOf(e)===-1){if(!c)throw new Hl.SubTransaction("Table "+e+" not included in parent transaction.");a=null}})}}catch(e){return a?a._promise(null,(t,n)=>{n(e)}):gt(e,f)}return a?a._promise(e,r,"lock"):re._whenReady(r)},this.table=function(e){if(Ap&&fe)return new d(e);if(!ae(V,e))throw new Hl.InvalidTable(`Table ${e} does not exist`);return V[e]},ce(p.prototype,{_trans:function(e,t,n){var r=sp.trans;return r&&r.db===re?r._promise(e,t,n):l(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){t(e,n,r.idbtrans.objectStore(i),r)}if(Ap)return new We(t);var o=sp.trans,i=this.name;return o&&o.db===re?o._promise(e,r,n):l(e,[this.name],r)},get:function(e,t){var n=this;return this._idbstore(te,function(t,r,o){Ap&&t(n.schema.instanceTemplate);var i=o.get(e);i.onerror=_t(r),i.onsuccess=ft(function(){t(n.hook.reading.fire(i.result))},r)}).then(t)},where:function(e){return new v(this,e)},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new this._collClass(new v(this,e))},toCollection:function(){return new this._collClass(new v(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&vt(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(ae(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(yt.defineClass(e),e)}}),he(d).from(p).extend({bulkDelete:function(e){return this.hook.deleting.fire===Re?this._idbstore(ne,(t,n,r,o)=>{t(y(r,o,e,!1,Re))}):this.where(":id").anyOf(e).delete().then(()=>{})},bulkPut:function(e,t){return this._idbstore(ne,(n,r,o)=>{if(!o.keyPath&&!this.schema.primKey.auto&&!t)throw new Hl.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new Hl.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Hl.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return n();const i=e=>{0===c.length?n(e):r(new He(`${this.name}.bulkPut(): ${c.length} of ${u} operations failed`,c))};var s,a,c=[],u=e.length,h=this;if(this.hook.creating.fire===Re&&this.hook.updating.fire===Re){a=g(c);for(var f=0,l=e.length;f<l;++f)s=t?o.put(e[f],t[f]):o.put(e[f]),s.onerror=a;s.onerror=g(c,i),s.onsuccess=bt(i)}else{var p=t||o.keyPath&&e.map(e=>we(e,o.keyPath)),d=p&&me(p,(t,n)=>null!=t&&[t,e[n]]),y=p?h.where(":id").anyOf(p.filter(e=>null!=e)).modify(function(){this.value=d[this.primKey],d[this.primKey]=null}).catch(Ye,e=>{c=e.failures}).then(()=>{for(var n=[],r=t&&[],o=p.length-1;o>=0;--o){var i=p[o];(null==i||d[i])&&(n.push(e[o]),t&&r.push(i),null!=i&&(d[i]=null))}return n.reverse(),t&&r.reverse(),h.bulkAdd(n,r)}).then(e=>{var t=p[p.length-1];return null!=t?t:e}):h.bulkAdd(e);y.then(i).catch(He,e=>{c=c.concat(e.failures),i()}).catch(r)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(ne,function(o,i,s,a){function c(e){0===l.length?o(e):i(new He(`${n.name}.bulkAdd(): ${l.length} of ${p} operations failed`,l))}if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new Hl.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new Hl.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Hl.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return o();var u,h,f,l=[],p=e.length;if(r!==Re){var d,y=s.keyPath;h=g(l,null,!0),f=wt(null),be(()=>{for(var n=0,o=e.length;n<o;++n){d={onerror:null,onsuccess:null};var i=t&&t[n],c=e[n],l=t?i:y?we(c,y):void 0,p=r.call(d,l,c,a);null==l&&null!=p&&(y?(c=xe(c),_e(c,y,p)):i=p),u=null!=i?s.add(c,i):s.add(c),u._hookCtx=d,n<o-1&&(u.onerror=h,d.onsuccess&&(u.onsuccess=f))}},e=>{throw d.onerror&&d.onerror(e),e}),u.onerror=g(l,c,!0),u.onsuccess=wt(c)}else{h=g(l);for(var m=0,v=e.length;m<v;++m)u=t?s.add(e[m],t[m]):s.add(e[m]),u.onerror=h;u.onerror=g(l,c),u.onsuccess=bt(c)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(ne,function(r,o,i,s){var a={onsuccess:null,onerror:null};if(n!==Re){var c=null!=t?t:i.keyPath?we(e,i.keyPath):void 0,u=n.call(a,c,e,s);null==c&&null!=u&&(i.keyPath?_e(e,i.keyPath,u):t=u)}try{var h=null!=t?i.add(e,t):i.add(e);h._hookCtx=a,h.onerror=kt(o),h.onsuccess=wt(function(t){var n=i.keyPath;n&&_e(e,n,t),r(t)})}catch(e){throw a.onerror&&a.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;return r!==Re||o!==Re?this._trans(ne,function(r,o,i){var s=void 0!==t?t:n.schema.primKey.keyPath&&we(e,n.schema.primKey.keyPath);null==s?n.add(e).then(r,o):(i._lock(),e=xe(e),n.where(":id").equals(s).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):s}).finally(function(){i._unlock()}).then(r,o))}):this._idbstore(ne,function(n,r,o){var i=void 0!==t?o.put(e,t):o.put(e);i.onerror=_t(r),i.onsuccess=function(t){var r=o.keyPath;r&&_e(e,r,t.target.result),n(i.result)}})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(ne,function(t,n,r){var o=r.delete(e);o.onerror=_t(n),o.onsuccess=function(){t(o.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(ne,function(e,t,n){var r=n.clear();r.onerror=_t(t),r.onsuccess=function(){e(r.result)}})},update:function(e,t){if("object"!=typeof t||El(t))throw new Hl.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||El(e))return this.where(":id").equals(e).modify(t);xl(t).forEach(function(n){_e(e,n,t[n])});var n=we(e,this.schema.primKey.keyPath);return void 0===n?gt(new Hl.InvalidArgument("Given object does not contain its primary key"),f):this.where(":id").equals(n).modify(t)}}),ce(m.prototype,{_lock:function(){return ge(!sp.global),++this._reculock,1!==this._reculock||sp.global||(sp.lockOwnerFor=this),this},_unlock:function(){if(ge(!sp.global),0===--this._reculock)for(sp.global||(sp.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{pt(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&sp.lockOwnerFor!==this},create:function(e){if(ge(!this.idbtrans),!e&&!X)switch(G&&G.name){case"DatabaseClosedError":throw new Hl.DatabaseClosed(G);case"MissingAPIError":throw new Hl.MissingAPI(G.message,G);default:throw new Hl.OpenFailed(G)}if(!this.active)throw new Hl.TransactionInactive;return ge(null===this._completion._state),e=this.idbtrans=e||X.transaction(Rt(this.storeNames),this.mode),e.onerror=ft(t=>{At(t),this._reject(e.error)}),e.onabort=ft(e=>{At(e),this.active&&this._reject(new Hl.Abort),this.active=!1,this.on("abort").fire(e)}),e.oncomplete=ft(()=>{this.active=!1,this._resolve()}),this},_promise:function(e,t,n){var r=this,o=r._locked()?new We(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},sp])}):lt(function(){var o=r.active?new We(function(o,i){if(e===ne&&r.mode!==ne)throw new Hl.ReadOnly("Transaction is readonly");!r.idbtrans&&e&&r.create(),n&&r._lock(),t(o,i,r)}):gt(new Hl.TransactionInactive);return r.active&&n&&o.finally(function(){r._unlock()}),o});return o._lib=!0,o.uncaught(f)},abort:function(){this.active&&this._reject(new Hl.Abort),this.active=!1},tables:{get:Me("Transaction.tables",function(){return me(this.storeNames,e=>[e,V[e]])},"Use db.tables()")},complete:Me("Transaction.complete()",function(e){return this.on("complete",e)}),error:Me("Transaction.error()",function(e){return this.on("error",e)}),table:Me("Transaction.table()",function(e){if(this.storeNames.indexOf(e)===-1)throw new Hl.InvalidTable("Table "+e+" not in transaction");return V[e]})}),ce(v.prototype,function(){function e(e,t,n){var r=e instanceof v?new e._ctx.collClass(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new e._ctx.collClass(e,function(){return K.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function o(e,t,n,r,o,i){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return o(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):o(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;o(e[c],u)<0&&(a=c)}return s<r.length&&"next"===i?e+n.substr(e.length):s<e.length&&"prev"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function i(t,i,s,a){function c(e){u=n(e),h=r(e),f="next"===e?O:P;var t=s.map(function(e){return{lower:h(e),upper:u(e)}}).sort(function(e,t){return f(e.lower,t.lower)});l=t.map(function(e){return e.upper}),p=t.map(function(e){return e.lower}),d=e,g="next"===e?"":a}var u,h,f,l,p,d,g,y=s.length;if(!s.every(e=>"string"==typeof e))return e(t,yp);c("next");var m=new t._ctx.collClass(t,function(){return K.bound(l[0],p[y-1]+a)});m._ondirectionchange=function(e){c(e)};var v=0;return m._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var s=h(r);if(i(s,p,v))return!0;for(var a=null,c=v;c<y;++c){var u=o(r,s,l[c],p[c],f,d);null===u&&null===a?v=c+1:(null===a||f(a,u)>0)&&(a=u)}return t(null!==a?function(){e.continue(a+g)}:n),!1}),m}return{between:function(n,r,o,i){o=o!==!1,i=i===!0;try{return S(n,r)>0||0===S(n,r)&&(o||i)&&(!o||!i)?t(this):new this._ctx.collClass(this,function(){return K.bound(n,r,!o,!i)})}catch(t){return e(this,gp)}},equals:function(e){return new this._ctx.collClass(this,function(){return K.only(e)})},above:function(e){return new this._ctx.collClass(this,function(){return K.lowerBound(e,!0)})},aboveOrEqual:function(e){return new this._ctx.collClass(this,function(){return K.lowerBound(e)})},below:function(e){return new this._ctx.collClass(this,function(){return K.upperBound(e,!0)})},belowOrEqual:function(e){return new this._ctx.collClass(this,function(){return K.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,yp):this.between(t,t+pp,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):i(this,function(e,t){return 0===e.indexOf(t[0])},[e],pp)},equalsIgnoreCase:function(e){return i(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=Ce.apply(Pl,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.indexOf(e)!==-1},e,"")},startsWithAnyOfIgnoreCase:function(){var e=Ce.apply(Pl,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,pp)},anyOf:function(){var n=Ce.apply(Pl,arguments),r=B;try{n.sort(r)}catch(t){return e(this,gp)}if(0===n.length)return t(this);var o=new this._ctx.collClass(this,function(){return K.bound(n[0],n[n.length-1])});o._ondirectionchange=function(e){r="next"===e?B:D,n.sort(r)};var i=0;return o._addAlgorithm(function(e,t,o){for(var s=e.key;r(s,n[i])>0;)if(++i,i===n.length)return t(o),!1;return 0===r(s,n[i])||(t(function(){e.continue(n[i])}),!1)}),o},notEqual:function(e){return this.inAnyRange([[-(1/0),e],[e,dp]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=Ce.apply(Pl,arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(B)}catch(t){return e(this,gp)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]},null);return n.push([t[t.length-1],dp]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function o(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(S(t[0],o[1])<0&&S(t[1],o[0])>0){o[0]=R(o[0],t[0]),o[1]=T(o[1],t[1]);break}}return n===r&&e.push(t),e}function i(e,t){return f(e[0],t[0])}function s(e){return!p(e)&&!d(e)}var a=this._ctx;if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&B(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Hl.InvalidArgument);var c,u=!r||r.includeLowers!==!1,h=r&&r.includeUppers===!0,f=B;try{c=n.reduce(o,[]),c.sort(i)}catch(t){return e(this,gp)}var l=0,p=h?function(e){return B(e,c[l][1])>0}:function(e){return B(e,c[l][1])>=0},d=u?function(e){return D(e,c[l][0])>0}:function(e){return D(e,c[l][0])>=0},g=p,y=new a.collClass(this,function(){return K.bound(c[0][0],c[c.length-1][1],!u,!h)});return y._ondirectionchange=function(e){"next"===e?(g=p,f=B):(g=d,f=D),c.sort(i)},y._addAlgorithm(function(e,t,n){for(var r=e.key;g(r);)if(++l,l===c.length)return t(n),!1;return!!s(r)||0!==S(r,c[l][1])&&0!==S(r,c[l][0])&&(t(function(){f===B?e.continue(c[l][0]):e.continue(c[l][1])}),!1)}),y},startsWithAnyOf:function(){var n=Ce.apply(Pl,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+pp]})):e(this,"startsWithAnyOf() only works with strings")}}}),ce(b.prototype,function(){function e(e,t){e.filter=I(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>I(r(),t()):t,e.justLimit=n&&!r}function n(e,t){e.isMatch=I(e.isMatch,t)}function r(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Hl.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function o(e,t){var n=r(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function i(e,t,n,r,i){var s=e.replayFilter?I(e.filter,e.replayFilter()):e.filter;e.or?(()=>{function a(){2===++h&&n()}function c(e,n,o){if(!s||s(n,o,a,r)){var i=n.primaryKey.toString();ae(u,i)||(u[i]=!0,t(e,n,o))}}var u={},h=0;e.or._iterate(c,a,r,i),E(o(e,i),e.algorithm,c,a,r,!e.keysOnly&&e.valueMapper)})():E(o(e,i),I(e.algorithm,s),t,n,r,!e.keysOnly&&e.valueMapper)}function s(e){return e.table.schema.instanceTemplate}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,function(e,t){t(n.error)}):n.table._idbstore(te,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,function(e,n){n(t.error)}):t.table._idbstore(ne,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=I(t.algorithm,e)},_iterate:function(e,t,n,r){return i(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&se(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;if(Ap){var n=s(t),r=t.table.schema.primKey.keyPath,o=we(n,t.index?t.table.schema.idxByName[t.index].keyPath:r),a=we(n,r);e(n,{key:o,primaryKey:a})}return this._read(function(n,r,o){i(t,e,n,r,o)})},count:function(e){if(Ap)return We.resolve(0).then(e);var t=this._ctx;if(w(t,!0))return this._read(function(e,n,o){var i=r(t,o),s=t.range?i.count(t.range):i.count();s.onerror=_t(n),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,o){i(t,function(){return++n,!1},function(){e(n)},r,o)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[o[t]],t-1):e[i]}function r(e,t){var r=n(e,s),o=n(t,s);return r<o?-a:r>o?a:0}var o=e.split(".").reverse(),i=o[0],s=o.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,o){if(Ap&&e([s(t)]),M&&"next"===t.dir&&w(t,!0)&&t.limit>0){var a=t.table.hook.reading.fire,c=r(t,o),u=t.limit<1/0?c.getAll(t.range,t.limit):c.getAll(t.range);u.onerror=_t(n),u.onsuccess=a===Te?bt(e):ft(bt(t=>{try{e(t.map(a))}catch(e){n(e)}}))}else{var h=[];i(t,function(e){h.push(e)},function(){e(h)},n,o)}},e)},offset:function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,w(n)?t(n,()=>{var t=e;return(e,n)=>{return 0===t||(1===t?(--t,!1):(n(()=>{e.advance(t),t=0}),!1))}}):t(n,()=>{var t=e;return()=>--t<0}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(t,n){var r=this._ctx;return Ap&&t(s(r)),e(this._ctx,function(e,r,o){return!t(e.value)||(r(o),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return Ap&&t(s(this._ctx)),e(this._ctx,function(e){return t(e.value)}),n(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new v(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(M&&"next"===t.dir&&w(t,!0)&&t.limit>0)return this._read((e,n,o)=>{var i=r(t,o),s=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);s.onerror=_t(n),s.onsuccess=bt(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,function(e){var t=e.primaryKey.toString(),n=ae(r,t);return r[t]=!0,!n}),this}}}),he(_).from(b).extend({modify:function(e){var t=this,n=this._ctx,r=n.table.hook,o=r.updating.fire,i=r.deleting.fire;return Ap&&"function"==typeof e&&e.call({value:n.table.schema.instanceTemplate},n.table.schema.instanceTemplate),this._write(function(n,r,s,a){function c(e,t){function n(e){return v.push(e),b.push(r.primKey),h(),!0}w=t.primaryKey;var r={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};if(f.call(r,e,r)!==!1){var o=!ae(r,"value");++g,be(function(){var e=o?t.delete():t.update(r.value);e._hookCtx=r,e.onerror=kt(n),e.onsuccess=wt(function(){++y,h()})},n)}else r.onsuccess&&r.onsuccess(r.value)}function u(e){return e&&(v.push(e),b.push(w)),r(new Ye("Error modifying one or more objects",v,y,b))}function h(){m&&y+v.length===g&&(v.length>0?u():n(y))}var f;if("function"==typeof e)f=o===Re&&i===Re?e:function(t){var n=xe(t);if(e.call(this,t,this)===!1)return!1;if(ae(this,"value")){var r=Ee(n,this.value),s=o.call(this,r,this.primKey,n,a);s&&(t=this.value,xl(s).forEach(function(e){_e(t,e,s[e])}))}else i.call(this,this.primKey,t,a)};else if(o===Re){var l=xl(e),p=l.length;f=function(t){for(var n=!1,r=0;r<p;++r){var o=l[r],i=e[o];we(t,o)!==i&&(_e(t,o,i),n=!0)}return n}}else{var d=e;e=Ae(d),f=function(t){var n=!1,r=o.call(this,e,this.primKey,xe(t),a);return r&&se(e,r),xl(e).forEach(function(r){var o=e[r];we(t,r)!==o&&(_e(t,r,o),n=!0)}),r&&(e=Ae(d)),n}}var g=0,y=0,m=!1,v=[],b=[],w=null;t.clone().raw()._iterate(c,function(){m=!0,h()},u,s)})},delete:function(){var e=this._ctx,t=e.range,n=e.table.hook.deleting.fire,r=n!==Re;if(!r&&w(e)&&(e.isPrimKey&&!wp||!t))return this._write((e,n,r)=>{var o=_t(n),i=t?r.count(t):r.count();i.onerror=o,i.onsuccess=(()=>{var s=i.result;be(()=>{var n=t?r.delete(t):r.clear();n.onerror=o,n.onsuccess=(()=>e(s))},e=>n(e))})});const o=r?2e3:1e4;return this._write((t,i,s,a)=>{var c=0,u=this.clone({keysOnly:!e.isMatch&&!r}).distinct().limit(o).raw(),h=[];const f=()=>u.each(r?(e,t)=>{h.push([t.primaryKey,t.value])}:(e,t)=>{h.push(t.primaryKey)}).then(()=>{return r?h.sort((e,t)=>B(e[0],t[0])):h.sort(B),y(s,a,h,r,n)}).then(()=>{var e=h.length;return c+=e,h=[],e<o?c:f()});t(f())})}}),se(this,{Collection:b,Table:p,Transaction:m,Version:r,WhereClause:v,WriteableCollection:_,WriteableTable:d}),n(),Y.forEach(function(e){e(re)})}function mt(e){if("function"==typeof e)return new e;if(El(e))return[mt(e[0])];if(e&&"object"==typeof e){var t={};return vt(t,e),t}return e}function vt(e,t){return xl(t).forEach(function(n){var r=mt(t[n]);e[n]=r}),e}function bt(e){return function(t){e(t.target.result)}}function wt(e){return ft(function(t){var n=t.target,r=n.result,o=n._hookCtx,i=o&&o.onsuccess;i&&i(r),e&&e(r)},e)}function _t(e){return function(t){return At(t),e(t.target.error),!1}}function kt(e){return ft(function(t){var n=t.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),At(t),e(r),!1})}function At(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function xt(e){var t,n=yt.dependencies.localStorage;if(!n)return e([]);try{t=JSON.parse(n.getItem("Dexie.DatabaseNames")||"[]")}catch(e){t=[]}e(t)&&n.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function Et(e){function t(e){return t=>{var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(o,i):El(r)?We.all(r).then(o,i):o(r)}}var n=t=>e.next(t),r=t=>e.throw(t),o=t(n),i=t(r);return t(n)()}function Ct(e,t,n,r,o,i,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+a}function St(e,t,n,r){this.name=e,this.primKey=t||new Ct,this.indexes=n||[new Ct],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=me(n,e=>[e.name,e])}function Rt(e){return 1===e.length?e[0]:e}function Tt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}function Bt(e){return new Promise(function(t,n){var r,o,i=function(e){return t(e)}.$asyncbind(this,n);try{return Sp("temporary").then(function(n){return r=n,Rp(e).then(function(e){return o=e,t({quota:r,keys:o})}.$asyncbind(this,i),i)}.$asyncbind(this,i),i)}catch(e){i(e)}}.$asyncbind(this))}function Dt(e){for(var t=e.length;--t>=0;)e[t]=0}function Ot(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function Pt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function It(e){return e<256?Sd[e]:Sd[256+(e>>>7)]}function jt(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Nt(e,t,n){e.bi_valid>dd-n?(e.bi_buf|=t<<e.bi_valid&65535,jt(e,e.bi_buf),e.bi_buf=t>>dd-e.bi_valid,e.bi_valid+=n-dd):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Ut(e,t,n){Nt(e,n[2*t],n[2*t+1])}function Lt(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function zt(e){16===e.bi_valid?(jt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function Mt(e,t){var n,r,o,i,s,a,c=t.dyn_tree,u=t.max_code,h=t.stat_desc.static_tree,f=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,g=0;for(i=0;i<=pd;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<ld;n++)r=e.heap[n],i=c[2*c[2*r+1]+1]+1,i>d&&(i=d,g++),c[2*r+1]=i,r>u||(e.bl_count[i]++,s=0,r>=p&&(s=l[r-p]),a=c[2*r],e.opt_len+=a*(i+s),f&&(e.static_len+=a*(h[2*r+1]+s)));if(0!==g){do{for(i=d-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[d]--,g-=2}while(g>0);for(i=d;0!==i;i--)for(r=e.bl_count[i];0!==r;)o=e.heap[--n],o>u||(c[2*o+1]!==i&&(e.opt_len+=(i-c[2*o+1])*c[2*o],c[2*o+1]=i),r--)}}function Ft(e,t,n){var r,o,i=new Array(pd+1),s=0;for(r=1;r<=pd;r++)i[r]=s=s+n[r-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=Lt(i[a]++,a))}}function qt(){var e,t,n,r,o,i=new Array(pd+1);for(n=0,r=0;r<ad-1;r++)for(Td[r]=n,e=0;e<1<<wd[r];e++)Rd[n++]=r;for(Rd[n-1]=r,o=0,r=0;r<16;r++)for(Bd[r]=o,e=0;e<1<<_d[r];e++)Sd[o++]=r;for(o>>=7;r<hd;r++)for(Bd[r]=o<<7,e=0;e<1<<_d[r]-7;e++)Sd[256+o++]=r;for(t=0;t<=pd;t++)i[t]=0;for(e=0;e<=143;)Ed[2*e+1]=8,e++,i[8]++;for(;e<=255;)Ed[2*e+1]=9,e++,i[9]++;for(;e<=279;)Ed[2*e+1]=7,e++,i[7]++;for(;e<=287;)Ed[2*e+1]=8,e++,i[8]++;for(Ft(Ed,ud+1,i),e=0;e<hd;e++)Cd[2*e+1]=5,Cd[2*e]=Lt(e,5);Dd=new Ot(Ed,wd,cd+1,ud,pd),Od=new Ot(Cd,_d,0,hd,pd),Pd=new Ot(new Array(0),kd,0,fd,gd)}function Yt(e){var t;for(t=0;t<ud;t++)e.dyn_ltree[2*t]=0;for(t=0;t<hd;t++)e.dyn_dtree[2*t]=0;for(t=0;t<fd;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*yd]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Ht(e){e.bi_valid>8?jt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function $t(e,t,n,r){Ht(e),r&&(jt(e,n),jt(e,~n)),Xp.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function Kt(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function Wt(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&Kt(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Kt(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function Jt(e,t,n){var r,o,i,s,a=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],o=e.pending_buf[e.l_buf+a],a++,0===r?Ut(e,o,t):(i=Rd[o],Ut(e,i+cd+1,t),s=wd[i],0!==s&&(o-=Td[i],Nt(e,o,s)),r--,i=It(r),Ut(e,i,n),s=_d[i],0!==s&&(r-=Bd[i],Nt(e,r,s)));while(a<e.last_lit);Ut(e,yd,t)}function Zt(e,t){var n,r,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=ld,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=u<2?++u:0,i[2*o]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)Wt(e,i,n);o=c;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Wt(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,Wt(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Mt(e,t),Ft(i,u,e.bl_count)}function Vt(e,t,n){var r,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],++a<c&&o===s||(a<u?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*md]++):a<=10?e.bl_tree[2*vd]++:e.bl_tree[2*bd]++,a=0,i=o,0===s?(c=138,u=3):o===s?(c=6,u=3):(c=7,u=4))}function Xt(e,t,n){var r,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<c&&o===s)){if(a<u){do Ut(e,o,e.bl_tree);while(0!==--a)}else 0!==o?(o!==i&&(Ut(e,o,e.bl_tree),a--),Ut(e,md,e.bl_tree),Nt(e,a-3,2)):a<=10?(Ut(e,vd,e.bl_tree),Nt(e,a-3,3)):(Ut(e,bd,e.bl_tree),Nt(e,a-11,7));a=0,i=o,0===s?(c=138,u=3):o===s?(c=6,u=3):(c=7,u=4)}}function Gt(e){var t;for(Vt(e,e.dyn_ltree,e.l_desc.max_code),Vt(e,e.dyn_dtree,e.d_desc.max_code),Zt(e,e.bl_desc),t=fd-1;t>=3&&0===e.bl_tree[2*Ad[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Qt(e,t,n,r){var o;for(Nt(e,t-257,5),Nt(e,n-1,5),Nt(e,r-4,4),o=0;o<r;o++)Nt(e,e.bl_tree[2*Ad[o]+1],3);Xt(e,e.dyn_ltree,t-1),Xt(e,e.dyn_dtree,n-1)}function en(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Qp;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return ed;for(t=32;t<cd;t++)if(0!==e.dyn_ltree[2*t])return ed;return Qp}function tn(e){jd||(qt(),jd=!0),e.l_desc=new Pt(e.dyn_ltree,Dd),e.d_desc=new Pt(e.dyn_dtree,Od),e.bl_desc=new Pt(e.bl_tree,Pd),e.bi_buf=0,e.bi_valid=0,Yt(e)}function nn(e,t,n,r){Nt(e,(nd<<1)+(r?1:0),3),$t(e,t,n,!0)}function rn(e){Nt(e,rd<<1,3),Ut(e,yd,Ed),zt(e)}function on(e,t,n,r){var o,i,s=0;e.level>0?(e.strm.data_type===td&&(e.strm.data_type=en(e)),Zt(e,e.l_desc),Zt(e,e.d_desc),s=Gt(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&t!==-1?nn(e,t,n,r):e.strategy===Gp||i===o?(Nt(e,(rd<<1)+(r?1:0),3),
Jt(e,Ed,Cd)):(Nt(e,(od<<1)+(r?1:0),3),Qt(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Jt(e,e.dyn_ltree,e.dyn_dtree)),Yt(e),r&&Ht(e)}function sn(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Rd[n]+cd+1)]++,e.dyn_dtree[2*It(t)]++),e.last_lit===e.lit_bufsize-1}function an(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do o=o+t[r++]|0,i=i+o|0;while(--s);o%=65521,i%=65521}return o|i<<16|0}function cn(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function un(e,t,n,r){var o=Yd,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^o[255&(e^t[s])];return e^-1}function hn(e,t){return e.msg=Vd[t],t}function fn(e){return(e<<1)-(e>4?9:0)}function ln(e){for(var t=e.length;--t>=0;)e[t]=0}function pn(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Kd.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function dn(e,t){Wd._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,pn(e.strm)}function gn(e,t){e.pending_buf[e.pending++]=t}function yn(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function mn(e,t,n,r){var o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,Kd.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=Jd(e.adler,t,o,n):2===e.state.wrap&&(e.adler=Zd(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function vn(e,t){var n,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-Sg?e.strstart-(e.w_size-Sg):0,u=e.window,h=e.w_mask,f=e.prev,l=e.strstart+Cg,p=u[i+s-1],d=u[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do if(n=t,u[n+s]===d&&u[n+s-1]===p&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do;while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<l);if(r=Cg-(l-i),i=l-Cg,r>s){if(e.match_start=t,s=r,r>=a)break;p=u[i+s-1],d=u[i+s]}}while((t=f[t&h])>c&&0!==--o);return s<=e.lookahead?s:e.lookahead}function bn(e){var t,n,r,o,i,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-Sg)){Kd.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=s?r-s:0;while(--n);n=s,t=n;do r=e.prev[--t],e.prev[t]=r>=s?r-s:0;while(--n);o+=s}if(0===e.strm.avail_in)break;if(n=mn(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=Eg)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+Eg-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Eg)););}while(e.lookahead<Sg&&0!==e.strm.avail_in)}function wn(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(bn(e),0===e.lookahead&&t===Xd)return Ng;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,dn(e,!1),0===e.strm.avail_out))return Ng;if(e.strstart-e.block_start>=e.w_size-Sg&&(dn(e,!1),0===e.strm.avail_out))return Ng}return e.insert=0,t===eg?(dn(e,!0),0===e.strm.avail_out?Lg:zg):e.strstart>e.block_start&&(dn(e,!1),0===e.strm.avail_out)?Ng:Ng}function _n(e,t){for(var n,r;;){if(e.lookahead<Sg){if(bn(e),e.lookahead<Sg&&t===Xd)return Ng;if(0===e.lookahead)break}if(n=0,e.lookahead>=Eg&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Eg-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Sg&&(e.match_length=vn(e,n)),e.match_length>=Eg)if(r=Wd._tr_tally(e,e.strstart-e.match_start,e.match_length-Eg),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Eg){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Eg-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Wd._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(dn(e,!1),0===e.strm.avail_out))return Ng}return e.insert=e.strstart<Eg-1?e.strstart:Eg-1,t===eg?(dn(e,!0),0===e.strm.avail_out?Lg:zg):e.last_lit&&(dn(e,!1),0===e.strm.avail_out)?Ng:Ug}function kn(e,t){for(var n,r,o;;){if(e.lookahead<Sg){if(bn(e),e.lookahead<Sg&&t===Xd)return Ng;if(0===e.lookahead)break}if(n=0,e.lookahead>=Eg&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Eg-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Eg-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Sg&&(e.match_length=vn(e,n),e.match_length<=5&&(e.strategy===cg||e.match_length===Eg&&e.strstart-e.match_start>4096)&&(e.match_length=Eg-1)),e.prev_length>=Eg&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-Eg,r=Wd._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Eg),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Eg-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=Eg-1,e.strstart++,r&&(dn(e,!1),0===e.strm.avail_out))return Ng}else if(e.match_available){if(r=Wd._tr_tally(e,0,e.window[e.strstart-1]),r&&dn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Ng}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Wd._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Eg-1?e.strstart:Eg-1,t===eg?(dn(e,!0),0===e.strm.avail_out?Lg:zg):e.last_lit&&(dn(e,!1),0===e.strm.avail_out)?Ng:Ug}function An(e,t){for(var n,r,o,i,s=e.window;;){if(e.lookahead<=Cg){if(bn(e),e.lookahead<=Cg&&t===Xd)return Ng;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=Eg&&e.strstart>0&&(o=e.strstart-1,r=s[o],r===s[++o]&&r===s[++o]&&r===s[++o])){i=e.strstart+Cg;do;while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i);e.match_length=Cg-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Eg?(n=Wd._tr_tally(e,1,e.match_length-Eg),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Wd._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(dn(e,!1),0===e.strm.avail_out))return Ng}return e.insert=0,t===eg?(dn(e,!0),0===e.strm.avail_out?Lg:zg):e.last_lit&&(dn(e,!1),0===e.strm.avail_out)?Ng:Ug}function xn(e,t){for(var n;;){if(0===e.lookahead&&(bn(e),0===e.lookahead)){if(t===Xd)return Ng;break}if(e.match_length=0,n=Wd._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(dn(e,!1),0===e.strm.avail_out))return Ng}return e.insert=0,t===eg?(dn(e,!0),0===e.strm.avail_out?Lg:zg):e.last_lit&&(dn(e,!1),0===e.strm.avail_out)?Ng:Ug}function En(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function Cn(e){e.window_size=2*e.w_size,ln(e.head),e.max_lazy_match=Id[e.level].max_lazy,e.good_match=Id[e.level].good_length,e.nice_match=Id[e.level].nice_length,e.max_chain_length=Id[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Eg-1,e.match_available=0,e.ins_h=0}function Sn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dg,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Kd.Buf16(2*Ag),this.dyn_dtree=new Kd.Buf16(2*(2*_g+1)),this.bl_tree=new Kd.Buf16(2*(2*kg+1)),ln(this.dyn_ltree),ln(this.dyn_dtree),ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Kd.Buf16(xg+1),this.heap=new Kd.Buf16(2*wg+1),ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Kd.Buf16(2*wg+1),ln(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Rn(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=pg,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Tg:Ig,e.adler=2===t.wrap?0:1,t.last_flush=Xd,Wd._tr_init(t),ng):hn(e,og)}function Tn(e){var t=Rn(e);return t===ng&&Cn(e.state),t}function Bn(e,t){return e&&e.state?2!==e.state.wrap?og:(e.state.gzhead=t,ng):og}function Dn(e,t,n,r,o,i){if(!e)return og;var s=1;if(t===ag&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>gg||n!==dg||r<8||r>15||t<0||t>9||i<0||i>fg)return hn(e,og);8===r&&(r=9);var a=new Sn;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Eg-1)/Eg),a.window=new Kd.Buf8(2*a.w_size),a.head=new Kd.Buf16(a.hash_size),a.prev=new Kd.Buf16(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Kd.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=n,Tn(e)}function On(e,t){return Dn(e,t,dg,yg,mg,lg)}function Pn(e,t){var n,r,o,i;if(!e||!e.state||t>tg||t<0)return e?hn(e,og):og;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===jg&&t!==eg)return hn(e,0===e.avail_out?sg:og);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===Tg)if(2===r.wrap)e.adler=0,gn(r,31),gn(r,139),gn(r,8),r.gzhead?(gn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),gn(r,255&r.gzhead.time),gn(r,r.gzhead.time>>8&255),gn(r,r.gzhead.time>>16&255),gn(r,r.gzhead.time>>24&255),gn(r,9===r.level?2:r.strategy>=ug||r.level<2?4:0),gn(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(gn(r,255&r.gzhead.extra.length),gn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Zd(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Bg):(gn(r,0),gn(r,0),gn(r,0),gn(r,0),gn(r,0),gn(r,9===r.level?2:r.strategy>=ug||r.level<2?4:0),gn(r,Mg),r.status=Ig);else{var s=dg+(r.w_bits-8<<4)<<8,a=-1;a=r.strategy>=ug||r.level<2?0:r.level<6?1:6===r.level?2:3,s|=a<<6,0!==r.strstart&&(s|=Rg),s+=31-s%31,r.status=Ig,yn(r,s),0!==r.strstart&&(yn(r,e.adler>>>16),yn(r,65535&e.adler)),e.adler=1}if(r.status===Bg)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=Zd(e.adler,r.pending_buf,r.pending-o,o)),pn(e),o=r.pending,r.pending!==r.pending_buf_size));)gn(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=Zd(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Dg)}else r.status=Dg;if(r.status===Dg)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=Zd(e.adler,r.pending_buf,r.pending-o,o)),pn(e),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,gn(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(e.adler=Zd(e.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.gzindex=0,r.status=Og)}else r.status=Og;if(r.status===Og)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=Zd(e.adler,r.pending_buf,r.pending-o,o)),pn(e),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,gn(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(e.adler=Zd(e.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.status=Pg)}else r.status=Pg;if(r.status===Pg&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&pn(e),r.pending+2<=r.pending_buf_size&&(gn(r,255&e.adler),gn(r,e.adler>>8&255),e.adler=0,r.status=Ig)):r.status=Ig),0!==r.pending){if(pn(e),0===e.avail_out)return r.last_flush=-1,ng}else if(0===e.avail_in&&fn(t)<=fn(n)&&t!==eg)return hn(e,sg);if(r.status===jg&&0!==e.avail_in)return hn(e,sg);if(0!==e.avail_in||0!==r.lookahead||t!==Xd&&r.status!==jg){var c=r.strategy===ug?xn(r,t):r.strategy===hg?An(r,t):Id[r.level].func(r,t);if(c!==Lg&&c!==zg||(r.status=jg),c===Ng||c===Lg)return 0===e.avail_out&&(r.last_flush=-1),ng;if(c===Ug&&(t===Gd?Wd._tr_align(r):t!==tg&&(Wd._tr_stored_block(r,0,0,!1),t===Qd&&(ln(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),pn(e),0===e.avail_out))return r.last_flush=-1,ng}return t!==eg?ng:r.wrap<=0?rg:(2===r.wrap?(gn(r,255&e.adler),gn(r,e.adler>>8&255),gn(r,e.adler>>16&255),gn(r,e.adler>>24&255),gn(r,255&e.total_in),gn(r,e.total_in>>8&255),gn(r,e.total_in>>16&255),gn(r,e.total_in>>24&255)):(yn(r,e.adler>>>16),yn(r,65535&e.adler)),pn(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ng:rg)}function In(e){var t;return e&&e.state?(t=e.state.status,t!==Tg&&t!==Bg&&t!==Dg&&t!==Og&&t!==Pg&&t!==Ig&&t!==jg?hn(e,og):(e.state=null,t===Ig?hn(e,ig):ng)):og}function jn(e,t){var n,r,o,i,s,a,c,u,h=t.length;if(!e||!e.state)return og;if(n=e.state,i=n.wrap,2===i||1===i&&n.status!==Tg||n.lookahead)return og;for(1===i&&(e.adler=Jd(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===i&&(ln(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new Kd.Buf8(n.w_size),Kd.arraySet(u,t,h-n.w_size,n.w_size,0),t=u,h=n.w_size),s=e.avail_in,a=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=t,bn(n);n.lookahead>=Eg;){r=n.strstart,o=n.lookahead-(Eg-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+Eg-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--o);n.strstart=r,n.lookahead=Eg-1,bn(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Eg-1,n.match_available=0,e.next_in=a,e.input=c,e.avail_in=s,n.wrap=i,ng}function Nn(e,t){if(t<65537&&(e.subarray&&Qg||!e.subarray&&Gg))return String.fromCharCode.apply(null,Xg.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}function Un(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Ln(e){if(!(this instanceof Ln))return new Ln(e);this.options=hy.assign({level:wy,method:ky,chunkSize:16384,windowBits:15,memLevel:8,strategy:_y,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new py,this.strm.avail_out=0;var n=uy.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==my)throw new Error(ly[n]);if(t.header&&uy.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?fy.string2buf(t.dictionary):"[object ArrayBuffer]"===dy.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=uy.deflateSetDictionary(this.strm,r),n!==my)throw new Error(ly[n]);this._dict_set=!0}}function zn(e,t){var n=new Ln(t);if(n.push(e,!0),n.err)throw n.msg||ly[n.err];return n.result}function Mn(e,t){return t=t||{},t.raw=!0,zn(e,t)}function Fn(e,t){return t=t||{},t.gzip=!0,zn(e,t)}function qn(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Yn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new $y.Buf16(320),this.work=new $y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Hn(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=hm,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new $y.Buf32(qm),t.distcode=t.distdyn=new $y.Buf32(Ym),t.sane=1,t.back=-1,nm):im}function $n(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Hn(e)):im}function Kn(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?im:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,$n(e))):im}function Wn(e,t){var n,r;return e?(r=new Yn,e.state=r,r.window=null,n=Kn(e,t),n!==nm&&(e.state=null),n):im}function Jn(e){return Wn(e,$m)}function Zn(e){if(Km){var t;for(Ay=new $y.Buf32(512),xy=new $y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Zy(Xy,e.lens,0,288,Ay,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Zy(Gy,e.lens,0,32,xy,0,e.work,{bits:5}),Km=!1}e.lencode=Ay,e.lenbits=9,e.distcode=xy,e.distbits=5}function Vn(e,t,n,r){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new $y.Buf8(i.wsize)),r>=i.wsize?($y.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),$y.arraySet(i.window,t,n-r,o,i.wnext),r-=o,r?($y.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function Xn(e,t){var n,r,o,i,s,a,c,u,h,f,l,p,d,g,y,m,v,b,w,_,k,A,x,E,C=0,S=new $y.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return im;n=e.state,n.mode===_m&&(n.mode=km),s=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,a=e.avail_in,u=n.hold,h=n.bits,f=a,l=c,A=nm;e:for(;;)switch(n.mode){case hm:if(0===n.wrap){n.mode=km;break}for(;h<16;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(2&n.wrap&&35615===u){n.check=0,S[0]=255&u,S[1]=u>>>8&255,n.check=Wy(n.check,S,2,0),u=0,h=0,n.mode=fm;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=zm;break}if((15&u)!==um){e.msg="unknown compression method",n.mode=zm;break}if(u>>>=4,h-=4,k=(15&u)+8,0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=zm;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&u?bm:_m,u=0,h=0;break;case fm:for(;h<16;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(n.flags=u,(255&n.flags)!==um){e.msg="unknown compression method",n.mode=zm;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=zm;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=Wy(n.check,S,2,0)),u=0,h=0,n.mode=lm;case lm:for(;h<32;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}n.head&&(n.head.time=u),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=Wy(n.check,S,4,0)),u=0,h=0,n.mode=pm;case pm:for(;h<16;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=Wy(n.check,S,2,0)),u=0,h=0,n.mode=dm;case dm:if(1024&n.flags){for(;h<16;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(S[0]=255&u,S[1]=u>>>8&255,n.check=Wy(n.check,S,2,0)),u=0,h=0}else n.head&&(n.head.extra=null);n.mode=gm;case gm:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),$y.arraySet(n.head.extra,r,i,p,k)),512&n.flags&&(n.check=Wy(n.check,r,p,i)),a-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=ym;case ym:if(2048&n.flags){if(0===a)break e;p=0;do k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&p<a);if(512&n.flags&&(n.check=Wy(n.check,r,p,i)),a-=p,i+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=mm;case mm:if(4096&n.flags){if(0===a)break e;p=0;do k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&p<a);if(512&n.flags&&(n.check=Wy(n.check,r,p,i)),a-=p,i+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=vm;case vm:if(512&n.flags){for(;h<16;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=zm;break}u=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=_m;break;case bm:for(;h<32;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}e.adler=n.check=qn(u),u=0,h=0,n.mode=wm;case wm:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=u,n.bits=h,om;e.adler=n.check=1,n.mode=_m;case _m:if(t===em||t===tm)break e;case km:if(n.last){u>>>=7&h,h-=7&h,n.mode=Nm;break}for(;h<3;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}switch(n.last=1&u,u>>>=1,h-=1,3&u){case 0:n.mode=Am;break;case 1:if(Zn(n),n.mode=Tm,t===tm){u>>>=2,h-=2;break e}break;case 2:n.mode=Cm;break;case 3:e.msg="invalid block type",n.mode=zm}u>>>=2,h-=2;break;case Am:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=zm;break}if(n.length=65535&u,u=0,h=0,n.mode=xm,t===tm)break e;case xm:n.mode=Em;case Em:if(p=n.length){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;$y.arraySet(o,r,i,p,s),a-=p,i+=p,c-=p,s+=p,n.length-=p;break}n.mode=_m;break;case Cm:for(;h<14;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(n.nlen=(31&u)+257,u>>>=5,h-=5,n.ndist=(31&u)+1,u>>>=5,h-=5,n.ncode=(15&u)+4,u>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=zm;break}n.have=0,n.mode=Sm;case Sm:for(;n.have<n.ncode;){for(;h<3;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}n.lens[R[n.have++]]=7&u,u>>>=3,h-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},A=Zy(Vy,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,A){e.msg="invalid code lengths set",n.mode=zm;break}n.have=0,n.mode=Rm;case Rm:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[u&(1<<n.lenbits)-1],y=C>>>24,m=C>>>16&255,v=65535&C,!(y<=h);){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(v<16)u>>>=y,h-=y,n.lens[n.have++]=v;else{if(16===v){for(E=y+2;h<E;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(u>>>=y,h-=y,0===n.have){e.msg="invalid bit length repeat",n.mode=zm;break}k=n.lens[n.have-1],p=3+(3&u),u>>>=2,h-=2}else if(17===v){for(E=y+3;h<E;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}u>>>=y,h-=y,k=0,p=3+(7&u),u>>>=3,h-=3}else{for(E=y+7;h<E;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}u>>>=y,h-=y,k=0,p=11+(127&u),u>>>=7,h-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=zm;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===zm)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=zm;break}if(n.lenbits=9,x={bits:n.lenbits},A=Zy(Xy,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,A){e.msg="invalid literal/lengths set",n.mode=zm;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},A=Zy(Gy,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,A){e.msg="invalid distances set",n.mode=zm;break}if(n.mode=Tm,t===tm)break e;case Tm:n.mode=Bm;case Bm:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=u,n.bits=h,Jy(e,l),s=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,a=e.avail_in,u=n.hold,h=n.bits,n.mode===_m&&(n.back=-1);break}for(n.back=0;C=n.lencode[u&(1<<n.lenbits)-1],y=C>>>24,m=C>>>16&255,v=65535&C,!(y<=h);){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(m&&0===(240&m)){for(b=y,w=m,_=v;C=n.lencode[_+((u&(1<<b+w)-1)>>b)],y=C>>>24,m=C>>>16&255,v=65535&C,!(b+y<=h);){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}u>>>=b,h-=b,n.back+=b}if(u>>>=y,h-=y,n.back+=y,n.length=v,0===m){n.mode=jm;break}if(32&m){n.back=-1,n.mode=_m;break}if(64&m){e.msg="invalid literal/length code",n.mode=zm;break}n.extra=15&m,n.mode=Dm;case Dm:if(n.extra){for(E=n.extra;h<E;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Om;case Om:for(;C=n.distcode[u&(1<<n.distbits)-1],y=C>>>24,m=C>>>16&255,v=65535&C,!(y<=h);){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(0===(240&m)){for(b=y,w=m,_=v;C=n.distcode[_+((u&(1<<b+w)-1)>>b)],y=C>>>24,m=C>>>16&255,v=65535&C,!(b+y<=h);){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}u>>>=b,h-=b,n.back+=b}if(u>>>=y,h-=y,n.back+=y,64&m){e.msg="invalid distance code",n.mode=zm;break}n.offset=v,n.extra=15&m,n.mode=Pm;case Pm:if(n.extra){for(E=n.extra;h<E;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=zm;break}n.mode=Im;case Im:if(0===c)break e;if(p=l-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=zm;break}p>n.wnext?(p-=n.wnext,d=n.wsize-p):d=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=o,d=s-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do o[s++]=g[d++];while(--p);0===n.length&&(n.mode=Bm);break;case jm:if(0===c)break e;o[s++]=n.length,c--,n.mode=Bm;break;case Nm:if(n.wrap){for(;h<32;){if(0===a)break e;a--,u|=r[i++]<<h,h+=8}if(l-=c,e.total_out+=l,n.total+=l,l&&(e.adler=n.check=n.flags?Wy(n.check,o,l,s-l):Ky(n.check,o,l,s-l)),l=c,(n.flags?u:qn(u))!==n.check){e.msg="incorrect data check",n.mode=zm;break}u=0,h=0}n.mode=Um;case Um:if(n.wrap&&n.flags){for(;h<32;){if(0===a)break e;a--,u+=r[i++]<<h,h+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=zm;break}u=0,h=0}n.mode=Lm;case Lm:A=rm;break e;case zm:A=sm;break e;case Mm:return am;case Fm:default:return im}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=u,n.bits=h,(n.wsize||l!==e.avail_out&&n.mode<zm&&(n.mode<Nm||t!==Qy))&&Vn(e,e.output,e.next_out,l-e.avail_out)?(n.mode=Mm,am):(f-=e.avail_in,l-=e.avail_out,e.total_in+=f,e.total_out+=l,n.total+=l,n.wrap&&l&&(e.adler=n.check=n.flags?Wy(n.check,o,l,e.next_out-l):Ky(n.check,o,l,e.next_out-l)),e.data_type=n.bits+(n.last?64:0)+(n.mode===_m?128:0)+(n.mode===Tm||n.mode===xm?256:0),(0===f&&0===l||t===Qy)&&A===nm&&(A=cm),A)}function Gn(e){if(!e||!e.state)return im;var t=e.state;return t.window&&(t.window=null),e.state=null,nm}function Qn(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?im:(n.head=t,t.done=!1,nm)):im}function er(e,t){var n,r,o,i=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==wm?im:n.mode===wm&&(r=1,r=Ky(r,t,i,0),r!==n.check)?sm:(o=Vn(e,t,i,i))?(n.mode=Mm,am):(n.havedict=1,nm)):im}function tr(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function nr(e){if(!(this instanceof nr))return new nr(e);this.options=av.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fv,this.strm.avail_out=0;var n=sv.inflateInit2(this.strm,t.windowBits);if(n!==uv.Z_OK)throw new Error(hv[n]);this.header=new lv,sv.inflateGetHeader(this.strm,this.header)}function rr(e,t){var n=new nr(t);if(n.push(e,!0),n.err)throw n.msg||hv[n.err];return n.result}function or(e,t){return t=t||{},t.raw=!0,rr(e,t)}function ir(){Dv=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Rv[t]=e[t],Tv[e.charCodeAt(t)]=t;Tv["-".charCodeAt(0)]=62,Tv["_".charCodeAt(0)]=63}function sr(e){Dv||ir();var t,n,r,o,i,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[a-2]?2:"="===e[a-1]?1:0,s=new Bv(3*a/4-i),r=i>0?a-4:a;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)o=Tv[e.charCodeAt(t)]<<18|Tv[e.charCodeAt(t+1)]<<12|Tv[e.charCodeAt(t+2)]<<6|Tv[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===i?(o=Tv[e.charCodeAt(t)]<<2|Tv[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===i&&(o=Tv[e.charCodeAt(t)]<<10|Tv[e.charCodeAt(t+1)]<<4|Tv[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function ar(e){return Rv[e>>18&63]+Rv[e>>12&63]+Rv[e>>6&63]+Rv[63&e]}function cr(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(ar(r));return o.join("")}function ur(e){Dv||ir();for(var t,n=e.length,r=n%3,o="",i=[],s=16383,a=0,c=n-r;a<c;a+=s)i.push(cr(e,a,a+s>c?c:a+s));return 1===r?(t=e[n-1],o+=Rv[t>>2],o+=Rv[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=Rv[t>>10],o+=Rv[t>>4&63],o+=Rv[t<<2&63],o+="="),i.push(o),i.join("")}function hr(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=n?o-1:0,l=n?-1:1,p=e[t+f];for(f+=l,i=p&(1<<-h)-1,p>>=-h,h+=a;h>0;i=256*i+e[t+f],f+=l,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=r;h>0;s=256*s+e[t+f],f+=l,h-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)}function fr(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,h=(1<<u)-1,f=h>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+f>=1?l/c:l*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(t*c-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+p]=255&s,p+=d,s/=256,u-=8);e[n+p-d]|=128*g}function lr(){return dr.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function pr(e,t){if(lr()<t)throw new RangeError("Invalid typed array length");return dr.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=dr.prototype):(null===e&&(e=new dr(t)),e.length=t),e}function dr(e,t,n){if(!(dr.TYPED_ARRAY_SUPPORT||this instanceof dr))return new dr(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return vr(this,e)}return gr(this,e,t,n)}function gr(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?_r(e,t,n,r):"string"==typeof t?br(e,t,n):kr(e,t)}function yr(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function mr(e,t,n,r){return yr(t),t<=0?pr(e,t):void 0!==n?"string"==typeof r?pr(e,t).fill(n,r):pr(e,t).fill(n):pr(e,t)}function vr(e,t){if(yr(t),e=pr(e,t<0?0:0|Ar(t)),!dr.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function br(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!dr.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Er(t,n);e=pr(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function wr(e,t){var n=t.length<0?0:0|Ar(t.length);e=pr(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function _r(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),dr.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=dr.prototype):e=wr(e,t),e}function kr(e,t){if(xr(t)){var n=0|Ar(t.length);return e=pr(e,n),
0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||oo(t.length)?pr(e,0):wr(e,t);if("Buffer"===t.type&&Pv(t.data))return wr(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ar(e){if(e>=lr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+lr().toString(16)+" bytes");return 0|e}function xr(e){return!(null==e||!e._isBuffer)}function Er(e,t){if(xr(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Qr(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return no(e).length;default:if(r)return Qr(e).length;t=(""+t).toLowerCase(),r=!0}}function Cr(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return Fr(this,t,n);case"utf8":case"utf-8":return Ur(this,t,n);case"ascii":return zr(this,t,n);case"latin1":case"binary":return Mr(this,t,n);case"base64":return Nr(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qr(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Sr(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Rr(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=dr.from(t,r)),xr(t))return 0===t.length?-1:Tr(e,t,n,r,o);if("number"==typeof t)return t&=255,dr.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Tr(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Tr(e,t,n,r,o){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}var u;if(o){var h=-1;for(u=n;u<a;u++)if(i(e,u)===i(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===c)return h*s}else h!==-1&&(u-=u-h),h=-1}else for(n+c>a&&(n=a-c),u=n;u>=0;u--){for(var f=!0,l=0;l<c;l++)if(i(e,u+l)!==i(t,l)){f=!1;break}if(f)return u}return-1}function Br(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function Dr(e,t,n,r){return ro(Qr(t,e.length-n),e,n,r)}function Or(e,t,n,r){return ro(eo(t),e,n,r)}function Pr(e,t,n,r){return Or(e,t,n,r)}function Ir(e,t,n,r){return ro(no(t),e,n,r)}function jr(e,t,n,r){return ro(to(t,e.length-n),e,n,r)}function Nr(e,t,n){return ur(0===t&&n===e.length?e:e.slice(t,n))}function Ur(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,u,h,f;switch(a){case 1:i<128&&(s=i);break;case 2:c=e[o+1],128===(192&c)&&(f=(31&i)<<6|63&c,f>127&&(s=f));break;case 3:c=e[o+1],u=e[o+2],128===(192&c)&&128===(192&u)&&(f=(15&i)<<12|(63&c)<<6|63&u,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:c=e[o+1],u=e[o+2],h=e[o+3],128===(192&c)&&128===(192&u)&&128===(192&h)&&(f=(15&i)<<18|(63&c)<<12|(63&u)<<6|63&h,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=a}return Lr(r)}function Lr(e){var t=e.length;if(t<=jv)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=jv));return n}function zr(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function Mr(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function Fr(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=Gr(e[i]);return o}function qr(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function Yr(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Hr(e,t,n,r,o,i){if(!xr(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function $r(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Kr(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function Wr(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Jr(e,t,n,r,o){return o||Wr(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),fr(e,t,n,r,23,4),n+4}function Zr(e,t,n,r,o){return o||Wr(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),fr(e,t,n,r,52,8),n+8}function Vr(e){if(e=Xr(e).replace(Uv,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Xr(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Gr(e){return e<16?"0"+e.toString(16):e.toString(16)}function Qr(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function eo(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function to(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function no(e){return sr(Vr(e))}function ro(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function oo(e){return e!==e}function io(e){return null!=e&&(!!e._isBuffer||so(e)||ao(e))}function so(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ao(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&so(e.slice(0,0))}function co(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*qv;case"days":case"day":case"d":return n*Fv;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Mv;case"minutes":case"minute":case"mins":case"min":case"m":return n*zv;case"seconds":case"second":case"secs":case"sec":case"s":return n*Lv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function uo(e){return e>=Fv?Math.round(e/Fv)+"d":e>=Mv?Math.round(e/Mv)+"h":e>=zv?Math.round(e/zv)+"m":e>=Lv?Math.round(e/Lv)+"s":e+"ms"}function ho(e){return fo(e,Fv,"day")||fo(e,Mv,"hour")||fo(e,zv,"minute")||fo(e,Lv,"second")||e+" ms"}function fo(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function lo(){}function po(){po.init.call(this)}function go(e){return void 0===e._maxListeners?po.defaultMaxListeners:e._maxListeners}function yo(e,t,n){if(t)e.call(n);else for(var r=e.length,o=Co(e,r),i=0;i<r;++i)o[i].call(n)}function mo(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=Co(e,o),s=0;s<o;++s)i[s].call(n,r)}function vo(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=Co(e,i),a=0;a<i;++a)s[a].call(n,r,o)}function bo(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=Co(e,s),c=0;c<s;++c)a[c].call(n,r,o,i)}function wo(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=Co(e,o),s=0;s<o;++s)i[s].apply(n,r)}function _o(e,t,n,r){var o,i,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(i=e._events,i?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]):(i=e._events=new lo,e._eventsCount=0),s){if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=go(e),o&&o>0&&s.length>o)){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,ko(a)}}else s=i[t]=n,++e._eventsCount;return e}function ko(e){"function"==typeof console.warn?console.warn(e):console.log(e)}function Ao(e,t,n){function r(){e.removeListener(t,r),o||(o=!0,n.apply(e,arguments))}var o=!1;return r.listener=n,r}function xo(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Eo(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}function Co(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function So(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Ro(e){if(!Ko(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(Do(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,i=String(e).replace(Gv,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])i+=Yo(s)||!Zo(s)?" "+s:" "+Do(s);return i}function To(e,t){function n(){if(!r){if(tu.throwDeprecation)throw new Error(t);tu.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}if(Wo(Tc.process))return function(){return To(e,t).apply(this,arguments)};if(tu.noDeprecation===!0)return e;var r=!1;return n}function Bo(e){if(Wo(Vv)&&(Vv=tu.env.NODE_DEBUG||""),e=e.toUpperCase(),!Qv[e])if(new RegExp("\\b"+e+"\\b","i").test(Vv)){var t=0;Qv[e]=function(){var n=Ro.apply(null,arguments);console.error("%s %d: %s",e,t,n)}}else Qv[e]=function(){};return Qv[e]}function Do(e,t){var n={seen:[],stylize:Po};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),qo(t)?n.showHidden=t:t&&ei(n,t),Wo(n.showHidden)&&(n.showHidden=!1),Wo(n.depth)&&(n.depth=2),Wo(n.colors)&&(n.colors=!1),Wo(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Oo),jo(n,e,n.depth)}function Oo(e,t){var n=Do.styles[t];return n?"["+Do.colors[n][0]+"m"+e+"["+Do.colors[n][1]+"m":e}function Po(e,t){return e}function Io(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function jo(e,t,n){if(e.customInspect&&t&&Go(t.inspect)&&t.inspect!==Do&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Ko(r)||(r=jo(e,r,n)),r}var o=No(e,t);if(o)return o;var i=Object.keys(t),s=Io(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),Xo(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Uo(t);if(0===i.length){if(Go(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Jo(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Vo(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Xo(t))return Uo(t)}var c="",u=!1,h=["{","}"];if(Fo(t)&&(u=!0,h=["[","]"]),Go(t)){var f=t.name?": "+t.name:"";c=" [Function"+f+"]"}if(Jo(t)&&(c=" "+RegExp.prototype.toString.call(t)),Vo(t)&&(c=" "+Date.prototype.toUTCString.call(t)),Xo(t)&&(c=" "+Uo(t)),0===i.length&&(!u||0==t.length))return h[0]+c+h[1];if(n<0)return Jo(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var l;return l=u?Lo(e,t,n,s,i):i.map(function(r){return zo(e,t,n,s,r,u)}),e.seen.pop(),Mo(l,c,h)}function No(e,t){if(Wo(t))return e.stylize("undefined","undefined");if(Ko(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return $o(t)?e.stylize(""+t,"number"):qo(t)?e.stylize(""+t,"boolean"):Yo(t)?e.stylize("null","null"):void 0}function Uo(e){return"["+Error.prototype.toString.call(e)+"]"}function Lo(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)ti(t,String(s))?i.push(zo(e,t,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(zo(e,t,n,r,o,!0))}),i}function zo(e,t,n,r,o,i){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),ti(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=Yo(n)?jo(e,c.value,null):jo(e,c.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),Wo(s)){if(i&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Mo(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function Fo(e){return Array.isArray(e)}function qo(e){return"boolean"==typeof e}function Yo(e){return null===e}function Ho(e){return null==e}function $o(e){return"number"==typeof e}function Ko(e){return"string"==typeof e}function Wo(e){return void 0===e}function Jo(e){return Zo(e)&&"[object RegExp]"===Qo(e)}function Zo(e){return"object"==typeof e&&null!==e}function Vo(e){return Zo(e)&&"[object Date]"===Qo(e)}function Xo(e){return Zo(e)&&("[object Error]"===Qo(e)||e instanceof Error)}function Go(e){return"function"==typeof e}function Qo(e){return Object.prototype.toString.call(e)}function ei(e,t){if(!t||!Zo(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function ti(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ni(){rb=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)eb[t]=e[t],tb[e.charCodeAt(t)]=t;tb["-".charCodeAt(0)]=62,tb["_".charCodeAt(0)]=63}function ri(e){rb||ni();var t,n,r,o,i,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[a-2]?2:"="===e[a-1]?1:0,s=new nb(3*a/4-i),r=i>0?a-4:a;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)o=tb[e.charCodeAt(t)]<<18|tb[e.charCodeAt(t+1)]<<12|tb[e.charCodeAt(t+2)]<<6|tb[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===i?(o=tb[e.charCodeAt(t)]<<2|tb[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===i&&(o=tb[e.charCodeAt(t)]<<10|tb[e.charCodeAt(t+1)]<<4|tb[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function oi(e){return eb[e>>18&63]+eb[e>>12&63]+eb[e>>6&63]+eb[63&e]}function ii(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(oi(r));return o.join("")}function si(e){rb||ni();for(var t,n=e.length,r=n%3,o="",i=[],s=16383,a=0,c=n-r;a<c;a+=s)i.push(ii(e,a,a+s>c?c:a+s));return 1===r?(t=e[n-1],o+=eb[t>>2],o+=eb[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=eb[t>>10],o+=eb[t>>4&63],o+=eb[t<<2&63],o+="="),i.push(o),i.join("")}function ai(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,h=-7,f=n?o-1:0,l=n?-1:1,p=e[t+f];for(f+=l,i=p&(1<<-h)-1,p>>=-h,h+=a;h>0;i=256*i+e[t+f],f+=l,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=r;h>0;s=256*s+e[t+f],f+=l,h-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)}function ci(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,h=(1<<u)-1,f=h>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+f>=1?l/c:l*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(t*c-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+p]=255&s,p+=d,s/=256,u-=8);e[n+p-d]|=128*g}function ui(){return fi.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function hi(e,t){if(ui()<t)throw new RangeError("Invalid typed array length");return fi.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=fi.prototype):(null===e&&(e=new fi(t)),e.length=t),e}function fi(e,t,n){if(!(fi.TYPED_ARRAY_SUPPORT||this instanceof fi))return new fi(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return gi(this,e)}return li(this,e,t,n)}function li(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?vi(e,t,n,r):"string"==typeof t?yi(e,t,n):bi(e,t)}function pi(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function di(e,t,n,r){return pi(t),t<=0?hi(e,t):void 0!==n?"string"==typeof r?hi(e,t).fill(n,r):hi(e,t).fill(n):hi(e,t)}function gi(e,t){if(pi(t),e=hi(e,t<0?0:0|wi(t)),!fi.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function yi(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!fi.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|ki(t,n);e=hi(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function mi(e,t){var n=t.length<0?0:0|wi(t.length);e=hi(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function vi(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),fi.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=fi.prototype):e=mi(e,t),e}function bi(e,t){if(_i(t)){var n=0|wi(t.length);return e=hi(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||ts(t.length)?hi(e,0):mi(e,t);if("Buffer"===t.type&&ib(t.data))return mi(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function wi(e){if(e>=ui())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ui().toString(16)+" bytes");return 0|e}function _i(e){return!(null==e||!e._isBuffer)}function ki(e,t){if(_i(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Vi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Qi(e).length;default:if(r)return Vi(e).length;t=(""+t).toLowerCase(),r=!0}}function Ai(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return Li(this,t,n);case"utf8":case"utf-8":return Ii(this,t,n);case"ascii":return Ni(this,t,n);case"latin1":case"binary":return Ui(this,t,n);case"base64":return Pi(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zi(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function xi(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ei(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=fi.from(t,r)),_i(t))return 0===t.length?-1:Ci(e,t,n,r,o);if("number"==typeof t)return t&=255,fi.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ci(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Ci(e,t,n,r,o){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}var u;if(o){var h=-1;for(u=n;u<a;u++)if(i(e,u)===i(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===c)return h*s}else h!==-1&&(u-=u-h),h=-1}else for(n+c>a&&(n=a-c),u=n;u>=0;u--){for(var f=!0,l=0;l<c;l++)if(i(e,u+l)!==i(t,l)){f=!1;break}if(f)return u}return-1}function Si(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function Ri(e,t,n,r){return es(Vi(t,e.length-n),e,n,r)}function Ti(e,t,n,r){return es(Xi(t),e,n,r)}function Bi(e,t,n,r){return Ti(e,t,n,r)}function Di(e,t,n,r){return es(Qi(t),e,n,r)}function Oi(e,t,n,r){return es(Gi(t,e.length-n),e,n,r)}function Pi(e,t,n){return si(0===t&&n===e.length?e:e.slice(t,n))}function Ii(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var c,u,h,f;switch(a){case 1:i<128&&(s=i);break;case 2:c=e[o+1],128===(192&c)&&(f=(31&i)<<6|63&c,f>127&&(s=f));break;case 3:c=e[o+1],u=e[o+2],128===(192&c)&&128===(192&u)&&(f=(15&i)<<12|(63&c)<<6|63&u,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:c=e[o+1],u=e[o+2],h=e[o+3],128===(192&c)&&128===(192&u)&&128===(192&h)&&(f=(15&i)<<18|(63&c)<<12|(63&u)<<6|63&h,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=a}return ji(r)}function ji(e){var t=e.length;if(t<=ab)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ab));return n}function Ni(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function Ui(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function Li(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=Zi(e[i]);return o}function zi(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function Mi(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Fi(e,t,n,r,o,i){if(!_i(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function qi(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Yi(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function Hi(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $i(e,t,n,r,o){return o||Hi(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),ci(e,t,n,r,23,4),n+4}function Ki(e,t,n,r,o){return o||Hi(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),ci(e,t,n,r,52,8),n+8}function Wi(e){if(e=Ji(e).replace(cb,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Ji(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Zi(e){return e<16?"0"+e.toString(16):e.toString(16)}function Vi(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Xi(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Gi(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function Qi(e){return ri(Wi(e))}function es(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function ts(e){return e!==e}function ns(e){return null!=e&&(!!e._isBuffer||rs(e)||os(e))}function rs(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function os(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&rs(e.slice(0,0))}function is(){this.head=null,this.tail=null,this.length=0}function ss(e){if(e&&!ub(e))throw new Error("Unknown encoding: "+e)}function as(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),ss(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=us;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=hs;break;default:return void(this.write=cs)}this.charBuffer=new fi(6),this.charReceived=0,this.charLength=0}function cs(e){return e.toString(this.encoding)}function us(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function hs(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}function fs(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function ls(e,t){return e.listeners(t).length}function ps(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof oa&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new is,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new as(e.encoding),this.encoding=e.encoding)}function ds(e){return this instanceof ds?(this._readableState=new ps(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void po.call(this)):new ds(e)}function gs(e,t,n,r,o){var i=bs(t,n);if(i)e.emit("error",i);else if(null===n)t.reading=!1,ws(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&o){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var c;!t.decoder||o||r||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),o||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_s(e))),As(e,t)}else o||(t.reading=!1);return ys(t)}function ys(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function ms(e){return e>=fb?e=fb:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function vs(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=ms(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function bs(e,t){var n=null;return io(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function ws(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_s(e)}}function _s(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(hb("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?f(ks,e):ks(e))}function ks(e){hb("emit readable"),e.emit("readable"),Ts(e)}function As(e,t){t.readingMore||(t.readingMore=!0,f(xs,e,t))}function xs(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(hb("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function Es(e){return function(){var t=e._readableState;hb("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,Ts(e))}}function Cs(e){hb("readable nexttick read 0"),e.read(0)}function Ss(e,t){t.resumeScheduled||(t.resumeScheduled=!0,f(Rs,e,t))}function Rs(e,t){t.reading||(hb("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Ts(e),t.flowing&&!t.reading&&e.read(0)}function Ts(e){var t=e._readableState;for(hb("flow",t.flowing);t.flowing&&null!==e.read(););}function Bs(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=Ds(e,t.buffer,t.decoder),n}function Ds(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?Os(e,t):Ps(e,t),r}function Os(e,t){var n=t.head,r=1,o=n.data;for(e-=o.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(o+=s===i.length?i:i.slice(0,e),e-=s,0===e){s===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(s));break}++r}return t.length-=r,o}function Ps(e,t){var n=dr.allocUnsafe(e),r=t.head,o=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,s),e-=s,0===e){s===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++o}return t.length-=o,n}function Is(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,f(js,t,e))}function js(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Ns(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function Us(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Ls(){}function zs(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function Ms(e,t){Object.defineProperty(this,"buffer",{get:To(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof oa&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,
this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){Zs(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ra(this)}function Fs(e){return this instanceof Fs||this instanceof oa?(this._writableState=new Ms(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void po.call(this)):new Fs(e)}function qs(e,t){var n=new Error("write after end");e.emit("error",n),f(t,n)}function Ys(e,t,n,r){var o=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):fi.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),f(r,i),o=!1),o}function Hs(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=fi.from(t,n)),t}function $s(e,t,n,r,o){n=Hs(t,n,r),fi.isBuffer(n)&&(r="buffer");var i=t.objectMode?1:n.length;t.length+=i;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new zs(n,r,o),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ks(e,t,!1,i,n,r,o);return s}function Ks(e,t,n,r,o,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function Ws(e,t,n,r,o){--t.pendingcb,n?f(o,r):o(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function Js(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Zs(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(Js(n),t)Ws(e,n,r,t,o);else{var i=Qs(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||Gs(e,n),r?f(Vs,e,n,i,o):Vs(e,n,i,o)}}function Vs(e,t,n,r){n||Xs(e,t),t.pendingcb--,r(),ta(e,t)}function Xs(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Gs(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0;n;)o[s]=n,n=n.next,s+=1;Ks(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new ra(t)}else{for(;n;){var a=n.chunk,c=n.encoding,u=n.callback,h=t.objectMode?1:a.length;if(Ks(e,t,!1,h,a,c,u),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function Qs(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function ea(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function ta(e,t){var n=Qs(t);return n&&(0===t.pendingcb?(ea(e,t),t.finished=!0,e.emit("finish")):ea(e,t)),n}function na(e,t,n){t.ending=!0,ta(e,t),n&&(t.finished?f(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function ra(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}function oa(e){return this instanceof oa?(ds.call(this,e),Fs.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",ia)):new oa(e)}function ia(){this.allowHalfOpen||this._writableState.ended||f(sa,this)}function sa(e){e.end()}function aa(e){this.afterTransform=function(t,n){return ca(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function ca(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function ua(e){if(!(this instanceof ua))return new ua(e);oa.call(this,e),this._transformState=new aa(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){ha(t,e)}):ha(t)})}function ha(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function fa(e){return this instanceof fa?void ua.call(this,e):new fa(e)}function la(){po.call(this)}function pa(e){var t=this;if(!(t instanceof pa))return new pa(e);if(t._id=_b(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1,objectMode:!0},e),kb.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||_b(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||pa.channelConfig,t.config=e.config||pa.config,t.constraints=t._transformConstraints(e.constraints||pa.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:bb(),!t._wrtc)throw"undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};"addTrack"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function da(){}function ga(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Rb;case"days":case"day":case"d":return n*Sb;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Cb;case"minutes":case"minute":case"mins":case"min":case"m":return n*Eb;case"seconds":case"second":case"secs":case"sec":case"s":return n*xb;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function ya(e){return e>=Sb?Math.round(e/Sb)+"d":e>=Cb?Math.round(e/Cb)+"h":e>=Eb?Math.round(e/Eb)+"m":e>=xb?Math.round(e/xb)+"s":e+"ms"}function ma(e){return va(e,Sb,"day")||va(e,Cb,"hour")||va(e,Eb,"minute")||va(e,xb,"second")||e+" ms"}function va(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function ba(e){return nu.Buffer&&nu.Buffer.isBuffer(e)||nu.ArrayBuffer&&e instanceof ArrayBuffer||e instanceof Uint8Array}function wa(e){throw new RangeError(nw[e])}function _a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function ka(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(tw,".");var o=e.split("."),i=_a(o,t).join(".");return r+i}function Aa(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function xa(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Ea(e,t,n){var r=0;for(e=n?ow(e/Vb):e>>1,e+=ow(e/t);e>rw*Jb>>1;r+=Kb)e=ow(e/rw);return ow(r+(rw+1)*e/(e+Zb))}function Ca(e){var t,n,r,o,i,s,a,c,u,h,f,l,p,d,g,y=[];for(e=Aa(e),l=e.length,t=Gb,n=0,i=Xb,s=0;s<l;++s)f=e[s],f<128&&y.push(iw(f));for(r=o=y.length,o&&y.push(Qb);r<l;){for(a=$b,s=0;s<l;++s)f=e[s],f>=t&&f<a&&(a=f);for(p=r+1,a-t>ow(($b-n)/p)&&wa("overflow"),n+=(a-t)*p,t=a,s=0;s<l;++s)if(f=e[s],f<t&&++n>$b&&wa("overflow"),f==t){for(c=n,u=Kb;h=u<=i?Wb:u>=i+Jb?Jb:u-i,!(c<h);u+=Kb)g=c-h,d=Kb-h,y.push(iw(xa(h+g%d,0))),c=ow(g/d);y.push(iw(xa(c,0))),i=Ea(n,p,r==o),n=0,++r}++n,++t}return y.join("")}function Sa(e){return ka(e,function(e){return ew.test(e)?"xn--"+Ca(e):e})}function Ra(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ta(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Ba(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Da(aw(e),function(r){var o=encodeURIComponent(Ta(r))+n;return sw(e[r])?Da(e[r],function(e){return o+encodeURIComponent(Ta(e))}).join(t):o+encodeURIComponent(Ta(e[r]))}).join(t):r?encodeURIComponent(Ta(r))+n+encodeURIComponent(Ta(e)):""}function Da(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function Oa(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var u,h,f,l,p=e[c].replace(i,"%20"),d=p.indexOf(n);d>=0?(u=p.substr(0,d),h=p.substr(d+1)):(u=p,h=""),f=decodeURIComponent(u),l=decodeURIComponent(h),Ra(o,f)?sw(o[f])?o[f].push(l):o[f]=[o[f],l]:o[f]=l}return o}function Pa(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Ia(e,t,n){if(e&&Zo(e)&&e instanceof Pa)return e;var r=new Pa;return r.parse(e,t,n),r}function ja(e,t,n,r){if(!Ko(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),i=o!==-1&&o<t.indexOf("#")?"?":"#",s=t.split(i),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(i);var c=t;if(c=c.trim(),!r&&1===t.split("#").length){var u=hw.exec(c);if(u)return e.path=c,e.href=c,e.pathname=u[1],u[2]?(e.search=u[2],n?e.query=Oa(e.search.substr(1)):e.query=e.search.substr(1)):n&&(e.search="",e.query={}),e}var h=cw.exec(c);if(h){h=h[0];var f=h.toLowerCase();e.protocol=f,c=c.substr(h.length)}if(r||h||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===c.substr(0,2);!l||h&&ww[h]||(c=c.substr(2),e.slashes=!0)}var p,d,g,y;if(!ww[h]&&(l||h&&!_w[h])){var m=-1;for(p=0;p<gw.length;p++)d=c.indexOf(gw[p]),d!==-1&&(m===-1||d<m)&&(m=d);var v,b;for(b=m===-1?c.lastIndexOf("@"):c.lastIndexOf("@",m),b!==-1&&(v=c.slice(0,b),c=c.slice(b+1),e.auth=decodeURIComponent(v)),m=-1,p=0;p<dw.length;p++)d=c.indexOf(dw[p]),d!==-1&&(m===-1||d<m)&&(m=d);m===-1&&(m=c.length),e.host=c.slice(0,m),c=c.slice(m),Ua(e),e.hostname=e.hostname||"";var w="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!w){var _=e.hostname.split(/\./);for(p=0,g=_.length;p<g;p++){var k=_[p];if(k&&!k.match(mw)){for(var A="",x=0,E=k.length;x<E;x++)A+=k.charCodeAt(x)>127?"x":k[x];if(!A.match(mw)){var C=_.slice(0,p),S=_.slice(p+1),R=k.match(vw);R&&(C.push(R[1]),S.unshift(R[2])),S.length&&(c="/"+S.join(".")+c),e.hostname=C.join(".");break}}}}e.hostname.length>yw?e.hostname="":e.hostname=e.hostname.toLowerCase(),w||(e.hostname=Sa(e.hostname)),y=e.port?":"+e.port:"";var T=e.hostname||"";e.host=T+y,e.href+=e.host,w&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!bw[f])for(p=0,g=pw.length;p<g;p++){var B=pw[p];if(c.indexOf(B)!==-1){var D=encodeURIComponent(B);D===B&&(D=escape(B)),c=c.split(B).join(D)}}var O=c.indexOf("#");O!==-1&&(e.hash=c.substr(O),c=c.slice(0,O));var P=c.indexOf("?");if(P!==-1?(e.search=c.substr(P),e.query=c.substr(P+1),n&&(e.query=Oa(e.query)),c=c.slice(0,P)):n&&(e.search="",e.query={}),c&&(e.pathname=c),_w[f]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){y=e.pathname||"";var I=e.search||"";e.path=y+I}return e.href=Na(e),e}function Na(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",r=e.pathname||"",o=e.hash||"",i=!1,s="";e.host?i=t+e.host:e.hostname&&(i=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(i+=":"+e.port)),e.query&&Zo(e.query)&&Object.keys(e.query).length&&(s=Ba(e.query));var a=e.search||s&&"?"+s||"";return n&&":"!==n.substr(-1)&&(n+=":"),e.slashes||(!n||_w[n])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),n+i+r+a+o}function Ua(e){var t=e.host,n=uw.exec(t);n&&(n=n[0],":"!==n&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}function La(e){return null==e&&(e=nu.Promise),this instanceof La?za(e,this):za(e,Object.create(La.prototype))}function za(e,t){return t.promise=new e(function(e,n){t.resolve=e,t.reject=n}),t}function Ma(e,t){var n=e;t=t||wc.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(n_("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),n_("parse %s",e),n=t_(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=n.host.indexOf(":")!==-1,o=r?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}function Fa(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c_;case"days":case"day":case"d":return n*a_;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s_;case"minutes":case"minute":case"mins":case"min":case"m":return n*i_;case"seconds":case"second":case"secs":case"sec":case"s":return n*o_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function qa(e){return e>=a_?Math.round(e/a_)+"d":e>=s_?Math.round(e/s_)+"h":e>=i_?Math.round(e/i_)+"m":e>=o_?Math.round(e/o_)+"s":e+"ms"}function Ya(e){return Ha(e,a_,"day")||Ha(e,s_,"hour")||Ha(e,i_,"minute")||Ha(e,o_,"second")||e+" ms"}function Ha(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function $a(e){if(e)return Ka(e)}function Ka(e){for(var t in $a.prototype)e[t]=$a.prototype[t];return e}function Wa(e){return wc.Buffer&&wc.Buffer.isBuffer(e)||wc.ArrayBuffer&&e instanceof ArrayBuffer}function Ja(e){function t(e){if(!e)return!1;if(wc.Buffer&&wc.Buffer.isBuffer&&wc.Buffer.isBuffer(e)||wc.ArrayBuffer&&e instanceof ArrayBuffer||wc.Blob&&e instanceof Blob||wc.File&&e instanceof File)return!0;if(S_(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0}return!1}return t(e)}function Za(e,t,n){function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}var o=!1;return n=n||Va,r.count=e,0===e?t():r}function Va(){}function Xa(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}e[t]=r}}}function Ga(e,t){t=t||{};var n=new P_;Xa(e);for(var r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}function Qa(e,t){return Xa(e),new Blob(e,t||{})}function ec(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}function tc(e){var t="";do t=J_[e%Z_]+t,e=Math.floor(e/Z_);while(e>0);return t}function nc(e){var t=0;for(G_=0;G_<e.length;G_++)t=t*Z_+V_[e.charAt(G_)];return t}function rc(){var e=tc(+new Date);return e!==Y_?(X_=0,Y_=e):e+"."+tc(X_++)}function oc(e){var t=e&&e.forceBase64;uk&&!t||(this.supportsBinary=!1),nk.call(this,e)}function ic(){}function sc(e){if(fk.call(this,e),this.requestTimeout=e.requestTimeout,wc.location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!==wc.location.hostname||n!==e.port,this.xs=e.secure!==t}else this.extraHeaders=e.extraHeaders}function ac(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function cc(){for(var e in ac.requests)ac.requests.hasOwnProperty(e)&&ac.requests[e].abort()}function uc(){}function hc(e){vk.call(this,e),this.query=this.query||{},mk||(wc.___eio||(wc.___eio=[]),mk=wc.___eio),this.index=mk.length;var t=this;mk.push(function(e){t.onData(e)}),this.query.j=this.index,wc.document&&wc.addEventListener&&wc.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=uc)},!1)}function fc(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=Pk&&!e.forceNode,this.usingBrowserWebSocket||(Ik=Ak),Sk.call(this,e)}function lc(e){var t,n=!1,r=!1,o=!1!==e.jsonp;if(wc.location){var i="https:"===location.protocol,s=location.port;s||(s=i?443:80),n=e.hostname!==location.hostname||s!==e.port,r=e.secure!==i}if(e.xdomain=n,e.xscheme=r,t=new Nk(e),"open"in t&&!e.forceJSONP)return new Uk(e);if(!o)throw new Error("JSONP disabled");return new Lk(e)}function pc(e,t){if(!(this instanceof pc))return new pc(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=rA(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=rA(t.host).host),this.secure=null!=t.secure?t.secure:wc.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(wc.location?location.hostname:"localhost"),this.port=t.port||(wc.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=iA.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized,this.forceNode=!!t.forceNode;var n="object"==typeof wc&&wc;n.global===n&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function dc(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function gc(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}function yc(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}function mc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function vc(e,t){return this instanceof vc?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new xA({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new bA.Encoder,this.decoder=new bA.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new vc(e,t)}function bc(){return new Promise(function(e,t){var n=function(t){return e(t)}.$asyncbind(this,t);try{return Cp().then(function(t){return this.db=t,e({success:!0})}.$asyncbind(this,n),n)}catch(e){n(e)}}.$asyncbind(this))}var wc="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_c=1e3,kc=60*_c,Ac=60*kc,xc=24*Ac,Ec=365.25*xc,Cc=function(e,o){o=o||{};var i=typeof e;if("string"===i&&e.length>0)return t(e);if("number"===i&&isNaN(e)===!1)return o.long?r(e):n(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Sc=e(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,o=n-(c||n);e.diff=o,e.prev=c,e.curr=n,c=n;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var s=i[a];n=o.call(e,s),i.splice(a,1),a--}return n}),t.formatArgs.call(e,i);var u=r.log||t.log||console.log.bind(console);u.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function o(e){t.save(e),t.names=[],t.skips=[];for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r.default=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=Cc,t.names=[],t.skips=[],t.formatters={};var c}),Rc=e(function(e,t){function n(){return!("undefined"==typeof window||!window||"undefined"==typeof window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof process&&"env"in process)return process.env.DEBUG}function a(){try{return window.localStorage}catch(e){}}t=e.exports=Sc,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),Tc="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Bc=i,Dc=s;"function"==typeof Tc.setTimeout&&(Bc=setTimeout),"function"==typeof Tc.clearTimeout&&(Dc=clearTimeout);var Oc,Pc=[],Ic=!1,jc=-1;l.prototype.run=function(){this.fun.apply(null,this.array)};var Nc="browser",Uc="browser",Lc=!0,zc={},Mc=[],Fc="",qc={},Yc={},Hc={},$c=p,Kc=p,Wc=p,Jc=p,Zc=p,Vc=p,Xc=p,Gc=Tc.performance||{},Qc=Gc.now||Gc.mozNow||Gc.msNow||Gc.oNow||Gc.webkitNow||function(){return(new Date).getTime()},eu=new Date,tu={nextTick:f,title:Nc,browser:Lc,env:zc,argv:Mc,version:Fc,versions:qc,on:$c,addListener:Kc,once:Wc,off:Jc,removeListener:Zc,removeAllListeners:Vc,emit:Xc,binding:d,cwd:g,chdir:y,umask:m,hrtime:v,platform:Uc,release:Yc,config:Hc,uptime:b},nu="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ru=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ou=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],iu=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var o=ru.exec(e||""),i={},s=14;s--;)i[ou[s]]=o[s]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},su=1e3,au=60*su,cu=60*au,uu=24*cu,hu=365.25*uu,fu=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return _(e);if("number"===n&&isNaN(e)===!1)return t.long?A(e):k(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},lu=w(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=s[u];n=o.call(e,i),s.splice(u,1),u--}return n}),s=t.formatArgs.apply(e,s);var h=o.log||t.log||console.log.bind(console);h.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=fu,t.names=[],t.skips=[],t.formatters={};var c,u=0}),pu=w(function(e,t){function n(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof tu&&"env"in tu)return tu.env.DEBUG}function a(){try{return window.localStorage}catch(e){}}t=e.exports=lu,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),du=iu,gu=pu("socket.io-client:url"),yu=E,mu=1e3,vu=60*mu,bu=60*vu,wu=24*bu,_u=365.25*wu,ku=function(e,t){return t=t||{},"string"==typeof e?C(e):t.long?R(e):S(e)},Au=w(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(e,i),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));
var u=o.log||t.log||console.log.bind(console);u.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=ku,t.names=[],t.skips=[],t.formatters={};var c,u=0}),xu=w(function(e,t){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}function a(){try{return window.localStorage}catch(e){}}t=e.exports=Au,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())}),Eu=w(function(e,t){(function(){function n(e,t){function r(e){if(r[e]!==y)return r[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=r("json-stringify")&&r("json-parse");else{var o,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,h="function"==typeof c&&b;if(h){(o=function(){return 1}).toJSON=o;try{h="0"===c(0)&&"0"===c(new i)&&'""'==c(new a)&&c(v)===y&&c(y)===y&&c()===y&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([y])&&"null"==c(null)&&"[null,null,null]"==c([y,v,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(e){h=!1}}n=h}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){o=f(s);var l=5==o.a.length&&1===o.a[0];if(l){try{l=!f('"\t"')}catch(e){}if(l)try{l=1!==f("01")}catch(e){}if(l)try{l=1!==f("1.")}catch(e){}}}}catch(e){l=!1}n=l}}return r[e]=!!n}e||(e=s.Object()),t||(t=s.Object());var i=e.Number||s.Number,a=e.String||s.String,c=e.Object||s.Object,u=e.Date||s.Date,h=e.SyntaxError||s.SyntaxError,f=e.TypeError||s.TypeError,l=e.Math||s.Math,p=e.JSON||s.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var d,g,y,m=c.prototype,v=m.toString,b=new u(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!r("json")){var w="[object Function]",_="[object Date]",k="[object Number]",A="[object String]",x="[object Array]",E="[object Boolean]",C=r("bug-string-char-index");if(!b)var S=l.floor,R=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(e,t){return R[t]+365*(e-1970)+S((e-1969+(t=+(t>1)))/4)-S((e-1901+t)/100)+S((e-1601+t)/400)};if((d=m.hasOwnProperty)||(d=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?d=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,d=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,d.call(this,e)}),g=function(e,t){var n,r,i,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)d.call(r,i)&&s++;return n=r=null,s?g=2==s?function(e,t){var n,r={},o=v.call(e)==w;for(n in e)o&&"prototype"==n||d.call(r,n)||!(r[n]=1)||!d.call(e,n)||t(n)}:function(e,t){var n,r,o=v.call(e)==w;for(n in e)o&&"prototype"==n||!d.call(e,n)||(r="constructor"===n)||t(n);(r||d.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,s=v.call(e)==w,a=!s&&"function"!=typeof e.constructor&&o[typeof e.hasOwnProperty]&&e.hasOwnProperty||d;for(n in e)s&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),g(e,t)},!r("json-stringify")){var B={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},D="000000",O=function(e,t){return(D+(t||0)).slice(-e)},P="\\u00",I=function(e){for(var t='"',n=0,r=e.length,o=!C||r>10,i=o&&(C?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=B[s];break;default:if(s<32){t+=P+O(2,s.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},j=function(e,t,n,r,o,i,s){var a,c,u,h,l,p,m,b,w,C,R,B,D,P,N,U;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if(c=v.call(a),c!=_||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=k&&c!=A&&c!=x||d.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(T){for(l=S(a/864e5),u=S(l/365.2425)+1970-1;T(u+1,0)<=l;u++);for(h=S((l-T(u,0))/30.42);T(u,h+1)<=l;h++);l=1+l-T(u,h),p=(a%864e5+864e5)%864e5,m=S(p/36e5)%24,b=S(p/6e4)%60,w=S(p/1e3)%60,C=p%1e3}else u=a.getUTCFullYear(),h=a.getUTCMonth(),l=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),C=a.getUTCMilliseconds();a=(u<=0||u>=1e4?(u<0?"-":"+")+O(6,u<0?-u:u):O(4,u))+"-"+O(2,h+1)+"-"+O(2,l)+"T"+O(2,m)+":"+O(2,b)+":"+O(2,w)+"."+O(3,C)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if(c=v.call(a),c==E)return""+a;if(c==k)return a>-1/0&&a<1/0?""+a:"null";if(c==A)return I(""+a);if("object"==typeof a){for(P=s.length;P--;)if(s[P]===a)throw f();if(s.push(a),R=[],N=i,i+=o,c==x){for(D=0,P=a.length;D<P;D++)B=j(D,a,n,r,o,i,s),R.push(B===y?"null":B);U=R.length?o?"[\n"+i+R.join(",\n"+i)+"\n"+N+"]":"["+R.join(",")+"]":"[]"}else g(r||a,function(e){var t=j(e,a,n,r,o,i,s);t!==y&&R.push(I(e)+":"+(o?" ":"")+t)}),U=R.length?o?"{\n"+i+R.join(",\n"+i)+"\n"+N+"}":"{"+R.join(",")+"}":"{}";return s.pop(),U}};t.stringify=function(e,t,n){var r,i,s,a;if(o[typeof t]&&t)if((a=v.call(t))==w)i=t;else if(a==x){s={};for(var c,u=0,h=t.length;u<h;c=t[u++],a=v.call(c),(a==A||a==k)&&(s[c]=1));}if(n)if((a=v.call(n))==k){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==A&&(r=n.length<=10?n:n.slice(0,10));return j("",(c={},c[""]=e,c),i,s,r,"",[])}}if(!r("json-parse")){var N,U,L=a.fromCharCode,z={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw N=U=null,h()},F=function(){for(var e,t,n,r,o,i=U,s=i.length;N<s;)switch(o=i.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?i.charAt(N):i[N],N++,e;case 34:for(e="@",N++;N<s;)if(o=i.charCodeAt(N),o<32)M();else if(92==o)switch(o=i.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=z[o],N++;break;case 117:for(t=++N,n=N+4;N<n;N++)o=i.charCodeAt(N),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||M();e+=L("0x"+i.slice(t,N));break;default:M()}else{if(34==o)break;for(o=i.charCodeAt(N),t=N;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++N);e+=i.slice(t,N)}if(34==i.charCodeAt(N))return N++,e;M();default:if(t=N,45==o&&(r=!0,o=i.charCodeAt(++N)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(N+1),o>=48&&o<=57)&&M(),r=!1;N<s&&(o=i.charCodeAt(N),o>=48&&o<=57);N++);if(46==i.charCodeAt(N)){for(n=++N;n<s&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==N&&M(),N=n}if(o=i.charCodeAt(N),101==o||69==o){for(o=i.charCodeAt(++N),43!=o&&45!=o||N++,n=N;n<s&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==N&&M(),N=n}return+i.slice(t,N)}if(r&&M(),"true"==i.slice(N,N+4))return N+=4,!0;if("false"==i.slice(N,N+5))return N+=5,!1;if("null"==i.slice(N,N+4))return N+=4,null;M()}return"$"},q=function(e){var t,n;if("$"==e&&M(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=F(),"]"!=e;n||(n=!0))n&&(","==e?(e=F(),"]"==e&&M()):M()),","==e&&M(),t.push(q(e));return t}if("{"==e){for(t={};e=F(),"}"!=e;n||(n=!0))n&&(","==e?(e=F(),"}"==e&&M()):M()),","!=e&&"string"==typeof e&&"@"==(C?e.charAt(0):e[0])&&":"==F()||M(),t[e.slice(1)]=q(F());return t}M()}return e},Y=function(e,t,n){var r=H(e,t,n);r===y?delete e[t]:e[t]=r},H=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(v.call(o)==x)for(r=o.length;r--;)Y(o,r,n);else g(o,function(e){Y(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return N=0,U=""+e,n=q(F()),"$"!=F()&&M(),N=U=null,t&&v.call(t)==w?H((r={},r[""]=n,r),"",t):n}}}return t.runInContext=n,t}var r=!1,o={function:!0,object:!0},i=o.object&&t&&!t.nodeType&&t,s=o[typeof window]&&window||this,a=i&&o.object&&e&&!e.nodeType&&"object"==typeof nu&&nu;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a),i&&!r)n(s,i);else{var c=s.JSON,u=s.JSON3,h=!1,f=n(s,s.JSON3={noConflict:function(){return h||(h=!0,s.JSON=c,s.JSON3=u,c=u=null),f}});s.JSON={parse:f.parse,stringify:f.stringify}}r&&(void 0)(function(){return f})}).call(nu)}),Cu=B;B.prototype.on=B.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},B.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},B.prototype.off=B.prototype.removeListener=B.prototype.removeAllListeners=B.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},B.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},B.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},B.prototype.hasListeners=function(e){return!!this.listeners(e).length};var Su=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Ru=O,Tu=Su,Bu=Ru,Du=function(e){function t(e){if(!e)return e;if(Bu(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(Tu(e)){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=t(e[i]);return o}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var s in e)o[s]=t(e[s]);return o}return e}var n=[],r=e.data,o=e;return o.data=t(r),o.attachments=n.length,{packet:o,buffers:n}},Ou=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(Tu(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var i in e)e[i]=n(e[i]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},Pu=function(e,t){function n(e,i,s){if(!e)return e;if(nu.Blob&&e instanceof Blob||nu.File&&e instanceof File){r++;var a=new FileReader;a.onload=function(){s?s[i]=this.result:o=this.result,--r||t(o)},a.readAsArrayBuffer(e)}else if(Tu(e))for(var c=0;c<e.length;c++)n(e[c],c,e);else if(e&&"object"==typeof e&&!Bu(e))for(var u in e)n(e[u],u,e)}var r=0,o=e;n(o),r||t(o)},Iu={deconstructPacket:Du,reconstructPacket:Ou,removeBlobs:Pu},ju=w(function(e,t){function n(){}function r(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=f.stringify(e.data)),h("encoded %j as %s",e,n),n}function o(e,t){function n(e){var n=p.deconstructPacket(e),o=r(n.packet),i=n.buffers;i.unshift(o),t(i)}p.removeBlobs(e,n)}function i(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return u();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var o="";"-"!=e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!=e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var i=e.charAt(r);if(","==i)break;if(n.nsp+=i,r==e.length)break}else n.nsp="/";var s=e.charAt(r+1);if(""!==s&&Number(s)==s){for(n.id="";++r;){var i=e.charAt(r);if(null==i||Number(i)!=i){--r;break}if(n.id+=e.charAt(r),r==e.length)break}n.id=Number(n.id)}return e.charAt(++r)&&(n=a(n,e.substr(r))),h("decoded %s as %j",e,n),n}function a(e,t){try{e.data=f.parse(t)}catch(e){return u()}return e}function c(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:t.ERROR,data:"parser error"}}var h=xu("socket.io-parser"),f=Eu,l=Cu,p=Iu,d=Ru;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=i,n.prototype.encode=function(e,n){if(h("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)o(e,n);else{var i=r(e);n([i])}},l(i.prototype),i.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new c(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!d(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}),Nu=w(function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}}),Uu=Nu,Lu=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Uu))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(nu[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}},zu=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},Mu=Su,Fu=P,qu=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer},Yu=I,Hu=w(function(e,t){!function(n){function r(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function o(e){for(var t,n=e.length,r=-1,o="";++r<n;)t=e[r],t>65535&&(t-=65536,o+=m(t>>>10&1023|55296),t=56320|1023&t),o+=m(t);return o}function i(e,t){return m(e>>t&63|128)}function s(e){if(0==(4294967168&e))return m(e);var t="";return 0==(4294965248&e)?t=m(e>>6&31|192):0==(4294901760&e)?(t=m(e>>12&15|224),t+=i(e,6)):0==(4292870144&e)&&(t=m(e>>18&7|240),t+=i(e,12),t+=i(e,6)),t+=m(63&e|128)}function a(e){for(var t,n=r(e),o=n.length,i=-1,a="";++i<o;)t=n[i],a+=s(t);return a}function c(){if(y>=g)throw Error("Invalid byte index");var e=255&d[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,n,r,o;if(y>g)throw Error("Invalid byte index");if(y==g)return!1;if(e=255&d[y],y++,0==(128&e))return e;if(192==(224&e)){var t=c();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=c(),n=c(),o=(15&e)<<12|t<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=c(),n=c(),r=c(),o=(15&e)<<18|t<<12|n<<6|r,o>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function h(e){d=r(e),g=d.length,y=0;for(var t,n=[];(t=u())!==!1;)n.push(t);return o(n)}var f=t,l=e&&e.exports==f&&e,p="object"==typeof nu&&nu;p.global!==p&&p.window!==p||(n=p);var d,g,y,m=String.fromCharCode,v={version:"1.0.0",encode:a,decode:h};if(f&&!f.nodeType)if(l)l.exports=v;else{var b={},w=b.hasOwnProperty;for(var _ in v)w.call(v,_)&&(f[_]=v[_])}else n.wtf8=v}(nu)}),$u=w(function(e,t){!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,r,o,i,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),f=new Uint8Array(h);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],i=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],f[u++]=r<<2|o>>4,f[u++]=(15&o)<<4|i>>2,f[u++]=(3&i)<<6|63&s;return h}}()}),Ku=nu.BlobBuilder||nu.WebKitBlobBuilder||nu.MSBlobBuilder||nu.MozBlobBuilder,Wu=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(e){return!1}}(),Ju=Wu&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(e){return!1}}(),Zu=Ku&&Ku.prototype.append&&Ku.prototype.getBlob,Vu=function(){return Wu?Ju?nu.Blob:L:Zu?U:void 0}(),Xu=w(function(e,t){function n(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}function r(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=m[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,n,!0,r)},o.readAsArrayBuffer(e.data)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(y)return o(e,n,r);var i=new Uint8Array(1);i[0]=m[e.type];var s=new w([i.buffer,e.data]);return r(s)}function s(e){try{e=p.decode(e)}catch(e){return!1}return e}function a(e,t,n){for(var r=new Array(e.length),o=l(e.length,n),i=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},s=0;s<e.length;s++)i(s,e[s],o)}var c,u=zu,h=Fu,f=qu,l=Yu,p=Hu;nu&&nu.ArrayBuffer&&(c=$u);var d="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=d||g;t.protocol=3;var m=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=u(m),b={type:"error",data:"parser error"},w=Vu;t.encodePacket=function(e,t,o,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof o&&(s=o,o=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(nu.ArrayBuffer&&a instanceof ArrayBuffer)return r(e,t,s);if(w&&a instanceof nu.Blob)return i(e,t,s);if(a&&a.base64)return n(e,s);var c=m[e.type];return void 0!==e.data&&(c+=o?p.encode(String(e.data)):String(e.data)),s(""+c)},t.encodeBase64Packet=function(e,n){var r="b"+t.packets[e.type];if(w&&e.data instanceof nu.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(r+e)},o.readAsDataURL(e.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];i=String.fromCharCode.apply(null,a)}return r+=nu.btoa(i),n(r)},t.decodePacket=function(e,n,r){if(void 0===e)return b;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&(e=s(e),e===!1))return b;var o=e.charAt(0);return Number(o)==o&&v[o]?e.length>1?{type:v[o],data:e.substring(1)}:{type:v[o]}:b}var i=new Uint8Array(e),o=i[0],a=f(e,1);return w&&"blob"===n&&(a=new w([a])),{type:v[o],data:a}},t.decodeBase64Packet=function(e,t){var n=v[e.charAt(0)];if(!c)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=c.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function o(e){return e.length+":"+e}function i(e,r){t.encodePacket(e,!!s&&n,!0,function(e){r(null,o(e))})}"function"==typeof n&&(r=n,n=null);var s=h(e);return n&&s?w&&!y?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void a(e,i,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var o;if(""==e)return r(b,0,1);for(var i,s,a="",c=0,u=e.length;c<u;c++){var h=e.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(i=Number(a)))return r(b,0,1);if(s=e.substr(c+1,i),a!=s.length)return r(b,0,1);if(s.length){if(o=t.decodePacket(s,n,!0),b.type==o.type&&b.data==o.data)return r(b,0,1);var f=r(o,c+i,u);if(!1===f)return}c+=i,a=""}}return""!=a?r(b,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}return e.length?void a(e,r,function(e,t){var r=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}t?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var c=new w([t.buffer,a.buffer,e]);n(null,c)}})}a(e,r,function(e,t){return n(new w(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return r(b,0,1);o=f(o,2+u.length),u=parseInt(u);var l=f(o,0,u);if(c)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){var p=new Uint8Array(l);l="";for(var h=0;h<p.length;h++)l+=String.fromCharCode(p[h])}i.push(l),o=f(o,u)}var d=i.length;i.forEach(function(e,o){r(t.decodePacket(e,n,!0),o,d)})}}),Gu=w(function(e){function t(e){if(e)return n(e)}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),Qu=Xu,eh=Gu,th=z;eh(z.prototype),z.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},z.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},z.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},z.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},z.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},z.prototype.onData=function(e){var t=Qu.decodePacket(e,this.socket.binaryType);this.onPacket(t)},z.prototype.onPacket=function(e){this.emit("packet",e)},z.prototype.onClose=function(){this.readyState="closed",this.emit("close")};for(var nh,rh=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},oh=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t},ih={encode:rh,decode:oh},sh=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},ah="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ch=64,uh={},hh=0,fh=0;fh<ch;fh++)uh[ah[fh]]=fh;q.encode=M,q.decode=F;var lh=q,ph=w(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=s[u];n=o.call(e,i),s.splice(u,1),u--}return n}),s=t.formatArgs.apply(e,s);var h=o.log||t.log||console.log.bind(console);h.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=fu,t.names=[],t.skips=[],t.formatters={};var c,u=0}),dh=w(function(e,t){function n(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof tu&&"env"in tu)return tu.env.DEBUG}function a(){try{return window.localStorage}catch(e){}}t=e.exports=ph,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),gh=th,yh=ih,mh=Xu,vh=sh,bh=lh,wh=dh("engine.io-client:polling"),_h=Y,kh=function(){var e=Lu,t=new e({xdomain:!1});return null!=t.responseType}();vh(Y,gh),Y.prototype.name="polling",Y.prototype.doOpen=function(){this.poll()},Y.prototype.pause=function(e){function t(){wh("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(wh("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){wh("pre-pause polling complete"),--r||t()})),this.writable||(wh("we are currently writing - waiting to pause"),r++,this.once("drain",function(){wh("pre-pause writing complete"),--r||t()}))}else t()},Y.prototype.poll=function(){wh("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Y.prototype.onData=function(e){var t=this;wh("polling got data %s",e);var n=function(e,n,r){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};mh.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():wh('ignoring poll - transport state "%s"',this.readyState))},Y.prototype.doClose=function(){function e(){wh("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(wh("transport open - closing"),e()):(wh("transport not open - deferring close"),this.once("open",e))},Y.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};mh.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},Y.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=bh()),this.supportsBinary||e.sid||(e.b64=1),e=yh.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e};var Ah=Lu,xh=_h,Eh=Gu,Ch=sh,Sh=dh("engine.io-client:polling-xhr"),Rh=$,Th=K;Ch($,xh),$.prototype.supportsBinary=!0,$.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new K(e)},$.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},$.prototype.doPoll=function(){Sh("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},Eh(K.prototype),K.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new Ah(e),n=this;try{Sh("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){
t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},Sh("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}nu.document&&(this.index=K.requestsCount++,K.requests[this.index]=this)},K.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},K.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},K.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},K.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=H:this.xhr.onreadystatechange=H,e)try{this.xhr.abort()}catch(e){}nu.document&&delete K.requests[this.index],this.xhr=null}},K.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],o=0,i=n.length;o<i;o++)r.push(n[o]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},K.prototype.hasXDR=function(){return"undefined"!=typeof nu.XDomainRequest&&!this.xs&&this.enablesXDR},K.prototype.abort=function(){this.cleanup()},K.requestsCount=0,K.requests={},nu.document&&(nu.attachEvent?nu.attachEvent("onunload",W):nu.addEventListener&&nu.addEventListener("beforeunload",W,!1)),Rh.Request=Th;var Bh,Dh=_h,Oh=sh,Ph=Z,Ih=/\n/g,jh=/\\n/g;Oh(Z,Dh),Z.prototype.supportsBinary=!1,Z.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Dh.prototype.doClose.call(this)},Z.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},Z.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(jh,"\\\n"),this.area.value=e.replace(Ih,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n};var Nh,Uh={},Lh=Object.freeze({default:Uh}),zh=Lh&&Uh||Lh,Mh=th,Fh=Xu,qh=ih,Yh=sh,Hh=lh,$h=dh("engine.io-client:websocket"),Kh=nu.WebSocket||nu.MozWebSocket;if("undefined"==typeof window)try{Nh=zh}catch(e){}var Wh=Kh;Wh||"undefined"!=typeof window||(Wh=Nh);var Jh=V;Yh(V,Mh),V.prototype.name="websocket",V.prototype.supportsBinary=!0,V.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new Wh(e):new Wh(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},V.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},V.prototype.write=function(e){function t(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var r=e.length,o=0,i=r;o<i;o++)!function(e){Fh.encodePacket(e,n.supportsBinary,function(o){if(!n.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),n.perMessageDeflate){var s="string"==typeof o?nu.Buffer.byteLength(o):o.length;s<n.perMessageDeflate.threshold&&(i.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,i)}catch(e){$h("websocket closed before onclose event")}--r||t()})}(e[o])},V.prototype.onClose=function(){Mh.prototype.onClose.call(this)},V.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},V.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=Hh()),this.supportsBinary||(e.b64=1),e=qh.encode(e),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e},V.prototype.check=function(){return!(!Wh||"__initialize"in Wh&&this.name===V.prototype.name)};var Zh=Lu,Vh=Rh,Xh=Ph,Gh=Jh,Qh=X,ef=Gh,tf={polling:Qh,websocket:ef},nf=[].indexOf,rf=function(e,t){if(nf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},of=/^[\],:{}\s]*$/,sf=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,af=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,cf=/(?:^|:|,)(?:\s*\[)+/g,uf=/^\s+/,hf=/\s+$/,ff=function(e){return"string"==typeof e&&e?(e=e.replace(uf,"").replace(hf,""),nu.JSON&&JSON.parse?JSON.parse(e):of.test(e.replace(sf,"@").replace(af,"]").replace(cf,""))?new Function("return "+e)():void 0):null},lf=tf,pf=Gu,df=dh("engine.io-client:socket"),gf=rf,yf=Xu,mf=iu,vf=ff,bf=ih,wf=G;G.priorWebsocketSuccess=!1,pf(G.prototype),G.protocol=yf.protocol,G.Socket=G,G.Transport=th,G.transports=tf,G.parser=Xu,G.prototype.createTransport=function(e){df('creating transport "%s"',e);var t=Q(this.query);t.EIO=yf.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new lf[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return n},G.prototype.open=function(){var e;if(this.rememberUpgrade&&G.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},G.prototype.setTransport=function(e){df("setting transport %s",e.name);var t=this;this.transport&&(df("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},G.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;u=u||t}u||(df('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!u)if("pong"===t.type&&"probe"===t.data){if(df('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",c),!c)return;G.priorWebsocketSuccess="websocket"===c.name,df('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){u||"closed"!==h.readyState&&(df("changing transport and sending upgrade packet"),a(),h.setTransport(c),c.send([{type:"upgrade"}]),h.emit("upgrade",c),c=null,h.upgrading=!1,h.flush())})}else{df('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,h.emit("upgradeError",n)}}))}function n(){u||(u=!0,a(),c.close(),c=null)}function r(t){var r=new Error("probe error: "+t);r.transport=c.name,n(),df('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",r)}function o(){r("transport closed")}function i(){r("socket closed")}function s(e){c&&e.name!==c.name&&(df('"%s" works - aborting "%s"',e.name,c.name),n())}function a(){c.removeListener("open",t),c.removeListener("error",r),c.removeListener("close",o),h.removeListener("close",i),h.removeListener("upgrading",s)}df('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),u=!1,h=this;G.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",r),c.once("close",o),this.once("close",i),this.once("upgrading",s),c.open()},G.prototype.onOpen=function(){if(df("socket open"),this.readyState="open",G.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){df("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},G.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(df('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(vf(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else df('packet received with socket readyState "%s"',this.readyState)},G.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},G.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},G.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){df("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},G.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},G.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},G.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(df("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},G.prototype.write=G.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},G.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},G.prototype.close=function(){function e(){r.onClose("forced close"),df("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},G.prototype.onError=function(e){df("socket error %j",e),G.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},G.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){df('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},G.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~gf(this.transports,e[n])&&t.push(e[n]);return t};var _f=wf,kf=Xu;_f.parser=kf;var Af=_f,xf=ee,Ef=te,Cf=[].slice,Sf=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=Cf.call(arguments,2);return function(){return t.apply(e,n.concat(Cf.call(arguments)))}},Rf=w(function(e,t){function n(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var r=ju,o=Gu,i=xf,s=Ef,a=Sf,c=pu("socket.io-client:socket"),u=Fu;e.exports=t=n;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(h.hasOwnProperty(e))return f.apply(this,arguments),this;var t=i(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var o={type:n,data:t};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:r.CONNECT,query:this.query}):this.packet({type:r.CONNECT}))},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=i(arguments);c("sending ack %j",o);var s=u(o)?r.BINARY_ACK:r.ACK;t.packet({type:s,id:e,data:o})}}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}}),Tf=ne;ne.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},ne.prototype.reset=function(){this.attempts=0},ne.prototype.setMin=function(e){this.ms=e},ne.prototype.setMax=function(e){this.max=e},ne.prototype.setJitter=function(e){this.jitter=e};var Bf=Af,Df=Rf,Of=Gu,Pf=ju,If=Ef,jf=Sf,Nf=pu("socket.io-client:manager"),Uf=rf,Lf=Tf,zf=Object.prototype.hasOwnProperty,Mf=re;re.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)zf.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},re.prototype.updateSocketIds=function(){for(var e in this.nsps)zf.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},Of(re.prototype),re.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},re.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},re.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},re.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},re.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},re.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},re.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},re.prototype.open=re.prototype.connect=function(e,t){if(Nf("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Nf("opening %s",this.uri),this.engine=Bf(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=If(n,"open",function(){r.onopen(),e&&e()}),i=If(n,"error",function(t){if(Nf("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;Nf("connect attempt will timeout after %d",s);var a=setTimeout(function(){Nf("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(o),this.subs.push(i),this},re.prototype.onopen=function(){Nf("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(If(e,"data",jf(this,"ondata"))),this.subs.push(If(e,"ping",jf(this,"onping"))),this.subs.push(If(e,"pong",jf(this,"onpong"))),this.subs.push(If(e,"error",jf(this,"onerror"))),this.subs.push(If(e,"close",jf(this,"onclose"))),this.subs.push(If(this.decoder,"decoded",jf(this,"ondecoded")))},re.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},re.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},re.prototype.ondata=function(e){this.decoder.add(e)},re.prototype.ondecoded=function(e){this.emit("packet",e)},re.prototype.onerror=function(e){Nf("error",e),this.emitAll("error",e)},re.prototype.socket=function(e,t){function n(){~Uf(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[e];if(!r){r=new Df(this,e,t),this.nsps[e]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.engine.id}),this.autoConnect&&n()}return r},re.prototype.destroy=function(e){var t=Uf(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},re.prototype.packet=function(e){Nf("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},re.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},re.prototype.cleanup=function(){Nf("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},re.prototype.close=re.prototype.disconnect=function(){Nf("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},re.prototype.onclose=function(e){Nf("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},re.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Nf("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Nf("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(Nf("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(Nf("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(Nf("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},re.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var Ff=w(function(e,t){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=o(e),u=i.source,h=i.id,f=i.path,l=c[h]&&f in c[h].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||l;return p?(a("ignoring socket cache for %s",u),n=s(u,t)):(c[h]||(a("new io instance for %s",u),c[h]=s(u,t)),n=c[h]),i.query&&!t.query?t.query=i.query:t&&"object"==typeof t.query&&(t.query=r(t.query)),n.socket(i.path,t)}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var o=yu,i=ju,s=Mf,a=pu("socket.io-client");e.exports=t=n;var c=t.managers={};t.protocol=i.protocol,t.connect=n,t.Manager=Mf,t.Socket=Rf});oe.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,s=r.length;i<s;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}};var qf=oe,Yf=qf;ie.prototype.emitEvent=function(e,t,n){this._emitEvents&&!n&&this.events.emit(e,t)},ie.prototype.getIdentifiers=function(){for(var e=[],t=this._store.length-1;t>=0;t-=1)e[e.length]=this._store[t][this._identifier];return e},ie.prototype.getRecord=function(e){for(var t=this._store.length-1;t>=0;t-=1)if(this._store[t][this._identifier]===e)return this._store[t]},ie.prototype.exists=function(e){return this.getIndex(e)>=0},ie.prototype.getIndex=function(e){for(var t=this._idx.length-1;t>=0;t-=1)if(this._idx[t]===e)return t;return-1},ie.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var t=this.removeRecord(e[this._identifier],!0);return this._idx[this._idx.length]=e[this._identifier],this._store[this._store.length]=e,setTimeout(function(){t?setTimeout(this.emitEvent.bind(this,"update",e),0):setTimeout(this.emitEvent.bind(this,"add",e),0)}.bind(this),0),!0},ie.prototype.removeRecord=function(e,t){var n=this.getIndex(e);if(n<0)return!1;for(var r=n;r>=0;r-=1)if(this._store[r]&&this._store[r][this._identifier]===e)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;for(var o=this._store.length-1;o>=n;o-=1)if(this._store[o]&&this._store[o][this._identifier]===e)return this._store.splice(o,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;return!1},ie.prototype.forEachRecord=function(e){var t=0,n=this,r=function(){};return setTimeout(function(){for(var o=n._store.length-1;o>=0;o-=1)t+=1,setTimeout(e.bind(null,n._store[o],o),0);setTimeout(r.bind(null,t),0)},0),{finally:function(e){r=e}}},ie.prototype.mapRecords=function(e){for(var t=0,n=this,r=[],o=n._store.length-1;o>=0;o-=1)t+=1,r.push(e(n._store[o],o));return r},ie.prototype.getCount=function(){return this._store.length},ie.prototype.removeAll=function(){for(var e=this._store.length-1;e>=0;e-=1)delete this._store[e];this._store=[]};var Hf=ie,$f=w(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,o=n-(c||n);e.diff=o,e.prev=c,e.curr=n,c=n;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var s=i[a];n=o.call(e,s),i.splice(a,1),a--}return n}),t.formatArgs.call(e,i);var u=r.log||t.log||console.log.bind(console);u.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function o(e){t.save(e),t.names=[],t.skips=[];for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r.default=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=fu,t.names=[],t.skips=[],t.formatters={};var c}),Kf=w(function(e,t){function n(){return!("undefined"==typeof window||!window||"undefined"==typeof window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof tu&&"env"in tu)return tu.env.DEBUG}function a(){try{return window.localStorage}catch(e){}}t=e.exports=$f,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),Wf="1.5.1",Jf={locateTimeout:1e3,meshConnectTimeout:1e3,maxConnectedPeers:10,iddbName:"edgemesh",iddbColumns:"id,contentType,blob,compressed",iddbDefaultMobileDisk:5,iddbDefaultDesktopDisk:50,maxParallelJobs:6,jobProcessingFrequency:30,hubSyncDelay:1e4,chunkSize:15360,chunkIdOffset:0,chunkPositionOffset:4,chunkReservedBytes:8},Zf={image:["img","source"],background:["a","article","aside","blockquote","button","b","body","div","figure","h1","h2","h3","h4","html","i","label","li","main","mark","nav","p","section","span","strong","summary","table","time","ul"],extension:["jpg","jpeg","gif","png","bmp","svg","webp"]},Vf="sig.edgeno.de",Xf="https://edgemesh.com",Gf="https://portal.edgemesh.com",Qf="frontier@edgemesh.com",el="contact@edgemesh.com",tl={iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},nl={beaconUrl:"https://sig.edgeno.de/track",script:"edgemesh.track.min.js"},rl={httpPort:80,httpsPort:443,wsAPIPort:3e3,wsCDNPort:9e3},ol={version:Wf,client:Jf,support:Zf,host:Vf,clientUrl:Xf,portalUrl:Gf,grantApplyEmail:Qf,contactEmail:el,signaling:tl,tracking:nl,server:rl},il=Object.freeze({version:Wf,client:Jf,support:Zf,host:Vf,clientUrl:Xf,portalUrl:Gf,grantApplyEmail:Qf,contactEmail:el,signaling:tl,tracking:nl,server:rl,default:ol}),sl="ERROR_LOG",al="HUB_REGISTER",cl="HUB_SYNC_DEL",ul="CLIENT_REGISTER",hl="ASSET_REGISTER",fl="ASSET_REQUEST",ll="TRANSFER_RECORD",pl=104,dl=301,gl=400,yl=401,ml=function(e,t){e.emit(sl,{level:t.level,host:t.host,func:t.func,code:t.code,message:t.message,
input:t.input})},vl=function(e,t){e.emit(al,{hubId:t.hubId,browserInfo:t.browserInfo,size:t.size,keys:t.keys,version:il.version})},bl=function(e,t){e.emit(cl,{hubId:t.hubId,keys:t.keys})},wl=function(e,t){e.emit(ul,{clientId:t.clientId,originId:parseInt(t.originId,10),browserInfo:t.browserInfo,version:il.version})},_l=function(e,t){e.emit(hl,{originId:parseInt(t.originId,10),assetId:parseInt(t.assetId,10),topic:parseInt(t.topic,10),hubId:t.hubId,assetUrl:t.assetUrl,size:parseFloat(t.size),contentType:t.contentType,checksum:t.checksum})},kl=function(e,t){e.emit(ll,{assetId:parseInt(t.assetId,10),chunkId:parseInt(t.chunkId,10),originId:parseInt(t.originId,10),topic:parseInt(t.topic,10),src:t.src,dst:t.dst,size:parseFloat(t.size),protocol:t.protocol,transferStart:t.transferStart,transferEnd:t.transferEnd,handshake:parseFloat(t.handshake),success:t.success})},Al=w(function(e,t){!function(t,n){e.exports=n()}(nu,function(){function e(e){return function(){return!e.apply(null,u.call(arguments))}}function t(e){return function(){for(var t=o(arguments),n=t.length,r=0;r<n;r++)if(!e.call(null,t[r]))return!1;return!0}}function n(e){return function(){for(var t=o(arguments),n=t.length,r=0;r<n;r++)if(e.call(null,t[r]))return!0;return!1}}function r(e,t){var n=t+"",r=+(n.match(/\d+/)||NaN),o=n.match(/^[<>]=?|/)[0];return f[o]?f[o](e,r):e==r||r!==r}function o(e){var t=u.call(e),n=t.length;return 1===n&&a.array(t[0])&&(t=t[0]),t}function i(e,t){a[e]=function(n){return t[e].test(n)}}function s(){var r=a;for(var o in r)if(h.call(r,o)&&a.function(r[o]))for(var i=r[o].api||["not","all","any"],s=0;s<i.length;s++)"not"===i[s]&&(a.not[o]=e(a[o])),"all"===i[s]&&(a.all[o]=t(a[o])),"any"===i[s]&&(a.any[o]=n(a[o]))}var a={};a.VERSION="0.8.0",a.not={},a.all={},a.any={};var c=Object.prototype.toString,u=Array.prototype.slice,h=Object.prototype.hasOwnProperty,f={"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t}};a.arguments=function(e){return"[object Arguments]"===c.call(e)||null!=e&&"object"==typeof e&&"callee"in e},a.array=Array.isArray||function(e){return"[object Array]"===c.call(e)},a.boolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},a.char=function(e){return a.string(e)&&1===e.length},a.date=function(e){return"[object Date]"===c.call(e)},a.domNode=function(e){return a.object(e)&&e.nodeType>0},a.error=function(e){return"[object Error]"===c.call(e)},a.function=function(e){return"[object Function]"===c.call(e)||"function"==typeof e},a.json=function(e){return"[object Object]"===c.call(e)},a.nan=function(e){return e!==e},a.null=function(e){return null===e},a.number=function(e){return a.not.nan(e)&&"[object Number]"===c.call(e)},a.object=function(e){return Object(e)===e},a.regexp=function(e){return"[object RegExp]"===c.call(e)},a.sameType=function(e,t){var n=c.call(e);return n===c.call(t)&&("[object Number]"!==n||(!a.any.nan(e,t)||a.all.nan(e,t)))},a.sameType.api=["not"],a.string=function(e){return"[object String]"===c.call(e)},a.undefined=function(e){return void 0===e},a.windowObject=function(e){return null!=e&&"object"==typeof e&&"setInterval"in e},a.empty=function(e){if(a.object(e)){var t=Object.getOwnPropertyNames(e).length;return!!(0===t||1===t&&a.array(e)||2===t&&a.arguments(e))}return""===e},a.existy=function(e){return null!=e},a.falsy=function(e){return!e},a.truthy=e(a.falsy),a.above=function(e,t){return a.all.number(e,t)&&e>t},a.above.api=["not"],a.decimal=function(e){return a.number(e)&&e%1!==0},a.equal=function(e,t){return a.all.number(e,t)?e===t&&1/e===1/t:a.all.string(e,t)||a.all.regexp(e,t)?""+e==""+t:!!a.all.boolean(e,t)&&e===t},a.equal.api=["not"],a.even=function(e){return a.number(e)&&e%2===0},a.finite=isFinite||function(e){return a.not.infinite(e)&&a.not.nan(e)},a.infinite=function(e){return e===1/0||e===-(1/0)},a.integer=function(e){return a.number(e)&&e%1===0},a.negative=function(e){return a.number(e)&&e<0},a.odd=function(e){return a.number(e)&&e%2===1},a.positive=function(e){return a.number(e)&&e>0},a.under=function(e,t){return a.all.number(e,t)&&e<t},a.under.api=["not"],a.within=function(e,t,n){return a.all.number(e,t,n)&&e>t&&e<n},a.within.api=["not"];var l={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/};for(var p in l)l.hasOwnProperty(p)&&i(p,l);a.ip=function(e){return a.ipv4(e)||a.ipv6(e)},a.capitalized=function(e){if(a.not.string(e))return!1;for(var t=e.split(" "),n=0;n<t.length;n++){var r=t[n];if(r.length){var o=r.charAt(0);if(o!==o.toUpperCase())return!1}}return!0},a.endWith=function(e,t){if(a.not.string(e))return!1;t+="";var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},a.endWith.api=["not"],a.include=function(e,t){return e.indexOf(t)>-1},a.include.api=["not"],a.lowerCase=function(e){return a.string(e)&&e===e.toLowerCase()},a.palindrome=function(e){if(a.not.string(e))return!1;e=e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();for(var t=e.length-1,n=0,r=Math.floor(t/2);n<=r;n++)if(e.charAt(n)!==e.charAt(t-n))return!1;return!0},a.space=function(e){if(a.not.char(e))return!1;var t=e.charCodeAt(0);return t>8&&t<14||32===t},a.startWith=function(e,t){return a.string(e)&&0===e.indexOf(t)},a.startWith.api=["not"],a.upperCase=function(e){return a.string(e)&&e===e.toUpperCase()};var d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],g=["january","february","march","april","may","june","july","august","september","october","november","december"];a.day=function(e,t){return a.date(e)&&t.toLowerCase()===d[e.getDay()]},a.day.api=["not"],a.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),r=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<r},a.future=function(e){var t=new Date;return a.date(e)&&e.getTime()>t.getTime()},a.inDateRange=function(e,t,n){if(a.not.date(e)||a.not.date(t)||a.not.date(n))return!1;var r=e.getTime();return r>t.getTime()&&r<n.getTime()},a.inDateRange.api=["not"],a.inLastMonth=function(e){return a.inDateRange(e,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},a.inLastWeek=function(e){return a.inDateRange(e,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},a.inLastYear=function(e){return a.inDateRange(e,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},a.inNextMonth=function(e){return a.inDateRange(e,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},a.inNextWeek=function(e){return a.inDateRange(e,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},a.inNextYear=function(e){return a.inDateRange(e,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},a.leapYear=function(e){return a.number(e)&&(e%4===0&&e%100!==0||e%400===0)},a.month=function(e,t){return a.date(e)&&t.toLowerCase()===g[e.getMonth()]},a.month.api=["not"],a.past=function(e){var t=new Date;return a.date(e)&&e.getTime()<t.getTime()},a.quarterOfYear=function(e,t){return a.date(e)&&a.number(t)&&t===Math.floor((e.getMonth()+3)/3)},a.quarterOfYear.api=["not"],a.today=function(e){var t=new Date,n=t.toDateString();return a.date(e)&&e.toDateString()===n},a.tomorrow=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()+1)).toDateString();return a.date(e)&&e.toDateString()===n},a.weekend=function(e){return a.date(e)&&(6===e.getDay()||0===e.getDay())},a.weekday=e(a.weekend),a.year=function(e,t){return a.date(e)&&a.number(t)&&t===e.getFullYear()},a.year.api=["not"],a.yesterday=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()-1)).toDateString();return a.date(e)&&e.toDateString()===n};var y=a.windowObject("object"==typeof nu&&nu)&&nu,m=a.windowObject("object"==typeof self&&self)&&self,v=a.windowObject("object"==typeof this&&this)&&this,b=y||m||v||Function("return this")(),w=m&&m.document,_=b.is,k=m&&m.navigator,A=(k&&k.appVersion||"").toLowerCase(),x=(k&&k.userAgent||"").toLowerCase(),E=(k&&k.vendor||"").toLowerCase();return a.android=function(){return/android/.test(x)},a.android.api=["not"],a.androidPhone=function(){return/android/.test(x)&&/mobile/.test(x)},a.androidPhone.api=["not"],a.androidTablet=function(){return/android/.test(x)&&!/mobile/.test(x)},a.androidTablet.api=["not"],a.blackberry=function(){return/blackberry/.test(x)||/bb10/.test(x)},a.blackberry.api=["not"],a.chrome=function(e){var t=/google inc/.test(E)?x.match(/(?:chrome|crios)\/(\d+)/):null;return null!==t&&r(t[1],e)},a.chrome.api=["not"],a.desktop=function(){return a.not.mobile()&&a.not.tablet()},a.desktop.api=["not"],a.edge=function(e){var t=x.match(/edge\/(\d+)/);return null!==t&&r(t[1],e)},a.edge.api=["not"],a.firefox=function(e){var t=x.match(/(?:firefox|fxios)\/(\d+)/);return null!==t&&r(t[1],e)},a.firefox.api=["not"],a.ie=function(e){var t=x.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&r(t[1],e)},a.ie.api=["not"],a.ios=function(){return a.iphone()||a.ipad()||a.ipod()},a.ios.api=["not"],a.ipad=function(e){var t=x.match(/ipad.+?os (\d+)/);return null!==t&&r(t[1],e)},a.ipad.api=["not"],a.iphone=function(e){var t=x.match(/iphone(?:.+?os (\d+))?/);return null!==t&&r(t[1]||1,e)},a.iphone.api=["not"],a.ipod=function(e){var t=x.match(/ipod.+?os (\d+)/);return null!==t&&r(t[1],e)},a.ipod.api=["not"],a.linux=function(){return/linux/.test(A)},a.linux.api=["not"],a.mac=function(){return/mac/.test(A)},a.mac.api=["not"],a.mobile=function(){return a.iphone()||a.ipod()||a.androidPhone()||a.blackberry()||a.windowsPhone()},a.mobile.api=["not"],a.offline=e(a.online),a.offline.api=["not"],a.online=function(){return!k||k.onLine===!0},a.online.api=["not"],a.opera=function(e){var t=x.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==t&&r(t[1],e)},a.opera.api=["not"],a.phantom=function(e){var t=x.match(/phantomjs\/(\d+)/);return null!==t&&r(t[1],e)},a.phantom.api=["not"],a.safari=function(e){var t=x.match(/version\/(\d+).+?safari/);return null!==t&&r(t[1],e)},a.safari.api=["not"],a.tablet=function(){return a.ipad()||a.androidTablet()||a.windowsTablet()},a.tablet.api=["not"],a.touchDevice=function(){return!!w&&("ontouchstart"in m||"DocumentTouch"in m&&w instanceof DocumentTouch)},a.touchDevice.api=["not"],a.windows=function(){return/win/.test(A)},a.windows.api=["not"],a.windowsPhone=function(){return a.windows()&&/phone/.test(x)},a.windowsPhone.api=["not"],a.windowsTablet=function(){return a.windows()&&a.not.windowsPhone()&&/touch/.test(x)},a.windowsTablet.api=["not"],a.propertyCount=function(e,t){if(a.not.object(e)||a.not.number(t))return!1;var n=0;for(var r in e)if(h.call(e,r)&&++n>t)return!1;return n===t},a.propertyCount.api=["not"],a.propertyDefined=function(e,t){return a.object(e)&&a.string(t)&&t in e},a.propertyDefined.api=["not"],a.inArray=function(e,t){if(a.not.array(t))return!1;for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},a.inArray.api=["not"],a.sorted=function(e,t){if(a.not.array(e))return!1;for(var n=f[t]||f[">="],r=1;r<e.length;r++)if(!n(e[r],e[r-1]))return!1;return!0},s(),a.setNamespace=function(){return b.is=_,this},a.setRegexp=function(e,t){for(var n in l)h.call(l,n)&&t===n&&(l[n]=e)},a})}),xl=Object.keys,El=Array.isArray,Cl="undefined"!=typeof self?self:"undefined"!=typeof window?window:Tc;const Sl=Object.getPrototypeOf,Rl={}.hasOwnProperty,Tl=Object.getOwnPropertyDescriptor;var Bl=[].slice;const Dl="undefined"!=typeof Symbol&&Symbol.iterator,Ol=Dl?function(e){var t;return null!=e&&(t=e[Dl])&&t.apply(e)}:function(){return null},Pl={},Il=[].concat;var jl="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Nl=()=>!0;const Ul=!new Error("").stack;var Ll=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"],zl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ml=Ll.concat(zl),Fl={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};he(Fe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ze(this._e,2))}},toString:function(){return this.name+": "+this.message}}),he(Ye).from(Fe),he(He).from(Fe);var ql=Ml.reduce((e,t)=>(e[t]=t+"Error",e),{});const Yl=Fe;var Hl=Ml.reduce((e,t)=>{function n(e,n){this._e=Le(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=Fl[t]||r,this.inner=null)}var r=t+"Error";return he(n).from(Yl),e[t]=n,e},{});Hl.Syntax=SyntaxError,Hl.Type=TypeError,Hl.Range=RangeError;var $l=zl.reduce((e,t)=>{return e[t+"Error"]=Hl[t],e},{}),Kl=Ml.reduce((e,t)=>{return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Hl[t]),e},{});Kl.ModifyError=Ye,Kl.DexieError=Fe,Kl.BulkError=He;var Wl={},Jl=100,Zl=20,Vl=!1,Xl=Cl.setImmediate?setImmediate.bind(null,nt):Cl.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{nt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(nt,0)},Gl=function(e,t){ap.push([e,t]),ep&&(Xl(),ep=!1)},Ql=!0,ep=!0,tp=[],np=[],rp=null,op=Te,ip={global:!0,ref:0,unhandleds:[],onunhandled:dt,finalize:function(){this.unhandleds.forEach(e=>{try{dt(e[0],e[1])}catch(e){}})}},sp=ip,ap=[],cp=0,up=[];ce(We.prototype,{then:function(e,t){var n=new We((n,r)=>{Ge(this,new Je(e,t,n,r))});return jl&&(!this._prev||null===this._state)&&tt(n,this),n},_then:function(e,t){Ge(this,new Je(null,null,e,t))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,e=>e instanceof t?n(e):ht(e)):this.then(null,e=>e&&e.name===t?n(e):ht(e))},finally:function(e){return this.then(t=>{return e(),t},t=>{return e(),ht(t)})},uncaught:function(e){return this.onuncatched=je(this.onuncatched,e),this._state===!1&&tp.indexOf(this)===-1&&tp.some((e,t,n)=>e._value===this._value&&(n[t]=this)),this},stack:{get:function(){if(this._stack)return this._stack;try{Vl=!0;var e=et(this,[],Zl),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{Vl=!1}}}}),ce(We,{all:function(){var e=Ce.apply(null,arguments);return new We(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((o,i)=>We.resolve(o).then(n=>{e[i]=n,--r||t(e)},n))})},resolve:e=>{return e instanceof We?e:e&&"function"==typeof e.then?new We((t,n)=>{e.then(t,n)}):new We(Wl,!0,e)},reject:ht,race:function(){var e=Ce.apply(null,arguments);return new We((t,n)=>{e.map(e=>We.resolve(e).then(t,n))})},PSD:{get:()=>sp,set:e=>sp=e},newPSD:lt,usePSD:pt,scheduler:{get:()=>Gl,set:e=>{Gl=e}},rejectionMapper:{get:()=>op,set:e=>{op=e}},follow:e=>{return new We((t,n)=>{return lt((t,n)=>{var r=sp;r.unhandleds=[],r.onunhandled=n,r.finalize=De(function(){st(()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])})},r.finalize),e()},t,n)})},on:Ke(null,{error:[je,ut]})});var hp=We.on.error;hp.subscribe=Me("Promise.on('error')",hp.subscribe),hp.unsubscribe=Me("Promise.on('error').unsubscribe",hp.unsubscribe);const fp="unhandledrejection";de(()=>{Gl=((e,t)=>{setTimeout(()=>{e.apply(null,t)},0)})});var lp="1.5.1",pp=String.fromCharCode(65535),dp=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return pp}}(),gp="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yp="String expected.",mp=[],vp="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bp=vp,wp=vp,_p=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);Ue(jl,_p);var kp=function(){},Ap=!1,xp=Cl.idbModules&&Cl.idbModules.shimIndexedDB?Cl.idbModules:{};ce(yt,Kl),ce(yt,{delete:function(e){var t=new yt(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new yt(e).open().then(e=>{return e.close(),!0}).catch(yt.NoSuchDatabaseError,()=>!1)},getDatabaseNames:function(e){return new We(function(e,t){var n=Tt(indexedDB);if(n){var r=n();r.onsuccess=function(t){e(le(t.target.result,0))},r.onerror=_t(t)}else xt(function(t){return e(t),!1})}).then(e)},defineClass:function(e){function t(t){t?se(this,t):Ap&&vt(this,e)}return t},applyStructure:vt,ignoreTransaction:function(e){return sp.trans?pt(sp.transless,e):e()},vip:function(e){return lt(function(){return sp.letThrough=!0,e()})},async:function(e){return function(){try{var t=Et(e.apply(this,arguments));return t&&"function"==typeof t.then?t:We.resolve(t)}catch(e){return gt(e)}}},spawn:function(e,t,n){try{var r=Et(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:We.resolve(r)}catch(e){return gt(e)}},currentTransaction:{get:()=>sp.trans||null},Promise:We,debug:{get:()=>jl,set:e=>{Ue(e,"dexie"===e?()=>!0:_p)}},derive:he,extend:se,props:ce,override:pe,Events:Ke,events:{get:Me(()=>Ke)},getByKeyPath:we,setByKeyPath:_e,delByKeyPath:ke,shallowClone:Ae,deepClone:xe,getObjectDiff:Ee,asap:ye,maxKey:dp,addons:[],connections:mp,MultiModifyError:Hl.Modify,errnames:ql,IndexSpec:Ct,TableSchema:St,dependencies:{indexedDB:xp.shimIndexedDB||Cl.indexedDB||Cl.mozIndexedDB||Cl.webkitIndexedDB||Cl.msIndexedDB,IDBKeyRange:xp.IDBKeyRange||Cl.IDBKeyRange||Cl.webkitIDBKeyRange},semVer:lp,version:lp.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n)),fakeAutoComplete:kp,default:yt}),be(()=>{yt.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:Cl.localStorage}),We.rejectionMapper=$e,de(function(){yt.fakeAutoComplete=kp=de,yt.fake=Ap=!0});var Ep=Kf("edgemesh:db"),Cp=function(){return new Promise(function(e,t){var n=new yt(il.client.iddbName);return n.version(1).stores({assets:il.client.iddbColumns}),n.open().then(function(){Ep("db %s open",il.client.iddbName),e(n)}).catch(function(e){Ep("error opening db %s",il.client.iddbName),t({func:"db.open",code:gl,string:"error opening db",input:{err:e}})})})},Sp=function(e){return new Promise(function(t,n){if(!e)return n("No type provided.  Must be one of `temporary` or `persistent`.");switch(e){case"temporary":case"TEMPORARY":if(!navigator.webkitTemporaryStorage)return t(Al.desktop()?il.client.iddbDefaultDesktopDisk:il.client.iddbDefaultMobileDisk);navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(Al.desktop()?il.client.iddbDefaultDesktopDisk:il.client.iddbDefaultMobileDisk)});break;case"persistent":case"PERSISTENT":if(!navigator.webkitPersistentStorage)return t(Al.desktop()?il.client.iddbDefaultDesktopDisk:il.client.iddbDefaultMobileDisk);navigator.webkitPersistentStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(Al.desktop()?il.client.iddbDefaultDesktopDisk:il.client.iddbDefaultMobileDisk)})}})},Rp=function(e){return new Promise(function(t,n){var r=[],o=[];e.assets.toCollection().primaryKeys().then(function(e){return e.forEach(function(e){o.push(parseInt(e.split("|")[0],10)),r.push(parseInt(e.split("|")[1],10))}),Ep("database keys found"),t({assets:r,origins:o})}).catch(function(e){return Ep("error getting keys from db"),n({func:"DB.getKeys",code:yl,string:"error getting keys from db",input:{err:e}})})})},Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Dp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Op=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Pp=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};Function.prototype.$asyncbind=function e(t,n){function r(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,o){return function i(s){for(;s;){if(s.then)return s=s.then(i,r),o?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,o){try{var i=o?o(r):r;if(n===i)return n.reject(new TypeError("Promise resolution loop"));e(i)?i.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(i)}catch(e){n.reject(e)}}function n(){}function r(e){}function o(e,t){this.resolve=e,this.reject=t}function i(r,o){var i=new n;try{this._resolver(function(n){return e(n)?n.then(r,o):t(i,n,r)},function(e){t(i,e,o)})}catch(e){t(i,e,o)}return i}function s(e){this._resolver=e,this.then=i}return n.prototype={resolve:r,reject:r,then:o},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof tu?"undefined":Tp(tu))&&f||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var o=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===o&&(n.splice(0,o),r=0)}}var n=[],r=0,o=1024;return function(o){n.push(o),n.length-r===1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":Tp(e))))try{var r=0,i=e.then;if("function"==typeof i)return void i.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&o(function(){for(var r=0,o=t.c.length;r<o;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&o(function(){for(var n=0,o=t.length;n<o;n++)r(t[n],e)})}},then:function(e,n){var r=new t,i={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(i):this.c=[i];else{var s=this.state,a=this.v;o(function(){s(i,a)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var o=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return o.apply(t,arguments)}catch(e){return n(e)}}}};var Ip=Kf("edgemesh:coms"),jp=(function(){function e(t,n,r){Bp(this,e),this.connections=new Hf,this.ready=!1,this.ioEvents=function(){},this.rtcEvents=function(){},["scope","host"].forEach(function(e){if(!t[e])throw Ip("missing core."+e),new Error("missing core."+e)}),this.scope=t.scope,this.host=t.host,this.hubId=t.hubId,this.ioEvents=n,this.rtcEvents=r}return Dp(e,[{key:"connect",value:function(){var e=this;return new Promise(function(t){var n={maxPeers:il.client.maxConnectedPeers};e.hubId?(e.io=Ff("https://"+e.host+":9000",{query:"hubId="+e.hubId}),e.ioEvents.call(e.scope,e.io),n=Object.assign({},n,{peerId:e.hubId})):(e.io=Ff("https://"+e.host+":9000",{query:"client=true"}),e.ioEvents.call(e.scope,e.io)),e.io.on("connect",function(){return e.rtc=new Fb(e.io,n),e.rtcEvents.call(e.scope,e.rtc),e.hubId?e._registerHub():e._registerClient(),Ip("webrtc ready for peer %s",e.rtc.peerId),t({id:e.io.id,io:e.io,rtc:e.rtc})}),e.io.on("disconnected",function(){e.io.removeAllListeners(),e.rtc.destroy()})})}},{key:"disconnect",value:function(){this.io&&(this.io.removeAllListeners(),this.io.disconnect(),this.rtc&&this.rtc.destroy())}},{key:"reconnect",value:function(){var e=this;this.connect().then(function(t){var n=t.id,r=t.rtc;e.hubId||(e.scope.id=n),e.rtc=r})}},{key:"getConnectedPeers",value:function(){return this.rtc.getConnectedPeers()}},{key:"getStats",value:function(){var e=this;return this.rtc&&this.io?this.rtc.getStats().then(function(t){return{pc:t,connectedPeers:e.getConnectedPeers().length,io:{id:e.io.id,connected:e.io.connected,disconnected:e.io.disconnected,query:e.io.query,uri:e.io.io.uri,readyState:e.io.io.readyState}}}):Promise.resolve({})}},{key:"_registerHub",value:function(){var e=this;Bt(this.scope.db).then(function(t){var n=t.keys,r=t.quota;vl(e.io,{hubId:e.hubId,browserInfo:e.scope.ua,size:r,keys:{OriginID:n.origins,AssetID:n.assets}}),Ip("registering hub")}).catch(function(t){Ip("error registering hub %O",{err:t}),ml(e.io,{level:"error",host:e.hubId,func:"Coms.io.on.reconnect",message:"Could not reregister hub",code:dl,input:{err:t}})})}},{key:"_registerClient",value:function(){Ip("registering client");var e=this.scope.origin;e.indexOf("www.")!==-1&&(e=e.replace("www.",""));var t=qb(e);wl(this.io,{clientId:this.io.id,originId:t,browserInfo:this.scope.ua})}}]),e}(),w(function(e,t){!function(t){e.exports=t()}(function(e){function t(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];n+=(r&o|~r&i)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[1]-389564586|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[2]+606105819|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[5]+1200080426|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[6]-1473231341|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[9]-1958414417|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[10]-42063|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[13]-40341101|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[14]-1502002290|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,n+=(r&i|o&~i)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[6]-1069501632|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[11]+643717713|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[10]+38016083|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[15]-660478335|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[14]-1019803690|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[3]-187363961|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[2]-51403784|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[7]+1735328473|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,n+=(r^o^i)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[8]-2022574463|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[11]+1839030562|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[4]+1272893353|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[7]-155497632|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[0]-358537222|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[3]-722521979|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[12]-421815835|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[15]+530742520|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+o|0,n+=(o^(r|~i))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[7]+1126891415|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[14]-1416354905|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[3]-1894986606|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[10]-1051523|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[15]-30611744|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[6]-1560198380|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[11]-1120210379|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[2]+718787259|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var r,o,i,s,a,c,u=e.length,h=[1732584193,-271733879,-1732584194,271733878];
for(r=64;r<=u;r+=64)t(h,n(e.substring(r-64,r)));for(e=e.substring(r-64),o=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<o;r+=1)i[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),r>55)for(t(h,i),r=0;r<16;r+=1)i[r]=0;return s=8*u,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,i[14]=a,i[15]=c,t(h,i),h}function i(e){var n,o,i,s,a,c,u=e.length,h=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=u;n+=64)t(h,r(e.subarray(n-64,n)));for(e=n-64<u?e.subarray(n-64):new Uint8Array(0),o=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<o;n+=1)i[n>>2]|=e[n]<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(t(h,i),n=0;n<16;n+=1)i[n]=0;return s=8*u,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,i[14]=a,i[15]=c,t(h,i),h}function s(e){var t,n="";for(t=0;t<4;t+=1)n+=g[e>>8*t+4&15]+g[e>>8*t&15];return n}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,r=e.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:o}function h(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function l(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}var d=function(e,t){return e+t&4294967295},g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==a(o("hello"))&&(d=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var o,i,s,a,c=this.byteLength,u=t(n,c),h=c;return r!==e&&(h=t(r,c)),u>h?new ArrayBuffer(0):(o=h-u,i=new ArrayBuffer(o),s=new Uint8Array(i),a=new Uint8Array(this,u,o),s.set(a),i)}}(),p.prototype.append=function(e){return this.appendBinary(c(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,o=this._buff.length;for(r=64;r<=o;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},p.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=a(this._hash),e&&(n=l(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,n){var r,o,i,s=n;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=o,e[15]=i,t(this._hash,e)},p.hash=function(e,t){return p.hashBinary(c(e),t)},p.hashBinary=function(e,t){var n=o(e),r=a(n);return t?l(r):r},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var n,o=f(this._buff.buffer,e,!0),i=o.length;for(this._length+=e.byteLength,n=64;n<=i;n+=64)t(this._hash,r(o.subarray(n-64,n)));return this._buff=n-64<i?new Uint8Array(o.buffer.slice(n-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=a(this._hash),e&&(n=l(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=h(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var n=i(new Uint8Array(e)),r=a(n);return t?l(r):r},p})})),Np="undefined"==typeof window,Up=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t},Lp=function(e){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},zp=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),Lp(n)},Mp=function(e,t,n){var r=new ArrayBuffer(n.byteLength+il.client.chunkReservedBytes),o=new DataView(r);return o.setInt32(il.client.chunkIdOffset,e),o.setInt32(il.client.chunkPositionOffset,t),new Uint8Array(r,0,r.byteLength).set(new Uint8Array(n),il.client.chunkReservedBytes),r},Fp=function(e,t){var n=void 0;if(e._arrayBuffer){var r=e.payloadSize*(t+1)-e.payloadSize;if(r>=e.fileSize)return;var o=r+e.payloadSize;o=o>e.fileSize?e.fileSize:o,n=e._arrayBuffer.slice(r,o)}else e._chunks[t]&&(n=e._chunks[t]);return n},qp=function(){function e(t){Bp(this,e),this.scope=t,this.currentIndex=0}return Dp(e,[{key:"forEachChunk",value:function(e,t){for(var n=void 0,r=0;this.currentIndex<this.scope.totalChunks;)r=this.currentIndex,n===this.getChunk()&&e(n,r);t()}},{key:"getChunk",value:function(e){var t=this.currentIndex,n=void 0;if("number"==typeof e){if(e<0)return;t=e}var r=Fp(this.scope,t);return r&&(n=Mp(this.scope.uid,this.currentIndex,r),n&&"number"!=typeof e&&(this.currentIndex+=1)),n}},{key:"getUnpackedChunk",value:function(e){var t=this.currentIndex;if("number"==typeof e){if(e<0)return;t=e}var n=Fp(this.scope,t);return n&&"number"!=typeof e&&(this.currentIndex+=1),n}}]),e}(),Yp=new Hf({identifier:"uid"}),Hp=function(){return Math.floor(65535*Math.random()+1)},$p=function(){function e(t){Bp(this,e);var n=void 0,r=void 0,o=void 0,i=void 0;if("object"!==("undefined"==typeof t?"undefined":Tp(t)))throw new Error("metadata object must be passed in");if(!t.mimeType)throw new Error("no mimeType specified");if(!t.chunkSize)throw new Error("no chunkSize specified");if(!t.name)throw new Error("No name specified");if(t.arrayBuffer&&("function"!=typeof t.arrayBuffer.toString||"[object ArrayBuffer]"!==t.arrayBuffer.toString()))throw new Error("arrayBuffer must be an actual ArrayBuffer object");if(!t.arrayBuffer&&!t.uid)throw new Error("arrayBuffer or uid must be specified");if(t.arrayBuffer&&t.uid)throw new Error("cannot manually assign uid");t.uid||(t.uid=Hp()),t.arrayBuffer?(r=t.chunkSize-il.client.chunkReservedBytes,n=Math.ceil(t.arrayBuffer.byteLength/r),o=jp.ArrayBuffer.hash(t.arrayBuffer),i=!0):o=t.checksum,this.uid=t.uid,this.name=t.name,this.existsLocally=i||!1,this.mimeType=t.mimeType,this.chunkSize=t.chunkSize,this.compressed=t.compressed,this.payloadSize=r||t.payloadSize,this.reservedSize=il.client.chunkReservedBytes,this.fileSize=t.arrayBuffer?t.arrayBuffer.byteLength:t.fileSize,this.totalChunks=n?n:t.totalChunks?t.totalChunks:0,this.checksum=o,this.generatedChecksum=null,this.currentIndex=0,this.chunksReceived=0,this._arrayBuffer=t.arrayBuffer?t.arrayBuffer:null,this._chunks=[],Yp.addRecord(this)}return Dp(e,[{key:"clearData",value:function(){Yp.removeRecord(this.uid),delete this._arrayBuffer,delete this}},{key:"getMetadata",value:function(){return{uid:this.uid,name:this.name,mimeType:this.mimeType,chunkSize:this.chunkSize,compressed:this.compressed,payloadSize:this.payloadSize,reservedSize:this.reservedSize,fileSize:this.fileSize,totalChunks:this.totalChunks,checksum:this.checksum}}},{key:"getFile",value:function(){var e=this;return new Promise(function(t){e._arrayBuffer=e._chunks[0];for(var n=1;n<e._chunks.length;n+=1)e._arrayBuffer=zp(e._arrayBuffer,e._chunks[n]);e.generatedChecksum=jp.ArrayBuffer.hash(e._arrayBuffer),t({ArrayBuffer:e._arrayBuffer,checksum:e.generatedChecksum,getChecksum:jp.ArrayBuffer.hash})})}},{key:"getTransferObject",value:function(){return new qp(this)}},{key:"getFileObject",value:function(e){return Yp.getRecord(parseInt(e,10))}},{key:"onChunkReceived",value:function(){}},{key:"onCompleted",value:function(){}}],[{key:"unpack",value:function(e){var t=new DataView(e),n=t.getInt32(il.client.chunkIdOffset),r=t.getInt32(il.client.chunkPositionOffset),o=new Uint8Array(e.slice(il.client.chunkReservedBytes));return[n,r,o]}},{key:"submitChunk",value:function(e){var t=this.unpack(e),n=t[0],r=t[1],o=t[2],i=Yp.getRecord(n);return!!i&&(i._chunks[r]=o,i.chunksReceived+=1,i.onChunkReceived(o,r),i.chunksReceived===i.totalChunks&&(i.existsLocally=!0,i.onCompleted(i)),Yp.addRecord(i),!0)}}]),e}(),Kp={};Np||(Kp=window.localStorage);var Wp=w(function(e){(function(){var t,n,r,o,i,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof tu&&null!==tu&&tu.hrtime?(e.exports=function(){return(t()-i)/1e6},n=tu.hrtime,t=function(){var e;return e=n(),1e9*e[0]+e[1]},o=t(),s=1e9*tu.uptime(),i=o-s):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(nu)}),Jp=function(){return(new Date).toISOString()},Zp=function(){return Wp()},Vp=w(function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),o);for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],s.set(i,o),o+=i.length;return s}},o={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(n)}),Xp=Vp,Gp=4,Qp=0,ed=1,td=2,nd=0,rd=1,od=2,id=3,sd=258,ad=29,cd=256,ud=cd+1+ad,hd=30,fd=19,ld=2*ud+1,pd=15,dd=16,gd=7,yd=256,md=16,vd=17,bd=18,wd=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],kd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ad=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xd=512,Ed=new Array(2*(ud+2));Dt(Ed);var Cd=new Array(2*hd);Dt(Cd);var Sd=new Array(xd);Dt(Sd);var Rd=new Array(sd-id+1);Dt(Rd);var Td=new Array(ad);Dt(Td);var Bd=new Array(hd);Dt(Bd);var Dd,Od,Pd,Id,jd=!1,Nd=tn,Ud=nn,Ld=on,zd=sn,Md=rn,Fd={_tr_init:Nd,_tr_stored_block:Ud,_tr_flush_block:Ld,_tr_tally:zd,_tr_align:Md},qd=an,Yd=cn(),Hd=un,$d={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Kd=Vp,Wd=Fd,Jd=qd,Zd=Hd,Vd=$d,Xd=0,Gd=1,Qd=3,eg=4,tg=5,ng=0,rg=1,og=-2,ig=-3,sg=-5,ag=-1,cg=1,ug=2,hg=3,fg=4,lg=0,pg=2,dg=8,gg=9,yg=15,mg=8,vg=29,bg=256,wg=bg+1+vg,_g=30,kg=19,Ag=2*wg+1,xg=15,Eg=3,Cg=258,Sg=Cg+Eg+1,Rg=32,Tg=42,Bg=69,Dg=73,Og=91,Pg=103,Ig=113,jg=666,Ng=1,Ug=2,Lg=3,zg=4,Mg=3;Id=[new En(0,0,0,0,wn),new En(4,4,8,4,_n),new En(4,5,16,8,_n),new En(4,6,32,32,_n),new En(4,4,16,16,kn),new En(8,16,32,32,kn),new En(8,16,128,128,kn),new En(8,32,128,256,kn),new En(32,128,258,1024,kn),new En(32,258,258,4096,kn)];var Fg=On,qg=Dn,Yg=Tn,Hg=Rn,$g=Bn,Kg=Pn,Wg=In,Jg=jn,Zg="pako deflate (from Nodeca project)",Vg={deflateInit:Fg,deflateInit2:qg,deflateReset:Yg,deflateResetKeep:Hg,deflateSetHeader:$g,deflate:Kg,deflateEnd:Wg,deflateSetDictionary:Jg,deflateInfo:Zg},Xg=Vp,Gg=!0,Qg=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Gg=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Qg=!1}for(var ey=new Xg.Buf8(256),ty=0;ty<256;ty++)ey[ty]=ty>=252?6:ty>=248?5:ty>=240?4:ty>=224?3:ty>=192?2:1;ey[254]=ey[254]=1;var ny=function(e){var t,n,r,o,i,s=e.length,a=0;for(o=0;o<s;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Xg.Buf8(a),i=0,o=0;i<a;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},ry=function(e){return Nn(e,e.length)},oy=function(e){for(var t=new Xg.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},iy=function(e,t){var n,r,o,i,s=t||e.length,a=new Array(2*s);for(r=0,n=0;n<s;)if(o=e[n++],o<128)a[r++]=o;else if(i=ey[o],i>4)a[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<s;)o=o<<6|63&e[n++],i--;i>1?a[r++]=65533:o<65536?a[r++]=o:(o-=65536,a[r++]=55296|o>>10&1023,a[r++]=56320|1023&o)}return Nn(a,r)},sy=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0?t:0===n?t:n+ey[e[n]]>t?n:t},ay={string2buf:ny,buf2binstring:ry,binstring2buf:oy,buf2string:iy,utf8border:sy},cy=Un,uy=Vg,hy=Vp,fy=ay,ly=$d,py=cy,dy=Object.prototype.toString,gy=0,yy=4,my=0,vy=1,by=2,wy=-1,_y=0,ky=8;Ln.prototype.push=function(e,t){var n,r,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?yy:gy,"string"==typeof e?o.input=fy.string2buf(e):"[object ArrayBuffer]"===dy.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new hy.Buf8(i),o.next_out=0,o.avail_out=i),n=uy.deflate(o,r),n!==vy&&n!==my)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||r!==yy&&r!==by)||("string"===this.options.to?this.onData(fy.buf2binstring(hy.shrinkBuf(o.output,o.next_out))):this.onData(hy.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&n!==vy);return r===yy?(n=uy.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===my):r!==by||(this.onEnd(my),o.avail_out=0,!0)},Ln.prototype.onData=function(e){this.chunks.push(e)},Ln.prototype.onEnd=function(e){e===my&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=hy.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ay,xy,Ey=Ln,Cy=zn,Sy=Mn,Ry=Fn,Ty={Deflate:Ey,deflate:Cy,deflateRaw:Sy,gzip:Ry},By=30,Dy=12,Oy=function(e,t){var n,r,o,i,s,a,c,u,h,f,l,p,d,g,y,m,v,b,w,_,k,A,x,E,C;n=e.state,r=e.next_in,E=e.input,o=r+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),c=n.dmax,u=n.wsize,h=n.whave,f=n.wnext,l=n.window,p=n.hold,d=n.bits,g=n.lencode,y=n.distcode,m=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{d<15&&(p+=E[r++]<<d,d+=8,p+=E[r++]<<d,d+=8),b=g[p&m];t:for(;;){if(w=b>>>24,p>>>=w,d-=w,w=b>>>16&255,0===w)C[i++]=65535&b;else{if(!(16&w)){if(0===(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=Dy;break e}e.msg="invalid literal/length code",n.mode=By;break e}_=65535&b,w&=15,w&&(d<w&&(p+=E[r++]<<d,d+=8),_+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=E[r++]<<d,d+=8,p+=E[r++]<<d,d+=8),b=y[p&v];n:for(;;){if(w=b>>>24,p>>>=w,d-=w,w=b>>>16&255,!(16&w)){if(0===(64&w)){b=y[(65535&b)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=By;break e}if(k=65535&b,w&=15,d<w&&(p+=E[r++]<<d,d+=8,d<w&&(p+=E[r++]<<d,d+=8)),k+=p&(1<<w)-1,k>c){e.msg="invalid distance too far back",n.mode=By;break e}if(p>>>=w,d-=w,w=i-s,k>w){if(w=k-w,w>h&&n.sane){e.msg="invalid distance too far back",n.mode=By;break e}if(A=0,x=l,0===f){if(A+=u-w,w<_){_-=w;do C[i++]=l[A++];while(--w);A=i-k,x=C}}else if(f<w){if(A+=u+f-w,w-=f,w<_){_-=w;do C[i++]=l[A++];while(--w);if(A=0,f<_){w=f,_-=w;do C[i++]=l[A++];while(--w);A=i-k,x=C}}}else if(A+=f-w,w<_){_-=w;do C[i++]=l[A++];while(--w);A=i-k,x=C}for(;_>2;)C[i++]=x[A++],C[i++]=x[A++],C[i++]=x[A++],_-=3;_&&(C[i++]=x[A++],_>1&&(C[i++]=x[A++]))}else{A=i-k;do C[i++]=C[A++],C[i++]=C[A++],C[i++]=C[A++],_-=3;while(_>2);_&&(C[i++]=C[A++],_>1&&(C[i++]=C[A++]))}break}}break}}while(r<o&&i<a);_=d>>3,r-=_,d-=_<<3,p&=(1<<d)-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?5+(o-r):5-(r-o),e.avail_out=i<a?257+(a-i):257-(i-a),n.hold=p,n.bits=d},Py=Vp,Iy=15,jy=852,Ny=592,Uy=0,Ly=1,zy=2,My=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Fy=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],qy=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Yy=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Hy=function(e,t,n,r,o,i,s,a){var c,u,h,f,l,p,d,g,y,m=a.bits,v=0,b=0,w=0,_=0,k=0,A=0,x=0,E=0,C=0,S=0,R=null,T=0,B=new Py.Buf16(Iy+1),D=new Py.Buf16(Iy+1),O=null,P=0;for(v=0;v<=Iy;v++)B[v]=0;for(b=0;b<r;b++)B[t[n+b]]++;for(k=m,_=Iy;_>=1&&0===B[_];_--);if(k>_&&(k=_),0===_)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(w=1;w<_&&0===B[w];w++);for(k<w&&(k=w),E=1,v=1;v<=Iy;v++)if(E<<=1,E-=B[v],E<0)return-1;if(E>0&&(e===Uy||1!==_))return-1;for(D[1]=0,v=1;v<Iy;v++)D[v+1]=D[v]+B[v];for(b=0;b<r;b++)0!==t[n+b]&&(s[D[t[n+b]]++]=b);if(e===Uy?(R=O=s,p=19):e===Ly?(R=My,T-=257,O=Fy,P-=257,p=256):(R=qy,O=Yy,p=-1),S=0,b=0,v=w,l=i,A=k,x=0,h=-1,C=1<<k,f=C-1,e===Ly&&C>jy||e===zy&&C>Ny)return 1;for(;;){d=v-x,s[b]<p?(g=0,y=s[b]):s[b]>p?(g=O[P+s[b]],y=R[T+s[b]]):(g=96,y=0),c=1<<v-x,u=1<<A,w=u;do u-=c,o[l+(S>>x)+u]=d<<24|g<<16|y|0;while(0!==u);for(c=1<<v-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,b++,0===--B[v]){if(v===_)break;v=t[n+s[b]]}if(v>k&&(S&f)!==h){for(0===x&&(x=k),l+=w,A=v-x,E=1<<A;A+x<_&&(E-=B[A+x],!(E<=0));)A++,E<<=1;if(C+=1<<A,e===Ly&&C>jy||e===zy&&C>Ny)return 1;h=S&f,o[h]=k<<24|A<<16|l-i|0}}return 0!==S&&(o[l+S]=v-x<<24|64<<16|0),a.bits=k,0},$y=Vp,Ky=qd,Wy=Hd,Jy=Oy,Zy=Hy,Vy=0,Xy=1,Gy=2,Qy=4,em=5,tm=6,nm=0,rm=1,om=2,im=-2,sm=-3,am=-4,cm=-5,um=8,hm=1,fm=2,lm=3,pm=4,dm=5,gm=6,ym=7,mm=8,vm=9,bm=10,wm=11,_m=12,km=13,Am=14,xm=15,Em=16,Cm=17,Sm=18,Rm=19,Tm=20,Bm=21,Dm=22,Om=23,Pm=24,Im=25,jm=26,Nm=27,Um=28,Lm=29,zm=30,Mm=31,Fm=32,qm=852,Ym=592,Hm=15,$m=Hm,Km=!0,Wm=$n,Jm=Kn,Zm=Hn,Vm=Jn,Xm=Wn,Gm=Xn,Qm=Gn,ev=Qn,tv=er,nv="pako inflate (from Nodeca project)",rv={inflateReset:Wm,inflateReset2:Jm,inflateResetKeep:Zm,inflateInit:Vm,inflateInit2:Xm,inflate:Gm,inflateEnd:Qm,inflateGetHeader:ev,inflateSetDictionary:tv,inflateInfo:nv},ov={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},iv=tr,sv=rv,av=Vp,cv=ay,uv=ov,hv=$d,fv=cy,lv=iv,pv=Object.prototype.toString;nr.prototype.push=function(e,t){var n,r,o,i,s,a,c=this.strm,u=this.options.chunkSize,h=this.options.dictionary,f=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?uv.Z_FINISH:uv.Z_NO_FLUSH,"string"==typeof e?c.input=cv.binstring2buf(e):"[object ArrayBuffer]"===pv.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new av.Buf8(u),c.next_out=0,c.avail_out=u),n=sv.inflate(c,uv.Z_NO_FLUSH),n===uv.Z_NEED_DICT&&h&&(a="string"==typeof h?cv.string2buf(h):"[object ArrayBuffer]"===pv.call(h)?new Uint8Array(h):h,n=sv.inflateSetDictionary(this.strm,a)),n===uv.Z_BUF_ERROR&&f===!0&&(n=uv.Z_OK,f=!1),n!==uv.Z_STREAM_END&&n!==uv.Z_OK)return this.onEnd(n),this.ended=!0,!1;c.next_out&&(0!==c.avail_out&&n!==uv.Z_STREAM_END&&(0!==c.avail_in||r!==uv.Z_FINISH&&r!==uv.Z_SYNC_FLUSH)||("string"===this.options.to?(o=cv.utf8border(c.output,c.next_out),i=c.next_out-o,s=cv.buf2string(c.output,o),c.next_out=i,c.avail_out=u-i,i&&av.arraySet(c.output,c.output,o,i,0),this.onData(s)):this.onData(av.shrinkBuf(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(f=!0)}while((c.avail_in>0||0===c.avail_out)&&n!==uv.Z_STREAM_END);return n===uv.Z_STREAM_END&&(r=uv.Z_FINISH),r===uv.Z_FINISH?(n=sv.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===uv.Z_OK):r!==uv.Z_SYNC_FLUSH||(this.onEnd(uv.Z_OK),c.avail_out=0,!0)},nr.prototype.onData=function(e){this.chunks.push(e)},nr.prototype.onEnd=function(e){e===uv.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=av.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dv=nr,gv=rr,yv=or,mv=rr,vv={Inflate:dv,inflate:gv,inflateRaw:yv,ungzip:mv},bv=Vp.assign,wv=Ty,_v=vv,kv=ov,Av={};bv(Av,wv,_v,kv);var xv=Av,Ev=function(e){return xv.deflate(e,{level:0})},Cv=function(e){try{return xv.inflate(e)}catch(e){return!1}},Sv=Kf("edgemesh:mesh"),Rv=(function(e){function t(e,n,r,o){Bp(this,t);var i=Pp(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.currentHubIndex=0,i.receivedChunks=0,i.complete=!1,i.locateData={},i.meta={},i.stats={},["io","rtc","id"].forEach(function(t){if(!e[t])throw Sv("missing core."+t),new Error("missing core."+t)}),["origin","asset","hubs","checksum","protocol"].forEach(function(e){if(!n[e])throw Sv("missing locateData."+e),new Error("missing locateData."+e)}),i.io=e.io,i.rtc=e.rtc,i.id=e.id,i.topic=n.topic||n.origin,i.key=n.origin+"|"+n.asset,i.locateData=n,i.rtc.on("peer-error",i.handleDisconnect.bind(i)),i.onCompleted=r?r:function(){},i.onFailure=o?o:function(){},i}return Op(t,e),Dp(t,[{key:"deconstructor",value:function(){this.rtc.removeListener("peer-error",this.handleDisconnect)}},{key:"start",value:function(){this.stats.dst=this.id,this.stats.topic=this.topic,this.stats.assetId=this.locateData.asset,this.stats.originId=this.locateData.origin,this.stats.protocol=this.locateData.protocol,this.stats.transferStart=Jp(),this.requestTransfer()}},{key:"requestTransfer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],n=this.locateData,r=n.origin,o=n.asset,i=n.hubs,s=n.checksum,a=i[this.currentHubIndex];if(!a)return Sv("no hubs found %O",{origin:r,asset:o}),this.onFailure("no hubs found",{origin:r,asset:o}),this.deconstructor();Sv("starting mesh transfer from hub %O",{hubId:a});var c=Zp();this.stats.src=a,this.checksum=s,this.connectionTimeout=setTimeout(this.tryNextHub.bind(this),il.client.meshConnectTimeout),this.rtc.connect(a).then(function(n){clearTimeout(e.connectionTimeout),Sv("connected to peer %s",a),e.stats.handshake=Zp()-c,e.rtc.send(n,fl,{origin:r,asset:o,fromPeerId:e.id,chunks:t})}).catch(function(t){Sv("error connecting to peer %s",t),ml(e.io,{level:"error",host:e.id,code:pl,message:"error connecting to peer",func:"Mesh.requestTransfer",input:{err:t,hub:a}}),e.tryNextHub()})}},{key:"metaReceived",value:function(e){this.meta=e,Sv("asset mesh meta received %O",e),this.emit("metadata",this.meta);var t=new $p(e);t.onCompleted=this.transferComplete.bind(this)}},{key:"chunkReceived",value:function(e){$p.submitChunk(Lp(e.chunk));var t=Object.assign({},this.stats,{chunkId:e.chunkId,size:e.chunk.byteLength/1024,transferEnd:Jp(),success:1});kl(this.io,t),this.emit("chunkReceived",e.chunk),Sv("asset mesh chunk received %O",e),this.receivedChunks++}},{key:"transferComplete",value:function(e){var t=this,n=this.locateData.origin,r=this.locateData.asset;this.complete=!0,e.getFile().then(function(o){var i=o.ArrayBuffer;if(t.meta.compressed&&(i=Cv(i)),!i)return Sv("could not decompress asset"),t.tryNextHub();i=Lp(i);var s=o.getChecksum(i),a=Object.assign({},t.stats,{chunkId:0,size:i.byteLength/1024,transferEnd:Jp(),success:1});if(t.checksum===t.checksum){kl(t.io,a),Sv("mesh transfer complete %O",e.getMetadata());var c={origin:n,asset:r,ab:i,contentType:t.meta.mimeType};t.onCompleted(c),e.clearData(),t.deconstructor()}else Sv("checksum did not match %O",{expected:t.checksum,generated:s}),t.tryNextHub()})}},{key:"handleDisconnect",value:function(){if(!this.complete&&this.receivedChunks<this.meta.totalChunks){if(Sv("peer disconnected midflight %O",{receivedChunks:this.recievedChunks,totalChunks:this.meta.totalChunks}),0===this.receivedChunks)return this.tryNextHub();for(var e=[],t=this.receivedChunks;t<this.meta.totalChunks;t++)e.push(t);return this.tryNextHub(e)}}},{key:"tryNextHub",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0];Sv("trying next hub...");var t=Object.assign({},this.stats,{chunkId:0,size:0,handshake:-1,transferEnd:Jp(),success:0});kl(this.io,t),this.currentHubIndex++,this.requestTransfer(e)}}]),t}(Gu),[]),Tv=[],Bv="undefined"!=typeof Uint8Array?Uint8Array:Array,Dv=!1,Ov={}.toString,Pv=Array.isArray||function(e){return"[object Array]"==Ov.call(e)},Iv=50;dr.TYPED_ARRAY_SUPPORT=void 0===Tc.TYPED_ARRAY_SUPPORT||Tc.TYPED_ARRAY_SUPPORT,dr.poolSize=8192,dr._augment=function(e){return e.__proto__=dr.prototype,e},dr.from=function(e,t,n){return gr(null,e,t,n)},dr.TYPED_ARRAY_SUPPORT&&(dr.prototype.__proto__=Uint8Array.prototype,dr.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&dr[Symbol.species]===dr),dr.alloc=function(e,t,n){return mr(null,e,t,n)},dr.allocUnsafe=function(e){return vr(null,e)},dr.allocUnsafeSlow=function(e){return vr(null,e)},dr.isBuffer=io,dr.compare=function(e,t){if(!xr(e)||!xr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},dr.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},dr.concat=function(e,t){if(!Pv(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return dr.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=dr.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!xr(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},dr.byteLength=Er,dr.prototype._isBuffer=!0,dr.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Sr(this,t,t+1);return this},dr.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Sr(this,t,t+3),Sr(this,t+1,t+2);return this},dr.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Sr(this,t,t+7),Sr(this,t+1,t+6),Sr(this,t+2,t+5),Sr(this,t+3,t+4);return this},dr.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Ur(this,0,e):Cr.apply(this,arguments)},dr.prototype.equals=function(e){if(!xr(e))throw new TypeError("Argument must be a Buffer");return this===e||0===dr.compare(this,e)},dr.prototype.inspect=function(){var e="",t=Iv;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},dr.prototype.compare=function(e,t,n,r,o){if(!xr(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,s=n-t,a=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n),h=0;h<a;++h)if(c[h]!==u[h]){i=c[h],s=u[h];break}return i<s?-1:s<i?1:0},dr.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},dr.prototype.indexOf=function(e,t,n){return Rr(this,e,t,n,!0)},dr.prototype.lastIndexOf=function(e,t,n){return Rr(this,e,t,n,!1)},dr.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return Br(this,e,t,n);case"utf8":case"utf-8":return Dr(this,e,t,n);case"ascii":return Or(this,e,t,n);case"latin1":case"binary":return Pr(this,e,t,n);case"base64":return Ir(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jr(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},dr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var jv=4096;dr.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(dr.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=dr.prototype;else{var o=t-e;r=new dr(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},dr.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Yr(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},dr.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Yr(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},dr.prototype.readUInt8=function(e,t){return t||Yr(e,1,this.length),this[e]},dr.prototype.readUInt16LE=function(e,t){return t||Yr(e,2,this.length),this[e]|this[e+1]<<8},dr.prototype.readUInt16BE=function(e,t){return t||Yr(e,2,this.length),this[e]<<8|this[e+1]},dr.prototype.readUInt32LE=function(e,t){return t||Yr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},dr.prototype.readUInt32BE=function(e,t){return t||Yr(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},dr.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Yr(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},dr.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Yr(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},dr.prototype.readInt8=function(e,t){return t||Yr(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},dr.prototype.readInt16LE=function(e,t){t||Yr(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},dr.prototype.readInt16BE=function(e,t){t||Yr(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},dr.prototype.readInt32LE=function(e,t){return t||Yr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},dr.prototype.readInt32BE=function(e,t){return t||Yr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},dr.prototype.readFloatLE=function(e,t){return t||Yr(e,4,this.length),hr(this,e,!0,23,4)},dr.prototype.readFloatBE=function(e,t){return t||Yr(e,4,this.length),hr(this,e,!1,23,4)},dr.prototype.readDoubleLE=function(e,t){return t||Yr(e,8,this.length),hr(this,e,!0,52,8)},dr.prototype.readDoubleBE=function(e,t){return t||Yr(e,8,this.length),hr(this,e,!1,52,8)},dr.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;Hr(this,e,t,n,o,0)}var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},dr.prototype.writeUIntBE=function(e,t,n,r){
if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;Hr(this,e,t,n,o,0)}var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},dr.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,1,255,0),dr.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},dr.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,2,65535,0),dr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$r(this,e,t,!0),t+2},dr.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,2,65535,0),dr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$r(this,e,t,!1),t+2},dr.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,4,4294967295,0),dr.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Kr(this,e,t,!0),t+4},dr.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,4,4294967295,0),dr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Kr(this,e,t,!1),t+4},dr.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Hr(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},dr.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Hr(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},dr.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,1,127,-128),dr.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},dr.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,2,32767,-32768),dr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$r(this,e,t,!0),t+2},dr.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,2,32767,-32768),dr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$r(this,e,t,!1),t+2},dr.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,4,2147483647,-2147483648),dr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Kr(this,e,t,!0),t+4},dr.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Hr(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),dr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Kr(this,e,t,!1),t+4},dr.prototype.writeFloatLE=function(e,t,n){return Jr(this,e,t,!0,n)},dr.prototype.writeFloatBE=function(e,t,n){return Jr(this,e,t,!1,n)},dr.prototype.writeDoubleLE=function(e,t,n){return Zr(this,e,t,!0,n)},dr.prototype.writeDoubleBE=function(e,t,n){return Zr(this,e,t,!1,n)},dr.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!dr.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},dr.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!dr.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=xr(e)?e:Qr(new dr(e,r).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var Nv,Uv=/[^+\/0-9A-Za-z-_]/g,Lv=1e3,zv=60*Lv,Mv=60*zv,Fv=24*Mv,qv=365.25*Fv,Yv=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return co(e);if("number"===n&&isNaN(e)===!1)return t.long?ho(e):uo(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Hv=w(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,o=n-(c||n);e.diff=o,e.prev=c,e.curr=n,c=n;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var s=i[a];n=o.call(e,s),i.splice(a,1),a--}return n}),t.formatArgs.call(e,i);var u=r.log||t.log||console.log.bind(console);u.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function o(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r.default=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=Yv,t.names=[],t.skips=[],t.formatters={};var c}),$v=w(function(e,t){function n(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof tu&&"env"in tu&&(e=tu.env.DEBUG),e}function a(){try{return window.localStorage}catch(e){}}t=e.exports=Hv,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),Kv=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null},Wv=w(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Jv=w(function(e){function t(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function n(e,t){if(e>65536)throw new Error("requested too many random bytes");var n=new nu.Uint8Array(e);e>0&&r.getRandomValues(n);var o=new dr(n.buffer);return"function"==typeof t?f(function(){t(null,o)}):o}var r=nu.crypto||nu.msCrypto;r&&r.getRandomValues?e.exports=n:e.exports=t});lo.prototype=Object.create(null),po.usingDomains=!1,po.prototype.domain=void 0,po.prototype._events=void 0,po.prototype._maxListeners=void 0,po.defaultMaxListeners=10,po.init=function(){this.domain=null,po.usingDomains&&(!Nv.active||this instanceof Nv.Domain||(this.domain=Nv.active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new lo,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},po.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},po.prototype.getMaxListeners=function(){return go(this)},po.prototype.emit=function(e){var t,n,r,o,i,s,a,c=!1,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(t=arguments[1],!a){if(t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(n=s[e],!n)return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:yo(n,f,this);break;case 2:mo(n,f,this,arguments[1]);break;case 3:vo(n,f,this,arguments[1],arguments[2]);break;case 4:bo(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];wo(n,f,this,o)}return c&&a.exit(),!0},po.prototype.addListener=function(e,t){return _o(this,e,t,!1)},po.prototype.on=po.prototype.addListener,po.prototype.prependListener=function(e,t){return _o(this,e,t,!0)},po.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Ao(this,e,t)),this},po.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Ao(this,e,t)),this},po.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener&&n.listener===t)0===--this._eventsCount?this._events=new lo:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0===--this._eventsCount)return this._events=new lo,this;delete r[e]}else Eo(n,o);r.removeListener&&this.emit("removeListener",e,s||t)}return this},po.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new lo,this._eventsCount=0):n[e]&&(0===--this._eventsCount?this._events=new lo:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)r=o[i],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new lo,this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},po.prototype.listeners=function(e){var t,n,r=this._events;return r?(t=r[e],n=t?"function"==typeof t?[t.listener||t]:So(t):[]):n=[],n},po.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):xo.call(e,t)},po.prototype.listenerCount=xo,po.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Zv;Zv="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var Vv,Xv=Zv,Gv=/%[sdj%]/g,Qv={};Do.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Do.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var eb=[],tb=[],nb="undefined"!=typeof Uint8Array?Uint8Array:Array,rb=!1,ob={}.toString,ib=Array.isArray||function(e){return"[object Array]"==ob.call(e)},sb=50;fi.TYPED_ARRAY_SUPPORT=void 0===Tc.TYPED_ARRAY_SUPPORT||Tc.TYPED_ARRAY_SUPPORT,fi.poolSize=8192,fi._augment=function(e){return e.__proto__=fi.prototype,e},fi.from=function(e,t,n){return li(null,e,t,n)},fi.TYPED_ARRAY_SUPPORT&&(fi.prototype.__proto__=Uint8Array.prototype,fi.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&fi[Symbol.species]===fi),fi.alloc=function(e,t,n){return di(null,e,t,n)},fi.allocUnsafe=function(e){return gi(null,e)},fi.allocUnsafeSlow=function(e){return gi(null,e)},fi.isBuffer=ns,fi.compare=function(e,t){if(!_i(e)||!_i(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},fi.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},fi.concat=function(e,t){if(!ib(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return fi.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=fi.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!_i(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},fi.byteLength=ki,fi.prototype._isBuffer=!0,fi.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)xi(this,t,t+1);return this},fi.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)xi(this,t,t+3),xi(this,t+1,t+2);return this},fi.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)xi(this,t,t+7),xi(this,t+1,t+6),xi(this,t+2,t+5),xi(this,t+3,t+4);return this},fi.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Ii(this,0,e):Ai.apply(this,arguments)},fi.prototype.equals=function(e){if(!_i(e))throw new TypeError("Argument must be a Buffer");return this===e||0===fi.compare(this,e)},fi.prototype.inspect=function(){var e="",t=sb;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},fi.prototype.compare=function(e,t,n,r,o){if(!_i(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,s=n-t,a=Math.min(i,s),c=this.slice(r,o),u=e.slice(t,n),h=0;h<a;++h)if(c[h]!==u[h]){i=c[h],s=u[h];break}return i<s?-1:s<i?1:0},fi.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},fi.prototype.indexOf=function(e,t,n){return Ei(this,e,t,n,!0)},fi.prototype.lastIndexOf=function(e,t,n){return Ei(this,e,t,n,!1)},fi.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return Si(this,e,t,n);case"utf8":case"utf-8":return Ri(this,e,t,n);case"ascii":return Ti(this,e,t,n);case"latin1":case"binary":return Bi(this,e,t,n);case"base64":return Di(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oi(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},fi.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ab=4096;fi.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(fi.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=fi.prototype;else{var o=t-e;r=new fi(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},fi.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Mi(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},fi.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Mi(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},fi.prototype.readUInt8=function(e,t){return t||Mi(e,1,this.length),this[e]},fi.prototype.readUInt16LE=function(e,t){return t||Mi(e,2,this.length),this[e]|this[e+1]<<8},fi.prototype.readUInt16BE=function(e,t){return t||Mi(e,2,this.length),this[e]<<8|this[e+1]},fi.prototype.readUInt32LE=function(e,t){return t||Mi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},fi.prototype.readUInt32BE=function(e,t){return t||Mi(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},fi.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Mi(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},fi.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Mi(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},fi.prototype.readInt8=function(e,t){return t||Mi(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},fi.prototype.readInt16LE=function(e,t){t||Mi(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},fi.prototype.readInt16BE=function(e,t){t||Mi(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},fi.prototype.readInt32LE=function(e,t){return t||Mi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},fi.prototype.readInt32BE=function(e,t){return t||Mi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},fi.prototype.readFloatLE=function(e,t){return t||Mi(e,4,this.length),ai(this,e,!0,23,4)},fi.prototype.readFloatBE=function(e,t){return t||Mi(e,4,this.length),ai(this,e,!1,23,4)},fi.prototype.readDoubleLE=function(e,t){return t||Mi(e,8,this.length),ai(this,e,!0,52,8)},fi.prototype.readDoubleBE=function(e,t){return t||Mi(e,8,this.length),ai(this,e,!1,52,8)},fi.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;Fi(this,e,t,n,o,0)}var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},fi.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;Fi(this,e,t,n,o,0)}var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},fi.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,1,255,0),fi.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},fi.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,2,65535,0),fi.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):qi(this,e,t,!0),t+2},fi.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,2,65535,0),fi.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):qi(this,e,t,!1),t+2},fi.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,4,4294967295,0),fi.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Yi(this,e,t,!0),t+4},fi.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,4,4294967295,0),fi.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Yi(this,e,t,!1),t+4},fi.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Fi(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},fi.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Fi(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},fi.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,1,127,-128),fi.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},fi.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,2,32767,-32768),fi.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):qi(this,e,t,!0),t+2},fi.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,2,32767,-32768),fi.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):qi(this,e,t,!1),t+2},fi.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,4,2147483647,-2147483648),fi.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Yi(this,e,t,!0),t+4},fi.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Fi(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),fi.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Yi(this,e,t,!1),t+4},fi.prototype.writeFloatLE=function(e,t,n){return $i(this,e,t,!0,n)},fi.prototype.writeFloatBE=function(e,t,n){return $i(this,e,t,!1,n)},fi.prototype.writeDoubleLE=function(e,t,n){return Ki(this,e,t,!0,n)},fi.prototype.writeDoubleBE=function(e,t,n){return Ki(this,e,t,!1,n)},fi.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!fi.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},fi.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!fi.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=_i(e)?e:Vi(new fi(e,r).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var cb=/[^+\/0-9A-Za-z-_]/g;is.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},is.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},is.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},is.prototype.clear=function(){this.head=this.tail=null,this.length=0},is.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},is.prototype.concat=function(e){if(0===this.length)return fi.alloc(0);if(1===this.length)return this.head.data;for(var t=fi.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t};var ub=fi.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};as.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,o),o-=this.charReceived),t+=e.toString(this.encoding,0,o);var o=t.length-1,r=t.charCodeAt(o);if(r>=55296&&r<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,o)}return t},as.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},as.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,o=this.encoding;t+=r.slice(0,n).toString(o)}return t},ds.ReadableState=ps;var hb=Bo("stream");Xv(ds,po),ds.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=dr.from(e,t),t="")),gs(this,n,e,t,!1)},ds.prototype.unshift=function(e){var t=this._readableState;return gs(this,t,e,"",!0)},ds.prototype.isPaused=function(){return this._readableState.flowing===!1},ds.prototype.setEncoding=function(e){return this._readableState.decoder=new as(e),this._readableState.encoding=e,this};var fb=8388608;ds.prototype.read=function(e){hb("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return hb("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Is(this):_s(this),null;if(e=vs(e,t),0===e&&t.ended)return 0===t.length&&Is(this),null;var r=t.needReadable;hb("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,hb("length less than watermark",r)),t.ended||t.reading?(r=!1,hb("reading or ended",r)):r&&(hb("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=vs(n,t)));var o;return o=e>0?Bs(e,t):null,null===o?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Is(this)),null!==o&&this.emit("data",o),o},ds.prototype._read=function(e){this.emit("error",new Error("not implemented"))},ds.prototype.pipe=function(e,t){function n(e){hb("onunpipe"),e===h&&o()}function r(){hb("onend"),e.end()}function o(){hb("cleanup"),e.removeListener("close",a),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",n),h.removeListener("end",r),h.removeListener("end",o),h.removeListener("data",i),y=!0,!l.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function i(t){hb("ondata"),m=!1;var n=e.write(t);!1!==n||m||((1===l.pipesCount&&l.pipes===e||l.pipesCount>1&&Us(l.pipes,e)!==-1)&&!y&&(hb("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,m=!0),h.pause())}function s(t){hb("onerror",t),u(),e.removeListener("error",s),0===ls(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",c),u()}function c(){hb("onfinish"),e.removeListener("close",a),u()}function u(){hb("unpipe"),h.unpipe(e)}var h=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1,hb("pipe count=%d opts=%j",l.pipesCount,t);var p=!t||t.end!==!1,d=p?r:o;l.endEmitted?f(d):h.once("end",d),e.on("unpipe",n);var g=Es(h);e.on("drain",g);var y=!1,m=!1;return h.on("data",i),fs(e,"error",s),e.once("close",a),e.once("finish",c),e.emit("pipe",h),l.flowing||(hb("pipe resume"),h.resume()),e},ds.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this);return this}var i=Us(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},ds.prototype.on=function(e,t){var n=po.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_s(this,r):f(Cs,this))}return n},ds.prototype.addListener=ds.prototype.on,ds.prototype.resume=function(){var e=this._readableState;return e.flowing||(hb("resume"),e.flowing=!0,Ss(this,e)),this},ds.prototype.pause=function(){return hb("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(hb("pause"),this._readableState.flowing=!1,this.emit("pause")),this},ds.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(hb("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(o){if(hb("wrapped data"),t.decoder&&(o=t.decoder.write(o)),(!t.objectMode||null!==o&&void 0!==o)&&(t.objectMode||o&&o.length)){var i=r.push(o);i||(n=!0,e.pause())}});for(var o in e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return Ns(i,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){hb("wrapped _read",t),n&&(n=!1,e.resume())},r},ds._fromList=Bs,Fs.WritableState=Ms,Xv(Fs,po),Ms.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Fs.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Fs.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),fi.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=Ls),r.ended?qs(this,n):Ys(this,r,e,n)&&(r.pendingcb++,o=$s(this,r,e,t,n)),o},Fs.prototype.cork=function(){var e=this._writableState;e.corked++},Fs.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Gs(this,e))},Fs.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Fs.prototype._write=function(e,t,n){n(new Error("not implemented"));
},Fs.prototype._writev=null,Fs.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||na(this,r,n)},Xv(oa,ds);for(var lb=Object.keys(Fs.prototype),pb=0;pb<lb.length;pb++){var db=lb[pb];oa.prototype[db]||(oa.prototype[db]=Fs.prototype[db])}Xv(ua,oa),ua.prototype.push=function(e,t){return this._transformState.needTransform=!1,oa.prototype.push.call(this,e,t)},ua.prototype._transform=function(e,t,n){throw new Error("Not implemented")},ua.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},ua.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Xv(fa,ua),fa.prototype._transform=function(e,t,n){n(null,e)},Xv(la,po),la.Readable=ds,la.Writable=Fs,la.Duplex=oa,la.Transform=ua,la.PassThrough=fa,la.Stream=la,la.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function i(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(a(),0===po.listenerCount(this,"error"))throw e}function a(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",i),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",a),c.removeListener("close",a),e.removeListener("close",a)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",i));var u=!1;return c.on("error",s),e.on("error",s),c.on("end",a),c.on("close",a),e.on("close",a),e.emit("pipe",c),e};var gb=Object.freeze({default:la,Readable:ds,Writable:Fs,Duplex:oa,Transform:ua,PassThrough:fa,Stream:la}),yb=gb&&la||gb,mb=pa,vb=$v("simple-peer"),bb=Kv,wb=Wv,_b=Jv,kb=yb,Ab=65536;wb(pa,kb.Duplex),pa.WEBRTC_SUPPORT=!!bb(),pa.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},pa.constraints={},pa.channelConfig={},Object.defineProperty(pa.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),pa.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}},pa.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._destroy(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},pa.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),da,function(e){t._destroy(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}},pa.prototype.send=function(e){var t=this;t._isWrtc&&io(e)&&(e=new Uint8Array(e)),t._channel.send(e)},pa.prototype.destroy=function(e){var t=this;t._destroy(null,e)},pa.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._previousStreams=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._interval=null,n._reconnectTimeout=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"addTrack"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},pa.prototype._setupData=function(e){var t=this;return e.channel?(t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=Ab),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},void(t._channel.onerror=function(e){t._destroy(e)})):t._destroy(new Error("Data channel event is missing `channel` property"))},pa.prototype._read=function(){},pa.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(e){return r._destroy(e)}r._channel.bufferedAmount>Ab?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},pa.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},pa.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){e.destroyed||(e.trickle||e._iceComplete?o():e.once("_iceComplete",o))}function r(t){e._destroy(t)}function o(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,n,r))},function(t){e._destroy(t)},e.offerConstraints)},pa.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){e.destroyed||(e.trickle||e._iceComplete?o():e.once("_iceComplete",o))}function r(t){e._destroy(t)}function o(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,n,r))},function(t){e._destroy(t)},e.answerConstraints)},pa.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===t&&e._destroy(new Error("Ice connection failed.")),"closed"===t&&e._destroy()}},pa.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._pc.getStats.length>0?t._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)},function(t){e(t)}):e(null,[])},pa.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,e.getStats(function(t,n){function r(t){var n=i[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1]));var r=o[t.remoteCandidateId];r&&r.ip?(e.remoteAddress=r.ip,e.remotePort=Number(r.port)):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=Number(r.portNumber)):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=Number(r[1])),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}if(!e.destroyed){t&&(n=[]),e._connecting=!1,e.connected=!0;var o={},i={},s={};if(n.forEach(function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(o[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(i[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)}),n.forEach(function(e){"transport"===e.type&&r(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&r(e)}),e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var a=e._cb;e._cb=null,a(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}}))},pa.prototype._onInterval=function(){!this._cb||!this._channel||this._channel.bufferedAmount>Ab||this._onChannelBufferedAmountLow()},pa.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},pa.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},pa.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var n=e.data;console.log(n),n instanceof ArrayBuffer&&(n=dr.from(n)),console.log(n),t.push(n)}},pa.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},pa.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},pa.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},pa.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},pa.prototype._onTrack=function(e){var t=this;if(!t.destroyed){t._debug("on track");var n=e.streams[0].id;t._previousStreams.indexOf(n)===-1&&(t._previousStreams.push(n),t.emit("stream",e.streams[0]))}},pa.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],vb.apply(null,t)},pa.prototype._transformConstraints=function(e){var t=this;if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!t._isChromium){var n=Object.assign({},e.optional,e.mandatory);return void 0!==n.OfferToReceiveVideo&&(n.offerToReceiveVideo=n.OfferToReceiveVideo,delete n.OfferToReceiveVideo),void 0!==n.OfferToReceiveAudio&&(n.offerToReceiveAudio=n.OfferToReceiveAudio,delete n.OfferToReceiveAudio),n}return e.mandatory||e.optional||!t._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})};var xb=1e3,Eb=60*xb,Cb=60*Eb,Sb=24*Cb,Rb=365.25*Sb,Tb=function(e,t){return t=t||{},"string"==typeof e?ga(e):t.long?ma(e):ya(e)},Bb=w(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(e,i),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var u=o.log||t.log||console.log.bind(console);u.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=Tb,t.names=[],t.skips=[],t.formatters={};var c,u=0}),Db=w(function(e,t){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}function a(){try{return window.localStorage}catch(e){}}t=e.exports=Bb,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())}),Ob=ba,Pb=Ob,Ib=function(e){function t(e){if(!e)return e;if(Pb(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(Array.isArray(e)){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=t(e[i]);return o}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var s in e)o[s]=t(e[s]);return o}return e}var n=[],r=e.data,o=e;return o.data=t(r),o.attachments=n.length,{packet:o,buffers:n}},jb=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(Array.isArray(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var i in e)e[i]=n(e[i]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},Nb=function(e,t){function n(e,i,s){if(!e)return e;if(nu.Blob&&e instanceof Blob||nu.File&&e instanceof File){r++;var a=new FileReader;a.onload=function(){s?s[i]=this.result:o=this.result,--r||t(o)},a.readAsArrayBuffer(e)}else if(Array.isArray(e))for(var c=0;c<e.length;c++)n(e[c],c,e);else if(e&&"object"==typeof e&&!Pb(e))for(var u in e)n(e[u],u,e)}var r=0,o=e;n(o),r||t(o)},Ub={deconstructPacket:Ib,reconstructPacket:jb,removeBlobs:Nb},Lb=w(function(e,t){function n(){}function r(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=h.stringify(e.data)),u("encoded %j as %s",e,n),n}function o(e,t){function n(e){var n=l.deconstructPacket(e),o=r(n.packet),i=n.buffers;i.unshift(o),t(i)}l.removeBlobs(e,n)}function i(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return c();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(n.attachments="";"-"!=e.charAt(++r);)n.attachments+=e.charAt(r);n.attachments=Number(n.attachments)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(n.nsp+=o,r+1==e.length)break}else n.nsp="/";var i=e.charAt(r+1);if(""!=i&&Number(i)==i){for(n.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(n.id+=e.charAt(r),r+1==e.length)break}n.id=Number(n.id)}if(e.charAt(++r))try{n.data=h.parse(e.substr(r))}catch(e){return c()}return u("decoded %s as %j",e,n),n}function a(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error"}}var u=Db("socket.io-parser"),h=Eu,f=Gu,l=Ub,p=Ob;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=i,n.prototype.encode=function(e,n){if(u("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)o(e,n);else{var i=r(e);n([i])}},f(i.prototype),i.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new a(n),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){this.reconPack.data.data=this.buffers.reduce(function(e,t,n,r){return this._appendBuffer(e,t)}.bind(this)),l.reconstructPacket(this.reconPack,[this.reconPack.data.data]);var t=this.reconPack;return this.finishedReconstruction(),t}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},a.prototype._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}}),zb=Kf("edgemesh:peer"),Mb=Gu.prototype.emit,Fb=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bp(this,t);var r=Pp(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.peers=new Hf,r.peerOptions={config:il.signaling,channelName:"edgemesh"},r.peerId=n.peerId||e.id,r.decoder=new Lb.Decoder(r),r.decoder.on("decoded",r._ondecoded.bind(r)),r.options=Object.assign({maxPeers:10},n),r.socket=e,r.socket.on("offer",r._acceptConnection.bind(r)),r.socket.on("signal",r._activateConnection.bind(r)),Np){var o=require("string_decoder").StringDecoder;r.textDecoder=new o("utf8"),r.textDecoder.decode=function(e){return this.end(dr.from(e))},n.wrtc?r.peerOptions.wrtc=n.wrtc:console.warn("You are running Peer on node.js... Pass `wrtc` option.")}else r.textDecoder=new TextDecoder("utf-8");return r}return Op(t,e),Dp(t,[{key:"destroy",value:function(){this.socket.removeAllListeners(),this.removeAllListeners(),this.peers.forEachRecord(function(e){e.peer.destroy()})}},{key:"connect",value:function(e){var t=this;return zb("connecting to peer %s",e),this._closeStaleConnections(),new Promise(function(n,r){var o=t.peers.getRecord("o:"+e);if(o)o.peer._channelReady?n(o.peer):o.peer.once("connect",function(){n(o.peer)});else{var i=Object.assign({},t.peerOptions,{initiator:!0}),s=new mb(i);s.setMaxListeners(0),t._setupPeerEvents("o:"+e,s),s.on("signal",function(n){zb("sending offer",n),t.socket.emit("peer-offer",{offer:n,fromPeerId:t.peerId,toPeerId:e})}),s.once("connect",function(){zb("peer connected",e),s.emid=e,s.removeListener("error",r),t.emit("peer-connected",e),n(s)}),s.on("error",function(e){console.log(e),r(e)}),t.peers.addRecord({id:"o:"+e,peer:s,lastActive:new Date})}})}},{key:"send",value:function(e,t,n){var r=this;if("string"==typeof e)this.connect(e).then(function(e){r.send(e,t,n)}).catch(function(e){r.emit("peer-error",e)});else{zb("sending message to peer %s on channel %s",e.emid,t),this.peers.addRecord({id:"o:"+e.emid,lastActive:new Date,peer:e});var o=new Lb.Encoder;[].shift.apply(arguments);var i=Lb.EVENT;Fu(arguments)&&(i=Lb.BINARY_EVENT);var s=xf(arguments),a={type:i,data:s};o.encode(a,function(t){if(t[1]instanceof ArrayBuffer)r._sendArray(e,t);else if(t)for(var n=0;n<t.length;n++){var o=Up(t[n]),i=new ArrayBuffer(8),s=new DataView(i);s.setInt32(0,o.byteLength);var a=zp(i,o);r._send(e,a)}else zb("encoding error")})}}},{key:"disconnect",value:function(e){var t=this.peers.getRecord("o:"+e);t&&(t.peer.destroy(),this.peers.removeRecord(e),zb("peer %s disconnected",e))}},{key:"getConnectedPeers",value:function(){return this.peers.getIdentifiers()}},{key:"getStats",value:function(){var e={},t=[];return this.peers.forEachRecord(function(n){t.push(new Promise(function(t){n.peer.getStats(function(r){e[n.id]=r,t()})}))}),Promise.all(t).then(function(){return e})}},{key:"_setupPeerEvents",value:function(e,t){var n=this;t.on("data",function(t){var r=n.peers.getRecord(e);n.peers.addRecord({id:r.id,peer:r.peer,lastActive:new Date});var o=Lp(t),i=new DataView(o),s=i.getInt32(0),a=n.textDecoder.decode(new Uint8Array(o.slice(8,s+8))),c=new Uint8Array(o.slice(8+s,o.byteLength));n.decoder.add(a),0!==c.length&&n.decoder.add(c)}),t.on("close",function(){zb("peer closed %s",e),n.emit("peer-disconnected",e),t.removeAllListeners(),t.destroy(),n.peers.removeRecord(e)}),t.on("error",function(e){t.removeAllListeners(),t.destroy(),n.emit("peer-error",e)})}},{key:"_acceptConnection",value:function(e){var t=this,n=this.peers.getRecord("i:"+e.fromPeerId);if(n&&!n.peer.destroyed)n.peer.signal(e.offer);else{var r=Object.assign({},this.peerOptions,{initiator:!1}),o=new mb(r);o.setMaxListeners(50),this._setupPeerEvents("i:"+e.fromPeerId,o),o.on("signal",function(n){zb("sending signal %O",n);var r={signal:n,fromPeerId:t.peerId,toPeerId:e.fromPeerId};t.socket.emit("peer-signal",r)}),zb("accepting connection %O",e.offer),o.destroyed||o.signal(e.offer),this.peers.addRecord({id:"i:"+e.fromPeerId,peer:o,lastActive:new Date})}}},{key:"_activateConnection",value:function(e){var t=this.peers.getRecord("o:"+e.fromPeerId);t&&!t.peer.destroyed&&(zb("activating connection %O",e.signal),t.peer.signal(e.signal))}},{key:"_sendArray",value:function(e,t){var n=Up(t[0]),r=t[1],o=new ArrayBuffer(8),i=new DataView(o);i.setInt32(0,n.byteLength);var s=zp(o,n);s=zp(s,r),this._send(e,s)}},{key:"_send",value:function(e,t){e.destroyed||e.send(t)}},{key:"_ondecoded",value:function(e){var t=e.data||[];zb("packet decoded %O",t),Mb.apply(this,t)}},{key:"_closeStaleConnections",value:function(){var e=this.getConnectedPeers().length;if(e>=this.options.maxPeers)for(var t=this.peers.mapRecords(function(e){return{id:e.id,lastActive:e.lastActive}}).sort(function(e,t){return e-t}).reverse(),n=e+1-this.options.maxPeers,r=0;r<n;r++)this.disconnect(t[r].id.split(":")[1])}}]),t}(Gu),qb=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t},Yb=(w(function(e){!function(t,n,r){e.exports?e.exports=r():t[n]=r()}(nu,"bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var r,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),a=!i&&/android/i.test(e),c=/nexus\s*[0-6]\s*/i.test(e),u=!c&&/nexus\s*[0-9]+/i.test(e),h=/CrOS/.test(e),f=/silk/i.test(e),l=/sailfish/i.test(e),p=/tizen/i.test(e),d=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),m=!o&&!f&&/macintosh/i.test(e),v=!a&&!l&&!p&&!d&&/linux/i.test(e),b=t(/edge\/(\d+(\.\d+)?)/i),w=t(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(e),k=!_&&/[^-]mobi/i.test(e),A=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:s,version:w||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?r={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:s,version:w||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:s,version:w||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:s,version:w||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(r={name:"Windows Phone",windowsphone:s},b?(r.msedge=s,r.version=b):(r.msie=s,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?r={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:s,version:b}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||w}:l?r={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=s)):f?r={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:s,version:w||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(r={name:"WebOS",webos:s,version:w||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=s)):/bada/i.test(e)?r={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?r={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(e)?r={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:w}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:s},w&&(r.version=w)):o?(r={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},w&&(r.version=w)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||w}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=s):(r.name=r.name||"Webkit",r.webkit=s),!r.version&&w&&(r.version=w)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=s,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||r.msedge||!a&&!r.silk?r.windowsphone||r.msedge||!o?m?r.mac=s:A?r.xbox=s:y?r.windows=s:v&&(r.linux=s):(r[o]=s,r.ios=s):r.android=s;var x="";r.windowsphone?x=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(x=t(/os (\d+([_\s]\d+)*) like mac os x/i),x=x.replace(/[_\s]/g,".")):a?x=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?x=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?x=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?x=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(x=t(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(r.osversion=x);var E=x.split(".")[0];return _||u||"ipad"==o||a&&(3==E||E>=4&&!k)||r.silk?r.tablet=s:(k||"iphone"==o||"ipod"==o||a||c||r.blackberry||r.webos||r.bada)&&(r.mobile=s),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=s:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=s:r.x=s,r}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),o=n(e,function(e){var o=r-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(o[0][r]>o[1][r])return 1;if(o[0][r]!==o[1][r])return-1;if(0===r)return 0}}function o(t,n,o){var i=a;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(i=e(o));var s=""+i.version;for(var c in t)if(t.hasOwnProperty(c)&&i[c]){if("string"!=typeof t[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(t));return r([s,t[c]])<0}return n}function i(e,t,n){return!o(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=r,a.check=i,a._detect=e,a})}),!1),Hb=!1;Np&&(Tc.window={navigator:{}}),Np||(Yb=Boolean(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver),Hb=Boolean(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB));var $b=2147483647,Kb=36,Wb=1,Jb=26,Zb=38,Vb=700,Xb=72,Gb=128,Qb="-",ew=/[^\x20-\x7E]/,tw=/[\x2E\u3002\uFF0E\uFF61]/g,nw={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},rw=Kb-Wb,ow=Math.floor,iw=String.fromCharCode,sw=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},aw=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},cw=/^([a-z0-9.+-]+:)/i,uw=/:[0-9]*$/,hw=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fw=["<",">",'"',"`"," ","\r","\n","\t"],lw=["{","}","|","\\","^","`"].concat(fw),pw=["'"].concat(lw),dw=["%","/","?",";","#"].concat(pw),gw=["/","?","#"],yw=255,mw=/^[+a-z0-9A-Z_-]{0,63}$/,vw=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,bw={javascript:!0,"javascript:":!0},ww={javascript:!0,"javascript:":!0},_w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Pa.prototype.parse=function(e,t,n){return ja(this,e,t,n)},Pa.prototype.format=function(){return Na(this)},Pa.prototype.resolve=function(e){return this.resolveObject(Ia(e,!1,!0)).format()},Pa.prototype.resolveObject=function(e){if(Ko(e)){var t=new Pa;t.parse(e,!1,!0),e=t}for(var n=new Pa,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var c=s[a];"protocol"!==c&&(n[c]=e[c])}return _w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var u;if(e.protocol&&e.protocol!==n.protocol){
if(!_w[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var l=h[f];n[l]=e[l]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||ww[e.protocol])n.pathname=e.pathname;else{for(u=(e.pathname||"").split("/");u.length&&!(e.host=u.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==u[0]&&u.unshift(""),u.length<2&&u.unshift(""),n.pathname=u.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",d=n.search||"";n.path=p+d}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=y||g||n.host&&e.pathname,v=m,b=n.pathname&&n.pathname.split("/")||[],w=n.protocol&&!_w[n.protocol];u=e.pathname&&e.pathname.split("/")||[],w&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===u[0]?u[0]=e.host:u.unshift(e.host)),e.host=null),m=m&&(""===u[0]||""===b[0]));var _;if(y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=u;else if(u.length)b||(b=[]),b.pop(),b=b.concat(u),n.search=e.search,n.query=e.query;else if(!Ho(e.search))return w&&(n.hostname=n.host=b.shift(),_=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"),_&&(n.auth=_.shift(),n.host=n.hostname=_.shift())),n.search=e.search,n.query=e.query,Yo(n.pathname)&&Yo(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=b.slice(-1)[0],A=(n.host||e.host||b.length>1)&&("."===k||".."===k)||""===k,x=0,E=b.length;E>=0;E--)k=b[E],"."===k?b.splice(E,1):".."===k?(b.splice(E,1),x++):x&&(b.splice(E,1),x--);if(!m&&!v)for(;x--;x)b.unshift("..");!m||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),A&&"/"!==b.join("/").substr(-1)&&b.push("");var C=""===b[0]||b[0]&&"/"===b[0].charAt(0);return w&&(n.hostname=n.host=C?"":b.length?b.shift():"",_=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"),_&&(n.auth=_.shift(),n.host=n.hostname=_.shift())),m=m||n.host&&b.length,m&&!C&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),Yo(n.pathname)&&Yo(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Pa.prototype.parseHost=function(){return Ua(this)};var kw=(Kf("edgemesh:dom:image"),Kf("edgemesh:dom:background"),Kf("edgemesh:dom"),Kf("edgemesh:fetch")),Aw=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;"withCredentials"in r?r.open("GET",""+e,!0):"undefined"!=typeof XDomainRequest&&(r=new XDomainRequest,r.open("GET",""+e)),r.responseType="arraybuffer",r.onload=function(r){r&&kw("error %O",r),200===this.status?t(this.response):n({func:"Fetch.FetchUrl",string:"Could not get file from ObjectURL",input:{url:e}})},r.send()})},xw=(Kf("edgemesh:postmessage"),La);La.defer=za;var Ew=Kf("edgemesh:queue"),Cw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.maxParallel||6,n=e.processingFrequency||30,r={low:[],mid:[],high:[]},o=[],i=void 0,s=0;Ew("creating queue with max parallelism of "+t+" and processingFrequency of "+n+" ms");var a=function(e){return function(){Ew("removing resolved task from the active task list"),o.splice(o.indexOf(e))}};return{start:function(){i=setInterval(this.processQueue,n)},stop:function(){i&&clearInterval(i)},clear:function(e){r[e]=[]},enqueue:function(e){r[e.priority]?r[e.priority].unshift(e):Ew("invalid priority: "+e.priority+" 'low' 'mid' or 'high'")},getQueuedTasks:function(){var e={totalQueued:0,processed:s,started:Boolean(i)};for(var t in r)t&&(e[t]=r[t].length,e.totalQueued+=r[t].length);return e},processQueue:function(){if(Ew("processing task queue..."),Ew("active tasks: "+o.length),o.length<=t){Ew("high: "+r.high.length+", mid: "+r.mid.length+", low: "+r.low.length);var e=r.high.length>0?r.high.pop():r.mid.length>0?r.mid.pop():r.low.pop();e&&(Ew("executing new task"),o.push(e),e.execute().then(a(e),a(e)),s++)}}}},Sw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{priority:"mid"},t=e.priority,n=e.callback,r=xw();return{priority:t,promise:r.promise,execute:function(){return n().then(function(e){return r.resolve(e)},function(e){return r.reject(e)})}}},Rw="1.5.1",Tw={locateTimeout:1e3,meshConnectTimeout:1e3,maxConnectedPeers:10,iddbName:"edgemesh",iddbColumns:"id,contentType,blob,compressed",iddbDefaultMobileDisk:5,iddbDefaultDesktopDisk:50,maxParallelJobs:6,jobProcessingFrequency:30,hubSyncDelay:1e4,chunkSize:15360,chunkIdOffset:0,chunkPositionOffset:4,chunkReservedBytes:8},Bw={image:["img","source"],background:["a","article","aside","blockquote","button","b","body","div","figure","h1","h2","h3","h4","html","i","label","li","main","mark","nav","p","section","span","strong","summary","table","time","ul"],extension:["jpg","jpeg","gif","png","bmp","svg","webp"]},Dw="sig.edgeno.de",Ow="https://edgemesh.com",Pw="https://portal.edgemesh.com",Iw="frontier@edgemesh.com",jw="contact@edgemesh.com",Nw={iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},Uw={beaconUrl:"https://sig.edgeno.de/track",script:"edgemesh.track.min.js"},Lw={httpPort:80,httpsPort:443,wsAPIPort:3e3,wsCDNPort:9e3},zw={version:Rw,client:Tw,support:Bw,host:Dw,clientUrl:Ow,portalUrl:Pw,grantApplyEmail:Iw,contactEmail:jw,signaling:Nw,tracking:Uw,server:Lw},Mw=Object.freeze({version:Rw,client:Tw,support:Bw,host:Dw,clientUrl:Ow,portalUrl:Pw,grantApplyEmail:Iw,contactEmail:jw,signaling:Nw,tracking:Uw,server:Lw,default:zw}),Fw="DUMP_DEBUG",qw="DEBUG_DATA",Yw="HUB_SYNC_DEL",Hw="HUB_DISABLE",$w="HUB_ENABLE",Kw="ASSET_REGISTER",Ww="ASSET_STORE",Jw="WORKER_REGISTER",Zw=102,Vw=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Xw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Gw=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var o=Vw.exec(e||""),i={},s=14;s--;)i[Xw[s]]=o[s]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i},Qw=e(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=s[u];n=o.call(e,i),s.splice(u,1),u--}return n}),s=t.formatArgs.apply(e,s);var h=o.log||t.log||console.log.bind(console);h.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=Cc,t.names=[],t.skips=[],t.formatters={};var c,u=0}),e_=e(function(e,t){function n(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof process&&"env"in process)return process.env.DEBUG}function a(){try{return window.localStorage}catch(e){}}t=e.exports=Qw,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),t_=Gw,n_=e_("socket.io-client:url"),r_=Ma,o_=1e3,i_=60*o_,s_=60*i_,a_=24*s_,c_=365.25*a_,u_=function(e,t){return t=t||{},"string"==typeof e?Fa(e):t.long?Ya(e):qa(e)},h_=e(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(e,i),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var u=o.log||t.log||console.log.bind(console);u.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=u_,t.names=[],t.skips=[],t.formatters={};var c,u=0}),f_=e(function(e,t){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}function a(){try{return window.localStorage}catch(e){}}t=e.exports=h_,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())}),l_=e(function(e,t){(function(){function n(e,t){function r(e){if(r[e]!==y)return r[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=r("json-stringify")&&r("json-parse");else{var o,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,h="function"==typeof c&&b;if(h){(o=function(){return 1}).toJSON=o;try{h="0"===c(0)&&"0"===c(new i)&&'""'==c(new a)&&c(v)===y&&c(y)===y&&c()===y&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([y])&&"null"==c(null)&&"[null,null,null]"==c([y,v,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(e){h=!1}}n=h}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){o=f(s);var l=5==o.a.length&&1===o.a[0];if(l){try{l=!f('"\t"')}catch(e){}if(l)try{l=1!==f("01")}catch(e){}if(l)try{l=1!==f("1.")}catch(e){}}}}catch(e){l=!1}n=l}}return r[e]=!!n}e||(e=s.Object()),t||(t=s.Object());var i=e.Number||s.Number,a=e.String||s.String,c=e.Object||s.Object,u=e.Date||s.Date,h=e.SyntaxError||s.SyntaxError,f=e.TypeError||s.TypeError,l=e.Math||s.Math,p=e.JSON||s.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var d,g,y,m=c.prototype,v=m.toString,b=new u(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!r("json")){var w="[object Function]",_="[object Date]",k="[object Number]",A="[object String]",x="[object Array]",E="[object Boolean]",C=r("bug-string-char-index");if(!b)var S=l.floor,R=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(e,t){return R[t]+365*(e-1970)+S((e-1969+(t=+(t>1)))/4)-S((e-1901+t)/100)+S((e-1601+t)/400)};if((d=m.hasOwnProperty)||(d=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?d=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,d=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,d.call(this,e)}),g=function(e,t){var n,r,i,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)d.call(r,i)&&s++;return n=r=null,s?g=2==s?function(e,t){var n,r={},o=v.call(e)==w;for(n in e)o&&"prototype"==n||d.call(r,n)||!(r[n]=1)||!d.call(e,n)||t(n)}:function(e,t){var n,r,o=v.call(e)==w;for(n in e)o&&"prototype"==n||!d.call(e,n)||(r="constructor"===n)||t(n);(r||d.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,i,s=v.call(e)==w,a=!s&&"function"!=typeof e.constructor&&o[typeof e.hasOwnProperty]&&e.hasOwnProperty||d;for(n in e)s&&"prototype"==n||!a.call(e,n)||t(n);for(i=r.length;n=r[--i];a.call(e,n)&&t(n));}),g(e,t)},!r("json-stringify")){var B={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},D="000000",O=function(e,t){return(D+(t||0)).slice(-e)},P="\\u00",I=function(e){for(var t='"',n=0,r=e.length,o=!C||r>10,i=o&&(C?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=B[s];break;default:if(s<32){t+=P+O(2,s.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},j=function(e,t,n,r,o,i,s){var a,c,u,h,l,p,m,b,w,C,R,B,D,P,N,U;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if(c=v.call(a),c!=_||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=k&&c!=A&&c!=x||d.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(T){for(l=S(a/864e5),u=S(l/365.2425)+1970-1;T(u+1,0)<=l;u++);for(h=S((l-T(u,0))/30.42);T(u,h+1)<=l;h++);l=1+l-T(u,h),p=(a%864e5+864e5)%864e5,m=S(p/36e5)%24,b=S(p/6e4)%60,w=S(p/1e3)%60,C=p%1e3}else u=a.getUTCFullYear(),h=a.getUTCMonth(),l=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),C=a.getUTCMilliseconds();a=(u<=0||u>=1e4?(u<0?"-":"+")+O(6,u<0?-u:u):O(4,u))+"-"+O(2,h+1)+"-"+O(2,l)+"T"+O(2,m)+":"+O(2,b)+":"+O(2,w)+"."+O(3,C)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if(c=v.call(a),c==E)return""+a;if(c==k)return a>-1/0&&a<1/0?""+a:"null";if(c==A)return I(""+a);if("object"==typeof a){for(P=s.length;P--;)if(s[P]===a)throw f();if(s.push(a),R=[],N=i,i+=o,c==x){for(D=0,P=a.length;D<P;D++)B=j(D,a,n,r,o,i,s),R.push(B===y?"null":B);U=R.length?o?"[\n"+i+R.join(",\n"+i)+"\n"+N+"]":"["+R.join(",")+"]":"[]"}else g(r||a,function(e){var t=j(e,a,n,r,o,i,s);t!==y&&R.push(I(e)+":"+(o?" ":"")+t)}),U=R.length?o?"{\n"+i+R.join(",\n"+i)+"\n"+N+"}":"{"+R.join(",")+"}":"{}";return s.pop(),U}};t.stringify=function(e,t,n){var r,i,s,a;if(o[typeof t]&&t)if((a=v.call(t))==w)i=t;else if(a==x){s={};for(var c,u=0,h=t.length;u<h;c=t[u++],a=v.call(c),(a==A||a==k)&&(s[c]=1));}if(n)if((a=v.call(n))==k){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==A&&(r=n.length<=10?n:n.slice(0,10));return j("",(c={},c[""]=e,c),i,s,r,"",[])}}if(!r("json-parse")){var N,U,L=a.fromCharCode,z={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw N=U=null,h()},F=function(){for(var e,t,n,r,o,i=U,s=i.length;N<s;)switch(o=i.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?i.charAt(N):i[N],N++,e;case 34:for(e="@",N++;N<s;)if(o=i.charCodeAt(N),o<32)M();else if(92==o)switch(o=i.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=z[o],N++;break;case 117:for(t=++N,n=N+4;N<n;N++)o=i.charCodeAt(N),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||M();e+=L("0x"+i.slice(t,N));break;default:M()}else{if(34==o)break;for(o=i.charCodeAt(N),t=N;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++N);e+=i.slice(t,N)}if(34==i.charCodeAt(N))return N++,e;M();default:if(t=N,45==o&&(r=!0,o=i.charCodeAt(++N)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(N+1),o>=48&&o<=57)&&M(),r=!1;N<s&&(o=i.charCodeAt(N),o>=48&&o<=57);N++);if(46==i.charCodeAt(N)){for(n=++N;n<s&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==N&&M(),N=n}if(o=i.charCodeAt(N),101==o||69==o){for(o=i.charCodeAt(++N),43!=o&&45!=o||N++,n=N;n<s&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==N&&M(),N=n}return+i.slice(t,N)}if(r&&M(),"true"==i.slice(N,N+4))return N+=4,!0;if("false"==i.slice(N,N+5))return N+=5,!1;if("null"==i.slice(N,N+4))return N+=4,null;M()}return"$"},q=function(e){var t,n;if("$"==e&&M(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=F(),"]"!=e;n||(n=!0))n&&(","==e?(e=F(),"]"==e&&M()):M()),","==e&&M(),t.push(q(e));return t}if("{"==e){for(t={};e=F(),"}"!=e;n||(n=!0))n&&(","==e?(e=F(),"}"==e&&M()):M()),","!=e&&"string"==typeof e&&"@"==(C?e.charAt(0):e[0])&&":"==F()||M(),t[e.slice(1)]=q(F());return t}M()}return e},Y=function(e,t,n){var r=H(e,t,n);r===y?delete e[t]:e[t]=r},H=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(v.call(o)==x)for(r=o.length;r--;)Y(o,r,n);else g(o,function(e){Y(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return N=0,U=""+e,n=q(F()),"$"!=F()&&M(),N=U=null,t&&v.call(t)==w?H((r={},r[""]=n,r),"",t):n}}}return t.runInContext=n,t}var r=!1,o={function:!0,object:!0},i=o.object&&t&&!t.nodeType&&t,s=o[typeof window]&&window||this,a=i&&o.object&&e&&!e.nodeType&&"object"==typeof wc&&wc;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a),i&&!r)n(s,i);else{var c=s.JSON,u=s.JSON3,h=!1,f=n(s,s.JSON3={noConflict:function(){return h||(h=!0,s.JSON=c,s.JSON3=u,c=u=null),f}});s.JSON={parse:f.parse,stringify:f.stringify}}r&&(void 0)(function(){return f})}).call(wc)}),p_=$a;$a.prototype.on=$a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},$a.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},$a.prototype.off=$a.prototype.removeListener=$a.prototype.removeAllListeners=$a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},$a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},$a.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},$a.prototype.hasListeners=function(e){return!!this.listeners(e).length};var d_=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},g_=Wa,y_=d_,m_=g_,v_=function(e){function t(e){if(!e)return e;if(m_(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(y_(e)){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=t(e[i]);return o}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var s in e)o[s]=t(e[s]);return o}return e}var n=[],r=e.data,o=e;return o.data=t(r),o.attachments=n.length,{packet:o,buffers:n}},b_=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(y_(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var i in e)e[i]=n(e[i]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},w_=function(e,t){function n(e,i,s){if(!e)return e;if(wc.Blob&&e instanceof Blob||wc.File&&e instanceof File){r++;var a=new FileReader;a.onload=function(){s?s[i]=this.result:o=this.result,--r||t(o)},a.readAsArrayBuffer(e)}else if(y_(e))for(var c=0;c<e.length;c++)n(e[c],c,e);else if(e&&"object"==typeof e&&!m_(e))for(var u in e)n(e[u],u,e)}var r=0,o=e;n(o),r||t(o)},__={deconstructPacket:v_,reconstructPacket:b_,removeBlobs:w_},k_=e(function(e,t){function n(){}function r(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=f.stringify(e.data)),h("encoded %j as %s",e,n),n}function o(e,t){function n(e){var n=p.deconstructPacket(e),o=r(n.packet),i=n.buffers;i.unshift(o),t(i)}p.removeBlobs(e,n)}function i(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return u();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var o="";"-"!=e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!=e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var i=e.charAt(r);if(","==i)break;if(n.nsp+=i,r==e.length)break}else n.nsp="/";var s=e.charAt(r+1);if(""!==s&&Number(s)==s){for(n.id="";++r;){var i=e.charAt(r);if(null==i||Number(i)!=i){--r;break}if(n.id+=e.charAt(r),r==e.length)break}n.id=Number(n.id)}return e.charAt(++r)&&(n=a(n,e.substr(r))),h("decoded %s as %j",e,n),n}function a(e,t){try{e.data=f.parse(t)}catch(e){return u()}return e}function c(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:t.ERROR,data:"parser error"}}var h=f_("socket.io-parser"),f=l_,l=p_,p=__,d=g_;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=i,n.prototype.encode=function(e,n){if(h("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)o(e,n);else{var i=r(e);n([i])}},l(i.prototype),i.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new c(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!d(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}),A_=e(function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}}),x_=A_,E_=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||x_))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(wc[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}},C_=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},S_=d_,R_=Ja,T_=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer},B_=Za,D_=e(function(e,t){!function(n){function r(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function o(e){for(var t,n=e.length,r=-1,o="";++r<n;)t=e[r],t>65535&&(t-=65536,o+=m(t>>>10&1023|55296),t=56320|1023&t),o+=m(t);return o}function i(e,t){return m(e>>t&63|128)}function s(e){if(0==(4294967168&e))return m(e);var t="";return 0==(4294965248&e)?t=m(e>>6&31|192):0==(4294901760&e)?(t=m(e>>12&15|224),t+=i(e,6)):0==(4292870144&e)&&(t=m(e>>18&7|240),t+=i(e,12),t+=i(e,6)),t+=m(63&e|128)}function a(e){for(var t,n=r(e),o=n.length,i=-1,a="";++i<o;)t=n[i],a+=s(t);return a}function c(){if(y>=g)throw Error("Invalid byte index");var e=255&d[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,n,r,o;if(y>g)throw Error("Invalid byte index");if(y==g)return!1;if(e=255&d[y],y++,0==(128&e))return e;if(192==(224&e)){var t=c();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=c(),n=c(),o=(15&e)<<12|t<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=c(),n=c(),r=c(),o=(15&e)<<18|t<<12|n<<6|r,o>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function h(e){d=r(e),g=d.length,y=0;for(var t,n=[];(t=u())!==!1;)n.push(t);return o(n)}var f=t,l=e&&e.exports==f&&e,p="object"==typeof wc&&wc;p.global!==p&&p.window!==p||(n=p);var d,g,y,m=String.fromCharCode,v={version:"1.0.0",encode:a,decode:h};if(f&&!f.nodeType)if(l)l.exports=v;else{var b={},w=b.hasOwnProperty;for(var _ in v)w.call(v,_)&&(f[_]=v[_])}else n.wtf8=v}(wc)}),O_=e(function(e,t){!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,r,o,i,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),f=new Uint8Array(h);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],i=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],f[u++]=r<<2|o>>4,f[u++]=(15&o)<<4|i>>2,f[u++]=(3&i)<<6|63&s;return h}}()}),P_=wc.BlobBuilder||wc.WebKitBlobBuilder||wc.MSBlobBuilder||wc.MozBlobBuilder,I_=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(e){return!1}}(),j_=I_&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(e){return!1}}(),N_=P_&&P_.prototype.append&&P_.prototype.getBlob,U_=function(){return I_?j_?wc.Blob:Qa:N_?Ga:void 0}(),L_=e(function(e,t){function n(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}function r(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=m[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,n,!0,r)},o.readAsArrayBuffer(e.data)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(y)return o(e,n,r);var i=new Uint8Array(1);i[0]=m[e.type];var s=new w([i.buffer,e.data]);return r(s)}function s(e){try{e=p.decode(e)}catch(e){return!1}return e}function a(e,t,n){for(var r=new Array(e.length),o=l(e.length,n),i=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},s=0;s<e.length;s++)i(s,e[s],o)}var c,u=C_,h=R_,f=T_,l=B_,p=D_;wc&&wc.ArrayBuffer&&(c=O_);var d="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=d||g;t.protocol=3;var m=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=u(m),b={type:"error",data:"parser error"},w=U_;t.encodePacket=function(e,t,o,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof o&&(s=o,o=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(wc.ArrayBuffer&&a instanceof ArrayBuffer)return r(e,t,s);if(w&&a instanceof wc.Blob)return i(e,t,s);if(a&&a.base64)return n(e,s);var c=m[e.type];return void 0!==e.data&&(c+=o?p.encode(String(e.data)):String(e.data)),s(""+c)},t.encodeBase64Packet=function(e,n){var r="b"+t.packets[e.type];if(w&&e.data instanceof wc.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(r+e)},o.readAsDataURL(e.data)}var i;try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];i=String.fromCharCode.apply(null,a)}return r+=wc.btoa(i),n(r)},t.decodePacket=function(e,n,r){if(void 0===e)return b;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&(e=s(e),e===!1))return b;var o=e.charAt(0);return Number(o)==o&&v[o]?e.length>1?{type:v[o],data:e.substring(1)}:{type:v[o]}:b}var i=new Uint8Array(e),o=i[0],a=f(e,1);return w&&"blob"===n&&(a=new w([a])),{type:v[o],data:a}},t.decodeBase64Packet=function(e,t){var n=v[e.charAt(0)];if(!c)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=c.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function o(e){return e.length+":"+e}function i(e,r){t.encodePacket(e,!!s&&n,!0,function(e){r(null,o(e))})}"function"==typeof n&&(r=n,n=null);var s=h(e);return n&&s?w&&!y?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void a(e,i,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var o;if(""==e)return r(b,0,1);for(var i,s,a="",c=0,u=e.length;c<u;c++){var h=e.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(i=Number(a)))return r(b,0,1);if(s=e.substr(c+1,i),a!=s.length)return r(b,0,1);if(s.length){if(o=t.decodePacket(s,n,!0),b.type==o.type&&b.data==o.data)return r(b,0,1);var f=r(o,c+i,u);if(!1===f)return}c+=i,a=""}}return""!=a?r(b,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}return e.length?void a(e,r,function(e,t){var r=t.reduce(function(e,t){
var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}t?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var c=new w([t.buffer,a.buffer,e]);n(null,c)}})}a(e,r,function(e,t){return n(new w(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return r(b,0,1);o=f(o,2+u.length),u=parseInt(u);var l=f(o,0,u);if(c)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){var p=new Uint8Array(l);l="";for(var h=0;h<p.length;h++)l+=String.fromCharCode(p[h])}i.push(l),o=f(o,u)}var d=i.length;i.forEach(function(e,o){r(t.decodePacket(e,n,!0),o,d)})}}),z_=e(function(e){function t(e){if(e)return n(e)}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),M_=L_,F_=z_,q_=ec;F_(ec.prototype),ec.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},ec.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},ec.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},ec.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},ec.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},ec.prototype.onData=function(e){var t=M_.decodePacket(e,this.socket.binaryType);this.onPacket(t)},ec.prototype.onPacket=function(e){this.emit("packet",e)},ec.prototype.onClose=function(){this.readyState="closed",this.emit("close")};for(var Y_,H_=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},$_=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t},K_={encode:H_,decode:$_},W_=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},J_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Z_=64,V_={},X_=0,G_=0;G_<Z_;G_++)V_[J_[G_]]=G_;rc.encode=tc,rc.decode=nc;var Q_=rc,ek=e(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=s[u];n=o.call(e,i),s.splice(u,1),u--}return n}),s=t.formatArgs.apply(e,s);var h=o.log||t.log||console.log.bind(console);h.apply(e,s)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r.debug=r,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=Cc,t.names=[],t.skips=[],t.formatters={};var c,u=0}),tk=e(function(e,t){function n(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof process&&"env"in process)return process.env.DEBUG}function a(){try{return window.localStorage}catch(e){}}t=e.exports=ek,t.log=o,t.formatArgs=r,t.save=i,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),nk=q_,rk=K_,ok=L_,ik=W_,sk=Q_,ak=tk("engine.io-client:polling"),ck=oc,uk=function(){var e=E_,t=new e({xdomain:!1});return null!=t.responseType}();ik(oc,nk),oc.prototype.name="polling",oc.prototype.doOpen=function(){this.poll()},oc.prototype.pause=function(e){function t(){ak("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(ak("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){ak("pre-pause polling complete"),--r||t()})),this.writable||(ak("we are currently writing - waiting to pause"),r++,this.once("drain",function(){ak("pre-pause writing complete"),--r||t()}))}else t()},oc.prototype.poll=function(){ak("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},oc.prototype.onData=function(e){var t=this;ak("polling got data %s",e);var n=function(e,n,r){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};ok.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():ak('ignoring poll - transport state "%s"',this.readyState))},oc.prototype.doClose=function(){function e(){ak("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(ak("transport open - closing"),e()):(ak("transport not open - deferring close"),this.once("open",e))},oc.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};ok.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},oc.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=sk()),this.supportsBinary||e.sid||(e.b64=1),e=rk.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e};var hk=E_,fk=ck,lk=z_,pk=W_,dk=tk("engine.io-client:polling-xhr"),gk=sc,yk=ac;pk(sc,fk),sc.prototype.supportsBinary=!0,sc.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new ac(e)},sc.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},sc.prototype.doPoll=function(){dk("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},lk(ac.prototype),ac.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new hk(e),n=this;try{dk("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},dk("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}wc.document&&(this.index=ac.requestsCount++,ac.requests[this.index]=this)},ac.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},ac.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},ac.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},ac.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=ic:this.xhr.onreadystatechange=ic,e)try{this.xhr.abort()}catch(e){}wc.document&&delete ac.requests[this.index],this.xhr=null}},ac.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],o=0,i=n.length;o<i;o++)r.push(n[o]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},ac.prototype.hasXDR=function(){return"undefined"!=typeof wc.XDomainRequest&&!this.xs&&this.enablesXDR},ac.prototype.abort=function(){this.cleanup()},ac.requestsCount=0,ac.requests={},wc.document&&(wc.attachEvent?wc.attachEvent("onunload",cc):wc.addEventListener&&wc.addEventListener("beforeunload",cc,!1)),gk.Request=yk;var mk,vk=ck,bk=W_,wk=hc,_k=/\n/g,kk=/\\n/g;bk(hc,vk),hc.prototype.supportsBinary=!1,hc.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),vk.prototype.doClose.call(this)},hc.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},hc.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(kk,"\\\n"),this.area.value=e.replace(_k,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n};var Ak,xk={},Ek=Object.freeze({default:xk}),Ck=Ek&&xk||Ek,Sk=q_,Rk=L_,Tk=K_,Bk=W_,Dk=Q_,Ok=tk("engine.io-client:websocket"),Pk=wc.WebSocket||wc.MozWebSocket;if("undefined"==typeof window)try{Ak=Ck}catch(e){}var Ik=Pk;Ik||"undefined"!=typeof window||(Ik=Ak);var jk=fc;Bk(fc,Sk),fc.prototype.name="websocket",fc.prototype.supportsBinary=!0,fc.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new Ik(e):new Ik(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},fc.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},fc.prototype.write=function(e){function t(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var r=e.length,o=0,i=r;o<i;o++)!function(e){Rk.encodePacket(e,n.supportsBinary,function(o){if(!n.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),n.perMessageDeflate){var s="string"==typeof o?wc.Buffer.byteLength(o):o.length;s<n.perMessageDeflate.threshold&&(i.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,i)}catch(e){Ok("websocket closed before onclose event")}--r||t()})}(e[o])},fc.prototype.onClose=function(){Sk.prototype.onClose.call(this)},fc.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},fc.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=Dk()),this.supportsBinary||(e.b64=1),e=Tk.encode(e),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e},fc.prototype.check=function(){return!(!Ik||"__initialize"in Ik&&this.name===fc.prototype.name)};var Nk=E_,Uk=gk,Lk=wk,zk=jk,Mk=lc,Fk=zk,qk={polling:Mk,websocket:Fk},Yk=[].indexOf,Hk=function(e,t){if(Yk)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},$k=/^[\],:{}\s]*$/,Kk=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Wk=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Jk=/(?:^|:|,)(?:\s*\[)+/g,Zk=/^\s+/,Vk=/\s+$/,Xk=function(e){return"string"==typeof e&&e?(e=e.replace(Zk,"").replace(Vk,""),wc.JSON&&JSON.parse?JSON.parse(e):$k.test(e.replace(Kk,"@").replace(Wk,"]").replace(Jk,""))?new Function("return "+e)():void 0):null},Gk=qk,Qk=z_,eA=tk("engine.io-client:socket"),tA=Hk,nA=L_,rA=Gw,oA=Xk,iA=K_,sA=pc;pc.priorWebsocketSuccess=!1,Qk(pc.prototype),pc.protocol=nA.protocol,pc.Socket=pc,pc.Transport=q_,pc.transports=qk,pc.parser=L_,pc.prototype.createTransport=function(e){eA('creating transport "%s"',e);var t=dc(this.query);t.EIO=nA.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new Gk[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return n},pc.prototype.open=function(){var e;if(this.rememberUpgrade&&pc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},pc.prototype.setTransport=function(e){eA("setting transport %s",e.name);var t=this;this.transport&&(eA("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},pc.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;u=u||t}u||(eA('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!u)if("pong"===t.type&&"probe"===t.data){if(eA('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",c),!c)return;pc.priorWebsocketSuccess="websocket"===c.name,eA('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){u||"closed"!==h.readyState&&(eA("changing transport and sending upgrade packet"),a(),h.setTransport(c),c.send([{type:"upgrade"}]),h.emit("upgrade",c),c=null,h.upgrading=!1,h.flush())})}else{eA('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,h.emit("upgradeError",n)}}))}function n(){u||(u=!0,a(),c.close(),c=null)}function r(t){var r=new Error("probe error: "+t);r.transport=c.name,n(),eA('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",r)}function o(){r("transport closed")}function i(){r("socket closed")}function s(e){c&&e.name!==c.name&&(eA('"%s" works - aborting "%s"',e.name,c.name),n())}function a(){c.removeListener("open",t),c.removeListener("error",r),c.removeListener("close",o),h.removeListener("close",i),h.removeListener("upgrading",s)}eA('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),u=!1,h=this;pc.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",r),c.once("close",o),this.once("close",i),this.once("upgrading",s),c.open()},pc.prototype.onOpen=function(){if(eA("socket open"),this.readyState="open",pc.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){eA("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},pc.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(eA('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(oA(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else eA('packet received with socket readyState "%s"',this.readyState)},pc.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},pc.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},pc.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){eA("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},pc.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},pc.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},pc.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(eA("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},pc.prototype.write=pc.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},pc.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},pc.prototype.close=function(){function e(){r.onClose("forced close"),eA("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},pc.prototype.onError=function(e){eA("socket error %j",e),pc.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},pc.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){eA('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},pc.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~tA(this.transports,e[n])&&t.push(e[n]);return t};var aA=sA,cA=L_;aA.parser=cA;var uA=aA,hA=gc,fA=yc,lA=[].slice,pA=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=lA.call(arguments,2);return function(){return t.apply(e,n.concat(lA.call(arguments)))}},dA=e(function(e,t){function n(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var r=k_,o=z_,i=hA,s=fA,a=pA,c=e_("socket.io-client:socket"),u=R_;e.exports=t=n;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;o(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(h.hasOwnProperty(e))return f.apply(this,arguments),this;var t=i(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var o={type:n,data:t};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:r.CONNECT,query:this.query}):this.packet({type:r.CONNECT}))},n.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=i(arguments);c("sending ack %j",o);var s=u(o)?r.BINARY_ACK:r.ACK;t.packet({type:s,id:e,data:o})}}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}}),gA=mc;mc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},mc.prototype.reset=function(){this.attempts=0},mc.prototype.setMin=function(e){this.ms=e},mc.prototype.setMax=function(e){this.max=e},mc.prototype.setJitter=function(e){this.jitter=e};var yA=uA,mA=dA,vA=z_,bA=k_,wA=fA,_A=pA,kA=e_("socket.io-client:manager"),AA=Hk,xA=gA,EA=Object.prototype.hasOwnProperty,CA=vc;vc.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)EA.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},vc.prototype.updateSocketIds=function(){for(var e in this.nsps)EA.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},vA(vc.prototype),vc.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},vc.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},vc.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},vc.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},vc.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},vc.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},vc.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},vc.prototype.open=vc.prototype.connect=function(e,t){if(kA("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;kA("opening %s",this.uri),this.engine=yA(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=wA(n,"open",function(){r.onopen(),e&&e()}),i=wA(n,"error",function(t){if(kA("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;kA("connect attempt will timeout after %d",s);var a=setTimeout(function(){kA("connect attempt timed out after %d",s),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(o),this.subs.push(i),this},vc.prototype.onopen=function(){kA("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(wA(e,"data",_A(this,"ondata"))),this.subs.push(wA(e,"ping",_A(this,"onping"))),this.subs.push(wA(e,"pong",_A(this,"onpong"))),this.subs.push(wA(e,"error",_A(this,"onerror"))),this.subs.push(wA(e,"close",_A(this,"onclose"))),this.subs.push(wA(this.decoder,"decoded",_A(this,"ondecoded")))},vc.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},vc.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},vc.prototype.ondata=function(e){this.decoder.add(e)},vc.prototype.ondecoded=function(e){
this.emit("packet",e)},vc.prototype.onerror=function(e){kA("error",e),this.emitAll("error",e)},vc.prototype.socket=function(e,t){function n(){~AA(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[e];if(!r){r=new mA(this,e,t),this.nsps[e]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.engine.id}),this.autoConnect&&n()}return r},vc.prototype.destroy=function(e){var t=AA(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},vc.prototype.packet=function(e){kA("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},vc.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},vc.prototype.cleanup=function(){kA("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},vc.prototype.close=vc.prototype.disconnect=function(){kA("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},vc.prototype.onclose=function(e){kA("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},vc.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)kA("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();kA("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(kA("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(kA("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(kA("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},vc.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var SA=e(function(e,t){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=o(e),u=i.source,h=i.id,f=i.path,l=c[h]&&f in c[h].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||l;return p?(a("ignoring socket cache for %s",u),n=s(u,t)):(c[h]||(a("new io instance for %s",u),c[h]=s(u,t)),n=c[h]),i.query&&!t.query?t.query=i.query:t&&"object"==typeof t.query&&(t.query=r(t.query)),n.socket(i.path,t)}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var o=r_,i=k_,s=CA,a=e_("socket.io-client");e.exports=t=n;var c=t.managers={};t.protocol=i.protocol,t.connect=n,t.Manager=CA,t.Socket=dA}),RA=Rc("edgemesh:worker:store-asset"),TA=function(e){var t=e.key,n=e.contentType,r=e.blobUrl,o=e.stats,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Sw({priority:"mid",callback:function(){return Aw(r).then(function(e){var r=!1;return e.byteLength>Mw.client.chunkSize&&(e=Ev(e),r=!0),e=Lp(e),self.db.assets.put({id:t,blob:e,contentType:n,compressed:r}).then(function(){return e})}).then(function(e){s&&kl(self.io,{originId:parseInt(o.originId,10),assetId:parseInt(o.assetId,10),chunkId:o.chunkId,src:o.src,dst:o.dst,protocol:o.protocol,transferStart:o.transferStart,transferEnd:o.transferEnd,handshake:o.handshake,size:e.byteLength/1024,topic:o.topic,success:1}),i&&_l(self.io,{originId:parseInt(o.originId,10),assetId:parseInt(o.assetId,10),hubId:o.dst,assetUrl:o.assetUrl,size:e.byteLength/1024,contentType:o.contentType,checksum:o.checksum,topic:o.topic}),RA("asset registered %s",o.assetUrl),URL.revokeObjectURL(r)}).catch(function(e){RA("error registering asset %O",{err:e})})}})},BA=Rc("edgemesh:worker:delete-file"),DA=function(e,t){return new Sw({priority:"high",callback:function(){var n=e+"|"+t;return self.db.assets.delete(n).then(function(){BA("asset %s removed from hub.",n)})}})},OA=Rc("edgemesh:worker:io-events"),PA=function(e,t){var n=t.socket,r=t.host,o=t.level,i=t.func;try{return JSON.parse(e)}catch(t){var s=Zw,a="error parsing json",c={err:t,json:e};return ml(n,{host:r,level:o,code:s,func:i,message:a,input:c}),void self.bail({level:o,code:s,func:i,message:a,input:c})}},IA=function(e){e.on(Kw+"-RESPONSE",function(t){var n=self.id,r="error",o="worker.ioEvents.assetRegister";t=PA.call(self,t.data,{socket:e,host:n,level:r,func:o}),t&&(Array.isArray(t.success)?t.success.forEach(function(e,n){e||self.queue.enqueue(DA.call(self,t.OriginID[n],t.AssetID[n]))}):t.success||self.queue.enqueue(DA.call(self,t.OriginID,t.AssetID)))}),e.on(Yw+"-RESPONSE",function(t){var n=self.id,r="error",o="worker.ioEvents.syncDel";if(t=PA.call(self,t.data,{socket:e,host:n,level:r,func:o})){var i=t,s=i.AssetID,a=i.OriginID;0!==s.length&&(OA("syncing hub (delete)"),s.forEach(function(e,t){self.queue.enqueue(DA.call(self,a[t],e))}),OA("sync hub (delete) completed %s tasks",s.length))}})},jA=Rc("edgemesh:worker:pm-events"),NA=function(e){var t=e.data.data;switch(e.data.channel){case Jw:jA("worker register recieved"),self.id=t.hubId,self.host=t.host,self.io=SA("https://"+self.host+":9000"),self.io.on("connect",function(){jA("Worker socket %s connected.",self.io.id),self.queue.start(),IA.call(self,self.io)});break;case Fw:jA("dump debug recieved"),self.dumpDebug();break;case Ww:jA("asset store recieved"),self.queue.enqueue(TA.call(self,t,e.data.register,e.data.record));break;case $w:jA("hub enable recieved"),self.io.io.reconnect(),self.queue.start();break;case Hw:jA("hub disable recieved"),self.io.io.disconnect(),self.queue.stop()}},UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Function.prototype.$asyncbind=function e(t,n){function r(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,o){return function i(s){for(;s;){if(s.then)return s=s.then(i,r),o?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,o){try{var i=o?o(r):r;if(n===i)return n.reject(new TypeError("Promise resolution loop"));e(i)?i.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(i)}catch(e){n.reject(e)}}function n(){}function r(e){}function o(e,t){this.resolve=e,this.reject=t}function i(r,o){var i=new n;try{this._resolver(function(n){return e(n)?n.then(r,o):t(i,n,r)},function(e){t(i,e,o)})}catch(e){t(i,e,o)}return i}function s(e){this._resolver=e,this.then=i}return n.prototype={resolve:r,reject:r,then:o},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof process?"undefined":UA(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var o=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===o&&(n.splice(0,o),r=0)}}var n=[],r=0,o=1024;return function(o){n.push(o),n.length-r===1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":UA(e))))try{var r=0,i=e.then;if("function"==typeof i)return void i.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&o(function(){for(var r=0,o=t.c.length;r<o;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&o(function(){for(var n=0,o=t.length;n<o;n++)r(t[n],e)})}},then:function(e,n){var r=new t,i={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(i):this.c=[i];else{var s=this.state,a=this.v;o(function(){s(i,a)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var o=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return o.apply(t,arguments)}catch(e){return n(e)}}}};var LA=Rc("edgemesh:worker:sync-del"),zA=function e(){var t=this;return this.queue.clear("low"),new Sw({priority:"low",callback:function(){return function(){return new Promise(function(n,r){function o(){return n()}var i,s=function(e){return LA("error getting primary keys from database %O",{err:e}),ml(t.io,{level:"warn",host:t.id,func:e.func,code:e.code,string:e.string,input:{err:e}}),o.call(this)}.$asyncbind(this,r);try{return Rp(t.db).then(function(n){return i=n,0!==i.assets.length&&bl(t.io,{hubId:t.id,keys:i}),setTimeout(t.queue.enqueue.bind(t,e.call(t)),Mw.client.hubSyncDelay),o.call(this)}.$asyncbind(this,s),s)}catch(e){s(e)}}.$asyncbind(this))}()}})};Function.prototype.$asyncbind=function e(t,n){function r(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,o){return function i(s){for(;s;){if(s.then)return s=s.then(i,r),o?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,o){try{var i=o?o(r):r;if(n===i)return n.reject(new TypeError("Promise resolution loop"));e(i)?i.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(i)}catch(e){n.reject(e)}}function n(){}function r(e){}function o(e,t){this.resolve=e,this.reject=t}function i(r,o){var i=new n;try{this._resolver(function(n){return e(n)?n.then(r,o):t(i,n,r)},function(e){t(i,e,o)})}catch(e){t(i,e,o)}return i}function s(e){this._resolver=e,this.then=i}return n.prototype={resolve:r,reject:r,then:o},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof process?"undefined":UA(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var o=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===o&&(n.splice(0,o),r=0)}}var n=[],r=0,o=1024;return function(o){n.push(o),n.length-r===1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===("undefined"==typeof e?"undefined":UA(e))))try{var r=0,i=e.then;if("function"==typeof i)return void i.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&o(function(){for(var r=0,o=t.c.length;r<o;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&o(function(){for(var n=0,o=t.length;n<o;n++)r(t[n],e)})}},then:function(e,n){var r=new t,i={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(i):this.c=[i];else{var s=this.state,a=this.v;o(function(){s(i,a)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var o=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return o.apply(t,arguments)}catch(e){return n(e)}}}};var MA=Rc("edgemesh:worker");self.ua=navigator.userAgent,self.queue=new Cw({maxParallel:Mw.client.maxParallelJobs,processingFrequency:Mw.client.jobProcessingFrequency}),self.onmessage=NA.bind(self),self.dumpDebug=function(){var e={db:{open:!!self.db&&self.db.isOpen()},io:{id:self.io?self.io.id:"initial",connected:self.io?self.io.connected:"initial",disconnected:self.io?self.io.disconnected:"initial",query:self.io?self.io.query:"initial",uri:self.io?self.io.io.uri:"initial",readyState:self.io?self.io.io.readyState:"initial"},queue:self.queue?self.queue.getQueuedTasks():{}};self.postMessage({channel:qw,info:e})},self.bail=function(e){MA("bailing %O",e)},bc.call(self).then(function(e){e.success||console.log("unknown err"),self.queue.enqueue(zA.call(self))}).catch(function(e){MA("error setting up worker %O",e)})}();
