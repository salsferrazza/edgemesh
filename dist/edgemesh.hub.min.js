var Hub=function(){"use strict";function e(){}function t(e){"object"!=typeof e&&(e={}),this._identifier=e.identifier||"id",this._store=[],this._idx=[],e.emitEvents?(this._emitEvents=!0,this.events=new is):this._emitEvents=!1}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t){var n=t||0,r=ls;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function i(e,t,n){var r=t&&n||0,i=t||[],o=void 0!==(e=e||{}).clockseq?e.clockseq:ms,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),a=void 0!==e.nsecs?e.nsecs:bs+1,c=s-vs+(a-bs)/1e4;if(c<0&&void 0===e.clockseq&&(o=o+1&16383),(c<0||s>vs)&&void 0===e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");vs=s,bs=a,ms=o;var u=(1e4*(268435455&(s+=122192928e5))+a)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;var f=s/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var h=e.node||ys,l=0;l<6;++l)i[r+l]=h[l];return t||ps(i)}function o(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||hs)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||ps(i)}function s(e){if(!((e=String(e)).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Ts;case"days":case"day":case"d":return n*Cs;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ss;case"minutes":case"minute":case"mins":case"min":case"m":return n*xs;case"seconds":case"second":case"secs":case"sec":case"s":return n*Es;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function a(e){return e>=Cs?Math.round(e/Cs)+"d":e>=Ss?Math.round(e/Ss)+"h":e>=xs?Math.round(e/xs)+"m":e>=Es?Math.round(e/Es)+"s":e+"ms"}function c(e){return u(e,Cs,"day")||u(e,Ss,"hour")||u(e,xs,"minute")||u(e,Es,"second")||e+" ms"}function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function f(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function l(e){if(Os===setTimeout)return setTimeout(e,0);if((Os===f||!Os)&&setTimeout)return Os=setTimeout,setTimeout(e,0);try{return Os(e,0)}catch(t){try{return Os.call(null,e,0)}catch(t){return Os.call(this,e,0)}}}function d(e){if(Is===clearTimeout)return clearTimeout(e);if((Is===h||!Is)&&clearTimeout)return Is=clearTimeout,clearTimeout(e);try{return Is(e)}catch(t){try{return Is.call(null,e)}catch(t){return Is.call(this,e)}}}function p(){Ls&&js&&(Ls=!1,js.length?Ns=js.concat(Ns):Us=-1,Ns.length&&g())}function g(){if(!Ls){var e=l(p);Ls=!0;for(var t=Ns.length;t;){for(js=Ns,Ns=[];++Us<t;)js&&js[Us].run();Us=-1,t=Ns.length}js=null,Ls=!1,d(e)}}function y(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ns.push(new m(e,t)),1!==Ns.length||Ls||l(g)}function m(e,t){this.fun=e,this.array=t}function v(){}function b(e){throw new Error("process.binding is not supported")}function w(){return"/"}function _(e){throw new Error("process.chdir is not supported")}function k(){return 0}function A(e){var t=.001*Gs.call(Xs),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}function E(){return(new Date-Qs)/1e3}function x(e,t){return t={exports:{}},e(t,t.exports),t.exports}function S(e){if(!((e=String(e)).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*ua;case"days":case"day":case"d":return n*ca;case"hours":case"hour":case"hrs":case"hr":case"h":return n*aa;case"minutes":case"minute":case"mins":case"min":case"m":return n*sa;case"seconds":case"second":case"secs":case"sec":case"s":return n*oa;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function C(e){return e>=ca?Math.round(e/ca)+"d":e>=aa?Math.round(e/aa)+"h":e>=sa?Math.round(e/sa)+"m":e>=oa?Math.round(e/oa)+"s":e+"ms"}function T(e){return R(e,ca,"day")||R(e,aa,"hour")||R(e,sa,"minute")||R(e,oa,"second")||e+" ms"}function R(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function B(e,t){var n=e;t=t||ta.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(da("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),da("parse %s",e),n=ia(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}function D(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*ba;case"days":case"day":case"d":return n*va;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ma;case"minutes":case"minute":case"mins":case"min":case"m":return n*ya;case"seconds":case"second":case"secs":case"sec":case"s":return n*ga;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function P(e){return e>=va?Math.round(e/va)+"d":e>=ma?Math.round(e/ma)+"h":e>=ya?Math.round(e/ya)+"m":e>=ga?Math.round(e/ga)+"s":e+"ms"}function O(e){return I(e,va,"day")||I(e,ma,"hour")||I(e,ya,"minute")||I(e,ga,"second")||e+" ms"}function I(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function j(e){if(!e||"object"!=typeof e)return!1;if(xa(e)){for(var t=0,n=e.length;t<n;t++)if(j(e[t]))return!0;return!1}if("function"==typeof ta.Buffer&&ta.Buffer.isBuffer&&ta.Buffer.isBuffer(e)||"function"==typeof ta.ArrayBuffer&&e instanceof ArrayBuffer||Ca&&e instanceof Blob||Ta&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return j(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&j(e[r]))return!0;return!1}function N(e){return ta.Buffer&&ta.Buffer.isBuffer(e)||ta.ArrayBuffer&&e instanceof ArrayBuffer}function L(e,t){if(!e)return e;if(Pa(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Da(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=L(e[i],t);return r}if("object"==typeof e&&!(e instanceof Date)){r={};for(var o in e)r[o]=L(e[o],t);return r}return e}function U(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Da(e))for(var n=0;n<e.length;n++)e[n]=U(e[n],t);else if("object"==typeof e)for(var r in e)e[r]=U(e[r],t);return e}function M(e,t,n){function r(e,o){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(i=!0,t(e),t=n):0!==r.count||i||t(null,o)}var i=!1;return n=n||z,r.count=e,0===e?t():r}function z(){}function F(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function q(e,t){t=t||{};var n=new Ka;F(e);for(var r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}function Y(e,t){return F(e),new Blob(e,t||{})}function H(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}function K(e){var t="";do{t=nc[e%rc]+t,e=Math.floor(e/rc)}while(e>0);return t}function W(e){var t=0;for(sc=0;sc<e.length;sc++)t=t*rc+ic[e.charAt(sc)];return t}function $(){var e=K(+new Date);return e!==Qa?(oc=0,Qa=e):e+"."+K(oc++)}function V(e){var t=e&&e.forceBase64;fc&&!t||(this.supportsBinary=!1),Ga.call(this,e)}function Z(){}function J(e){if(uc.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,ta.location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!==ta.location.hostname||n!==e.port,this.xs=e.secure!==t}}function X(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function G(){for(var e in X.requests)X.requests.hasOwnProperty(e)&&X.requests[e].abort()}function Q(){}function ee(e){uc.call(this,e),this.query=this.query||{},pc||(ta.___eio||(ta.___eio=[]),pc=ta.___eio),this.index=pc.length;var t=this;pc.push(function(e){t.onData(e)}),this.query.j=this.index,ta.document&&ta.addEventListener&&ta.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=Q)},!1)}function te(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=_c&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(kc=yc),Ga.call(this,e)}function ne(e){var t=!1,n=!1,r=!1!==e.jsonp;if(ta.location){var i="https:"===location.protocol,o=location.port;o||(o=i?443:80),t=e.hostname!==location.hostname||o!==e.port,n=e.secure!==i}if(e.xdomain=t,e.xscheme=n,"open"in new Ma(e)&&!e.forceJSONP)return new lc(e);if(!r)throw new Error("JSONP disabled");return new gc(e)}function re(e,t){if(!(this instanceof re))return new re(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=ia(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=ia(t.host).host),this.secure=null!=t.secure?t.secure:ta.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(ta.location?location.hostname:"localhost"),this.port=t.port||(ta.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=ec.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode;var n="object"==typeof ta&&ta;n.global===n&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function ie(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function oe(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}function se(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}function ae(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function ce(e,t){if(!(this instanceof ce))return new ce(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Mc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||La;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}function ue(){}function fe(e){"object"!=typeof e&&(e={}),this._identifier=e.identifier||"id",this._store=[],this._idx=[],e.emitEvents?(this._emitEvents=!0,this.events=new Hc):this._emitEvents=!1}function he(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Jc;case"days":case"day":case"d":return n*Zc;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Vc;case"minutes":case"minute":case"mins":case"min":case"m":return n*$c;case"seconds":case"second":case"secs":case"sec":case"s":return n*Wc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function le(e){return e>=Zc?Math.round(e/Zc)+"d":e>=Vc?Math.round(e/Vc)+"h":e>=$c?Math.round(e/$c)+"m":e>=Wc?Math.round(e/Wc)+"s":e+"ms"}function de(e){return pe(e,Zc,"day")||pe(e,Vc,"hour")||pe(e,$c,"minute")||pe(e,Wc,"second")||e+" ms"}function pe(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function ge(e){return new Promise(function(t,n){(function(){return t()}).$asyncbind(this,n);var r,i,o=function(e){return t(e)}.$asyncbind(this,n);try{return vu("temporary").then(function(n){return r=n,bu(e).then(function(e){return i=e,t({quota:r,keys:i})}.$asyncbind(this,o),o)}.$asyncbind(this,o),o)}catch(e){o(e)}}.$asyncbind(this))}function ye(e){for(var t=e.length;--t>=0;)e[t]=0}function me(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function ve(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function be(e){return e<256?wf[e]:wf[256+(e>>>7)]}function we(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function _e(e,t,n){e.bi_valid>cf-n?(e.bi_buf|=t<<e.bi_valid&65535,we(e,e.bi_buf),e.bi_buf=t>>cf-e.bi_valid,e.bi_valid+=n-cf):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function ke(e,t,n){_e(e,n[2*t],n[2*t+1])}function Ae(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Ee(e){16===e.bi_valid?(we(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function xe(e,t){var n,r,i,o,s,a,c=t.dyn_tree,u=t.max_code,f=t.stat_desc.static_tree,h=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=af;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<sf;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,g++),c[2*r+1]=o,r>u||(e.bl_count[o]++,s=0,r>=d&&(s=l[r-d]),a=c[2*r],e.opt_len+=a*(o+s),h&&(e.static_len+=a*(f[2*r+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}function Se(e,t,n){var r,i,o=new Array(af+1),s=0;for(r=1;r<=af;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=Ae(o[a]++,a))}}function Ce(){var e,t,n,r,i,o=new Array(af+1);for(n=0,r=0;r<ef-1;r++)for(kf[r]=n,e=0;e<1<<pf[r];e++)_f[n++]=r;for(_f[n-1]=r,i=0,r=0;r<16;r++)for(Af[r]=i,e=0;e<1<<gf[r];e++)wf[i++]=r;for(i>>=7;r<rf;r++)for(Af[r]=i<<7,e=0;e<1<<gf[r]-7;e++)wf[256+i++]=r;for(t=0;t<=af;t++)o[t]=0;for(e=0;e<=143;)vf[2*e+1]=8,e++,o[8]++;for(;e<=255;)vf[2*e+1]=9,e++,o[9]++;for(;e<=279;)vf[2*e+1]=7,e++,o[7]++;for(;e<=287;)vf[2*e+1]=8,e++,o[8]++;for(Se(vf,nf+1,o),e=0;e<rf;e++)bf[2*e+1]=5,bf[2*e]=Ae(e,5);Ef=new me(vf,pf,tf+1,nf,af),xf=new me(bf,gf,0,rf,af),Sf=new me(new Array(0),yf,0,of,uf)}function Te(e){var t;for(t=0;t<nf;t++)e.dyn_ltree[2*t]=0;for(t=0;t<rf;t++)e.dyn_dtree[2*t]=0;for(t=0;t<of;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*ff]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Re(e){e.bi_valid>8?we(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Be(e,t,n,r){Re(e),r&&(we(e,n),we(e,~n)),Wu.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function De(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function Pe(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&De(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!De(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function Oe(e,t,n){var r,i,o,s,a=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?ke(e,i,t):(ke(e,(o=_f[i])+tf+1,t),0!==(s=pf[o])&&_e(e,i-=kf[o],s),ke(e,o=be(--r),n),0!==(s=gf[o])&&_e(e,r-=Af[o],s))}while(a<e.last_lit);ke(e,ff,t)}function Ie(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=sf,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)Pe(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Pe(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,Pe(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],xe(e,t),Se(o,u,e.bl_count)}function je(e,t,n){var r,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*hf]++):a<=10?e.bl_tree[2*lf]++:e.bl_tree[2*df]++,a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))}function Ne(e,t,n){var r,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<c&&i===s)){if(a<u)do{ke(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(ke(e,i,e.bl_tree),a--),ke(e,hf,e.bl_tree),_e(e,a-3,2)):a<=10?(ke(e,lf,e.bl_tree),_e(e,a-3,3)):(ke(e,df,e.bl_tree),_e(e,a-11,7));a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4)}}function Le(e){var t;for(je(e,e.dyn_ltree,e.l_desc.max_code),je(e,e.dyn_dtree,e.d_desc.max_code),Ie(e,e.bl_desc),t=of-1;t>=3&&0===e.bl_tree[2*mf[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Ue(e,t,n,r){var i;for(_e(e,t-257,5),_e(e,n-1,5),_e(e,r-4,4),i=0;i<r;i++)_e(e,e.bl_tree[2*mf[i]+1],3);Ne(e,e.dyn_ltree,t-1),Ne(e,e.dyn_dtree,n-1)}function Me(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Vu;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Zu;for(t=32;t<tf;t++)if(0!==e.dyn_ltree[2*t])return Zu;return Vu}function ze(e){Tf||(Ce(),Tf=!0),e.l_desc=new ve(e.dyn_ltree,Ef),e.d_desc=new ve(e.dyn_dtree,xf),e.bl_desc=new ve(e.bl_tree,Sf),e.bi_buf=0,e.bi_valid=0,Te(e)}function Fe(e,t,n,r){_e(e,(Xu<<1)+(r?1:0),3),Be(e,t,n,!0)}function qe(e){_e(e,Gu<<1,3),ke(e,ff,vf),Ee(e)}function Ye(e,t,n,r){var i,o,s=0;e.level>0?(e.strm.data_type===Ju&&(e.strm.data_type=Me(e)),Ie(e,e.l_desc),Ie(e,e.d_desc),s=Le(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?Fe(e,t,n,r):e.strategy===$u||o===i?(_e(e,(Gu<<1)+(r?1:0),3),Oe(e,vf,bf)):(_e(e,(Qu<<1)+(r?1:0),3),Ue(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Oe(e,e.dyn_ltree,e.dyn_dtree)),Te(e),r&&Re(e)}function He(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(_f[n]+tf+1)]++,e.dyn_dtree[2*be(t)]++),e.last_lit===e.lit_bufsize-1}function Ke(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}function We(e,t,n,r){var i=Df,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}function $e(e,t){return e.msg=Of[t],t}function Ve(e){return(e<<1)-(e>4?9:0)}function Ze(e){for(var t=e.length;--t>=0;)e[t]=0}function Je(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Wu.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function Xe(e,t){Rf._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Je(e.strm)}function Ge(e,t){e.pending_buf[e.pending++]=t}function Qe(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function et(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,Wu.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=Bf(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Pf(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function tt(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-ch?e.strstart-(e.w_size-ch):0,u=e.window,f=e.w_mask,h=e.prev,l=e.strstart+ah,d=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,u[n+s]===p&&u[n+s-1]===d&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<l);if(r=ah-(l-o),o=l-ah,r>s){if(e.match_start=t,s=r,r>=a)break;d=u[o+s-1],p=u[o+s]}}}while((t=h[t&f])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead}function nt(e){var t,n,r,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ch)){Wu.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=s?r-s:0}while(--n);t=n=s;do{r=e.prev[--t],e.prev[t]=r>=s?r-s:0}while(--n);i+=s}if(0===e.strm.avail_in)break;if(n=et(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=sh)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+sh-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<sh)););}while(e.lookahead<ch&&0!==e.strm.avail_in)}function rt(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(nt(e),0===e.lookahead&&t===If)return mh;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Xe(e,!1),0===e.strm.avail_out))return mh;if(e.strstart-e.block_start>=e.w_size-ch&&(Xe(e,!1),0===e.strm.avail_out))return mh}return e.insert=0,t===Lf?(Xe(e,!0),0===e.strm.avail_out?bh:wh):(e.strstart>e.block_start&&(Xe(e,!1),e.strm.avail_out),mh)}function it(e,t){for(var n,r;;){if(e.lookahead<ch){if(nt(e),e.lookahead<ch&&t===If)return mh;if(0===e.lookahead)break}if(n=0,e.lookahead>=sh&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sh-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ch&&(e.match_length=tt(e,n)),e.match_length>=sh)if(r=Rf._tr_tally(e,e.strstart-e.match_start,e.match_length-sh),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=sh){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sh-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Rf._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Xe(e,!1),0===e.strm.avail_out))return mh}return e.insert=e.strstart<sh-1?e.strstart:sh-1,t===Lf?(Xe(e,!0),0===e.strm.avail_out?bh:wh):e.last_lit&&(Xe(e,!1),0===e.strm.avail_out)?mh:vh}function ot(e,t){for(var n,r,i;;){if(e.lookahead<ch){if(nt(e),e.lookahead<ch&&t===If)return mh;if(0===e.lookahead)break}if(n=0,e.lookahead>=sh&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sh-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=sh-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ch&&(e.match_length=tt(e,n),e.match_length<=5&&(e.strategy===Kf||e.match_length===sh&&e.strstart-e.match_start>4096)&&(e.match_length=sh-1)),e.prev_length>=sh&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-sh,r=Rf._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-sh),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sh-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=sh-1,e.strstart++,r&&(Xe(e,!1),0===e.strm.avail_out))return mh}else if(e.match_available){if((r=Rf._tr_tally(e,0,e.window[e.strstart-1]))&&Xe(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return mh}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Rf._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<sh-1?e.strstart:sh-1,t===Lf?(Xe(e,!0),0===e.strm.avail_out?bh:wh):e.last_lit&&(Xe(e,!1),0===e.strm.avail_out)?mh:vh}function st(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=ah){if(nt(e),e.lookahead<=ah&&t===If)return mh;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=sh&&e.strstart>0&&(i=e.strstart-1,(r=s[i])===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+ah;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=ah-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=sh?(n=Rf._tr_tally(e,1,e.match_length-sh),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Rf._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Xe(e,!1),0===e.strm.avail_out))return mh}return e.insert=0,t===Lf?(Xe(e,!0),0===e.strm.avail_out?bh:wh):e.last_lit&&(Xe(e,!1),0===e.strm.avail_out)?mh:vh}function at(e,t){for(var n;;){if(0===e.lookahead&&(nt(e),0===e.lookahead)){if(t===If)return mh;break}if(e.match_length=0,n=Rf._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Xe(e,!1),0===e.strm.avail_out))return mh}return e.insert=0,t===Lf?(Xe(e,!0),0===e.strm.avail_out?bh:wh):e.last_lit&&(Xe(e,!1),0===e.strm.avail_out)?mh:vh}function ct(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function ut(e){e.window_size=2*e.w_size,Ze(e.head),e.max_lazy_match=Cf[e.level].max_lazy,e.good_match=Cf[e.level].good_length,e.nice_match=Cf[e.level].nice_length,e.max_chain_length=Cf[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=sh-1,e.match_available=0,e.ins_h=0}function ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Wu.Buf16(2*ih),this.dyn_dtree=new Wu.Buf16(2*(2*nh+1)),this.bl_tree=new Wu.Buf16(2*(2*rh+1)),Ze(this.dyn_ltree),Ze(this.dyn_dtree),Ze(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Wu.Buf16(oh+1),this.heap=new Wu.Buf16(2*th+1),Ze(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Wu.Buf16(2*th+1),Ze(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Jf,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?fh:gh,e.adler=2===t.wrap?0:1,t.last_flush=If,Rf._tr_init(t),Mf):$e(e,Ff)}function lt(e){var t=ht(e);return t===Mf&&ut(e.state),t}function dt(e,t){return e&&e.state?2!==e.state.wrap?Ff:(e.state.gzhead=t,Mf):Ff}function pt(e,t,n,r,i,o){if(!e)return Ff;var s=1;if(t===Hf&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>Gf||n!==Xf||r<8||r>15||t<0||t>9||o<0||o>Vf)return $e(e,Ff);8===r&&(r=9);var a=new ft;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+sh-1)/sh),a.window=new Wu.Buf8(2*a.w_size),a.head=new Wu.Buf16(a.hash_size),a.prev=new Wu.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Wu.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,lt(e)}function gt(e,t){return pt(e,t,Xf,Qf,eh,Zf)}function yt(e,t){var n,r,i,o;if(!e||!e.state||t>Uf||t<0)return e?$e(e,Ff):Ff;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===yh&&t!==Lf)return $e(e,0===e.avail_out?Yf:Ff);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===fh)if(2===r.wrap)e.adler=0,Ge(r,31),Ge(r,139),Ge(r,8),r.gzhead?(Ge(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ge(r,255&r.gzhead.time),Ge(r,r.gzhead.time>>8&255),Ge(r,r.gzhead.time>>16&255),Ge(r,r.gzhead.time>>24&255),Ge(r,9===r.level?2:r.strategy>=Wf||r.level<2?4:0),Ge(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ge(r,255&r.gzhead.extra.length),Ge(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Pf(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=hh):(Ge(r,0),Ge(r,0),Ge(r,0),Ge(r,0),Ge(r,0),Ge(r,9===r.level?2:r.strategy>=Wf||r.level<2?4:0),Ge(r,_h),r.status=gh);else{var s=Xf+(r.w_bits-8<<4)<<8;s|=(r.strategy>=Wf||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=uh),s+=31-s%31,r.status=gh,Qe(r,s),0!==r.strstart&&(Qe(r,e.adler>>>16),Qe(r,65535&e.adler)),e.adler=1}if(r.status===hh)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=Pf(e.adler,r.pending_buf,r.pending-i,i)),Je(e),i=r.pending,r.pending!==r.pending_buf_size));)Ge(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=Pf(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=lh)}else r.status=lh;if(r.status===lh)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Pf(e.adler,r.pending_buf,r.pending-i,i)),Je(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ge(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=Pf(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=dh)}else r.status=dh;if(r.status===dh)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Pf(e.adler,r.pending_buf,r.pending-i,i)),Je(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ge(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=Pf(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=ph)}else r.status=ph;if(r.status===ph&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Je(e),r.pending+2<=r.pending_buf_size&&(Ge(r,255&e.adler),Ge(r,e.adler>>8&255),e.adler=0,r.status=gh)):r.status=gh),0!==r.pending){if(Je(e),0===e.avail_out)return r.last_flush=-1,Mf}else if(0===e.avail_in&&Ve(t)<=Ve(n)&&t!==Lf)return $e(e,Yf);if(r.status===yh&&0!==e.avail_in)return $e(e,Yf);if(0!==e.avail_in||0!==r.lookahead||t!==If&&r.status!==yh){var a=r.strategy===Wf?at(r,t):r.strategy===$f?st(r,t):Cf[r.level].func(r,t);if(a!==bh&&a!==wh||(r.status=yh),a===mh||a===bh)return 0===e.avail_out&&(r.last_flush=-1),Mf;if(a===vh&&(t===jf?Rf._tr_align(r):t!==Uf&&(Rf._tr_stored_block(r,0,0,!1),t===Nf&&(Ze(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Je(e),0===e.avail_out))return r.last_flush=-1,Mf}return t!==Lf?Mf:r.wrap<=0?zf:(2===r.wrap?(Ge(r,255&e.adler),Ge(r,e.adler>>8&255),Ge(r,e.adler>>16&255),Ge(r,e.adler>>24&255),Ge(r,255&e.total_in),Ge(r,e.total_in>>8&255),Ge(r,e.total_in>>16&255),Ge(r,e.total_in>>24&255)):(Qe(r,e.adler>>>16),Qe(r,65535&e.adler)),Je(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Mf:zf)}function mt(e){var t;return e&&e.state?(t=e.state.status)!==fh&&t!==hh&&t!==lh&&t!==dh&&t!==ph&&t!==gh&&t!==yh?$e(e,Ff):(e.state=null,t===gh?$e(e,qf):Mf):Ff}function vt(e,t){var n,r,i,o,s,a,c,u,f=t.length;if(!e||!e.state)return Ff;if(n=e.state,2===(o=n.wrap)||1===o&&n.status!==fh||n.lookahead)return Ff;for(1===o&&(e.adler=Bf(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(Ze(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new Wu.Buf8(n.w_size),Wu.arraySet(u,t,f-n.w_size,n.w_size,0),t=u,f=n.w_size),s=e.avail_in,a=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,nt(n);n.lookahead>=sh;){r=n.strstart,i=n.lookahead-(sh-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+sh-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=sh-1,nt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=sh-1,n.match_available=0,e.next_in=a,e.input=c,e.avail_in=s,n.wrap=o,Mf}function bt(e,t){if(t<65537&&(e.subarray&&Eh||!e.subarray&&Ah))return String.fromCharCode.apply(null,Wu.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}function wt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function _t(e){if(!(this instanceof _t))return new _t(e);this.options=Wu.assign({level:Dh,method:Oh,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ph,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Th,this.strm.avail_out=0;var n=kh.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Bh)throw new Error(Of[n]);if(t.header&&kh.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?Ch.string2buf(t.dictionary):"[object ArrayBuffer]"===Rh.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=kh.deflateSetDictionary(this.strm,r))!==Bh)throw new Error(Of[n]);this._dict_set=!0}}function kt(e,t){var n=new _t(t);if(n.push(e,!0),n.err)throw n.msg||Of[n.err];return n.result}function At(e,t){return t=t||{},t.raw=!0,kt(e,t)}function Et(e,t){return t=t||{},t.gzip=!0,kt(e,t)}function xt(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function St(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Wu.Buf16(320),this.work=new Wu.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ct(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=rl,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Wu.Buf32(jl),t.distcode=t.distdyn=new Wu.Buf32(Nl),t.sane=1,t.back=-1,Zh):Gh}function Tt(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Ct(e)):Gh}function Rt(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Gh:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Tt(e))):Gh}function Bt(e,t){var n,r;return e?(r=new St,e.state=r,r.window=null,(n=Rt(e,t))!==Zh&&(e.state=null),n):Gh}function Dt(e){return Bt(e,Ll)}function Pt(e){if(Ul){var t;for(Ih=new Wu.Buf32(512),jh=new Wu.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(qh(Hh,e.lens,0,288,Ih,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;qh(Kh,e.lens,0,32,jh,0,e.work,{bits:5}),Ul=!1}e.lencode=Ih,e.lenbits=9,e.distcode=jh,e.distbits=5}function Ot(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Wu.Buf8(o.wsize)),r>=o.wsize?(Wu.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),Wu.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(Wu.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function It(e,t){var n,r,i,o,s,a,c,u,f,h,l,d,p,g,y,m,v,b,w,_,k,A,E,x,S=0,C=new Wu.Buf8(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Gh;(n=e.state).mode===pl&&(n.mode=gl),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,u=n.hold,f=n.bits,h=a,l=c,A=Zh;e:for(;;)switch(n.mode){case rl:if(0===n.wrap){n.mode=gl;break}for(;f<16;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(2&n.wrap&&35615===u){n.check=0,C[0]=255&u,C[1]=u>>>8&255,n.check=Pf(n.check,C,2,0),u=0,f=0,n.mode=il;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=Pl;break}if((15&u)!==nl){e.msg="unknown compression method",n.mode=Pl;break}if(u>>>=4,f-=4,k=8+(15&u),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=Pl;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&u?ll:pl,u=0,f=0;break;case il:for(;f<16;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(n.flags=u,(255&n.flags)!==nl){e.msg="unknown compression method",n.mode=Pl;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Pl;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=Pf(n.check,C,2,0)),u=0,f=0,n.mode=ol;case ol:for(;f<32;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}n.head&&(n.head.time=u),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,n.check=Pf(n.check,C,4,0)),u=0,f=0,n.mode=sl;case sl:for(;f<16;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=Pf(n.check,C,2,0)),u=0,f=0,n.mode=al;case al:if(1024&n.flags){for(;f<16;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(C[0]=255&u,C[1]=u>>>8&255,n.check=Pf(n.check,C,2,0)),u=0,f=0}else n.head&&(n.head.extra=null);n.mode=cl;case cl:if(1024&n.flags&&((d=n.length)>a&&(d=a),d&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Wu.arraySet(n.head.extra,r,o,d,k)),512&n.flags&&(n.check=Pf(n.check,r,d,o)),a-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=ul;case ul:if(2048&n.flags){if(0===a)break e;d=0;do{k=r[o+d++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&d<a);if(512&n.flags&&(n.check=Pf(n.check,r,d,o)),a-=d,o+=d,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=fl;case fl:if(4096&n.flags){if(0===a)break e;d=0;do{k=r[o+d++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&d<a);if(512&n.flags&&(n.check=Pf(n.check,r,d,o)),a-=d,o+=d,k)break e}else n.head&&(n.head.comment=null);n.mode=hl;case hl:if(512&n.flags){for(;f<16;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Pl;break}u=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pl;break;case ll:for(;f<32;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}e.adler=n.check=xt(u),u=0,f=0,n.mode=dl;case dl:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=f,Xh;e.adler=n.check=1,n.mode=pl;case pl:if(t===$h||t===Vh)break e;case gl:if(n.last){u>>>=7&f,f-=7&f,n.mode=Rl;break}for(;f<3;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}switch(n.last=1&u,u>>>=1,f-=1,3&u){case 0:n.mode=yl;break;case 1:if(Pt(n),n.mode=kl,t===Vh){u>>>=2,f-=2;break e}break;case 2:n.mode=bl;break;case 3:e.msg="invalid block type",n.mode=Pl}u>>>=2,f-=2;break;case yl:for(u>>>=7&f,f-=7&f;f<32;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Pl;break}if(n.length=65535&u,u=0,f=0,n.mode=ml,t===Vh)break e;case ml:n.mode=vl;case vl:if(d=n.length){if(d>a&&(d=a),d>c&&(d=c),0===d)break e;Wu.arraySet(i,r,o,d,s),a-=d,o+=d,c-=d,s+=d,n.length-=d;break}n.mode=pl;break;case bl:for(;f<14;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(n.nlen=257+(31&u),u>>>=5,f-=5,n.ndist=1+(31&u),u>>>=5,f-=5,n.ncode=4+(15&u),u>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Pl;break}n.have=0,n.mode=wl;case wl:for(;n.have<n.ncode;){for(;f<3;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}n.lens[T[n.have++]]=7&u,u>>>=3,f-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},A=qh(Yh,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,A){e.msg="invalid code lengths set",n.mode=Pl;break}n.have=0,n.mode=_l;case _l:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[u&(1<<n.lenbits)-1],y=S>>>24,m=S>>>16&255,v=65535&S,!(y<=f);){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(v<16)u>>>=y,f-=y,n.lens[n.have++]=v;else{if(16===v){for(x=y+2;f<x;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(u>>>=y,f-=y,0===n.have){e.msg="invalid bit length repeat",n.mode=Pl;break}k=n.lens[n.have-1],d=3+(3&u),u>>>=2,f-=2}else if(17===v){for(x=y+3;f<x;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}f-=y,k=0,d=3+(7&(u>>>=y)),u>>>=3,f-=3}else{for(x=y+7;f<x;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}f-=y,k=0,d=11+(127&(u>>>=y)),u>>>=7,f-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Pl;break}for(;d--;)n.lens[n.have++]=k}}if(n.mode===Pl)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Pl;break}if(n.lenbits=9,E={bits:n.lenbits},A=qh(Hh,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,A){e.msg="invalid literal/lengths set",n.mode=Pl;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},A=qh(Kh,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,A){e.msg="invalid distances set",n.mode=Pl;break}if(n.mode=kl,t===Vh)break e;case kl:n.mode=Al;case Al:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=f,Lh(e,l),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,u=n.hold,f=n.bits,n.mode===pl&&(n.back=-1);break}for(n.back=0;S=n.lencode[u&(1<<n.lenbits)-1],y=S>>>24,m=S>>>16&255,v=65535&S,!(y<=f);){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(m&&0==(240&m)){for(b=y,w=m,_=v;S=n.lencode[_+((u&(1<<b+w)-1)>>b)],y=S>>>24,m=S>>>16&255,v=65535&S,!(b+y<=f);){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}u>>>=b,f-=b,n.back+=b}if(u>>>=y,f-=y,n.back+=y,n.length=v,0===m){n.mode=Tl;break}if(32&m){n.back=-1,n.mode=pl;break}if(64&m){e.msg="invalid literal/length code",n.mode=Pl;break}n.extra=15&m,n.mode=El;case El:if(n.extra){for(x=n.extra;f<x;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=xl;case xl:for(;S=n.distcode[u&(1<<n.distbits)-1],y=S>>>24,m=S>>>16&255,v=65535&S,!(y<=f);){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(0==(240&m)){for(b=y,w=m,_=v;S=n.distcode[_+((u&(1<<b+w)-1)>>b)],y=S>>>24,m=S>>>16&255,v=65535&S,!(b+y<=f);){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}u>>>=b,f-=b,n.back+=b}if(u>>>=y,f-=y,n.back+=y,64&m){e.msg="invalid distance code",n.mode=Pl;break}n.offset=v,n.extra=15&m,n.mode=Sl;case Sl:if(n.extra){for(x=n.extra;f<x;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Pl;break}n.mode=Cl;case Cl:if(0===c)break e;if(d=l-c,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Pl;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),g=n.window}else g=i,p=s-n.offset,d=n.length;d>c&&(d=c),c-=d,n.length-=d;do{i[s++]=g[p++]}while(--d);0===n.length&&(n.mode=Al);break;case Tl:if(0===c)break e;i[s++]=n.length,c--,n.mode=Al;break;case Rl:if(n.wrap){for(;f<32;){if(0===a)break e;a--,u|=r[o++]<<f,f+=8}if(l-=c,e.total_out+=l,n.total+=l,l&&(e.adler=n.check=n.flags?Pf(n.check,i,l,s-l):Bf(n.check,i,l,s-l)),l=c,(n.flags?u:xt(u))!==n.check){e.msg="incorrect data check",n.mode=Pl;break}u=0,f=0}n.mode=Bl;case Bl:if(n.wrap&&n.flags){for(;f<32;){if(0===a)break e;a--,u+=r[o++]<<f,f+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Pl;break}u=0,f=0}n.mode=Dl;case Dl:A=Jh;break e;case Pl:A=Qh;break e;case Ol:return el;case Il:default:return Gh}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=f,(n.wsize||l!==e.avail_out&&n.mode<Pl&&(n.mode<Rl||t!==Wh))&&Ot(e,e.output,e.next_out,l-e.avail_out)?(n.mode=Ol,el):(h-=e.avail_in,l-=e.avail_out,e.total_in+=h,e.total_out+=l,n.total+=l,n.wrap&&l&&(e.adler=n.check=n.flags?Pf(n.check,i,l,e.next_out-l):Bf(n.check,i,l,e.next_out-l)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pl?128:0)+(n.mode===kl||n.mode===ml?256:0),(0===h&&0===l||t===Wh)&&A===Zh&&(A=tl),A)}function jt(e){if(!e||!e.state)return Gh;var t=e.state;return t.window&&(t.window=null),e.state=null,Zh}function Nt(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?Gh:(n.head=t,t.done=!1,Zh):Gh}function Lt(e,t){var n,r,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==dl?Gh:n.mode===dl&&(r=1,(r=Bf(r,t,i,0))!==n.check)?Qh:Ot(e,t,i,i)?(n.mode=Ol,el):(n.havedict=1,Zh):Gh}function Ut(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function Mt(e){if(!(this instanceof Mt))return new Mt(e);this.options=Wu.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Th,this.strm.avail_out=0;var n=Ml.inflateInit2(this.strm,t.windowBits);if(n!==zl.Z_OK)throw new Error(Of[n]);this.header=new Fl,Ml.inflateGetHeader(this.strm,this.header)}function zt(e,t){var n=new Mt(t);if(n.push(e,!0),n.err)throw n.msg||Of[n.err];return n.result}function Ft(e,t){return t=t||{},t.raw=!0,zt(e,t)}function qt(){Ql=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Jl[t]=e[t],Xl[e.charCodeAt(t)]=t;Xl["-".charCodeAt(0)]=62,Xl["_".charCodeAt(0)]=63}function Yt(e){Ql||qt();var t,n,r,i,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new Gl(3*a/4-o),r=o>0?a-4:a;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=Xl[e.charCodeAt(t)]<<18|Xl[e.charCodeAt(t+1)]<<12|Xl[e.charCodeAt(t+2)]<<6|Xl[e.charCodeAt(t+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=255&i;return 2===o?(i=Xl[e.charCodeAt(t)]<<2|Xl[e.charCodeAt(t+1)]>>4,s[c++]=255&i):1===o&&(i=Xl[e.charCodeAt(t)]<<10|Xl[e.charCodeAt(t+1)]<<4|Xl[e.charCodeAt(t+2)]>>2,s[c++]=i>>8&255,s[c++]=255&i),s}function Ht(e){return Jl[e>>18&63]+Jl[e>>12&63]+Jl[e>>6&63]+Jl[63&e]}function Kt(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(Ht(r));return i.join("")}function Wt(e){Ql||qt();for(var t,n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(Kt(e,s,s+16383>a?a:s+16383));return 1===r?(t=e[n-1],i+=Jl[t>>2],i+=Jl[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=Jl[t>>10],i+=Jl[t>>4&63],i+=Jl[t<<2&63],i+="="),o.push(i),o.join("")}function $t(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,f=-7,h=n?i-1:0,l=n?-1:1,d=e[t+h];for(h+=l,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+h],h+=l,f-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)}function Vt(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,f=(1<<u)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*g}function Zt(){return Xt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Jt(e,t){if(Zt()<t)throw new RangeError("Invalid typed array length");return Xt.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Xt.prototype:(null===e&&(e=new Xt(t)),e.length=t),e}function Xt(e,t,n){if(!(Xt.TYPED_ARRAY_SUPPORT||this instanceof Xt))return new Xt(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return tn(this,e)}return Gt(this,e,t,n)}function Gt(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?on(e,t,n,r):"string"==typeof t?nn(e,t,n):sn(e,t)}function Qt(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function en(e,t,n,r){return Qt(t),t<=0?Jt(e,t):void 0!==n?"string"==typeof r?Jt(e,t).fill(n,r):Jt(e,t).fill(n):Jt(e,t)}function tn(e,t){if(Qt(t),e=Jt(e,t<0?0:0|an(t)),!Xt.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function nn(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Xt.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|un(t,n),i=(e=Jt(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function rn(e,t){var n=t.length<0?0:0|an(t.length);e=Jt(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function on(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Xt.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Xt.prototype:e=rn(e,t),e}function sn(e,t){if(cn(t)){var n=0|an(t.length);return 0===(e=Jt(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||qn(t.length)?Jt(e,0):rn(e,t);if("Buffer"===t.type&&td(t.data))return rn(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function an(e){if(e>=Zt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Zt().toString(16)+" bytes");return 0|e}function cn(e){return!(null==e||!e._isBuffer)}function un(e,t){if(cn(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ln(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return zn(e).length;default:if(r)return Ln(e).length;t=(""+t).toLowerCase(),r=!0}}function fn(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return xn(this,t,n);case"utf8":case"utf-8":return _n(this,t,n);case"ascii":return An(this,t,n);case"latin1":case"binary":return En(this,t,n);case"base64":return wn(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Sn(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function hn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ln(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Xt.from(t,r)),cn(t))return 0===t.length?-1:dn(e,t,n,r,i);if("number"==typeof t)return t&=255,Xt.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):dn(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function dn(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}var u;if(i){var f=-1;for(u=n;u<a;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*s}else-1!==f&&(u-=u-f),f=-1}else for(n+c>a&&(n=a-c),u=n;u>=0;u--){for(var h=!0,l=0;l<c;l++)if(o(e,u+l)!==o(t,l)){h=!1;break}if(h)return u}return-1}function pn(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function gn(e,t,n,r){return Fn(Ln(t,e.length-n),e,n,r)}function yn(e,t,n,r){return Fn(Un(t),e,n,r)}function mn(e,t,n,r){return yn(e,t,n,r)}function vn(e,t,n,r){return Fn(zn(t),e,n,r)}function bn(e,t,n,r){return Fn(Mn(t,e.length-n),e,n,r)}function wn(e,t,n){return Wt(0===t&&n===e.length?e:e.slice(t,n))}function _n(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var c,u,f,h;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(c=e[i+1]))&&(h=(31&o)<<6|63&c)>127&&(s=h);break;case 3:c=e[i+1],u=e[i+2],128==(192&c)&&128==(192&u)&&(h=(15&o)<<12|(63&c)<<6|63&u)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:c=e[i+1],u=e[i+2],f=e[i+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(h=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return kn(r)}function kn(e){var t=e.length;if(t<=nd)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=nd));return n}function An(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function En(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function xn(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Nn(e[o]);return i}function Sn(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Cn(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Tn(e,t,n,r,i,o){if(!cn(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Rn(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Bn(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Dn(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Pn(e,t,n,r,i){return i||Dn(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Vt(e,t,n,r,23,4),n+4}function On(e,t,n,r,i){return i||Dn(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Vt(e,t,n,r,52,8),n+8}function In(e){if((e=jn(e).replace(rd,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function jn(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Nn(e){return e<16?"0"+e.toString(16):e.toString(16)}function Ln(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Un(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Mn(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}function zn(e){return Yt(In(e))}function Fn(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function qn(e){return e!==e}function Yn(e){return null!=e&&(!!e._isBuffer||Hn(e)||Kn(e))}function Hn(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Kn(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Hn(e.slice(0,0))}function Wn(){}function $n(){$n.init.call(this)}function Vn(e){return void 0===e._maxListeners?$n.defaultMaxListeners:e._maxListeners}function Zn(e,t,n){if(t)e.call(n);else for(var r=e.length,i=or(e,r),o=0;o<r;++o)i[o].call(n)}function Jn(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=or(e,i),s=0;s<i;++s)o[s].call(n,r)}function Xn(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,s=or(e,o),a=0;a<o;++a)s[a].call(n,r,i)}function Gn(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var s=e.length,a=or(e,s),c=0;c<s;++c)a[c].call(n,r,i,o)}function Qn(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=or(e,i),s=0;s<i;++s)o[s].apply(n,r)}function er(e,t,n,r){var i,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(o=e._events,o?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=new Wn,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=Vn(e))&&i>0&&s.length>i){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,tr(a)}}else s=o[t]=n,++e._eventsCount;return e}function tr(e){"function"==typeof console.warn?console.warn(e):console.log(e)}function nr(e,t,n){function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}var i=!1;return r.listener=n,r}function rr(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function ir(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function or(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function sr(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function ar(e){if(!Ar(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(ur(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(fd,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])_r(s)||!Sr(s)?o+=" "+s:o+=" "+ur(s);return o}function cr(e,t){function n(){if(!r){if(ea.throwDeprecation)throw new Error(t);ea.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}if(Er(Ps.process))return function(){return cr(e,t).apply(this,arguments)};if(!0===ea.noDeprecation)return e;var r=!1;return n}function ur(e,t){var n={seen:[],stylize:hr};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),wr(t)?n.showHidden=t:t&&Dr(n,t),Er(n.showHidden)&&(n.showHidden=!1),Er(n.depth)&&(n.depth=2),Er(n.colors)&&(n.colors=!1),Er(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=fr),dr(n,e,n.depth)}function fr(e,t){var n=ur.styles[t];return n?"["+ur.colors[n][0]+"m"+e+"["+ur.colors[n][1]+"m":e}function hr(e,t){return e}function lr(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function dr(e,t,n){if(e.customInspect&&t&&Rr(t.inspect)&&t.inspect!==ur&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Ar(r)||(r=dr(e,r,n)),r}var i=pr(e,t);if(i)return i;var o=Object.keys(t),s=lr(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Tr(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return gr(t);if(0===o.length){if(Rr(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(xr(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Cr(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Tr(t))return gr(t)}var c="",u=!1,f=["{","}"];if(br(t)&&(u=!0,f=["[","]"]),Rr(t)&&(c=" [Function"+(t.name?": "+t.name:"")+"]"),xr(t)&&(c=" "+RegExp.prototype.toString.call(t)),Cr(t)&&(c=" "+Date.prototype.toUTCString.call(t)),Tr(t)&&(c=" "+gr(t)),0===o.length&&(!u||0==t.length))return f[0]+c+f[1];if(n<0)return xr(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return h=u?yr(e,t,n,s,o):o.map(function(r){return mr(e,t,n,s,r,u)}),e.seen.pop(),vr(h,c,f)}function pr(e,t){if(Er(t))return e.stylize("undefined","undefined");if(Ar(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return kr(t)?e.stylize(""+t,"number"):wr(t)?e.stylize(""+t,"boolean"):_r(t)?e.stylize("null","null"):void 0}function gr(e){return"["+Error.prototype.toString.call(e)+"]"}function yr(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)Pr(t,String(s))?o.push(mr(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(mr(e,t,n,r,i,!0))}),o}function mr(e,t,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),Pr(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=_r(n)?dr(e,c.value,null):dr(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),Er(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function vr(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function br(e){return Array.isArray(e)}function wr(e){return"boolean"==typeof e}function _r(e){return null===e}function kr(e){return"number"==typeof e}function Ar(e){return"string"==typeof e}function Er(e){return void 0===e}function xr(e){return Sr(e)&&"[object RegExp]"===Br(e)}function Sr(e){return"object"==typeof e&&null!==e}function Cr(e){return Sr(e)&&"[object Date]"===Br(e)}function Tr(e){return Sr(e)&&("[object Error]"===Br(e)||e instanceof Error)}function Rr(e){return"function"==typeof e}function Br(e){return Object.prototype.toString.call(e)}function Dr(e,t){if(!t||!Sr(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function Pr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Or(){gd=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ld[t]=e[t],dd[e.charCodeAt(t)]=t;dd["-".charCodeAt(0)]=62,dd["_".charCodeAt(0)]=63}function Ir(e){gd||Or();var t,n,r,i,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new pd(3*a/4-o),r=o>0?a-4:a;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=dd[e.charCodeAt(t)]<<18|dd[e.charCodeAt(t+1)]<<12|dd[e.charCodeAt(t+2)]<<6|dd[e.charCodeAt(t+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=255&i;return 2===o?(i=dd[e.charCodeAt(t)]<<2|dd[e.charCodeAt(t+1)]>>4,s[c++]=255&i):1===o&&(i=dd[e.charCodeAt(t)]<<10|dd[e.charCodeAt(t+1)]<<4|dd[e.charCodeAt(t+2)]>>2,s[c++]=i>>8&255,s[c++]=255&i),s}function jr(e){return ld[e>>18&63]+ld[e>>12&63]+ld[e>>6&63]+ld[63&e]}function Nr(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(jr(r));return i.join("")}function Lr(e){gd||Or();for(var t,n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(Nr(e,s,s+16383>a?a:s+16383));return 1===r?(t=e[n-1],i+=ld[t>>2],i+=ld[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=ld[t>>10],i+=ld[t>>4&63],i+=ld[t<<2&63],i+="="),o.push(i),o.join("")}function Ur(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,f=-7,h=n?i-1:0,l=n?-1:1,d=e[t+h];for(h+=l,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+h],h+=l,f-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)}function Mr(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,f=(1<<u)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*g}function zr(){return qr.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Fr(e,t){if(zr()<t)throw new RangeError("Invalid typed array length");return qr.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=qr.prototype:(null===e&&(e=new qr(t)),e.length=t),e}function qr(e,t,n){if(!(qr.TYPED_ARRAY_SUPPORT||this instanceof qr))return new qr(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Wr(this,e)}return Yr(this,e,t,n)}function Yr(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?Zr(e,t,n,r):"string"==typeof t?$r(e,t,n):Jr(e,t)}function Hr(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Kr(e,t,n,r){return Hr(t),t<=0?Fr(e,t):void 0!==n?"string"==typeof r?Fr(e,t).fill(n,r):Fr(e,t).fill(n):Fr(e,t)}function Wr(e,t){if(Hr(t),e=Fr(e,t<0?0:0|Xr(t)),!qr.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function $r(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!qr.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Qr(t,n),i=(e=Fr(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function Vr(e,t){var n=t.length<0?0:0|Xr(t.length);e=Fr(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Zr(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),qr.TYPED_ARRAY_SUPPORT?(e=t).__proto__=qr.prototype:e=Vr(e,t),e}function Jr(e,t){if(Gr(t)){var n=0|Xr(t.length);return 0===(e=Fr(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Pi(t.length)?Fr(e,0):Vr(e,t);if("Buffer"===t.type&&md(t.data))return Vr(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Xr(e){if(e>=zr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+zr().toString(16)+" bytes");return 0|e}function Gr(e){return!(null==e||!e._isBuffer)}function Qr(e,t){if(Gr(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ci(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Bi(e).length;default:if(r)return Ci(e).length;t=(""+t).toLowerCase(),r=!0}}function ei(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return gi(this,t,n);case"utf8":case"utf-8":return hi(this,t,n);case"ascii":return di(this,t,n);case"latin1":case"binary":return pi(this,t,n);case"base64":return fi(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yi(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function ti(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ni(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=qr.from(t,r)),Gr(t))return 0===t.length?-1:ri(e,t,n,r,i);if("number"==typeof t)return t&=255,qr.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):ri(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function ri(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}var u;if(i){var f=-1;for(u=n;u<a;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*s}else-1!==f&&(u-=u-f),f=-1}else for(n+c>a&&(n=a-c),u=n;u>=0;u--){for(var h=!0,l=0;l<c;l++)if(o(e,u+l)!==o(t,l)){h=!1;break}if(h)return u}return-1}function ii(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function oi(e,t,n,r){return Di(Ci(t,e.length-n),e,n,r)}function si(e,t,n,r){return Di(Ti(t),e,n,r)}function ai(e,t,n,r){return si(e,t,n,r)}function ci(e,t,n,r){return Di(Bi(t),e,n,r)}function ui(e,t,n,r){return Di(Ri(t,e.length-n),e,n,r)}function fi(e,t,n){return Lr(0===t&&n===e.length?e:e.slice(t,n))}function hi(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var c,u,f,h;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(c=e[i+1]))&&(h=(31&o)<<6|63&c)>127&&(s=h);break;case 3:c=e[i+1],u=e[i+2],128==(192&c)&&128==(192&u)&&(h=(15&o)<<12|(63&c)<<6|63&u)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:c=e[i+1],u=e[i+2],f=e[i+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(h=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return li(r)}function li(e){var t=e.length;if(t<=vd)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=vd));return n}function di(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function pi(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function gi(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Si(e[o]);return i}function yi(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function mi(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function vi(e,t,n,r,i,o){if(!Gr(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function bi(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function wi(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function _i(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ki(e,t,n,r,i){return i||_i(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Mr(e,t,n,r,23,4),n+4}function Ai(e,t,n,r,i){return i||_i(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Mr(e,t,n,r,52,8),n+8}function Ei(e){if((e=xi(e).replace(bd,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function xi(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Si(e){return e<16?"0"+e.toString(16):e.toString(16)}function Ci(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Ti(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Ri(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}function Bi(e){return Ir(Ei(e))}function Di(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Pi(e){return e!==e}function Oi(e){return null!=e&&(!!e._isBuffer||Ii(e)||ji(e))}function Ii(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ji(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Ii(e.slice(0,0))}function Ni(){this.head=null,this.tail=null,this.length=0}function Li(e){if(e&&!wd(e))throw new Error("Unknown encoding: "+e)}function Ui(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),Li(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=zi;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Fi;break;default:return void(this.write=Mi)}this.charBuffer=new qr(6),this.charReceived=0,this.charLength=0}function Mi(e){return e.toString(this.encoding)}function zi(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Fi(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}function qi(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function Yi(e,t){return e.listeners(t).length}function Hi(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof No&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new Ni,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new Ui(e.encoding),this.encoding=e.encoding)}function Ki(e){if(!(this instanceof Ki))return new Ki(e);this._readableState=new Hi(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),$n.call(this)}function Wi(e,t,n,r,i){var o=Ji(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,Xi(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var c;!t.decoder||i||r||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&Gi(e))),eo(e,t)}else i||(t.reading=!1);return $i(t)}function $i(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function Vi(e){return e>=kd?e=kd:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Zi(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Vi(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Ji(e,t){var n=null;return Yn(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function Xi(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,Gi(e)}}function Gi(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?y(Qi,e):Qi(e))}function Qi(e){_d("emit readable"),e.emit("readable"),so(e)}function eo(e,t){t.readingMore||(t.readingMore=!0,y(to,e,t))}function to(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_d("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function no(e){return function(){var t=e._readableState;_d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,so(e))}}function ro(e){_d("readable nexttick read 0"),e.read(0)}function io(e,t){t.resumeScheduled||(t.resumeScheduled=!0,y(oo,e,t))}function oo(e,t){t.reading||(_d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),so(e),t.flowing&&!t.reading&&e.read(0)}function so(e){var t=e._readableState;for(_d("flow",t.flowing);t.flowing&&null!==e.read(););}function ao(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=co(e,t.buffer,t.decoder),n}function co(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?uo(e,t):fo(e,t),r}function uo(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function fo(e,t){var n=Xt.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function ho(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,y(lo,t,e))}function lo(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function po(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function go(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function yo(){}function mo(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function vo(e,t){Object.defineProperty(this,"buffer",{get:cr(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof No&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){Co(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new jo(this)}function bo(e){if(!(this instanceof bo||this instanceof No))return new bo(e);this._writableState=new vo(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),$n.call(this)}function wo(e,t){var n=new Error("write after end");e.emit("error",n),y(t,n)}function _o(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):qr.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),y(r,o),i=!1),i}function ko(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=qr.from(t,n)),t}function Ao(e,t,n,r,i){n=ko(t,n,r),qr.isBuffer(n)&&(r="buffer");var o=t.objectMode?1:n.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new mo(n,r,i),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Eo(e,t,!1,o,n,r,i);return s}function Eo(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function xo(e,t,n,r,i){--t.pendingcb,n?y(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function So(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Co(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(So(n),t)xo(e,n,r,t,i);else{var o=Do(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||Bo(e,n),r?y(To,e,n,o,i):To(e,n,o,i)}}function To(e,t,n,r){n||Ro(e,t),t.pendingcb--,r(),Oo(e,t)}function Ro(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Bo(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;Eo(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new jo(t)}else{for(;n;){var a=n.chunk,c=n.encoding,u=n.callback;if(Eo(e,t,!1,t.objectMode?1:a.length,a,c,u),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function Do(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Po(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Oo(e,t){var n=Do(t);return n&&(0===t.pendingcb?(Po(e,t),t.finished=!0,e.emit("finish")):Po(e,t)),n}function Io(e,t,n){t.ending=!0,Oo(e,t),n&&(t.finished?y(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function jo(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}function No(e){if(!(this instanceof No))return new No(e);Ki.call(this,e),bo.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Lo)}function Lo(){this.allowHalfOpen||this._writableState.ended||y(Uo,this)}function Uo(e){e.end()}function Mo(e){this.afterTransform=function(t,n){return zo(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function zo(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Fo(e){if(!(this instanceof Fo))return new Fo(e);No.call(this,e),this._transformState=new Mo(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){qo(t,e)}):qo(t)})}function qo(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function Yo(e){if(!(this instanceof Yo))return new Yo(e);Fo.call(this,e)}function Ho(){$n.call(this)}function Ko(e){var t=this;if(!(t instanceof Ko))return new Ko(e);if(t._id=sd(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1,objectMode:!0},e),Cd.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||sd(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||Ko.channelConfig,t.config=e.config||Ko.config,t.constraints=t._transformConstraints(e.constraints||Ko.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:id(),!t._wrtc)throw"undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};"addTrack"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function Wo(){}function $o(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Id;case"days":case"day":case"d":return n*Od;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Pd;case"minutes":case"minute":case"mins":case"min":case"m":return n*Dd;case"seconds":case"second":case"secs":case"sec":case"s":return n*Bd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function Vo(e){return e>=Od?Math.round(e/Od)+"d":e>=Pd?Math.round(e/Pd)+"h":e>=Dd?Math.round(e/Dd)+"m":e>=Bd?Math.round(e/Bd)+"s":e+"ms"}function Zo(e){return Jo(e,Od,"day")||Jo(e,Pd,"hour")||Jo(e,Dd,"minute")||Jo(e,Bd,"second")||e+" ms"}function Jo(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function Xo(e){return ta.Buffer&&ta.Buffer.isBuffer(e)||ta.ArrayBuffer&&e instanceof ArrayBuffer||e instanceof Uint8Array}function Go(e){function t(e){if(!e)return!1;if(ta.Buffer&&ta.Buffer.isBuffer&&ta.Buffer.isBuffer(e)||ta.ArrayBuffer&&e instanceof ArrayBuffer||ta.Blob&&e instanceof Blob||ta.File&&e instanceof File)return!0;if(qd(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0}return!1}return t(e)}function Qo(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden?e.idle():e.active()},!1)}function es(e){return null==e&&(e=ta.Promise),this instanceof es?ts(e,this):ts(e,Object.create(es.prototype))}function ts(e,t){return t.promise=new e(function(e,n){t.resolve=e,t.reject=n}),t}function ns(){return new Promise(function(e,t){(function(){return e()}).$asyncbind(this,t);var n=function(t){return e(t)}.$asyncbind(this,t);try{return mu().then(function(t){return this.db=t,this.coms.connect().then(function(t){return ip(Sp.bind(this)).then(function(t){return e({success:!0})}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}catch(e){n(e)}}.$asyncbind(this))}function rs(e,t){var n=Buffer.from(JSON.stringify(t)).toString("base64"),r=document.createElement("a");r.href="data:application/octet-stream;charset=utf-8;base64,"+n,r.setAttribute("download",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}e.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,s=r.length;o<s;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var is=e;t.prototype.emitEvent=function(e,t,n){this._emitEvents&&!n&&this.events.emit(e,t)},t.prototype.getIdentifiers=function(){for(var e=[],t=this._store.length-1;t>=0;t-=1)e[e.length]=this._store[t][this._identifier];return e},t.prototype.getRecord=function(e){for(var t=this._store.length-1;t>=0;t-=1)if(this._store[t][this._identifier]===e)return this._store[t]},t.prototype.exists=function(e){return this.getIndex(e)>=0},t.prototype.getIndex=function(e){for(var t=this._idx.length-1;t>=0;t-=1)if(this._idx[t]===e)return t;return-1},t.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var t=this.removeRecord(e[this._identifier],!0);return this._idx[this._idx.length]=e[this._identifier],this._store[this._store.length]=e,setTimeout(function(){t?setTimeout(this.emitEvent.bind(this,"update",e),0):setTimeout(this.emitEvent.bind(this,"add",e),0)}.bind(this),0),!0},t.prototype.removeRecord=function(e,t){var n=this.getIndex(e);if(n<0)return!1;for(var r=n;r>=0;r-=1)if(this._store[r]&&this._store[r][this._identifier]===e)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;for(var i=this._store.length-1;i>=n;i-=1)if(this._store[i]&&this._store[i][this._identifier]===e)return this._store.splice(i,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;return!1},t.prototype.forEachRecord=function(e){var t=0,n=this,r=function(){};return setTimeout(function(){for(var i=n._store.length-1;i>=0;i-=1)t+=1,setTimeout(e.bind(null,n._store[i],i),0);setTimeout(r.bind(null,t),0)},0),{finally:function(e){r=e}}},t.prototype.mapRecords=function(e){for(var t=0,n=this,r=[],i=n._store.length-1;i>=0;i-=1)t+=1,r.push(e(n._store[i],i));return r},t.prototype.getCount=function(){return this._store.length},t.prototype.removeAll=function(){for(var e=this._store.length-1;e>=0;e-=1)delete this._store[e];this._store=[]};var os,ss=t,as="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},cs=as.crypto||as.msCrypto;if(cs&&cs.getRandomValues){var us=new Uint8Array(16);os=function(){return cs.getRandomValues(us),us}}if(!os){var fs=new Array(16);os=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),fs[t]=e>>>((3&t)<<3)&255;return fs}}for(var hs=os,ls=[],ds=0;ds<256;++ds)ls[ds]=(ds+256).toString(16).substr(1);var ps=r,gs=hs(),ys=[1|gs[0],gs[1],gs[2],gs[3],gs[4],gs[5]],ms=16383&(gs[6]<<8|gs[7]),vs=0,bs=0,ws=i,_s=o,ks=_s;ks.v1=ws,ks.v4=_s;var As=ks,Es=1e3,xs=60*Es,Ss=60*xs,Cs=24*Ss,Ts=365.25*Cs,Rs=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return s(e);if("number"===n&&!1===isNaN(e))return t.long?c(e):a(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Bs=n(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,i=n-(c||n);e.diff=i,e.prev=c,e.curr=n,c=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var i=t.formatters[r];if("function"==typeof i){var s=o[a];n=i.call(e,s),o.splice(a,1),a--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}(t=e.exports=r.debug=r.default=r).coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Rs,t.names=[],t.skips=[],t.formatters={};var c}),Ds=n(function(e,t){function n(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=Bs).log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),Ps="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Os=f,Is=h;"function"==typeof Ps.setTimeout&&(Os=setTimeout),"function"==typeof Ps.clearTimeout&&(Is=clearTimeout);var js,Ns=[],Ls=!1,Us=-1;m.prototype.run=function(){this.fun.apply(null,this.array)};var Ms={},zs=[],Fs={},qs={},Ys={},Hs=v,Ks=v,Ws=v,$s=v,Vs=v,Zs=v,Js=v,Xs=Ps.performance||{},Gs=Xs.now||Xs.mozNow||Xs.msNow||Xs.oNow||Xs.webkitNow||function(){return(new Date).getTime()},Qs=new Date,ea={nextTick:y,title:"browser",browser:!0,env:Ms,argv:zs,version:"",versions:Fs,on:Hs,addListener:Ks,once:Ws,off:$s,removeListener:Vs,removeAllListeners:Zs,emit:Js,binding:b,cwd:w,chdir:_,umask:k,hrtime:A,platform:"browser",release:qs,config:Ys,uptime:E},ta="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},na=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ra=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ia=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=na.exec(e||""),o={},s=14;s--;)o[ra[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o},oa=1e3,sa=60*oa,aa=60*sa,ca=24*aa,ua=365.25*ca,fa=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return S(e);if("number"===n&&!1===isNaN(e))return t.long?T(e):C(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},ha=x(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,i=n-(c||n);e.diff=i,e.prev=c,e.curr=n,c=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var i=t.formatters[r];if("function"==typeof i){var s=o[a];n=i.call(e,s),o.splice(a,1),a--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}(t=e.exports=r.debug=r.default=r).coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=fa,t.names=[],t.skips=[],t.formatters={};var c}),la=x(function(e,t){function n(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==ea&&"env"in ea&&(e=ea.env.DEBUG),e}(t=e.exports=ha).log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),da=la("socket.io-client:url"),pa=B,ga=1e3,ya=60*ga,ma=60*ya,va=24*ma,ba=365.25*va,wa=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return D(e);if("number"===n&&!1===isNaN(e))return t.long?O(e):P(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_a=x(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,i=n-(c||n);e.diff=i,e.prev=c,e.curr=n,c=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var i=t.formatters[r];if("function"==typeof i){var s=o[a];n=i.call(e,s),o.splice(a,1),a--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}(t=e.exports=r.debug=r.default=r).coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=wa,t.names=[],t.skips=[],t.formatters={};var c}),ka=x(function(e,t){function n(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==ea&&"env"in ea&&(e=ea.env.DEBUG),e}(t=e.exports=_a).log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),Aa=x(function(e){function t(e){if(e)return n(e)}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),Ea={}.toString,xa=Array.isArray||function(e){return"[object Array]"==Ea.call(e)},Sa=Object.prototype.toString,Ca="function"==typeof ta.Blob||"[object BlobConstructor]"===Sa.call(ta.Blob),Ta="function"==typeof ta.File||"[object FileConstructor]"===Sa.call(ta.File),Ra=j,Ba={}.toString,Da=Array.isArray||function(e){return"[object Array]"==Ba.call(e)},Pa=N,Oa=Object.prototype.toString,Ia="function"==typeof ta.Blob||"[object BlobConstructor]"===Oa.call(ta.Blob),ja="function"==typeof ta.File||"[object FileConstructor]"===Oa.call(ta.File),Na={deconstructPacket:function(e){var t=[],n=e.data,r=e;return r.data=L(n,t),r.attachments=t.length,{packet:r,buffers:t}},reconstructPacket:function(e,t){return e.data=U(e.data,t),e.attachments=void 0,e},removeBlobs:function(e,t){function n(e,o,s){if(!e)return e;if(Ia&&e instanceof Blob||ja&&e instanceof File){r++;var a=new FileReader;a.onload=function(){s?s[o]=this.result:i=this.result,--r||t(i)},a.readAsArrayBuffer(e)}else if(Da(e))for(var c=0;c<e.length;c++)n(e[c],c,e);else if("object"==typeof e&&!Pa(e))for(var u in e)n(e[u],u,e)}var r=0,i=e;n(i),r||t(i)}},La=x(function(e,t){function n(){}function r(e){var n=""+e.type;return t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data&&(n+=JSON.stringify(e.data)),f("encoded %j as %s",e,n),n}function i(e,t){function n(e){var n=Na.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}Na.removeBlobs(e,n)}function o(){this.reconstructor=null}function s(e){var n=0,r={type:Number(e.charAt(0))};if(null==t.types[r.type])return u();if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(var i="";"-"!==e.charAt(++n)&&(i+=e.charAt(n),n!=e.length););if(i!=Number(i)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(n+1))for(r.nsp="";++n&&","!==(s=e.charAt(n))&&(r.nsp+=s,n!==e.length););else r.nsp="/";var o=e.charAt(n+1);if(""!==o&&Number(o)==o){for(r.id="";++n;){var s=e.charAt(n);if(null==s||Number(s)!=s){--n;break}if(r.id+=e.charAt(n),n===e.length)break}r.id=Number(r.id)}return e.charAt(++n)&&(r=a(r,e.substr(n))),f("decoded %s as %j",e,r),r}function a(e,t){try{e.data=JSON.parse(t)}catch(e){return u()}return e}function c(e){this.reconPack=e,this.buffers=[]}function u(){return{type:t.ERROR,data:"parser error"}}var f=ka("socket.io-parser");t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=o,n.prototype.encode=function(e,n){e.type!==t.EVENT&&e.type!==t.ACK||!Ra(e.data)||(e.type=e.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),f("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?i(e,n):n([r(e)])},Aa(o.prototype),o.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new c(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!Pa(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Na.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}),Ua=x(function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}}),Ma=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Ua))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(ta[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}},za=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},Fa=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer},qa=M,Ya=x(function(e,t){!function(n){function r(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function i(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=v(t);return i}function o(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(e,t){return v(e>>t&63|128)}function a(e,t){if(0==(4294967168&e))return v(e);var n="";return 0==(4294965248&e)?n=v(e>>6&31|192):0==(4294901760&e)?(o(e,t)||(e=65533),n=v(e>>12&15|224),n+=s(e,6)):0==(4292870144&e)&&(n=v(e>>18&7|240),n+=s(e,12),n+=s(e,6)),n+=v(63&e|128)}function c(e,t){for(var n=!1!==(t=t||{}).strict,i=r(e),o=i.length,s=-1,c="";++s<o;)c+=a(i[s],n);return c}function u(){if(m>=y)throw Error("Invalid byte index");var e=255&g[m];if(m++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,n,r,i,s;if(m>y)throw Error("Invalid byte index");if(m==y)return!1;if(t=255&g[m],m++,0==(128&t))return t;if(192==(224&t)){if(n=u(),(s=(31&t)<<6|n)>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&t)){if(n=u(),r=u(),(s=(15&t)<<12|n<<6|r)>=2048)return o(s,e)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=u(),r=u(),i=u(),(s=(7&t)<<18|n<<12|r<<6|i)>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}function h(e,t){var n=!1!==(t=t||{}).strict;g=r(e),y=g.length,m=0;for(var o,s=[];!1!==(o=f(n));)s.push(o);return i(s)}var l=t,d=e&&e.exports==l&&e,p="object"==typeof ta&&ta;p.global!==p&&p.window!==p||(n=p);var g,y,m,v=String.fromCharCode,b={version:"2.1.2",encode:c,decode:h};if(l&&!l.nodeType)if(d)d.exports=b;else{var w={}.hasOwnProperty;for(var _ in b)w.call(b,_)&&(l[_]=b[_])}else n.utf8=b}(ta)}),Ha=x(function(e,t){!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,r,i,o,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),h=new Uint8Array(f);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],h[u++]=r<<2|i>>4,h[u++]=(15&i)<<4|o>>2,h[u++]=(3&o)<<6|63&s;return f}}()}),Ka=ta.BlobBuilder||ta.WebKitBlobBuilder||ta.MSBlobBuilder||ta.MozBlobBuilder,Wa=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),$a=Wa&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),Va=Ka&&Ka.prototype.append&&Ka.prototype.getBlob,Za=function(){return Wa?$a?ta.Blob:Y:Va?q:void 0}(),Ja=x(function(e,t){function n(e,n){return n("b"+t.packets[e.type]+e.data.data)}function r(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=l[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,t.encodePacket(e,n,!0,r)},i.readAsArrayBuffer(e.data)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(h)return i(e,n,r);var o=new Uint8Array(1);return o[0]=l[e.type],r(new Za([o.buffer,e.data]))}function s(e){try{e=Ya.decode(e,{strict:!1})}catch(e){return!1}return e}function a(e,t,n){for(var r=new Array(e.length),i=qa(e.length,n),o=0;o<e.length;o++)!function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})}(o,e[o],i)}var c;ta&&ta.ArrayBuffer&&(c=Ha);var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),f="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=u||f;t.protocol=3;var l=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=za(l),p={type:"error",data:"parser error"};t.encodePacket=function(e,t,i,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof i&&(s=i,i=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(ta.ArrayBuffer&&a instanceof ArrayBuffer)return r(e,t,s);if(Za&&a instanceof ta.Blob)return o(e,t,s);if(a&&a.base64)return n(e,s);var c=l[e.type];return void 0!==e.data&&(c+=i?Ya.encode(String(e.data),{strict:!1}):String(e.data)),s(""+c)},t.encodeBase64Packet=function(e,n){var r="b"+t.packets[e.type];if(Za&&e.data instanceof ta.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(r+e)},i.readAsDataURL(e.data)}var o;try{o=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];o=String.fromCharCode.apply(null,a)}return r+=ta.btoa(o),n(r)},t.decodePacket=function(e,n,r){if(void 0===e)return p;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=s(e)))return p;i=e.charAt(0);return Number(i)==i&&d[i]?e.length>1?{type:d[i],data:e.substring(1)}:{type:d[i]}:p}var i=new Uint8Array(e)[0],o=Fa(e,1);return Za&&"blob"===n&&(o=new Za([o])),{type:d[i],data:o}},t.decodeBase64Packet=function(e,t){var n=d[e.charAt(0)];if(!c)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=c.decode(e.substr(1));return"blob"===t&&Za&&(r=new Za([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function i(e){return e.length+":"+e}function o(e,r){t.encodePacket(e,!!s&&n,!1,function(e){r(null,i(e))})}"function"==typeof n&&(r=n,n=null);var s=Ra(e);return n&&s?Za&&!h?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void a(e,o,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var i;if(""===e)return r(p,0,1);for(var o,s,a="",c=0,u=e.length;c<u;c++){var f=e.charAt(c);if(":"===f){if(""===a||a!=(o=Number(a)))return r(p,0,1);if(s=e.substr(c+1,o),a!=s.length)return r(p,0,1);if(s.length){if(i=t.decodePacket(s,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,c+o,u))return}c+=o,a=""}else a+=f}return""!==a?r(p,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}if(!e.length)return n(new ArrayBuffer(0));a(e,r,function(e,t){var r=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}i[o++]=t?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),n(i.buffer)})},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}for(var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1),i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,Za){var a=new Za([t.buffer,s.buffer,e]);n(null,a)}})}a(e,r,function(e,t){return n(new Za(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),a=0===s[0],c="",u=1;255!==s[u];u++){if(c.length>310)return r(p,0,1);c+=s[u]}i=Fa(i,2+c.length),c=parseInt(c);var f=Fa(i,0,c);if(a)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var h=new Uint8Array(f);f="";for(u=0;u<h.length;u++)f+=String.fromCharCode(h[u])}o.push(f),i=Fa(i,c)}var l=o.length;o.forEach(function(e,i){r(t.decodePacket(e,n,!0),i,l)})}}),Xa=x(function(e){function t(e){if(e)return n(e)}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),Ga=H;Xa(H.prototype),H.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},H.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},H.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},H.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},H.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},H.prototype.onData=function(e){var t=Ja.decodePacket(e,this.socket.binaryType);this.onPacket(t)},H.prototype.onPacket=function(e){this.emit("packet",e)},H.prototype.onClose=function(){this.readyState="closed",this.emit("close")};for(var Qa,ec={encode:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},decode:function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},tc=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},nc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),rc=64,ic={},oc=0,sc=0;sc<rc;sc++)ic[nc[sc]]=sc;$.encode=K,$.decode=W;var ac=$,cc=la("engine.io-client:polling"),uc=V,fc=function(){return null!=new Ma({xdomain:!1}).responseType}();tc(V,Ga),V.prototype.name="polling",V.prototype.doOpen=function(){this.poll()},V.prototype.pause=function(e){function t(){cc("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(cc("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){cc("pre-pause polling complete"),--r||t()})),this.writable||(cc("we are currently writing - waiting to pause"),r++,this.once("drain",function(){cc("pre-pause writing complete"),--r||t()}))}else t()},V.prototype.poll=function(){cc("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},V.prototype.onData=function(e){var t=this;cc("polling got data %s",e);var n=function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)};Ja.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():cc('ignoring poll - transport state "%s"',this.readyState))},V.prototype.doClose=function(){function e(){cc("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(cc("transport open - closing"),e()):(cc("transport not open - deferring close"),this.once("open",e))},V.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};Ja.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},V.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=ac()),this.supportsBinary||e.sid||(e.b64=1),e=ec.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e};var hc=la("engine.io-client:polling-xhr"),lc=J,dc=X;tc(J,uc),J.prototype.supportsBinary=!0,J.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new X(e)},J.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},J.prototype.doPoll=function(){hc("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},Xa(X.prototype),X.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new Ma(e),n=this;try{hc("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState){var e;try{e=t.getResponseHeader("Content-Type")}catch(e){}"application/octet-stream"===e&&(t.responseType="arraybuffer")}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},hc("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}ta.document&&(this.index=X.requestsCount++,X.requests[this.index]=this)},X.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},X.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},X.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},X.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Z:this.xhr.onreadystatechange=Z,e)try{this.xhr.abort()}catch(e){}ta.document&&delete X.requests[this.index],this.xhr=null}},X.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},X.prototype.hasXDR=function(){return void 0!==ta.XDomainRequest&&!this.xs&&this.enablesXDR},X.prototype.abort=function(){this.cleanup()},X.requestsCount=0,X.requests={},ta.document&&(ta.attachEvent?ta.attachEvent("onunload",G):ta.addEventListener&&ta.addEventListener("beforeunload",G,!1)),lc.Request=dc;var pc,gc=ee;tc(ee,uc),ee.prototype.supportsBinary=!1,ee.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),uc.prototype.doClose.call(this)},ee.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},ee.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(/\\n/g,"\\\n"),this.area.value=e.replace(/\n/g,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&n()}:this.iframe.onload=n};var yc,mc={},vc=Object.freeze({default:mc}),bc=vc&&mc||vc,wc=la("engine.io-client:websocket"),_c=ta.WebSocket||ta.MozWebSocket;if("undefined"==typeof window)try{yc=bc}catch(e){}var kc=_c;kc||"undefined"!=typeof window||(kc=yc);var Ac=te;tc(te,Ga),te.prototype.name="websocket",te.prototype.supportsBinary=!0,te.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new kc(e,t):new kc(e):new kc(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},te.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},te.prototype.write=function(e){function t(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var r=e.length,i=0,o=r;i<o;i++)!function(e){Ja.encodePacket(e,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var o={};e.options&&(o.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof i?ta.Buffer.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(e){wc("websocket closed before onclose event")}--r||t()})}(e[i])},te.prototype.onClose=function(){Ga.prototype.onClose.call(this)},te.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},te.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=ac()),this.supportsBinary||(e.b64=1),(e=ec.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},te.prototype.check=function(){return!(!kc||"__initialize"in kc&&this.name===te.prototype.name)};var Ec={polling:ne,websocket:Ac},xc=[].indexOf,Sc=function(e,t){if(xc)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},Cc=/^[\],:{}\s]*$/,Tc=function(e){return"string"==typeof e&&e?(e=e.replace(/^\s+/,"").replace(/\s+$/,""),ta.JSON&&JSON.parse?JSON.parse(e):Cc.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+e)():void 0):null},Rc=la("engine.io-client:socket"),Bc=re;re.priorWebsocketSuccess=!1,Xa(re.prototype),re.protocol=Ja.protocol,re.Socket=re,re.Transport=Ga,re.transports=Ec,re.parser=Ja,re.prototype.createTransport=function(e){Rc('creating transport "%s"',e);var t=ie(this.query);t.EIO=Ja.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new Ec[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},re.prototype.open=function(){var e;if(this.rememberUpgrade&&re.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},re.prototype.setTransport=function(e){Rc("setting transport %s",e.name);var t=this;this.transport&&(Rc("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},re.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;u=u||t}u||(Rc('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!u)if("pong"===t.type&&"probe"===t.data){if(Rc('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",c),!c)return;re.priorWebsocketSuccess="websocket"===c.name,Rc('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){u||"closed"!==f.readyState&&(Rc("changing transport and sending upgrade packet"),a(),f.setTransport(c),c.send([{type:"upgrade"}]),f.emit("upgrade",c),c=null,f.upgrading=!1,f.flush())})}else{Rc('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,f.emit("upgradeError",n)}}))}function n(){u||(u=!0,a(),c.close(),c=null)}function r(t){var r=new Error("probe error: "+t);r.transport=c.name,n(),Rc('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",r)}function i(){r("transport closed")}function o(){r("socket closed")}function s(e){c&&e.name!==c.name&&(Rc('"%s" works - aborting "%s"',e.name,c.name),n())}function a(){c.removeListener("open",t),c.removeListener("error",r),c.removeListener("close",i),f.removeListener("close",o),f.removeListener("upgrading",s)}Rc('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),u=!1,f=this;re.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",r),c.once("close",i),this.once("close",o),this.once("upgrading",s),c.open()},re.prototype.onOpen=function(){if(Rc("socket open"),this.readyState="open",re.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){Rc("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},re.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(Rc('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(Tc(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else Rc('packet received with socket readyState "%s"',this.readyState)},re.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},re.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},re.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){Rc("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},re.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},re.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},re.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Rc("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},re.prototype.write=re.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},re.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},re.prototype.close=function(){function e(){r.onClose("forced close"),Rc("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},re.prototype.onError=function(e){Rc("socket error %j",e),re.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},re.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){Rc('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},re.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~Sc(this.transports,e[n])&&t.push(e[n]);return t};var Dc=Bc,Pc=Ja;Dc.parser=Pc;var Oc=Dc,Ic=oe,jc=se,Nc=[].slice,Lc=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=Nc.call(arguments,2);return function(){return t.apply(e,n.concat(Nc.call(arguments)))}},Uc=x(function(e,t){function n(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var r=la("socket.io-client:socket");e.exports=n;var i={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},o=Xa.prototype.emit;Xa(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[jc(e,"open",Lc(this,"onopen")),jc(e,"packet",Lc(this,"onpacket")),jc(e,"close",Lc(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var e=Ic(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(i.hasOwnProperty(e))return o.apply(this,arguments),this;var t=Ic(arguments),n={type:La.EVENT,data:t};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(r("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){r("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:La.CONNECT,query:this.query}):this.packet({type:La.CONNECT}))},n.prototype.onclose=function(e){r("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case La.CONNECT:this.onconnect();break;case La.EVENT:case La.BINARY_EVENT:this.onevent(e);break;case La.ACK:case La.BINARY_ACK:this.onack(e);break;case La.DISCONNECT:this.ondisconnect();break;case La.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];r("emitting event %j",t),null!=e.id&&(r("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?o.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=Ic(arguments);r("sending ack %j",i),t.packet({type:La.ACK,id:e,data:i})}}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(r("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):r("bad ack %s",e.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)o.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){r("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(r("performing disconnect (%s)",this.nsp),this.packet({type:La.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}}),Mc=ae;ae.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},ae.prototype.reset=function(){this.attempts=0},ae.prototype.setMin=function(e){this.ms=e},ae.prototype.setMax=function(e){this.max=e},ae.prototype.setJitter=function(e){this.jitter=e};var zc=la("socket.io-client:manager"),Fc=Object.prototype.hasOwnProperty,qc=ce;ce.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)Fc.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},ce.prototype.updateSocketIds=function(){for(var e in this.nsps)Fc.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},ce.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},Xa(ce.prototype),ce.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},ce.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},ce.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},ce.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},ce.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},ce.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},ce.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},ce.prototype.open=ce.prototype.connect=function(e,t){if(zc("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;zc("opening %s",this.uri),this.engine=Oc(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=jc(n,"open",function(){r.onopen(),e&&e()}),o=jc(n,"error",function(t){if(zc("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;zc("connect attempt will timeout after %d",s);var a=setTimeout(function(){zc("connect attempt timed out after %d",s),i.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},ce.prototype.onopen=function(){zc("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(jc(e,"data",Lc(this,"ondata"))),this.subs.push(jc(e,"ping",Lc(this,"onping"))),this.subs.push(jc(e,"pong",Lc(this,"onpong"))),this.subs.push(jc(e,"error",Lc(this,"onerror"))),this.subs.push(jc(e,"close",Lc(this,"onclose"))),this.subs.push(jc(this.decoder,"decoded",Lc(this,"ondecoded")))},ce.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},ce.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},ce.prototype.ondata=function(e){this.decoder.add(e)},ce.prototype.ondecoded=function(e){this.emit("packet",e)},ce.prototype.onerror=function(e){zc("error",e),this.emitAll("error",e)},ce.prototype.socket=function(e,t){function n(){~Sc(i.connecting,r)||i.connecting.push(r)}var r=this.nsps[e];if(!r){r=new Uc(this,e,t),this.nsps[e]=r;var i=this;r.on("connecting",n),r.on("connect",function(){r.id=i.generateId(e)}),this.autoConnect&&n()}return r},ce.prototype.destroy=function(e){var t=Sc(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},ce.prototype.packet=function(e){zc("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},ce.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},ce.prototype.cleanup=function(){zc("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},ce.prototype.close=ce.prototype.disconnect=function(){zc("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},ce.prototype.onclose=function(e){zc("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},ce.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)zc("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();zc("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(zc("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(zc("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(zc("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},ce.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var Yc=x(function(e,t){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,s=pa(e),a=s.source,c=s.id,u=s.path,f=o[c]&&u in o[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(i("ignoring socket cache for %s",a),n=qc(a,t)):(o[c]||(i("new io instance for %s",a),o[c]=qc(a,t)),n=o[c]),s.query&&!t.query?t.query=s.query:t&&"object"==typeof t.query&&(t.query=r(t.query)),n.socket(s.path,t)}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var i=la("socket.io-client");e.exports=t=n;var o=t.managers={};t.protocol=La.protocol,t.connect=n,t.Manager=qc,t.Socket=Uc});ue.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,s=r.length;o<s;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var Hc=ue;fe.prototype.emitEvent=function(e,t,n){this._emitEvents&&!n&&this.events.emit(e,t)},fe.prototype.getIdentifiers=function(){for(var e=[],t=this._store.length-1;t>=0;t-=1)e[e.length]=this._store[t][this._identifier];return e},fe.prototype.getRecord=function(e){for(var t=this._store.length-1;t>=0;t-=1)if(this._store[t][this._identifier]===e)return this._store[t]},fe.prototype.exists=function(e){return this.getIndex(e)>=0},fe.prototype.getIndex=function(e){for(var t=this._idx.length-1;t>=0;t-=1)if(this._idx[t]===e)return t;return-1},fe.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var t=this.removeRecord(e[this._identifier],!0);return this._idx[this._idx.length]=e[this._identifier],this._store[this._store.length]=e,setTimeout(function(){t?setTimeout(this.emitEvent.bind(this,"update",e),0):setTimeout(this.emitEvent.bind(this,"add",e),0)}.bind(this),0),!0},fe.prototype.removeRecord=function(e,t){var n=this.getIndex(e);if(n<0)return!1;for(var r=n;r>=0;r-=1)if(this._store[r]&&this._store[r][this._identifier]===e)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;for(var i=this._store.length-1;i>=n;i-=1)if(this._store[i]&&this._store[i][this._identifier]===e)return this._store.splice(i,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;return!1},fe.prototype.forEachRecord=function(e){var t=0,n=this,r=function(){};return setTimeout(function(){for(var i=n._store.length-1;i>=0;i-=1)t+=1,setTimeout(e.bind(null,n._store[i],i),0);setTimeout(r.bind(null,t),0)},0),{finally:function(e){r=e}}},fe.prototype.mapRecords=function(e){for(var t=0,n=this,r=[],i=n._store.length-1;i>=0;i-=1)t+=1,r.push(e(n._store[i],i));return r},fe.prototype.getCount=function(){return this._store.length},fe.prototype.removeAll=function(){for(var e=this._store.length-1;e>=0;e-=1)delete this._store[e];this._store=[]};var Kc=fe,Wc=1e3,$c=60*Wc,Vc=60*$c,Zc=24*Vc,Jc=365.25*Zc,Xc=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return he(e);if("number"===n&&!1===isNaN(e))return t.long?de(e):le(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Gc=x(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,i=n-(c||n);e.diff=i,e.prev=c,e.curr=n,c=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var i=t.formatters[r];if("function"==typeof i){var s=o[a];n=i.call(e,s),o.splice(a,1),a--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}(t=e.exports=r.debug=r.default=r).coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Xc,t.names=[],t.skips=[],t.formatters={};var c}),Qc=x(function(e,t){function n(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==ea&&"env"in ea&&(e=ea.env.DEBUG),e}(t=e.exports=Gc).log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())}),eu={locateTimeout:1e3,meshConnectTimeout:1e3,maxConnectedPeers:10,iddbName:"edgemesh",iddbVersion:1,iddbColumns:"++id",iddbDefaultMobileDisk:5,iddbDefaultDesktopDisk:50,maxParallelJobs:6,jobProcessingFrequency:30,hubSyncDelay:1e4,chunkSize:15360,chunkIdOffset:0,chunkPositionOffset:4,chunkReservedBytes:8,swPollMaxRetries:5,swPollInterval:200},tu={extension:["jpg","jpeg","gif","png","bmp","svg","webp"]},nu="sig.edgeno.de",ru={iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},iu={beaconUrl:"https://sig.edgeno.de/track",script:"edgemesh.track.min.js"},ou={logLevel:"warn",httpPort:80,httpsPort:443,wsAPIPort:3e3,wsCDNPort:9e3},su={version:"1.6.0",client:eu,support:tu,host:nu,clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:ru,tracking:iu,server:ou},au=Object.freeze({version:"1.6.0",client:eu,support:tu,host:nu,clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:ru,tracking:iu,server:ou,default:su}),cu=function(e,t){e.emit("ERROR_LOG",{level:t.level,host:t.host,func:t.func,code:t.code,message:t.message,input:t.input})},uu=function(e,t){e.emit("HUB_REGISTER",{hubId:t.hubId,browserInfo:t.browserInfo,size:t.size,keys:t.keys,version:au.version})},fu=function(e,t){e.emit("HUB_SYNC_ADD",{hubId:t.hubId,keys:t.keys})},hu=function(e,t){e.emit("HUB_REPLICATE",{topic:t.topic,hubKeys:t.hubKeys,clientKeys:t.clientKeys})},lu=function(e,t){e.emit("HUB_ACTIVE",{hubId:t.hubId})},du=function(e,t){e.emit("HUB_IDLE",{hubId:t.hubId})},pu=function(e,t){e.emit("TRANSFER_RECORD",{assetId:parseInt(t.assetId,10),chunkId:parseInt(t.chunkId,10),originId:parseInt(t.originId,10),topic:parseInt(t.topic,10),src:t.src,dst:t.dst,size:parseFloat(t.size),protocol:t.protocol,transferStart:t.transferStart,transferEnd:t.transferEnd,handshake:parseFloat(t.handshake),success:t.success})},gu=x(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e){return function(){return!e.apply(null,a.call(arguments))}}function t(e){return function(){for(var t=i(arguments),n=t.length,r=0;r<n;r++)if(!e.call(null,t[r]))return!1;return!0}}function n(e){return function(){for(var t=i(arguments),n=t.length,r=0;r<n;r++)if(e.call(null,t[r]))return!0;return!1}}function r(e,t){var n=t+"",r=+(n.match(/\d+/)||NaN),i=n.match(/^[<>]=?|/)[0];return u[i]?u[i](e,r):e==r||r!==r}function i(e){var t=a.call(e);return 1===t.length&&o.array(t[0])&&(t=t[0]),t}var o={};o.VERSION="0.8.0",o.not={},o.all={},o.any={};var s=Object.prototype.toString,a=Array.prototype.slice,c=Object.prototype.hasOwnProperty,u={"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t}};o.arguments=function(e){return"[object Arguments]"===s.call(e)||null!=e&&"object"==typeof e&&"callee"in e},o.array=Array.isArray||function(e){return"[object Array]"===s.call(e)},o.boolean=function(e){return!0===e||!1===e||"[object Boolean]"===s.call(e)},o.char=function(e){return o.string(e)&&1===e.length},o.date=function(e){return"[object Date]"===s.call(e)},o.domNode=function(e){return o.object(e)&&e.nodeType>0},o.error=function(e){return"[object Error]"===s.call(e)},o.function=function(e){return"[object Function]"===s.call(e)||"function"==typeof e},o.json=function(e){return"[object Object]"===s.call(e)},o.nan=function(e){return e!==e},o.null=function(e){return null===e},o.number=function(e){return o.not.nan(e)&&"[object Number]"===s.call(e)},o.object=function(e){return Object(e)===e},o.regexp=function(e){return"[object RegExp]"===s.call(e)},o.sameType=function(e,t){var n=s.call(e);return n===s.call(t)&&("[object Number]"!==n||(!o.any.nan(e,t)||o.all.nan(e,t)))},o.sameType.api=["not"],o.string=function(e){return"[object String]"===s.call(e)},o.undefined=function(e){return void 0===e},o.windowObject=function(e){return null!=e&&"object"==typeof e&&"setInterval"in e},o.empty=function(e){if(o.object(e)){var t=Object.getOwnPropertyNames(e).length;return!!(0===t||1===t&&o.array(e)||2===t&&o.arguments(e))}return""===e},o.existy=function(e){return null!=e},o.falsy=function(e){return!e},o.truthy=e(o.falsy),o.above=function(e,t){return o.all.number(e,t)&&e>t},o.above.api=["not"],o.decimal=function(e){return o.number(e)&&e%1!=0},o.equal=function(e,t){return o.all.number(e,t)?e===t&&1/e==1/t:o.all.string(e,t)||o.all.regexp(e,t)?""+e==""+t:!!o.all.boolean(e,t)&&e===t},o.equal.api=["not"],o.even=function(e){return o.number(e)&&e%2==0},o.finite=isFinite||function(e){return o.not.infinite(e)&&o.not.nan(e)},o.infinite=function(e){return e===1/0||e===-1/0},o.integer=function(e){return o.number(e)&&e%1==0},o.negative=function(e){return o.number(e)&&e<0},o.odd=function(e){return o.number(e)&&e%2==1},o.positive=function(e){return o.number(e)&&e>0},o.under=function(e,t){return o.all.number(e,t)&&e<t},o.under.api=["not"],o.within=function(e,t,n){return o.all.number(e,t,n)&&e>t&&e<n},o.within.api=["not"];var f={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/};for(var h in f)f.hasOwnProperty(h)&&function(e,t){o[e]=function(n){return t[e].test(n)}}(h,f);o.ip=function(e){return o.ipv4(e)||o.ipv6(e)},o.capitalized=function(e){if(o.not.string(e))return!1;for(var t=e.split(" "),n=0;n<t.length;n++){var r=t[n];if(r.length){var i=r.charAt(0);if(i!==i.toUpperCase())return!1}}return!0},o.endWith=function(e,t){if(o.not.string(e))return!1;t+="";var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},o.endWith.api=["not"],o.include=function(e,t){return e.indexOf(t)>-1},o.include.api=["not"],o.lowerCase=function(e){return o.string(e)&&e===e.toLowerCase()},o.palindrome=function(e){if(o.not.string(e))return!1;for(var t=(e=e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()).length-1,n=0,r=Math.floor(t/2);n<=r;n++)if(e.charAt(n)!==e.charAt(t-n))return!1;return!0},o.space=function(e){if(o.not.char(e))return!1;var t=e.charCodeAt(0);return t>8&&t<14||32===t},o.startWith=function(e,t){return o.string(e)&&0===e.indexOf(t)},o.startWith.api=["not"],o.upperCase=function(e){return o.string(e)&&e===e.toUpperCase()};var l=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=["january","february","march","april","may","june","july","august","september","october","november","december"];o.day=function(e,t){return o.date(e)&&t.toLowerCase()===l[e.getDay()]},o.day.api=["not"],o.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),r=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<r},o.future=function(e){var t=new Date;return o.date(e)&&e.getTime()>t.getTime()},o.inDateRange=function(e,t,n){if(o.not.date(e)||o.not.date(t)||o.not.date(n))return!1;var r=e.getTime();return r>t.getTime()&&r<n.getTime()},o.inDateRange.api=["not"],o.inLastMonth=function(e){return o.inDateRange(e,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},o.inLastWeek=function(e){return o.inDateRange(e,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},o.inLastYear=function(e){return o.inDateRange(e,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},o.inNextMonth=function(e){return o.inDateRange(e,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},o.inNextWeek=function(e){return o.inDateRange(e,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},o.inNextYear=function(e){return o.inDateRange(e,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},o.leapYear=function(e){return o.number(e)&&(e%4==0&&e%100!=0||e%400==0)},o.month=function(e,t){return o.date(e)&&t.toLowerCase()===d[e.getMonth()]},o.month.api=["not"],o.past=function(e){var t=new Date;return o.date(e)&&e.getTime()<t.getTime()},o.quarterOfYear=function(e,t){return o.date(e)&&o.number(t)&&t===Math.floor((e.getMonth()+3)/3)},o.quarterOfYear.api=["not"],o.today=function(e){var t=(new Date).toDateString();return o.date(e)&&e.toDateString()===t},o.tomorrow=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()+1)).toDateString();return o.date(e)&&e.toDateString()===n},o.weekend=function(e){return o.date(e)&&(6===e.getDay()||0===e.getDay())},o.weekday=e(o.weekend),o.year=function(e,t){return o.date(e)&&o.number(t)&&t===e.getFullYear()},o.year.api=["not"],o.yesterday=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()-1)).toDateString();return o.date(e)&&e.toDateString()===n};var p=o.windowObject("object"==typeof ta&&ta)&&ta,g=o.windowObject("object"==typeof self&&self)&&self,y=o.windowObject("object"==typeof this&&this)&&this,m=p||g||y||Function("return this")(),v=g&&g.document,b=m.is,w=g&&g.navigator,_=(w&&w.appVersion||"").toLowerCase(),k=(w&&w.userAgent||"").toLowerCase(),A=(w&&w.vendor||"").toLowerCase();return o.android=function(){return/android/.test(k)},o.android.api=["not"],o.androidPhone=function(){return/android/.test(k)&&/mobile/.test(k)},o.androidPhone.api=["not"],o.androidTablet=function(){return/android/.test(k)&&!/mobile/.test(k)},o.androidTablet.api=["not"],o.blackberry=function(){return/blackberry/.test(k)||/bb10/.test(k)},o.blackberry.api=["not"],o.chrome=function(e){var t=/google inc/.test(A)?k.match(/(?:chrome|crios)\/(\d+)/):null;return null!==t&&r(t[1],e)},o.chrome.api=["not"],o.desktop=function(){return o.not.mobile()&&o.not.tablet()},o.desktop.api=["not"],o.edge=function(e){var t=k.match(/edge\/(\d+)/);return null!==t&&r(t[1],e)},o.edge.api=["not"],o.firefox=function(e){var t=k.match(/(?:firefox|fxios)\/(\d+)/);return null!==t&&r(t[1],e)},o.firefox.api=["not"],o.ie=function(e){var t=k.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&r(t[1],e)},o.ie.api=["not"],o.ios=function(){return o.iphone()||o.ipad()||o.ipod()},o.ios.api=["not"],o.ipad=function(e){var t=k.match(/ipad.+?os (\d+)/);return null!==t&&r(t[1],e)},o.ipad.api=["not"],o.iphone=function(e){var t=k.match(/iphone(?:.+?os (\d+))?/);return null!==t&&r(t[1]||1,e)},o.iphone.api=["not"],o.ipod=function(e){var t=k.match(/ipod.+?os (\d+)/);return null!==t&&r(t[1],e)},o.ipod.api=["not"],o.linux=function(){return/linux/.test(_)},o.linux.api=["not"],o.mac=function(){return/mac/.test(_)},o.mac.api=["not"],o.mobile=function(){return o.iphone()||o.ipod()||o.androidPhone()||o.blackberry()||o.windowsPhone()},o.mobile.api=["not"],o.offline=e(o.online),o.offline.api=["not"],o.online=function(){return!w||!0===w.onLine},o.online.api=["not"],o.opera=function(e){var t=k.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==t&&r(t[1],e)},o.opera.api=["not"],o.phantom=function(e){var t=k.match(/phantomjs\/(\d+)/);return null!==t&&r(t[1],e)},o.phantom.api=["not"],o.safari=function(e){var t=k.match(/version\/(\d+).+?safari/);return null!==t&&r(t[1],e)},o.safari.api=["not"],o.tablet=function(){return o.ipad()||o.androidTablet()||o.windowsTablet()},o.tablet.api=["not"],o.touchDevice=function(){return!!v&&("ontouchstart"in g||"DocumentTouch"in g&&v instanceof DocumentTouch)},o.touchDevice.api=["not"],o.windows=function(){return/win/.test(_)},o.windows.api=["not"],o.windowsPhone=function(){return o.windows()&&/phone/.test(k)},o.windowsPhone.api=["not"],o.windowsTablet=function(){return o.windows()&&o.not.windowsPhone()&&/touch/.test(k)},o.windowsTablet.api=["not"],o.propertyCount=function(e,t){if(o.not.object(e)||o.not.number(t))return!1;var n=0;for(var r in e)if(c.call(e,r)&&++n>t)return!1;return n===t},o.propertyCount.api=["not"],o.propertyDefined=function(e,t){return o.object(e)&&o.string(t)&&t in e},o.propertyDefined.api=["not"],o.inArray=function(e,t){if(o.not.array(t))return!1;for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},o.inArray.api=["not"],o.sorted=function(e,t){if(o.not.array(e))return!1;for(var n=u[t]||u[">="],r=1;r<e.length;r++)if(!n(e[r],e[r-1]))return!1;return!0},function(){var r=o;for(var i in r)if(c.call(r,i)&&o.function(r[i]))for(var s=r[i].api||["not","all","any"],a=0;a<s.length;a++)"not"===s[a]&&(o.not[i]=e(o[i])),"all"===s[a]&&(o.all[i]=t(o[i])),"any"===s[a]&&(o.any[i]=n(o[i]))}(),o.setNamespace=function(){return m.is=b,this},o.setRegexp=function(e,t){for(var n in f)c.call(f,n)&&t===n&&(f[n]=e)},o})}),yu=x(function(e,t){!function(t,n){e.exports=function(){function e(e,t){return"object"!=typeof t?e:(Ee(t).forEach(function(n){e[n]=t[n]}),e)}function t(e,t){return Te.call(e,t)}function n(e,t){"function"==typeof t&&(t=t(Ce(e))),Ee(t).forEach(function(n){r(e,n,t[n])})}function r(n,r,i,o){Object.defineProperty(n,r,e(i&&t(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function i(e){return{from:function(t){return e.prototype=Object.create(t.prototype),r(e.prototype,"constructor",e),{extend:n.bind(null,e.prototype)}}}}function o(e,t){var n;return Re(e,t)||(n=Ce(e))&&o(n,t)}function s(e,t,n){return Be.call(e,t,n)}function a(e,t){return t(e)}function c(e){var t=setTimeout(e,1e3);clearTimeout(t)}function u(e){if(!e)throw new Error("Assertion Failed")}function f(e){Se.setImmediate?setImmediate(e):setTimeout(e,0)}function h(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function l(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function d(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function p(e,n){if(t(e,n))return e[n];if(!n)return e;if("string"!=typeof n){for(var r=[],i=0,o=n.length;i<o;++i){var s=p(e,n[i]);r.push(s)}return r}var a=n.indexOf(".");if(-1!==a){var c=e[n.substr(0,a)];return void 0===c?void 0:p(c,n.substr(a+1))}}function g(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){u("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)g(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var c=e[s];c||(c=e[s]={}),g(c,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function y(e,t){"string"==typeof t?g(e,t,void 0):"length"in t&&[].map.call(t,function(t){g(e,t,void 0)})}function m(e){var n={};for(var r in e)t(e,r)&&(n[r]=e[r]);return n}function v(e){if(!e||"object"!=typeof e)return e;var n;if(xe(e)){n=[];for(var r=0,i=e.length;r<i;++r)n.push(v(e[r]))}else if(e instanceof Date)(n=new Date).setTime(e.getTime());else{n=e.constructor?Object.create(e.constructor.prototype):{};for(var o in e)t(e,o)&&(n[o]=v(e[o]))}return n}function b(e,n,r,i){return r=r||{},i=i||"",Ee(e).forEach(function(o){if(t(n,o)){var s=e[o],a=n[o];"object"==typeof s&&"object"==typeof a&&s&&a&&s.constructor===a.constructor?b(s,a,r,i+o+"."):s!==a&&(r[i+o]=n[o])}else r[i+o]=void 0}),Ee(n).forEach(function(o){t(e,o)||(r[i+o]=n[o])}),r}function w(e){var t,n,r,i;if(1===arguments.length){if(xe(e))return e.slice();if(this===Oe&&"string"==typeof e)return[e];if(i=Pe(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function _(e){return Ie.apply([],e)}function k(){}function A(e){return e}function E(e,t){return null==e||e===A?t:function(n){return t(e(n))}}function x(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function S(e,t){return e===k?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?x(r,this.onsuccess):r),i&&(this.onerror=this.onerror?x(i,this.onerror):i),void 0!==o?o:n}}function C(e,t){return e===k?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?x(n,this.onsuccess):n),r&&(this.onerror=this.onerror?x(r,this.onerror):r)}}function T(t,n){return t===k?n:function(r){var i=t.apply(this,arguments);e(r,i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?x(o,this.onsuccess):o),s&&(this.onerror=this.onerror?x(s,this.onerror):s),void 0===i?void 0===a?void 0:a:e(i,a)}}function R(e,t){return e===k?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function B(e,t){return e===k?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function D(e,t){je=e,Ne=t}function P(){if(Le)try{throw P.arguments,new Error}catch(e){return e}return new Error}function O(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Ne).map(function(e){return"\n"+e}).join("")):""}function I(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+O(P(),1)),t.apply(this,arguments)}}function j(e,t){this._e=P(),this.name=e,this.message=t}function N(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function L(e,t,n,r){this._e=P(),this.failures=t,this.failedKeys=r,this.successCount=n}function U(e,t){this._e=P(),this.name="BulkError",this.failures=t,this.message=N(e,t)}function M(e,t){if(!e||e instanceof j||e instanceof TypeError||e instanceof SyntaxError||!e.name||!He[e.name])return e;var n=new He[e.name](t||e.message,e);return"stack"in e&&r(n,"stack",{get:function(){return this.inner.stack}}),n}function z(e){function t(e,t,o){if("object"==typeof e)return n(e);t||(t=R),o||(o=k);var s={subscribers:[],fire:o,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=t(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter(function(t){return t!==e}),s.fire=s.subscribers.reduce(t,o)}};return r[e]=i[e]=s,s}function n(e){Ee(e).forEach(function(n){var r=e[n];if(xe(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new Ye.InvalidArgument("Invalid event config");var i=t(n,A,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];i.subscribers.forEach(function(e){f(function(){e.apply(null,t)})})})}})}var r={},i=function(t,n){if(n){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[t].subscribe.apply(null,o),e}if("string"==typeof t)return r[t]};i.addEventType=t;for(var o=1,s=arguments.length;o<s;++o)t(arguments[o]);return i}function F(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=k,this._lib=!1;var t=this._PSD=rt;if(je&&(this._stackHolder=P(),this._prev=null,this._numPrev=0,Z(this,tt)),"function"!=typeof e){if(e!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&H(this,this._value))}this._state=null,this._value=null,++t.ref,Y(this,e)}function q(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=rt}function Y(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&X();t&&"function"==typeof t.then?Y(e,function(e,n){t instanceof F?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,K(e)),n&&G()}},H.bind(null,e))}catch(t){H(e,t)}}function H(e,t){if(et.push(t),null===e._state){var n=e._lib&&X();t=nt(t),e._state=!1,e._value=t,je&&null!==t&&"object"==typeof t&&!t._promise&&d(function(){var n=o(t,"stack");t._promise=e,r(t,"stack",{get:function(){return Ve?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),te(e),K(e),n&&G()}}function K(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)W(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===ot&&(++ot,Je(function(){0==--ot&&Q()},[]))}function W(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ot,Je($,[n,e,t])}function $(e,t,n){var r=rt,i=n.psd;try{i!==r&&(rt=i),tt=t;var o,s=t._value;t._state?o=e(s):(et.length&&(et=[]),o=e(s),-1===et.indexOf(s)&&ne(t)),n.resolve(o)}catch(e){n.reject(e)}finally{i!==r&&(rt=r),tt=null,0==--ot&&Q(),--i.ref||i.finalize()}}function V(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=O(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return je&&((r=O(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&V(e._prev,t,n)),t}function Z(e,t){var n=t?t._numPrev+1:0;n<$e&&(e._prev=t,e._numPrev=n)}function J(){X()&&G()}function X(){var e=Xe;return Xe=!1,Ge=!1,e}function G(){var e,t,n;do{for(;it.length>0;)for(e=it,it=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(it.length>0);Xe=!0,Ge=!0}function Q(){var e=Qe;Qe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=st.slice(0),n=t.length;n;)t[--n]()}function ee(e){function t(){e(),st.splice(st.indexOf(t),1)}st.push(t),++ot,Je(function(){0==--ot&&Q()},[])}function te(e){Qe.some(function(t){return t._value===e._value})||Qe.push(e)}function ne(e){for(var t=Qe.length;t;)if(Qe[--t]._value===e._value)return void Qe.splice(t,1)}function re(e){console.warn("Unhandled rejection: "+(e.stack||e))}function ie(e){return new F(We,!1,e)}function oe(e,t){var n=rt;return function(){var r=X(),i=rt;try{return i!==n&&(rt=n),e.apply(this,arguments)}catch(e){t&&t(e)}finally{i!==n&&(rt=i),r&&G()}}}function se(e,t,n,r){var i=rt,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ae(o,e,t,n,r);return 0===o.ref&&o.finalize(),s}function ae(e,t,n,r,i){var o=rt;try{return e!==o&&(rt=e),t(n,r,i)}finally{e!==o&&(rt=o)}}function ce(t,n){var r;try{r=n.onuncatched(t)}catch(e){}if(!1!==r)try{var i,o={promise:n,reason:t};if(Se.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(ct,!0,!0),e(i,o)):Se.CustomEvent&&e(i=new CustomEvent(ct,{detail:o}),o),i&&Se.dispatchEvent&&(dispatchEvent(i),!Se.PromiseRejectionEvent&&Se.onunhandledrejection))try{Se.onunhandledrejection(i)}catch(e){}i.defaultPrevented||F.on.error.fire(t,n)}catch(e){}}function ue(e,t){var n=F.reject(e);return t?n.uncaught(t):n}function fe(o,f){function y(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function x(e,t,n){var r=tt._createTransaction(et,Ve,We);r.create(t),r._completion.catch(n);var i=r._reject.bind(r);se(function(){rt.trans=r,0===e?(Ee(We).forEach(function(e){O(t,e,We[e].primKey,We[e].indexes)}),F.follow(function(){return tt.on.populate.fire(r)}).catch(i)):R(e,r,t).catch(i)})}function R(e,t,n){function r(){return i.length?F.resolve(i.shift()(t.idbtrans)).then(r):F.resolve()}var i=[],o=$e.filter(function(t){return t._cfg.version===e})[0];if(!o)throw new Ye.Upgrade("Dexie specification of currently installed DB version is missing");We=tt._dbSchema=o._cfg.dbschema;var s=!1;return $e.filter(function(t){return t._cfg.version>e}).forEach(function(e){i.push(function(){var r=We,i=e._cfg.dbschema;Pe(r,n),Pe(i,n),We=tt._dbSchema=i;var o=D(r,i);if(o.add.forEach(function(e){O(n,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new Ye.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){M(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),M(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return s=!0,F.follow(function(){e._cfg.contentUpgrade(t)})}),i.push(function(t){s&&gt||N(e._cfg.dbschema,t)})}),r().then(function(){j(We,n)})}function D(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,n.change.push(s);else{var a=i.idxByName,c=o.idxByName;for(var u in a)c[u]||s.del.push(u);for(u in c){var f=a[u],h=c[u];f?f.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function O(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){M(i,e)}),i}function j(e,t){Ee(e).forEach(function(n){t.db.objectStoreNames.contains(n)||O(t,n,e[n].primKey,e[n].indexes)})}function N(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function M(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function q(e){return tt.on.error.fire(e)}function Y(e,t,n){if(Qe||rt.letThrough){var r=tt._createTransaction(e,t,We);return r._promise(e,function(e,t){se(function(){rt.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!Ge){if(!qe)return ue(new Ye.DatabaseClosed,q);tt.open().catch(k)}return nt.then(function(){return Y(e,t,n)})}function H(e,t,n){this.name=e,this.schema=t,this.hook=Ze[e]?Ze[e].hook:z(null,{creating:[S,k],reading:[E,A],updating:[T,k],deleting:[C,k]}),this._collClass=n||J}function K(e,t,n){H.call(this,e,t,n||G)}function W(e,t,n){return(n?ye:ge)(function(n){e.push(n),t&&t()})}function $(e,t,n,r,i){return new F(function(o,s){var a=n.length,c=a-1;if(0===a)return o();if(r){var u,f=ye(s),h=pe(null);d(function(){for(var r=0;r<a;++r){u={onsuccess:null,onerror:null};var s=n[r];i.call(u,s[0],s[1],t);var l=e.delete(s[0]);l._hookCtx=u,l.onerror=f,l.onsuccess=r===c?pe(o):h}},function(e){throw u.onerror&&u.onerror(e),e})}else for(var l=0;l<a;++l){var p=e.delete(n[l]);p.onerror=oe(ge(s)),l===c&&(p.onsuccess=oe(function(){return o()}))}}).uncaught(q)}function V(e,t,n,r){var i=this;this.db=tt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=z(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=n,this._resolve=null,this._reject=null,this._completion=new F(function(e,t){i._resolve=e,i._reject=t}).uncaught(q),this._completion.then(function(){i.on.complete.fire()},function(e){return i.on.error.fire(e),i.parent?i.parent._reject(e):i.active&&i.idbtrans&&i.idbtrans.abort(),i.active=!1,ue(e)})}function Z(e,t,n){this._ctx={table:e,index:":id"===t?null:t,collClass:e._collClass,or:n}}function J(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function X(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function G(){J.apply(this,arguments)}function Q(e,t){return e._cfg.version-t._cfg.version}function ee(e,t,n,r){t.forEach(function(t){var i=tt._tableFactory(n,r[t]);e.forEach(function(e){t in e||(e[t]=i)})})}function te(e){e.forEach(function(e){for(var t in e)e[t]instanceof H&&delete e[t]})}function ne(e,t,n,r,i,o){var s=oe(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=ge(i)),e.onsuccess=t?l(function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,function(e){o=e},r,i)&&s(n.value,n,function(e){o=e}),o()}else r()},i):l(function(){var t=e.result;if(t){var n=function(){t.continue()};s(t.value,t,function(e){n=e}),n()}else r()},i)}function re(e){var t=[];return e.split(",").forEach(function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new we(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),xe(r),/\./.test(e)))}),t}function ie(e,t){return He.cmp(e,t)}function ce(e,t){return ie(e,t)<0?e:t}function he(e,t){return ie(e,t)>0?e:t}function Se(e,t){return He.cmp(e,t)}function Ce(e,t){return He.cmp(t,e)}function Te(e,t){return e<t?-1:e===t?0:1}function Re(e,t){return e>t?-1:e===t?0:1}function Be(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function De(){if(tt.verno=Je.version/10,tt._dbSchema=We={},0!==(Ve=s(Je.objectStoreNames,0)).length){var e=Je.transaction(ke(Ve),"readonly");Ve.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new we(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),s=[],a=0;a<n.indexNames.length;++a){var c=n.index(n.indexNames[a]);i=(r=c.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var u=new we(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,i);s.push(u)}We[t]=new _e(t,o,s,{})}),ee([Ze,V.prototype],Ee(We),et,We)}}function Pe(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],o=t.objectStore(i);Ue="getAll"in o;for(var a=0;a<o.indexNames.length;++a){var c=o.indexNames[a],u=o.index(c).keyPath,f="string"==typeof u?u:"["+s(u).join("+")+"]";if(e[i]){var h=e[i].idxByName[f];h&&(h.name=c)}}}}function Ie(e){tt.on("blocked").fire(e),dt.filter(function(e){return e.name===tt.name&&e!==tt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var Ne,Le,Ue,Me=fe.dependencies,ze=e({addons:fe.addons,autoOpen:!0,indexedDB:Me.indexedDB,IDBKeyRange:Me.IDBKeyRange},f),Fe=ze.addons,qe=ze.autoOpen,He=ze.indexedDB,Ke=ze.IDBKeyRange,We=this._dbSchema={},$e=[],Ve=[],Ze={},Je=null,Xe=null,Ge=!1,Qe=!1,et="readwrite",tt=this,nt=new F(function(e){Ne=e}),it=new F(function(e,t){Le=t}),ot=!0,st=!!Ae(He);this.version=function(e){if(Je||Ge)throw new Ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=$e.filter(function(t){return t._cfg.version===e})[0];return t||(t=new y(e),$e.push(t),$e.sort(Q),t)},e(y.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,t):t;var n={};$e.forEach(function(t){e(n,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),We=tt._dbSchema=r,te([Ze,tt,V.prototype]),ee([Ze,tt,V.prototype,this._cfg.tables],Ee(r),et,r),Ve=Ee(r),this},upgrade:function(e){var t=this;return vt(function(){e(tt._createTransaction(et,Ee(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){Ee(e).forEach(function(n){if(null!==e[n]){var r={},i=re(e[n]),o=i.shift();if(o.multi)throw new Ye.Schema("Primary key cannot be multi-valued");o.keyPath&&g(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(e){if(e.auto)throw new Ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Ye.Schema("Index must have a name and cannot be an empty string");g(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new _e(n,o,i,r)}})}}),this._allTables=Ze,this._tableFactory=function(e,t){return"readonly"===e?new H(t.name,t,J):new K(t.name,t)},this._createTransaction=function(e,t,n,r){return new V(e,t,n,r)},this._whenReady=function(e){return new F(bt||Qe||rt.letThrough?e:function(t,n){if(!Ge){if(!qe)return void n(new Ye.DatabaseClosed);tt.open().catch(k)}nt.then(function(){e(t,n)})}).uncaught(q)},this.verno=0,this.open=function(){if(Ge||Je)return nt.then(function(){return Xe?ue(Xe,q):tt});je&&(it._stackHolder=P()),Ge=!0,Xe=null,Qe=!1;var e=Ne,t=null;return F.race([it,new F(function(e,n){if(c(function(){return e()}),$e.length>0&&(ot=!1),!He)throw new Ye.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var r=ot?He.open(o):He.open(o,Math.round(10*tt.verno));if(!r)throw new Ye.MissingAPI("IndexedDB API not available");r.onerror=oe(ge(n)),r.onblocked=oe(Ie),r.onupgradeneeded=oe(function(e){if(t=r.transaction,ot&&!tt._allowEmptyDB){r.onerror=me,t.abort(),r.result.close();var i=He.deleteDatabase(o);i.onsuccess=i.onerror=oe(function(){n(new Ye.NoSuchDatabase("Database "+o+" doesnt exist"))})}else t.onerror=oe(ge(n)),x((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,t,n)},n),r.onsuccess=oe(function(){if(t=null,Je=r.result,dt.push(tt),ot)De();else if(Je.objectStoreNames.length>0)try{Pe(We,Je.transaction(ke(Je.objectStoreNames),"readonly"))}catch(e){}Je.onversionchange=oe(function(e){tt._vcFired=!0,tt.on("versionchange").fire(e)}),st||ve(function(e){if(-1===e.indexOf(o))return e.push(o)}),e()},n)})]).then(function(){return fe.vip(tt.on.ready.fire)}).then(function(){return Ge=!1,tt}).catch(function(e){try{t&&t.abort()}catch(e){}return Ge=!1,tt.close(),Xe=e,ue(Xe,q)}).finally(function(){Qe=!0,e()})},this.close=function(){var e=dt.indexOf(tt);if(e>=0&&dt.splice(e,1),Je){try{Je.close()}catch(e){}Je=null}qe=!1,Xe=new Ye.DatabaseClosed,Ge&&Le(Xe),nt=new F(function(e){Ne=e}),it=new F(function(e,t){Le=t})},this.delete=function(){var e=arguments.length>0;return new F(function(t,n){function r(){tt.close();var e=He.deleteDatabase(o);e.onsuccess=oe(function(){st||ve(function(e){var t=e.indexOf(o);if(t>=0)return e.splice(t,1)}),t()}),e.onerror=oe(ge(n)),e.onblocked=Ie}if(e)throw new Ye.InvalidArgument("Arguments not allowed in db.delete()");Ge?nt.then(r):r()}).uncaught(q)},this.backendDB=function(){return Je},this.isOpen=function(){return null!==Je},this.hasFailed=function(){return null!==Xe},this.dynamicallyOpened=function(){return ot},this.name=o,r(this,"tables",{get:function(){return Ee(Ze).map(function(e){return Ze[e]})}}),this.on=z(this,"error","populate","blocked","versionchange",{ready:[B,k]}),this.on.error.subscribe=I("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=I("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=a(this.on.ready.subscribe,function(e){return function(t,n){fe.vip(function(){Qe?(Xe||F.resolve().then(t),n&&e(t)):(e(t),n||e(function e(){tt.on.ready.unsubscribe(t),tt.on.ready.unsubscribe(e)}))})}}),vt(function(){tt.on("populate").fire(tt._createTransaction(et,Ve,We)),tt.on("error").fire(new Error)}),this.transaction=function(e,n,r){function i(n){var i=rt;n(F.resolve().then(function(){return se(function(){rt.transless=rt.transless||i;var n=tt._createTransaction(e,f,We,c);rt.trans=n,c?n.idbtrans=c.idbtrans:n.create();var o=f.map(function(e){return Ze[e]});o.push(n);var s;return F.follow(function(){if(s=r.apply(n,o))if("function"==typeof s.next&&"function"==typeof s.throw)s=be(s);else if("function"==typeof s.then&&!t(s,"_PSD"))throw new Ye.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+r.toString())}).uncaught(q).then(function(){return c&&n._resolve(),n._completion}).then(function(){return s}).catch(function(e){return n._reject(e),ue(e)})})}))}var o=arguments.length;if(o<2)throw new Ye.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];r=s.pop();var a=_(s),c=rt.trans;c&&c.db===tt&&-1===e.indexOf("!")||(c=null);var u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var f=a.map(function(e){var t=e instanceof H?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=et)throw new Ye.InvalidArgument("Invalid transaction mode: "+e);e=et}if(c){if("readonly"===c.mode&&e===et){if(!u)throw new Ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&f.forEach(function(e){if(c&&-1===c.storeNames.indexOf(e)){if(!u)throw new Ye.SubTransaction("Table "+e+" not included in parent transaction.");c=null}})}}catch(e){return c?c._promise(null,function(t,n){n(e)}):ue(e,q)}return c?c._promise(e,i,"lock"):tt._whenReady(i)},this.table=function(e){if(bt&&ot)return new K(e);if(!t(Ze,e))throw new Ye.InvalidTable("Table "+e+" does not exist");return Ze[e]},n(H.prototype,{_trans:function(e,t,n){var r=rt.trans;return r&&r.db===tt?r._promise(e,t,n):Y(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){t(e,n,r.idbtrans.objectStore(o),r)}if(bt)return new F(t);var i=rt.trans,o=this.name;return i&&i.db===tt?i._promise(e,r,n):Y(e,[this.name],r)},get:function(e,t){var n=this;return this._idbstore("readonly",function(t,r,i){bt&&t(n.schema.instanceTemplate);var o=i.get(e);o.onerror=ge(r),o.onsuccess=oe(function(){t(n.hook.reading.fire(o.result))},r)}).then(t)},where:function(e){return new Z(this,e)},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new this._collClass(new Z(this,e))},toCollection:function(){return new this._collClass(new Z(this))},mapToClass:function(e,n){this.schema.mappedClass=e;var r=Object.create(e.prototype);n&&le(r,n),this.schema.instanceTemplate=r;var i=function(n){if(!n)return n;var r=Object.create(e.prototype);for(var i in n)if(t(n,i))try{r[i]=n[i]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e},defineClass:function(e){return this.mapToClass(fe.defineClass(e),e)}}),i(K).from(H).extend({bulkDelete:function(e){return this.hook.deleting.fire===k?this._idbstore(et,function(t,n,r,i){t($(r,i,e,!1,k))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(et,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new Ye.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new Ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ye.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var s,a,c=function(e){0===u.length?r(e):i(new U(n.name+".bulkPut(): "+u.length+" of "+f+" operations failed",u))},u=[],f=e.length,l=n;if(n.hook.creating.fire===k&&n.hook.updating.fire===k){a=W(u);for(var d=0,g=e.length;d<g;++d)(s=t?o.put(e[d],t[d]):o.put(e[d])).onerror=a;s.onerror=W(u,c),s.onsuccess=de(c)}else{var y=t||o.keyPath&&e.map(function(e){return p(e,o.keyPath)}),m=y&&h(y,function(t,n){return null!=t&&[t,e[n]]});(y?l.where(":id").anyOf(y.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(L,function(e){u=e.failures}).then(function(){for(var n=[],r=t&&[],i=y.length-1;i>=0;--i){var o=y[i];(null==o||m[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(m[o]=null))}return n.reverse(),t&&r.reverse(),l.bulkAdd(n,r)}).then(function(e){var t=y[y.length-1];return null!=t?t:e}):l.bulkAdd(e)).then(c).catch(U,function(e){u=u.concat(e.failures),c()}).catch(i)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(et,function(i,o,s,a){function c(e){0===l.length?i(e):o(new U(n.name+".bulkAdd(): "+l.length+" of "+y+" operations failed",l))}if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new Ye.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new Ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ye.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();var u,f,h,l=[],y=e.length;if(r!==k){var m,b=s.keyPath;f=W(l,null,!0),h=pe(null),d(function(){for(var n=0,i=e.length;n<i;++n){m={onerror:null,onsuccess:null};var o=t&&t[n],c=e[n],l=t?o:b?p(c,b):void 0,d=r.call(m,l,c,a);null==l&&null!=d&&(b?g(c=v(c),b,d):o=d),(u=null!=o?s.add(c,o):s.add(c))._hookCtx=m,n<i-1&&(u.onerror=f,m.onsuccess&&(u.onsuccess=h))}},function(e){throw m.onerror&&m.onerror(e),e}),u.onerror=W(l,c,!0),u.onsuccess=pe(c)}else{f=W(l);for(var w=0,_=e.length;w<_;++w)(u=t?s.add(e[w],t[w]):s.add(e[w])).onerror=f;u.onerror=W(l,c),u.onsuccess=de(c)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(et,function(r,i,o,s){var a={onsuccess:null,onerror:null};if(n!==k){var c=null!=t?t:o.keyPath?p(e,o.keyPath):void 0,u=n.call(a,c,e,s);null==c&&null!=u&&(o.keyPath?g(e,o.keyPath,u):t=u)}try{var f=null!=t?o.add(e,t):o.add(e);f._hookCtx=a,f.onerror=ye(i),f.onsuccess=pe(function(t){var n=o.keyPath;n&&g(e,n,t),r(t)})}catch(e){throw a.onerror&&a.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;return r!==k||i!==k?this._trans(et,function(r,i,o){var s=void 0!==t?t:n.schema.primKey.keyPath&&p(e,n.schema.primKey.keyPath);null==s?n.add(e).then(r,i):(o._lock(),e=v(e),n.where(":id").equals(s).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):s}).finally(function(){o._unlock()}).then(r,i))}):this._idbstore(et,function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=ge(r),o.onsuccess=function(t){var r=i.keyPath;r&&g(e,r,t.target.result),n(o.result)}})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(et,function(t,n,r){var i=r.delete(e);i.onerror=ge(n),i.onsuccess=function(){t(i.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(et,function(e,t,n){var r=n.clear();r.onerror=ge(t),r.onsuccess=function(){e(r.result)}})},update:function(e,t){if("object"!=typeof t||xe(t))throw new Ye.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||xe(e))return this.where(":id").equals(e).modify(t);Ee(t).forEach(function(n){g(e,n,t[n])});var n=p(e,this.schema.primKey.keyPath);return void 0===n?ue(new Ye.InvalidArgument("Given object does not contain its primary key"),q):this.where(":id").equals(n).modify(t)}}),n(V.prototype,{_lock:function(){return u(!rt.global),1!==++this._reculock||rt.global||(rt.lockOwnerFor=this),this},_unlock:function(){if(u(!rt.global),0==--this._reculock)for(rt.global||(rt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ae(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&rt.lockOwnerFor!==this},create:function(e){var t=this;if(u(!this.idbtrans),!e&&!Je)switch(Xe&&Xe.name){case"DatabaseClosedError":throw new Ye.DatabaseClosed(Xe);case"MissingAPIError":throw new Ye.MissingAPI(Xe.message,Xe);default:throw new Ye.OpenFailed(Xe)}if(!this.active)throw new Ye.TransactionInactive;return u(null===this._completion._state),e=this.idbtrans=e||Je.transaction(ke(this.storeNames),this.mode),e.onerror=oe(function(n){me(n),t._reject(e.error)}),e.onabort=oe(function(e){me(e),t.active&&t._reject(new Ye.Abort),t.active=!1,t.on("abort").fire(e)}),e.oncomplete=oe(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this,i=r._locked()?new F(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},rt])}):se(function(){var i=r.active?new F(function(i,o){if(e===et&&r.mode!==et)throw new Ye.ReadOnly("Transaction is readonly");!r.idbtrans&&e&&r.create(),n&&r._lock(),t(i,o,r)}):ue(new Ye.TransactionInactive);return r.active&&n&&i.finally(function(){r._unlock()}),i});return i._lib=!0,i.uncaught(q)},abort:function(){this.active&&this._reject(new Ye.Abort),this.active=!1},tables:{get:I("Transaction.tables",function(){return h(this.storeNames,function(e){return[e,Ze[e]]})},"Use db.tables()")},complete:I("Transaction.complete()",function(e){return this.on("complete",e)}),error:I("Transaction.error()",function(e){return this.on("error",e)}),table:I("Transaction.table()",function(e){if(-1===this.storeNames.indexOf(e))throw new Ye.InvalidTable("Table "+e+" not in transaction");return Ze[e]})}),n(Z.prototype,function(){function e(e,t,n){var r=e instanceof Z?new e._ctx.collClass(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new e._ctx.collClass(e,function(){return Ke.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function i(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,c=0;c<s;++c){var u=t[c];if(u!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[c],u)<0&&(a=c)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function o(t,o,s,a){function c(e){u=n(e),f=r(e),h="next"===e?Te:Re;var t=s.map(function(e){return{lower:f(e),upper:u(e)}}).sort(function(e,t){return h(e.lower,t.lower)});l=t.map(function(e){return e.upper}),d=t.map(function(e){return e.lower}),p=e,g="next"===e?"":a}var u,f,h,l,d,p,g,y=s.length;if(!s.every(function(e){return"string"==typeof e}))return e(t,lt);c("next");var m=new t._ctx.collClass(t,function(){return Ke.bound(l[0],d[y-1]+a)});m._ondirectionchange=function(e){c(e)};var v=0;return m._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var s=f(r);if(o(s,d,v))return!0;for(var a=null,c=v;c<y;++c){var u=i(r,s,l[c],d[c],h,p);null===u&&null===a?v=c+1:(null===a||h(a,u)>0)&&(a=u)}return t(null!==a?function(){e.continue(a+g)}:n),!1}),m}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return ie(n,r)>0||0===ie(n,r)&&(i||o)&&(!i||!o)?t(this):new this._ctx.collClass(this,function(){return Ke.bound(n,r,!i,!o)})}catch(t){return e(this,ht)}},equals:function(e){return new this._ctx.collClass(this,function(){return Ke.only(e)})},above:function(e){return new this._ctx.collClass(this,function(){return Ke.lowerBound(e,!0)})},aboveOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ke.lowerBound(e)})},below:function(e){return new this._ctx.collClass(this,function(){return Ke.upperBound(e,!0)})},belowOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ke.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,lt):this.between(t,t+ut,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):o(this,function(e,t){return 0===e.indexOf(t[0])},[e],ut)},equalsIgnoreCase:function(e){return o(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=w.apply(Oe,arguments);return 0===e.length?t(this):o(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=w.apply(Oe,arguments);return 0===e.length?t(this):o(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,ut)},anyOf:function(){var n=w.apply(Oe,arguments),r=Se;try{n.sort(r)}catch(t){return e(this,ht)}if(0===n.length)return t(this);var i=new this._ctx.collClass(this,function(){return Ke.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?Se:Ce,n.sort(r)};var o=0;return i._addAlgorithm(function(e,t,i){for(var s=e.key;r(s,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(s,n[o])||(t(function(){e.continue(n[o])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[-1/0,e],[e,ft]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=w.apply(Oe,arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(Se)}catch(t){return e(this,ht)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return n.push([t[t.length-1],ft]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function i(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(ie(t[0],i[1])<0&&ie(t[1],i[0])>0){i[0]=ce(i[0],t[0]),i[1]=he(i[1],t[1]);break}}return n===r&&e.push(t),e}function o(e,t){return h(e[0],t[0])}function s(e){return!d(e)&&!p(e)}var a=this._ctx;if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Se(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ye.InvalidArgument);var c,u=!r||!1!==r.includeLowers,f=r&&!0===r.includeUppers,h=Se;try{(c=n.reduce(i,[])).sort(o)}catch(t){return e(this,ht)}var l=0,d=f?function(e){return Se(e,c[l][1])>0}:function(e){return Se(e,c[l][1])>=0},p=u?function(e){return Ce(e,c[l][0])>0}:function(e){return Ce(e,c[l][0])>=0},g=d,y=new a.collClass(this,function(){return Ke.bound(c[0][0],c[c.length-1][1],!u,!f)});return y._ondirectionchange=function(e){"next"===e?(g=d,h=Se):(g=p,h=Ce),c.sort(o)},y._addAlgorithm(function(e,t,n){for(var r=e.key;g(r);)if(++l===c.length)return t(n),!1;return!!s(r)||0!==ie(r,c[l][1])&&0!==ie(r,c[l][0])&&(t(function(){h===Se?e.continue(c[l][0]):e.continue(c[l][1])}),!1)}),y},startsWithAnyOf:function(){var n=w.apply(Oe,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+ut]})):e(this,"startsWithAnyOf() only works with strings")}}}),n(J.prototype,function(){function n(e,t){e.filter=Be(e.filter,t)}function r(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Be(r(),t())}:t,e.justLimit=n&&!r}function i(e,t){e.isMatch=Be(e.isMatch,t)}function o(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Ye.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function s(e,t){var n=o(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function a(e,n,r,i,o){var a=e.replayFilter?Be(e.filter,e.replayFilter()):e.filter;e.or?function(){function c(){2==++h&&r()}function u(e,r,o){if(!a||a(r,o,c,i)){var s=r.primaryKey.toString();t(f,s)||(f[s]=!0,n(e,r,o))}}var f={},h=0;e.or._iterate(u,c,i,o),ne(s(e,o),e.algorithm,u,c,i,!e.keysOnly&&e.valueMapper)}():ne(s(e,o),Be(e.algorithm,a),n,r,i,!e.keysOnly&&e.valueMapper)}function c(e){return e.table.schema.instanceTemplate}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,function(e,t){t(n.error)}):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,function(e,n){n(t.error)}):t.table._idbstore(et,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Be(t.algorithm,e)},_iterate:function(e,t,n,r){return a(this._ctx,e,t,n,r)},clone:function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&e(r,t),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;if(bt){var n=c(t),r=t.table.schema.primKey.keyPath,i=p(n,t.index?t.table.schema.idxByName[t.index].keyPath:r),o=p(n,r);e(n,{key:i,primaryKey:o})}return this._read(function(n,r,i){a(t,e,n,r,i)})},count:function(e){if(bt)return F.resolve(0).then(e);var t=this._ctx;if(X(t,!0))return this._read(function(e,n,r){var i=o(t,r),s=t.range?i.count(t.range):i.count();s.onerror=ge(n),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,i){a(t,function(){return++n,!1},function(){e(n)},r,i)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[i[t]],t-1):e[o]}function r(e,t){var r=n(e,s),i=n(t,s);return r<i?-a:r>i?a:0}var i=e.split(".").reverse(),o=i[0],s=i.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(bt&&e([c(t)]),Ue&&"next"===t.dir&&X(t,!0)&&t.limit>0){var i=t.table.hook.reading.fire,s=o(t,r),u=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);u.onerror=ge(n),u.onsuccess=i===A?de(e):oe(de(function(t){try{e(t.map(i))}catch(e){n(e)}}))}else{var f=[];a(t,function(e){f.push(e)},function(){e(f)},n,r)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,X(t)?r(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):r(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),r(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(e,t){var r=this._ctx;return bt&&e(c(r)),n(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){return bt&&e(c(this._ctx)),n(this._ctx,function(t){return e(t.value)}),i(this._ctx,e),this},and:function(e){return this.filter(e)},or:function(e){return new Z(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(Ue&&"next"===t.dir&&X(t,!0)&&t.limit>0)return this._read(function(e,n,r){var i=o(t,r),s=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);s.onerror=ge(n),s.onsuccess=de(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var i={};return n(this._ctx,function(e){var n=e.primaryKey.toString(),r=t(i,n);return i[n]=!0,!r}),this}}}),i(G).from(J).extend({modify:function(n){var r=this,i=this._ctx,o=i.table.hook,s=o.updating.fire,a=o.deleting.fire;return bt&&"function"==typeof n&&n.call({value:i.table.schema.instanceTemplate},i.table.schema.instanceTemplate),this._write(function(i,o,c,u){function f(e,n){function r(e){return C.push(e),T.push(i.primKey),l(),!0}R=n.primaryKey;var i={primKey:n.primaryKey,value:e,onsuccess:null,onerror:null};if(!1!==y.call(i,e,i)){var o=!t(i,"value");++E,d(function(){var e=o?n.delete():n.update(i.value);e._hookCtx=i,e.onerror=ye(r),e.onsuccess=pe(function(){++x,l()})},r)}else i.onsuccess&&i.onsuccess(i.value)}function h(e){return e&&(C.push(e),T.push(R)),o(new L("Error modifying one or more objects",C,x,T))}function l(){S&&x+C.length===E&&(C.length>0?h():i(x))}var y;if("function"==typeof n)y=s===k&&a===k?n:function(e){var r=v(e);if(!1===n.call(this,e,this))return!1;if(t(this,"value")){var i=b(r,this.value),o=s.call(this,i,this.primKey,r,u);o&&(e=this.value,Ee(o).forEach(function(t){g(e,t,o[t])}))}else a.call(this,this.primKey,e,u)};else if(s===k){var w=Ee(n),_=w.length;y=function(e){for(var t=!1,r=0;r<_;++r){var i=w[r],o=n[i];p(e,i)!==o&&(g(e,i,o),t=!0)}return t}}else{var A=n;n=m(A),y=function(t){var r=!1,i=s.call(this,n,this.primKey,v(t),u);return i&&e(n,i),Ee(n).forEach(function(e){var i=n[e];p(t,e)!==i&&(g(t,e,i),r=!0)}),i&&(n=m(A)),r}}var E=0,x=0,S=!1,C=[],T=[],R=null;r.clone().raw()._iterate(f,function(){S=!0,l()},h,c)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==k;if(!i&&X(t)&&(t.isPrimKey&&!yt||!n))return this._write(function(e,t,r){var i=ge(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var s=o.result;d(function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(s)}},function(e){return t(e)})}});var o=i?2e3:1e4;return this._write(function(n,s,a,c){var u=0,f=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),h=[],l=function(){return f.each(i?function(e,t){h.push([t.primaryKey,t.value])}:function(e,t){h.push(t.primaryKey)}).then(function(){return i?h.sort(function(e,t){return Se(e[0],t[0])}):h.sort(Se),$(a,c,h,i,r)}).then(function(){var e=h.length;return u+=e,h=[],e<o?u:l()})};n(l())})}}),e(this,{Collection:J,Table:H,Transaction:V,Version:y,WhereClause:Z,WriteableCollection:G,WriteableTable:K}),function(){tt.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+tt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+tt.name+"'. Closing db now to resume the delete request."),tt.close()}),tt.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+tt.name+"') was blocked"):console.warn("Upgrade '"+tt.name+"' blocked by other connection holding version "+e.oldVersion/10)})}(),Fe.forEach(function(e){e(tt)})}function he(e){if("function"==typeof e)return new e;if(xe(e))return[he(e[0])];if(e&&"object"==typeof e){var t={};return le(t,e),t}return e}function le(e,t){return Ee(t).forEach(function(n){var r=he(t[n]);e[n]=r}),e}function de(e){return function(t){e(t.target.result)}}function pe(e){return oe(function(t){var n=t.target,r=n.result,i=n._hookCtx,o=i&&i.onsuccess;o&&o(r),e&&e(r)},e)}function ge(e){return function(t){return me(t),e(t.target.error),!1}}function ye(e){return oe(function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),me(t),e(r),!1})}function me(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function ve(e){var t,n=fe.dependencies.localStorage;if(!n)return e([]);try{t=JSON.parse(n.getItem("Dexie.DatabaseNames")||"[]")}catch(e){t=[]}e(t)&&n.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function be(e){function t(e){return function(t){var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(i,o):xe(r)?F.all(r).then(i,o):i(r)}}var n=function(t){return e.next(t)},r=function(t){return e.throw(t)},i=t(n),o=t(r);return t(n)()}function we(e,t,n,r,i,o,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+a}function _e(e,t,n,r){this.name=e,this.primKey=t||new we,this.indexes=n||[new we],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=h(n,function(e){return[e.name,e]})}function ke(e){return 1===e.length?e[0]:e}function Ae(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var Ee=Object.keys,xe=Array.isArray,Se="undefined"!=typeof self?self:"undefined"!=typeof window?window:ta,Ce=Object.getPrototypeOf,Te={}.hasOwnProperty,Re=Object.getOwnPropertyDescriptor,Be=[].slice,De="undefined"!=typeof Symbol&&Symbol.iterator,Pe=De?function(e){var t;return null!=e&&(t=e[De])&&t.apply(e)}:function(){return null},Oe={},Ie=[].concat,je="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Ne=function(){return!0},Le=!new Error("").stack,Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Me=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"].concat(Ue),ze={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};i(j).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+O(this._e,2))}},toString:function(){return this.name+": "+this.message}}),i(L).from(j),i(U).from(j);var Fe=Me.reduce(function(e,t){return e[t]=t+"Error",e},{}),qe=j,Ye=Me.reduce(function(e,t){function n(e,n){this._e=P(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=ze[t]||r,this.inner=null)}var r=t+"Error";return i(n).from(qe),e[t]=n,e},{});Ye.Syntax=SyntaxError,Ye.Type=TypeError,Ye.Range=RangeError;var He=Ue.reduce(function(e,t){return e[t+"Error"]=Ye[t],e},{}),Ke=Me.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Ye[t]),e},{});Ke.ModifyError=L,Ke.DexieError=j,Ke.BulkError=U;var We={},$e=100,Ve=!1,Ze=Se.setImmediate?setImmediate.bind(null,J):Se.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){J(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(J,0)},Je=function(e,t){it.push([e,t]),Ge&&(Ze(),Ge=!1)},Xe=!0,Ge=!0,Qe=[],et=[],tt=null,nt=A,rt={global:!0,ref:0,unhandleds:[],onunhandled:ce,finalize:function(){this.unhandleds.forEach(function(e){try{ce(e[0],e[1])}catch(e){}})}},it=[],ot=0,st=[];n(F.prototype,{then:function(e,t){var n=this,r=new F(function(r,i){W(n,new q(e,t,r,i))});return je&&(!this._prev||null===this._state)&&Z(r,this),r},_then:function(e,t){W(this,new q(null,null,e,t))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):ie(e)}):this.then(null,function(e){return e&&e.name===t?n(e):ie(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),ie(t)})},uncaught:function(e){var t=this;return this.onuncatched=R(this.onuncatched,e),!1===this._state&&-1===Qe.indexOf(this)&&Qe.some(function(e,n,r){return e._value===t._value&&(r[n]=t)}),this},stack:{get:function(){if(this._stack)return this._stack;try{Ve=!0;var e=V(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ve=!1}}}}),n(F,{all:function(){var e=w.apply(null,arguments);return new F(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return F.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof F?e:e&&"function"==typeof e.then?new F(function(t,n){e.then(t,n)}):new F(We,!0,e)},reject:ie,race:function(){var e=w.apply(null,arguments);return new F(function(t,n){e.map(function(e){return F.resolve(e).then(t,n)})})},PSD:{get:function(){return rt},set:function(e){return rt=e}},newPSD:se,usePSD:ae,scheduler:{get:function(){return Je},set:function(e){Je=e}},rejectionMapper:{get:function(){return nt},set:function(e){nt=e}},follow:function(e){return new F(function(t,n){return se(function(t,n){var r=rt;r.unhandleds=[],r.onunhandled=n,r.finalize=x(function(){var e=this;ee(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n)})},on:z(null,{error:[R,re]})});var at=F.on.error;at.subscribe=I("Promise.on('error')",at.subscribe),at.unsubscribe=I("Promise.on('error').unsubscribe",at.unsubscribe);var ct="unhandledrejection";c(function(){Je=function(e,t){setTimeout(function(){e.apply(null,t)},0)}});var ut=String.fromCharCode(65535),ft=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return ut}}(),ht="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lt="String expected.",dt=[],pt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),gt=pt,yt=pt,mt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};D(je,mt);var vt=function(){},bt=!1,wt=Se.idbModules&&Se.idbModules.shimIndexedDB?Se.idbModules:{};return n(fe,Ke),n(fe,{delete:function(e){var t=new fe(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new fe(e).open().then(function(e){return e.close(),!0}).catch(fe.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){return new F(function(e,t){var n=Ae(indexedDB);if(n){var r=n();r.onsuccess=function(t){e(s(t.target.result,0))},r.onerror=ge(t)}else ve(function(t){return e(t),!1})}).then(e)},defineClass:function(t){function n(n){n?e(this,n):bt&&le(this,t)}return n},applyStructure:le,ignoreTransaction:function(e){return rt.trans?ae(rt.transless,e):e()},vip:function(e){return se(function(){return rt.letThrough=!0,e()})},async:function(e){return function(){try{var t=be(e.apply(this,arguments));return t&&"function"==typeof t.then?t:F.resolve(t)}catch(e){return ue(e)}}},spawn:function(e,t,n){try{var r=be(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:F.resolve(r)}catch(e){return ue(e)}},currentTransaction:{get:function(){return rt.trans||null}},Promise:F,debug:{get:function(){return je},set:function(e){D(e,"dexie"===e?function(){return!0}:mt)}},derive:i,extend:e,props:n,override:a,Events:z,events:{get:I(function(){return z})},getByKeyPath:p,setByKeyPath:g,delByKeyPath:y,shallowClone:m,deepClone:v,getObjectDiff:b,asap:f,maxKey:ft,addons:[],connections:dt,MultiModifyError:Ye.Modify,errnames:Fe,IndexSpec:we,TableSchema:_e,dependencies:{indexedDB:wt.shimIndexedDB||Se.indexedDB||Se.mozIndexedDB||Se.webkitIndexedDB||Se.msIndexedDB,IDBKeyRange:wt.IDBKeyRange||Se.IDBKeyRange||Se.webkitIDBKeyRange},semVer:"1.5.1",version:"1.5.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),fakeAutoComplete:vt,default:fe}),d(function(){fe.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:Se.localStorage}),F.rejectionMapper=M,c(function(){fe.fakeAutoComplete=vt=c,fe.fake=bt=!0}),fe}()}()}),mu=function(){var e=new yu(au.client.iddbName);return e.version(au.client.iddbVersion).stores({assets:au.client.iddbColumns}),e.open()},vu=function(e){return new Promise(function(t,n){if(!e)return n(new Error("No type provided.  Must be one of `temporary` or `persistent`."));switch(e){case"temporary":case"TEMPORARY":if(!navigator.webkitTemporaryStorage)return t(gu.desktop()?au.client.iddbDefaultDesktopDisk:au.client.iddbDefaultMobileDisk);navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(gu.desktop()?au.client.iddbDefaultDesktopDisk:au.client.iddbDefaultMobileDisk)});break;case"persistent":case"PERSISTENT":if(!navigator.webkitPersistentStorage)return t(gu.desktop()?au.client.iddbDefaultDesktopDisk:au.client.iddbDefaultMobileDisk);navigator.webkitPersistentStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(gu.desktop()?au.client.iddbDefaultDesktopDisk:au.client.iddbDefaultMobileDisk)})}})},bu=function(e){return new Promise(function(t,n){var r=[],i=[];e.assets.toCollection().primaryKeys().then(function(e){return e.forEach(function(e){i.push(parseInt(e.split("|")[0],10)),r.push(parseInt(e.split("|")[1],10))}),t({assets:r,origins:i})}).catch(function(e){return n(new Error({func:"DB.getKeys",code:401,string:"error getting keys from db",input:{err:e}}))})})},wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ku=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Au=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Eu=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};Function.prototype.$asyncbind=function e(t,n){function r(){return i.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,i){return function o(s){for(;s;){if(s.then)return s=s.then(o,r),i?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function i(e,t){this.resolve=e,this.reject=t}function o(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(e){t(o,e,i)}return o}function s(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:i},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===ea?"undefined":wu(ea))&&y||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var i=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r==1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":wu(e))))try{var r=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&i(function(){for(var r=0,i=t.c.length;r<i;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&i(function(){for(var n=0,i=t.length;n<i;n++)r(t[n],e)})}},then:function(e,n){var r=new t,o={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var s=this.state,a=this.v;i(function(){s(o,a)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var i=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(t,arguments)}catch(e){return n(e)}}}};var xu=Qc("edgemesh:coms"),Su=function(){function e(t,n,r){_u(this,e),this.connections=new Kc,this.ready=!1,this.ioEvents=function(){},this.rtcEvents=function(){},["scope","host"].forEach(function(e){if(!t[e])throw xu("missing core."+e),new Error("missing core."+e)}),this.scope=t.scope,this.host=t.host,this.hubId=t.hubId,this.ioEvents=n,this.rtcEvents=r}return ku(e,[{key:"connect",value:function(){var e=this;return new Promise(function(t){var n={maxPeers:au.client.maxConnectedPeers};e.io=Yc("https://"+e.host+":"+au.server.wsCDNPort,{query:"hubId="+e.hubId,transports:["websocket"],upgrade:!1}),e.ioEvents.call(e.scope,e.io),n=Object.assign({},n,{peerId:e.hubId}),e.io.on("connect",function(){return e.rtc=new Wd(e.io,n),e.rtcEvents.call(e.scope,e.rtc),e._registerHub(),xu("webrtc ready for peer %s",e.rtc.peerId),t({id:e.io.id,io:e.io,rtc:e.rtc})}),e.io.on("disconnected",function(){e.io.removeAllListeners(),e.rtc.destroy()})})}},{key:"disconnect",value:function(){this.io&&(this.io.removeAllListeners(),this.io.disconnect(),this.rtc&&this.rtc.destroy())}},{key:"reconnect",value:function(){var e=this;this.connect().then(function(t){var n=t.id,r=t.rtc;e.hubId||(e.scope.id=n),e.rtc=r})}},{key:"getConnectedPeers",value:function(){return this.rtc.getConnectedPeers()}},{key:"getStats",value:function(){var e=this;return this.rtc&&this.io?this.rtc.getStats().then(function(t){return{pc:t,connectedPeers:e.getConnectedPeers().length,io:{id:e.io.id,connected:e.io.connected,disconnected:e.io.disconnected,query:e.io.query,uri:e.io.io.uri,readyState:e.io.io.readyState}}}):Promise.resolve({})}},{key:"_registerHub",value:function(){var e=this;ge(this.scope.db).then(function(t){var n=t.keys,r=t.quota;uu(e.io,{hubId:e.hubId,browserInfo:e.scope.ua,size:r,keys:{OriginID:n.origins,AssetID:n.assets}}),xu("registering hub")}).catch(function(t){xu("error registering hub %O",{err:t}),cu(e.io,{level:"error",host:e.hubId,func:"Coms.io.on.reconnect",message:"Could not reregister hub",code:301,input:{err:t}})})}}]),e}(),Cu=x(function(e,t){!function(t){e.exports=function(e){function t(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var r,i,o,s,a,c,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=u;r+=64)t(f,n(e.substring(r-64,r)));for(i=(e=e.substring(r-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)o[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(t(f,o),r=0;r<16;r+=1)o[r]=0;return s=8*u,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=a,o[15]=c,t(f,o),f}function o(e){var n,i,o,s,a,c,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=u;n+=64)t(f,r(e.subarray(n-64,n)));for(i=(e=n-64<u?e.subarray(n-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)o[n>>2]|=e[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(f,o),n=0;n<16;n+=1)o[n]=0;return s=8*u,s=s.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=a,o[15]=c,t(f,o),f}function s(e){var t,n="";for(t=0;t<4;t+=1)n+=p[e>>8*t+4&15]+p[e>>8*t&15];return n}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}function f(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function h(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function l(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==a(i("hello"))&&function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,s,a,c=this.byteLength,u=t(n,c),f=c;return r!==e&&(f=t(r,c)),u>f?new ArrayBuffer(0):(i=f-u,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,u,i),s.set(a),o)}}(),d.prototype.append=function(e){return this.appendBinary(c(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},d.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=l(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,n){var r,i,o,s=n;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,t(this._hash,e)},d.hash=function(e,t){return d.hashBinary(c(e),t)},d.hashBinary=function(e,t){var n=a(i(e));return t?l(n):n},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(e){var n,i=h(this._buff.buffer,e,!0),o=i.length;for(this._length+=e.byteLength,n=64;n<=o;n+=64)t(this._hash,r(i.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=l(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e=d.prototype.getState.call(this);return e.buff=f(e.buff),e},d.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){var n=a(o(new Uint8Array(e)));return t?l(n):n},d}()}()}),Tu="undefined"==typeof window,Ru=function(){try{return window.self===window.top}catch(e){return!1}},Bu=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},Du=function(e){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},Pu=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),Du(n)},Ou=function(e,t,n){var r=new ArrayBuffer(n.byteLength+au.client.chunkReservedBytes),i=new DataView(r);return i.setInt32(au.client.chunkIdOffset,e),i.setInt32(au.client.chunkPositionOffset,t),new Uint8Array(r,0,r.byteLength).set(new Uint8Array(n),au.client.chunkReservedBytes),r},Iu=function(e,t){var n=void 0;if(e._arrayBuffer){var r=e.payloadSize*(t+1)-e.payloadSize;if(r>=e.fileSize)return;var i=r+e.payloadSize;i=i>e.fileSize?e.fileSize:i,n=e._arrayBuffer.slice(r,i)}else e._chunks[t]&&(n=e._chunks[t]);return n},ju=function(){function e(t){_u(this,e),this.scope=t,this.currentIndex=0}return ku(e,[{key:"forEachChunk",value:function(e,t){for(var n=0;this.currentIndex<this.scope.totalChunks;)n=this.currentIndex,void 0===this.getChunk()&&e(void 0,n);t()}},{key:"getChunk",value:function(e){var t=this.currentIndex,n=void 0;if("number"==typeof e){if(e<0)return;t=e}var r=Iu(this.scope,t);return r&&(n=Ou(this.scope.uid,this.currentIndex,r))&&"number"!=typeof e&&(this.currentIndex+=1),n}},{key:"getUnpackedChunk",value:function(e){var t=this.currentIndex;if("number"==typeof e){if(e<0)return;t=e}var n=Iu(this.scope,t);return n&&"number"!=typeof e&&(this.currentIndex+=1),n}}]),e}(),Nu=new Kc({identifier:"uid"}),Lu=function(){return Math.floor(65535*Math.random()+1)},Uu=function(){function e(t){_u(this,e);var n=void 0,r=void 0,i=void 0,o=void 0;if("object"!==(void 0===t?"undefined":wu(t)))throw new TypeError("metadata object must be passed in");if(!t.mimeType)throw new Error("no mimeType specified");if(!t.chunkSize)throw new Error("no chunkSize specified");if(!t.name)throw new Error("No name specified");if(t.arrayBuffer&&("function"!=typeof t.arrayBuffer.toString||"[object ArrayBuffer]"!==t.arrayBuffer.toString()))throw new Error("arrayBuffer must be an actual ArrayBuffer object");if(!t.arrayBuffer&&!t.uid)throw new Error("arrayBuffer or uid must be specified");if(t.arrayBuffer&&t.uid)throw new Error("cannot manually assign uid");t.uid||(t.uid=Lu()),t.arrayBuffer?(r=t.chunkSize-au.client.chunkReservedBytes,n=Math.ceil(t.arrayBuffer.byteLength/r),i=Cu.ArrayBuffer.hash(t.arrayBuffer),o=!0):i=t.checksum,this.uid=t.uid,this.name=t.name,this.existsLocally=o||!1,this.mimeType=t.mimeType,this.chunkSize=t.chunkSize,this.compressed=t.compressed,this.payloadSize=r||t.payloadSize,this.reservedSize=au.client.chunkReservedBytes,this.fileSize=t.arrayBuffer?t.arrayBuffer.byteLength:t.fileSize,this.totalChunks=n||(t.totalChunks?t.totalChunks:0),this.checksum=i,this.generatedChecksum=null,this.currentIndex=0,this.chunksReceived=0,this._arrayBuffer=t.arrayBuffer?t.arrayBuffer:null,this._chunks=[],Nu.addRecord(this)}return ku(e,[{key:"clearData",value:function(){Nu.removeRecord(this.uid),delete this._arrayBuffer}},{key:"getMetadata",value:function(){return{uid:this.uid,name:this.name,mimeType:this.mimeType,chunkSize:this.chunkSize,compressed:this.compressed,payloadSize:this.payloadSize,reservedSize:this.reservedSize,fileSize:this.fileSize,totalChunks:this.totalChunks,checksum:this.checksum}}},{key:"getFile",value:function(){var e=this;return new Promise(function(t){e._arrayBuffer=e._chunks[0];for(var n=1;n<e._chunks.length;n+=1)e._arrayBuffer=Pu(e._arrayBuffer,e._chunks[n]);e.generatedChecksum=Cu.ArrayBuffer.hash(e._arrayBuffer),t({ArrayBuffer:e._arrayBuffer,checksum:e.generatedChecksum,getChecksum:Cu.ArrayBuffer.hash})})}},{key:"getTransferObject",value:function(){return new ju(this)}},{key:"getFileObject",value:function(e){return Nu.getRecord(parseInt(e,10))}},{key:"onChunkReceived",value:function(){}},{key:"onCompleted",value:function(){}}],[{key:"unpack",value:function(e){var t=new DataView(e);return[t.getInt32(au.client.chunkIdOffset),t.getInt32(au.client.chunkPositionOffset),new Uint8Array(e.slice(au.client.chunkReservedBytes))]}},{key:"submitChunk",value:function(e){var t=this.unpack(e),n=t[0],r=t[1],i=t[2],o=Nu.getRecord(n);return!!o&&(o._chunks[r]=i,o.chunksReceived+=1,o.onChunkReceived(i,r),o.chunksReceived===o.totalChunks&&(o.existsLocally=!0,o.onCompleted(o)),Nu.addRecord(o),!0)}}]),e}(),Mu=window.localStorage,zu=function(e,t){return Mu.setItem(e,t)},Fu=function(e){return Mu.removeItem(e)},qu={get:function(e){var t=Mu.getItem(e);try{var n=JSON.parse(t).value;return Fu(e),zu(e,n),n}catch(e){return t}},set:zu,remove:Fu},Yu=x(function(e){(function(){var t,n,r,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==ea&&null!==ea&&ea.hrtime?(e.exports=function(){return(t()-o)/1e6},n=ea.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),s=1e9*ea.uptime(),o=i-s):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(ta)}),Hu=function(){return(new Date).toISOString()},Ku=function(){return Yu()},Wu=x(function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],s.set(o,i),i+=o.length;return s}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)}),$u=4,Vu=0,Zu=1,Ju=2,Xu=0,Gu=1,Qu=2,ef=29,tf=256,nf=tf+1+ef,rf=30,of=19,sf=2*nf+1,af=15,cf=16,uf=7,ff=256,hf=16,lf=17,df=18,pf=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],gf=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],yf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],mf=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],vf=new Array(2*(nf+2));ye(vf);var bf=new Array(2*rf);ye(bf);var wf=new Array(512);ye(wf);var _f=new Array(256);ye(_f);var kf=new Array(ef);ye(kf);var Af=new Array(rf);ye(Af);var Ef,xf,Sf,Cf,Tf=!1,Rf={_tr_init:ze,_tr_stored_block:Fe,_tr_flush_block:Ye,_tr_tally:He,_tr_align:qe},Bf=Ke,Df=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),Pf=We,Of={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},If=0,jf=1,Nf=3,Lf=4,Uf=5,Mf=0,zf=1,Ff=-2,qf=-3,Yf=-5,Hf=-1,Kf=1,Wf=2,$f=3,Vf=4,Zf=0,Jf=2,Xf=8,Gf=9,Qf=15,eh=8,th=286,nh=30,rh=19,ih=2*th+1,oh=15,sh=3,ah=258,ch=ah+sh+1,uh=32,fh=42,hh=69,lh=73,dh=91,ph=103,gh=113,yh=666,mh=1,vh=2,bh=3,wh=4,_h=3;Cf=[new ct(0,0,0,0,rt),new ct(4,4,8,4,it),new ct(4,5,16,8,it),new ct(4,6,32,32,it),new ct(4,4,16,16,ot),new ct(8,16,32,32,ot),new ct(8,16,128,128,ot),new ct(8,32,128,256,ot),new ct(32,128,258,1024,ot),new ct(32,258,258,4096,ot)];var kh={deflateInit:gt,deflateInit2:pt,deflateReset:lt,deflateResetKeep:ht,deflateSetHeader:dt,deflate:yt,deflateEnd:mt,deflateSetDictionary:vt,deflateInfo:"pako deflate (from Nodeca project)"},Ah=!0,Eh=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Ah=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Eh=!1}for(var xh=new Wu.Buf8(256),Sh=0;Sh<256;Sh++)xh[Sh]=Sh>=252?6:Sh>=248?5:Sh>=240?4:Sh>=224?3:Sh>=192?2:1;xh[254]=xh[254]=1;var Ch={string2buf:function(e){var t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Wu.Buf8(a),o=0,i=0;o<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2binstring:function(e){return bt(e,e.length)},binstring2buf:function(e){for(var t=new Wu.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},buf2string:function(e,t){var n,r,i,o,s=t||e.length,a=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)a[r++]=i;else if((o=xh[i])>4)a[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&e[n++],o--;o>1?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return bt(a,r)},utf8border:function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+xh[e[n]]>t?n:t}},Th=wt,Rh=Object.prototype.toString,Bh=0,Dh=-1,Ph=0,Oh=8;_t.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=Ch.string2buf(e):"[object ArrayBuffer]"===Rh.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Wu.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=kh.deflate(i,r))&&n!==Bh)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(Ch.buf2binstring(Wu.shrinkBuf(i.output,i.next_out))):this.onData(Wu.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=kh.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Bh):2!==r||(this.onEnd(Bh),i.avail_out=0,!0)},_t.prototype.onData=function(e){this.chunks.push(e)},_t.prototype.onEnd=function(e){e===Bh&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Wu.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ih,jh,Nh={Deflate:_t,deflate:kt,deflateRaw:At,gzip:Et},Lh=function(e,t){var n,r,i,o,s,a,c,u,f,h,l,d,p,g,y,m,v,b,w,_,k,A,E,x,S;n=e.state,r=e.next_in,x=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=n.dmax,u=n.wsize,f=n.whave,h=n.wnext,l=n.window,d=n.hold,p=n.bits,g=n.lencode,y=n.distcode,m=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),b=g[d&m];t:for(;;){if(w=b>>>24,d>>>=w,p-=w,0===(w=b>>>16&255))S[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(p<w&&(d+=x[r++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=x[r++]<<p,p+=8,d+=x[r++]<<p,p+=8),b=y[d&v];n:for(;;){if(w=b>>>24,d>>>=w,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=y[(65535&b)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,w&=15,p<w&&(d+=x[r++]<<p,(p+=8)<w&&(d+=x[r++]<<p,p+=8)),(k+=d&(1<<w)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,p-=w,w=o-s,k>w){if((w=k-w)>f&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(A=0,E=l,0===h){if(A+=u-w,w<_){_-=w;do{S[o++]=l[A++]}while(--w);A=o-k,E=S}}else if(h<w){if(A+=u+h-w,(w-=h)<_){_-=w;do{S[o++]=l[A++]}while(--w);if(A=0,h<_){_-=w=h;do{S[o++]=l[A++]}while(--w);A=o-k,E=S}}}else if(A+=h-w,w<_){_-=w;do{S[o++]=l[A++]}while(--w);A=o-k,E=S}for(;_>2;)S[o++]=E[A++],S[o++]=E[A++],S[o++]=E[A++],_-=3;_&&(S[o++]=E[A++],_>1&&(S[o++]=E[A++]))}else{A=o-k;do{S[o++]=S[A++],S[o++]=S[A++],S[o++]=S[A++],_-=3}while(_>2);_&&(S[o++]=S[A++],_>1&&(S[o++]=S[A++]))}break}}break}}while(r<i&&o<a);r-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=p},Uh=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Mh=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],zh=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Fh=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],qh=function(e,t,n,r,i,o,s,a){var c,u,f,h,l,d,p,g,y,m=a.bits,v=0,b=0,w=0,_=0,k=0,A=0,E=0,x=0,S=0,C=0,T=null,R=0,B=new Wu.Buf16(16),D=new Wu.Buf16(16),P=null,O=0;for(v=0;v<=15;v++)B[v]=0;for(b=0;b<r;b++)B[t[n+b]]++;for(k=m,_=15;_>=1&&0===B[_];_--);if(k>_&&(k=_),0===_)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(w=1;w<_&&0===B[w];w++);for(k<w&&(k=w),x=1,v=1;v<=15;v++)if(x<<=1,(x-=B[v])<0)return-1;if(x>0&&(0===e||1!==_))return-1;for(D[1]=0,v=1;v<15;v++)D[v+1]=D[v]+B[v];for(b=0;b<r;b++)0!==t[n+b]&&(s[D[t[n+b]]++]=b);if(0===e?(T=P=s,d=19):1===e?(T=Uh,R-=257,P=Mh,O-=257,d=256):(T=zh,P=Fh,d=-1),C=0,b=0,v=w,l=o,A=k,E=0,f=-1,S=1<<k,h=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){p=v-E,s[b]<d?(g=0,y=s[b]):s[b]>d?(g=P[O+s[b]],y=T[R+s[b]]):(g=96,y=0),c=1<<v-E,w=u=1<<A;do{i[l+(C>>E)+(u-=c)]=p<<24|g<<16|y|0}while(0!==u);for(c=1<<v-1;C&c;)c>>=1;if(0!==c?(C&=c-1,C+=c):C=0,b++,0==--B[v]){if(v===_)break;v=t[n+s[b]]}if(v>k&&(C&h)!==f){for(0===E&&(E=k),l+=w,x=1<<(A=v-E);A+E<_&&!((x-=B[A+E])<=0);)A++,x<<=1;if(S+=1<<A,1===e&&S>852||2===e&&S>592)return 1;i[f=C&h]=k<<24|A<<16|l-o|0}}return 0!==C&&(i[l+C]=v-E<<24|64<<16|0),a.bits=k,0},Yh=0,Hh=1,Kh=2,Wh=4,$h=5,Vh=6,Zh=0,Jh=1,Xh=2,Gh=-2,Qh=-3,el=-4,tl=-5,nl=8,rl=1,il=2,ol=3,sl=4,al=5,cl=6,ul=7,fl=8,hl=9,ll=10,dl=11,pl=12,gl=13,yl=14,ml=15,vl=16,bl=17,wl=18,_l=19,kl=20,Al=21,El=22,xl=23,Sl=24,Cl=25,Tl=26,Rl=27,Bl=28,Dl=29,Pl=30,Ol=31,Il=32,jl=852,Nl=592,Ll=15,Ul=!0,Ml={inflateReset:Tt,inflateReset2:Rt,inflateResetKeep:Ct,inflateInit:Dt,inflateInit2:Bt,inflate:It,inflateEnd:jt,inflateGetHeader:Nt,inflateSetDictionary:Lt,inflateInfo:"pako inflate (from Nodeca project)"},zl={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Fl=Ut,ql=Object.prototype.toString;Mt.prototype.push=function(e,t){var n,r,i,o,s,a,c=this.strm,u=this.options.chunkSize,f=this.options.dictionary,h=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?zl.Z_FINISH:zl.Z_NO_FLUSH,"string"==typeof e?c.input=Ch.binstring2buf(e):"[object ArrayBuffer]"===ql.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new Wu.Buf8(u),c.next_out=0,c.avail_out=u),(n=Ml.inflate(c,zl.Z_NO_FLUSH))===zl.Z_NEED_DICT&&f&&(a="string"==typeof f?Ch.string2buf(f):"[object ArrayBuffer]"===ql.call(f)?new Uint8Array(f):f,n=Ml.inflateSetDictionary(this.strm,a)),n===zl.Z_BUF_ERROR&&!0===h&&(n=zl.Z_OK,h=!1),n!==zl.Z_STREAM_END&&n!==zl.Z_OK)return this.onEnd(n),this.ended=!0,!1;c.next_out&&(0!==c.avail_out&&n!==zl.Z_STREAM_END&&(0!==c.avail_in||r!==zl.Z_FINISH&&r!==zl.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Ch.utf8border(c.output,c.next_out),o=c.next_out-i,s=Ch.buf2string(c.output,i),c.next_out=o,c.avail_out=u-o,o&&Wu.arraySet(c.output,c.output,i,o,0),this.onData(s)):this.onData(Wu.shrinkBuf(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(h=!0)}while((c.avail_in>0||0===c.avail_out)&&n!==zl.Z_STREAM_END);return n===zl.Z_STREAM_END&&(r=zl.Z_FINISH),r===zl.Z_FINISH?(n=Ml.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===zl.Z_OK):r!==zl.Z_SYNC_FLUSH||(this.onEnd(zl.Z_OK),c.avail_out=0,!0)},Mt.prototype.onData=function(e){this.chunks.push(e)},Mt.prototype.onEnd=function(e){e===zl.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Wu.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Yl={Inflate:Mt,inflate:zt,inflateRaw:Ft,ungzip:zt},Hl={};(0,Wu.assign)(Hl,Nh,Yl,zl);var Kl=Hl,Wl=function(e){try{return Kl.inflate(e)}catch(e){return!1}},$l=Qc("edgemesh:mesh"),Vl=function(e){function t(e,n,r,i){_u(this,t);var o=Eu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.currentHubIndex=0,o.receivedChunks=0,o.complete=!1,o.locateData={},o.meta={},o.stats={},["io","rtc","id"].forEach(function(t){if(!e[t])throw $l("missing core."+t),new Error("missing core."+t)}),["origin","asset","hubs","checksum","protocol"].forEach(function(e){if(!n[e])throw $l("missing locateData."+e),new Error("missing locateData."+e)}),o.io=e.io,o.rtc=e.rtc,o.id=e.id,o.topic=n.topic||n.origin,o.locateData=n,o.rtc.on("peer-error",o.handleDisconnect.bind(o)),o.onCompleted=r||function(){},o.onFailure=i||function(){},o}return Au(t,e),ku(t,[{key:"deconstructor",value:function(){this.rtc.removeListener("peer-error",this.handleDisconnect)}},{key:"start",value:function(){this.stats.dst=this.id,this.stats.topic=this.topic,this.stats.assetId=this.locateData.asset,this.stats.originId=this.locateData.origin,this.stats.protocol=this.locateData.protocol,this.stats.transferStart=Hu(),this.requestTransfer()}},{key:"requestTransfer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],n=this.locateData,r=n.origin,i=n.asset,o=n.hubs,s=n.checksum,a=o[this.currentHubIndex];if(!a)return $l("no hubs found %O",{origin:r,asset:i}),this.onFailure("no hubs found",{origin:r,asset:i}),this.deconstructor();$l("starting mesh transfer from hub %O",{hubId:a});var c=Ku();this.stats.src=a,this.checksum=s,this.connectionTimeout=setTimeout(this.tryNextHub.bind(this),au.client.meshConnectTimeout),this.rtc.connect(a).then(function(n){clearTimeout(e.connectionTimeout),$l("connected to peer %s",a),e.stats.handshake=Ku()-c,e.rtc.send(n,"ASSET_REQUEST",{origin:r,asset:i,fromPeerId:e.id,chunks:t})}).catch(function(t){$l("error connecting to peer %s",t),cu(e.io,{level:"error",host:e.id,code:104,message:"error connecting to peer",func:"Mesh.requestTransfer",input:{err:t,hub:a}}),e.tryNextHub()})}},{key:"metaReceived",value:function(e){this.meta=e,$l("asset mesh meta received %O",e),this.emit("metadata",this.meta),new Uu(e).onCompleted=this.transferComplete.bind(this)}},{key:"chunkReceived",value:function(e){Uu.submitChunk(Du(e.chunk)),this.emit("chunkReceived",e.chunk),$l("asset mesh chunk received %O",e),this.receivedChunks++}},{key:"transferComplete",value:function(e){var t=this,n=this.locateData.origin,r=this.locateData.asset;this.complete=!0,e.getFile().then(function(i){var o=i.ArrayBuffer;if(t.meta.compressed&&(o=Wl(o)),!o)return $l("could not decompress asset"),t.tryNextHub(!0);o=Du(o);var s=i.getChecksum(o),a=Object.assign({},t.stats,{chunkId:0,size:o.byteLength/1024,transferEnd:Hu(),success:1});if(t.checksum===s){pu(t.io,a),$l("mesh transfer complete %O",e.getMetadata());var c={origin:n,asset:r,buffer:o,contentType:t.meta.mimeType};t.onCompleted(c),e.clearData(),t.deconstructor()}else $l("checksum did not match %O",{expected:t.checksum,generated:s}),t.tryNextHub(!0)})}},{key:"handleDisconnect",value:function(){if(!this.complete&&this.receivedChunks<this.meta.totalChunks){if($l("peer disconnected midflight %O",{receivedChunks:this.recievedChunks,totalChunks:this.meta.totalChunks}),0===this.receivedChunks)return this.tryNextHub();for(var e=[],t=this.receivedChunks;t<this.meta.totalChunks;t++)e.push(t);return this.tryNextHub(!1,e)}}},{key:"tryNextHub",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if($l("trying next hub..."),e){var n=Object.assign({},this.stats,{chunkId:0,size:0,handshake:-1,transferEnd:Hu(),success:0});pu(this.io,n)}this.currentHubIndex++,this.requestTransfer(t)}}]),t}(Xa),Zl=Qc("edgemesh:direct-mesh"),Jl=(function(e){function t(e,n,r){_u(this,t);var i=Eu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.receivedChunks=0,i.complete=!1,i.meta={},i.meta=e,i.originId=e.name.split("|")[0],i.assetId=e.name.split("|")[1],i.onCompleted=n||function(){},i.onFailure=r||function(){},i.file=new Uu(i.meta),i.file.onCompleted=i.transferComplete.bind(i),i}Au(t,e),ku(t,[{key:"chunkReceived",value:function(e){Uu.submitChunk(Du(e.chunk)),this.emit("chunkReceived",e.chunk),Zl("asset mesh chunk received %O",e),this.receivedChunks++}},{key:"transferComplete",value:function(e){var t=this;this.complete=!0,e.getFile().then(function(n){var r=n.ArrayBuffer;if(t.meta.compressed&&(r=Wl(r)),!r)return Zl("could not decompress asset");r=Du(r);var i={origin:t.originId,asset:t.assetId,buffer:r,contentType:t.meta.mimeType};t.onCompleted(i),e.clearData(),Zl("mesh transfer complete %O",e.getMetadata())})}}])}(Xa),[]),Xl=[],Gl="undefined"!=typeof Uint8Array?Uint8Array:Array,Ql=!1,ed={}.toString,td=Array.isArray||function(e){return"[object Array]"==ed.call(e)};Xt.TYPED_ARRAY_SUPPORT=void 0===Ps.TYPED_ARRAY_SUPPORT||Ps.TYPED_ARRAY_SUPPORT,Xt.poolSize=8192,Xt._augment=function(e){return e.__proto__=Xt.prototype,e},Xt.from=function(e,t,n){return Gt(null,e,t,n)},Xt.TYPED_ARRAY_SUPPORT&&(Xt.prototype.__proto__=Uint8Array.prototype,Xt.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Xt[Symbol.species]),Xt.alloc=function(e,t,n){return en(null,e,t,n)},Xt.allocUnsafe=function(e){return tn(null,e)},Xt.allocUnsafeSlow=function(e){return tn(null,e)},Xt.isBuffer=Yn,Xt.compare=function(e,t){if(!cn(e)||!cn(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Xt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Xt.concat=function(e,t){if(!td(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Xt.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Xt.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!cn(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Xt.byteLength=un,Xt.prototype._isBuffer=!0,Xt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)hn(this,t,t+1);return this},Xt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)hn(this,t,t+3),hn(this,t+1,t+2);return this},Xt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)hn(this,t,t+7),hn(this,t+1,t+6),hn(this,t+2,t+5),hn(this,t+3,t+4);return this},Xt.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?_n(this,0,e):fn.apply(this,arguments)},Xt.prototype.equals=function(e){if(!cn(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Xt.compare(this,e)},Xt.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Xt.prototype.compare=function(e,t,n,r,i){if(!cn(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),f=0;f<a;++f)if(c[f]!==u[f]){o=c[f],s=u[f];break}return o<s?-1:s<o?1:0},Xt.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Xt.prototype.indexOf=function(e,t,n){return ln(this,e,t,n,!0)},Xt.prototype.lastIndexOf=function(e,t,n){return ln(this,e,t,n,!1)},Xt.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return pn(this,e,t,n);case"utf8":case"utf-8":return gn(this,e,t,n);case"ascii":return yn(this,e,t,n);case"latin1":case"binary":return mn(this,e,t,n);case"base64":return vn(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bn(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Xt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var nd=4096;Xt.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(Xt.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Xt.prototype;else{var i=t-e;r=new Xt(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},Xt.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Cn(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Xt.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Cn(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Xt.prototype.readUInt8=function(e,t){return t||Cn(e,1,this.length),this[e]},Xt.prototype.readUInt16LE=function(e,t){return t||Cn(e,2,this.length),this[e]|this[e+1]<<8},Xt.prototype.readUInt16BE=function(e,t){return t||Cn(e,2,this.length),this[e]<<8|this[e+1]},Xt.prototype.readUInt32LE=function(e,t){return t||Cn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Xt.prototype.readUInt32BE=function(e,t){return t||Cn(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Xt.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Cn(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},Xt.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Cn(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},Xt.prototype.readInt8=function(e,t){return t||Cn(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Xt.prototype.readInt16LE=function(e,t){t||Cn(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Xt.prototype.readInt16BE=function(e,t){t||Cn(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Xt.prototype.readInt32LE=function(e,t){return t||Cn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Xt.prototype.readInt32BE=function(e,t){return t||Cn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Xt.prototype.readFloatLE=function(e,t){return t||Cn(e,4,this.length),$t(this,e,!0,23,4)},Xt.prototype.readFloatBE=function(e,t){return t||Cn(e,4,this.length),$t(this,e,!1,23,4)},Xt.prototype.readDoubleLE=function(e,t){return t||Cn(e,8,this.length),$t(this,e,!0,52,8)},Xt.prototype.readDoubleBE=function(e,t){return t||Cn(e,8,this.length),$t(this,e,!1,52,8)},Xt.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Tn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Xt.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Tn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Xt.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,1,255,0),Xt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Xt.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,2,65535,0),Xt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Rn(this,e,t,!0),t+2},Xt.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,2,65535,0),Xt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Rn(this,e,t,!1),t+2},Xt.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,4,4294967295,0),Xt.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Bn(this,e,t,!0),t+4},Xt.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,4,4294967295,0),Xt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Bn(this,e,t,!1),t+4},Xt.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Tn(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},Xt.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Tn(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},Xt.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,1,127,-128),Xt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Xt.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,2,32767,-32768),Xt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Rn(this,e,t,!0),t+2},Xt.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,2,32767,-32768),Xt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Rn(this,e,t,!1),t+2},Xt.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,4,2147483647,-2147483648),Xt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Bn(this,e,t,!0),t+4},Xt.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Tn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Xt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Bn(this,e,t,!1),t+4},Xt.prototype.writeFloatLE=function(e,t,n){return Pn(this,e,t,!0,n)},Xt.prototype.writeFloatBE=function(e,t,n){return Pn(this,e,t,!1,n)},Xt.prototype.writeDoubleLE=function(e,t,n){return On(this,e,t,!0,n)},Xt.prototype.writeDoubleBE=function(e,t,n){return On(this,e,t,!1,n)},Xt.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Xt.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Xt.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Xt.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=cn(e)?e:Ln(new Xt(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var rd=/[^+\/0-9A-Za-z-_]/g,id=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null},od=x(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),sd=x(function(e){function t(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function n(e,t){if(e>65536)throw new Error("requested too many random bytes");var n=new ta.Uint8Array(e);e>0&&r.getRandomValues(n);var i=new Xt(n.buffer);return"function"==typeof t?y(function(){t(null,i)}):i}var r=ta.crypto||ta.msCrypto;r&&r.getRandomValues?e.exports=n:e.exports=t});Wn.prototype=Object.create(null),$n.usingDomains=!1,$n.prototype.domain=void 0,$n.prototype._events=void 0,$n.prototype._maxListeners=void 0,$n.defaultMaxListeners=10,$n.init=function(){this.domain=null,$n.usingDomains&&(!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Wn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},$n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},$n.prototype.getMaxListeners=function(){return Vn(this)},$n.prototype.emit=function(e){var t,n,r,i,o,s,a,c="error"===e;if(s=this._events)c=c&&null==s.error;else if(!c)return!1;if(a=this.domain,c){if(t=arguments[1],!a){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(n=s[e]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:Zn(n,f,this);break;case 2:Jn(n,f,this,arguments[1]);break;case 3:Xn(n,f,this,arguments[1],arguments[2]);break;case 4:Gn(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];Qn(n,f,this,i)}return!0},$n.prototype.addListener=function(e,t){return er(this,e,t,!1)},$n.prototype.on=$n.prototype.addListener,$n.prototype.prependListener=function(e,t){return er(this,e,t,!0)},$n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,nr(this,e,t)),this},$n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,nr(this,e,t)),this},$n.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new Wn:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Wn,this;delete r[e]}else ir(n,i);r.removeListener&&this.emit("removeListener",e,s||t)}return this},$n.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Wn,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new Wn:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Wn,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},$n.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:sr(t):[]},$n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):rr.call(e,t)},$n.prototype.listenerCount=rr,$n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var ad,cd,ud=ad="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},fd=/%[sdj%]/g,hd={};ur.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ur.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ld=[],dd=[],pd="undefined"!=typeof Uint8Array?Uint8Array:Array,gd=!1,yd={}.toString,md=Array.isArray||function(e){return"[object Array]"==yd.call(e)};qr.TYPED_ARRAY_SUPPORT=void 0===Ps.TYPED_ARRAY_SUPPORT||Ps.TYPED_ARRAY_SUPPORT,qr.poolSize=8192,qr._augment=function(e){return e.__proto__=qr.prototype,e},qr.from=function(e,t,n){return Yr(null,e,t,n)},qr.TYPED_ARRAY_SUPPORT&&(qr.prototype.__proto__=Uint8Array.prototype,qr.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&qr[Symbol.species]),qr.alloc=function(e,t,n){return Kr(null,e,t,n)},qr.allocUnsafe=function(e){return Wr(null,e)},qr.allocUnsafeSlow=function(e){return Wr(null,e)},qr.isBuffer=Oi,qr.compare=function(e,t){if(!Gr(e)||!Gr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},qr.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},qr.concat=function(e,t){if(!md(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return qr.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=qr.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Gr(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},qr.byteLength=Qr,qr.prototype._isBuffer=!0,qr.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ti(this,t,t+1);return this},qr.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ti(this,t,t+3),ti(this,t+1,t+2);return this},qr.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ti(this,t,t+7),ti(this,t+1,t+6),ti(this,t+2,t+5),ti(this,t+3,t+4);return this},qr.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?hi(this,0,e):ei.apply(this,arguments)},qr.prototype.equals=function(e){if(!Gr(e))throw new TypeError("Argument must be a Buffer");return this===e||0===qr.compare(this,e)},qr.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},qr.prototype.compare=function(e,t,n,r,i){if(!Gr(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),f=0;f<a;++f)if(c[f]!==u[f]){o=c[f],s=u[f];break}return o<s?-1:s<o?1:0},qr.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},qr.prototype.indexOf=function(e,t,n){return ni(this,e,t,n,!0)},qr.prototype.lastIndexOf=function(e,t,n){return ni(this,e,t,n,!1)},qr.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return ii(this,e,t,n);case"utf8":case"utf-8":return oi(this,e,t,n);case"ascii":return si(this,e,t,n);case"latin1":case"binary":return ai(this,e,t,n);case"base64":return ci(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ui(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},qr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var vd=4096;qr.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(qr.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=qr.prototype;else{var i=t-e;r=new qr(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},qr.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||mi(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},qr.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||mi(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},qr.prototype.readUInt8=function(e,t){return t||mi(e,1,this.length),this[e]},qr.prototype.readUInt16LE=function(e,t){return t||mi(e,2,this.length),this[e]|this[e+1]<<8},qr.prototype.readUInt16BE=function(e,t){return t||mi(e,2,this.length),this[e]<<8|this[e+1]},qr.prototype.readUInt32LE=function(e,t){return t||mi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},qr.prototype.readUInt32BE=function(e,t){return t||mi(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},qr.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||mi(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},qr.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||mi(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},qr.prototype.readInt8=function(e,t){return t||mi(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},qr.prototype.readInt16LE=function(e,t){t||mi(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},qr.prototype.readInt16BE=function(e,t){t||mi(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},qr.prototype.readInt32LE=function(e,t){return t||mi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},qr.prototype.readInt32BE=function(e,t){return t||mi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},qr.prototype.readFloatLE=function(e,t){return t||mi(e,4,this.length),Ur(this,e,!0,23,4)},qr.prototype.readFloatBE=function(e,t){return t||mi(e,4,this.length),Ur(this,e,!1,23,4)},qr.prototype.readDoubleLE=function(e,t){return t||mi(e,8,this.length),Ur(this,e,!0,52,8)},qr.prototype.readDoubleBE=function(e,t){return t||mi(e,8,this.length),Ur(this,e,!1,52,8)},qr.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||vi(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},qr.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||vi(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},qr.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,1,255,0),qr.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},qr.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,2,65535,0),qr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):bi(this,e,t,!0),t+2},qr.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,2,65535,0),qr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):bi(this,e,t,!1),t+2},qr.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,4,4294967295,0),qr.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):wi(this,e,t,!0),t+4},qr.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,4,4294967295,0),qr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):wi(this,e,t,!1),t+4},qr.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);vi(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},qr.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);vi(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},qr.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,1,127,-128),qr.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},qr.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,2,32767,-32768),qr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):bi(this,e,t,!0),t+2},qr.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,2,32767,-32768),qr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):bi(this,e,t,!1),t+2},qr.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,4,2147483647,-2147483648),qr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):wi(this,e,t,!0),t+4},qr.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||vi(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),qr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):wi(this,e,t,!1),t+4},qr.prototype.writeFloatLE=function(e,t,n){return ki(this,e,t,!0,n)},qr.prototype.writeFloatBE=function(e,t,n){return ki(this,e,t,!1,n)},qr.prototype.writeDoubleLE=function(e,t,n){return Ai(this,e,t,!0,n)},qr.prototype.writeDoubleBE=function(e,t,n){return Ai(this,e,t,!1,n)},qr.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!qr.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},qr.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!qr.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=Gr(e)?e:Ci(new qr(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var bd=/[^+\/0-9A-Za-z-_]/g;Ni.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},Ni.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},Ni.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},Ni.prototype.clear=function(){this.head=this.tail=null,this.length=0},Ni.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},Ni.prototype.concat=function(e){if(0===this.length)return qr.alloc(0);if(1===this.length)return this.head.data;for(var t=qr.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t};var wd=qr.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};Ui.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var r=(t+=e.toString(this.encoding,0,r)).length-1,i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},Ui.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Ui.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t},Ki.ReadableState=Hi;var _d=function(e){if(Er(cd)&&(cd=ea.env.NODE_DEBUG||""),e=e.toUpperCase(),!hd[e])if(new RegExp("\\b"+e+"\\b","i").test(cd)){hd[e]=function(){var t=ar.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else hd[e]=function(){};return hd[e]}("stream");ud(Ki,$n),Ki.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=Xt.from(e,t),t=""),Wi(this,n,e,t,!1)},Ki.prototype.unshift=function(e){return Wi(this,this._readableState,e,"",!0)},Ki.prototype.isPaused=function(){return!1===this._readableState.flowing},Ki.prototype.setEncoding=function(e){return this._readableState.decoder=new Ui(e),this._readableState.encoding=e,this};var kd=8388608;Ki.prototype.read=function(e){_d("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ho(this):Gi(this),null;if(0===(e=Zi(e,t))&&t.ended)return 0===t.length&&ho(this),null;var r=t.needReadable;_d("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&_d("length less than watermark",r=!0),t.ended||t.reading?_d("reading or ended",r=!1):r&&(_d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Zi(n,t)));var i;return i=e>0?ao(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&ho(this)),null!==i&&this.emit("data",i),i},Ki.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Ki.prototype.pipe=function(e,t){function n(e){_d("onunpipe"),e===f&&i()}function r(){_d("onend"),e.end()}function i(){_d("cleanup"),e.removeListener("close",a),e.removeListener("finish",c),e.removeListener("drain",d),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",r),f.removeListener("end",i),f.removeListener("data",o),p=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||d()}function o(t){_d("ondata"),g=!1,!1!==e.write(t)||g||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==go(h.pipes,e))&&!p&&(_d("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,g=!0),f.pause())}function s(t){_d("onerror",t),u(),e.removeListener("error",s),0===Yi(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",c),u()}function c(){_d("onfinish"),e.removeListener("close",a),u()}function u(){_d("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,_d("pipe count=%d opts=%j",h.pipesCount,t);var l=!t||!1!==t.end?r:i;h.endEmitted?y(l):f.once("end",l),e.on("unpipe",n);var d=no(f);e.on("drain",d);var p=!1,g=!1;return f.on("data",o),qi(e,"error",s),e.once("close",a),e.once("finish",c),e.emit("pipe",f),h.flowing||(_d("pipe resume"),f.resume()),e},Ki.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=go(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Ki.prototype.on=function(e,t){var n=$n.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Gi(this):y(ro,this))}return n},Ki.prototype.addListener=Ki.prototype.on,Ki.prototype.resume=function(){var e=this._readableState;return e.flowing||(_d("resume"),e.flowing=!0,io(this,e)),this},Ki.prototype.pause=function(){return _d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ki.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(_d("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){_d("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return po(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){_d("wrapped _read",t),n&&(n=!1,e.resume())},r},Ki._fromList=ao,bo.WritableState=vo,ud(bo,$n),vo.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},bo.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},bo.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),qr.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=yo),r.ended?wo(this,n):_o(this,r,e,n)&&(r.pendingcb++,i=Ao(this,r,e,t,n)),i},bo.prototype.cork=function(){this._writableState.corked++},bo.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Bo(this,e))},bo.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},bo.prototype._write=function(e,t,n){n(new Error("not implemented"))},bo.prototype._writev=null,bo.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||Io(this,r,n)},ud(No,Ki);for(var Ad=Object.keys(bo.prototype),Ed=0;Ed<Ad.length;Ed++){var xd=Ad[Ed];No.prototype[xd]||(No.prototype[xd]=bo.prototype[xd])}ud(Fo,No),Fo.prototype.push=function(e,t){return this._transformState.needTransform=!1,No.prototype.push.call(this,e,t)},Fo.prototype._transform=function(e,t,n){throw new Error("Not implemented")},Fo.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Fo.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},ud(Yo,Fo),Yo.prototype._transform=function(e,t,n){n(null,e)},ud(Ho,$n),Ho.Readable=Ki,Ho.Writable=bo,Ho.Duplex=No,Ho.Transform=Fo,Ho.PassThrough=Yo,Ho.Stream=Ho,Ho.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function i(){u||(u=!0,e.end())}function o(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(a(),0===$n.listenerCount(this,"error"))throw e}function a(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",i),c.removeListener("close",o),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",a),c.removeListener("close",a),e.removeListener("close",a)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(c.on("end",i),c.on("close",o));var u=!1;return c.on("error",s),e.on("error",s),c.on("end",a),c.on("close",a),e.on("close",a),e.emit("pipe",c),e};var Sd=Object.freeze({default:Ho,Readable:Ki,Writable:bo,Duplex:No,Transform:Fo,PassThrough:Yo,Stream:Ho}),Cd=Sd&&Ho||Sd,Td=Ko,Rd=Qc("simple-peer");od(Ko,Cd.Duplex),Ko.WEBRTC_SUPPORT=!!id(),Ko.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},Ko.constraints={},Ko.channelConfig={},Object.defineProperty(Ko.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),Ko.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}},Ko.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._destroy(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},Ko.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),Wo,function(e){t._destroy(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}},Ko.prototype.send=function(e){var t=this;t._isWrtc&&Yn(e)&&(e=new Uint8Array(e)),t._channel.send(e)},Ko.prototype.destroy=function(e){this._destroy(null,e)},Ko.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._previousStreams=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._interval=null,n._reconnectTimeout=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"addTrack"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},Ko.prototype._setupData=function(e){var t=this;if(!e.channel)return t._destroy(new Error("Data channel event is missing `channel` property"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t._destroy(e)}},Ko.prototype._read=function(){},Ko.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(e){return r._destroy(e)}r._channel.bufferedAmount>65536?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},Ko.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},Ko.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){e.destroyed||(e.trickle||e._iceComplete?i():e.once("_iceComplete",i))}function r(t){e._destroy(t)}function i(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,n,r))},function(t){e._destroy(t)},e.offerConstraints)},Ko.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){e.destroyed||(e.trickle||e._iceComplete?i():e.once("_iceComplete",i))}function r(t){e._destroy(t)}function i(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,n,r))},function(t){e._destroy(t)},e.answerConstraints)},Ko.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===t&&e._destroy(new Error("Ice connection failed.")),"closed"===t&&e._destroy()}},Ko.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._pc.getStats.length>0?t._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)},function(t){e(t)}):e(null,[])},Ko.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,e.getStats(function(t,n){function r(t){var n=o[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1]));var r=i[t.remoteCandidateId];r&&r.ip?(e.remoteAddress=r.ip,e.remotePort=Number(r.port)):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=Number(r.portNumber)):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=Number(r[1])),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}if(!e.destroyed){t&&(n=[]),e._connecting=!1,e.connected=!0;var i={},o={},s={};if(n.forEach(function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(s[e.id]=e)}),n.forEach(function(e){"transport"===e.type&&r(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&r(e)}),e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var a=e._cb;e._cb=null,a(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}}))},Ko.prototype._onInterval=function(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()},Ko.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},Ko.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},Ko.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var n=e.data;n instanceof ArrayBuffer&&(n=Xt.from(n)),t.push(n)}},Ko.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},Ko.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},Ko.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},Ko.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},Ko.prototype._onTrack=function(e){var t=this;if(!t.destroyed){t._debug("on track");var n=e.streams[0].id;-1===t._previousStreams.indexOf(n)&&(t._previousStreams.push(n),t.emit("stream",e.streams[0]))}},Ko.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],Rd.apply(null,t)},Ko.prototype._transformConstraints=function(e){var t=this;if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!t._isChromium){var n=Object.assign({},e.optional,e.mandatory);return void 0!==n.OfferToReceiveVideo&&(n.offerToReceiveVideo=n.OfferToReceiveVideo,delete n.OfferToReceiveVideo),void 0!==n.OfferToReceiveAudio&&(n.offerToReceiveAudio=n.OfferToReceiveAudio,delete n.OfferToReceiveAudio),n}return e.mandatory||e.optional||!t._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})};var Bd=1e3,Dd=60*Bd,Pd=60*Dd,Od=24*Pd,Id=365.25*Od,jd=function(e,t){return t=t||{},"string"==typeof e?$o(e):t.long?Zo(e):Vo(e)},Nd=x(function(e,t){function n(){return t.colors[u++%t.colors.length]}function r(e){function r(){}function i(){var e=i,r=+new Date,o=r-(c||r);e.diff=o,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var i=t.formatters[r];if("function"==typeof i){var o=s[a];n=i.call(e,o),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s)),(i.log||t.log||console.log.bind(console)).apply(e,s)}r.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:r;return o.namespace=e,o}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function o(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}(t=e.exports=r).coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=jd,t.names=[],t.skips=[],t.formatters={};var c,u=0}),Ld=x(function(e,t){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color,i=0,o=0;return(e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=Nd).log=i,t.formatArgs=r,t.save=o,t.load=s,t.useColors=n,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())}),Ud=x(function(e,t){(function(){function n(e,t){function i(e){if(i[e]!==y)return i[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=i("json-stringify")&&i("json-parse");else{var r,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,f="function"==typeof c&&b;if(f){(r=function(){return 1}).toJSON=r;try{f="0"===c(0)&&"0"===c(new s)&&'""'==c(new a)&&c(v)===y&&c(y)===y&&c()===y&&"1"===c(r)&&"[1]"==c([r])&&"[null]"==c([y])&&"null"==c(null)&&"[null,null,null]"==c([y,v,null])&&c({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===c(null,r)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(e){f=!1}}n=f}if("json-parse"==e){var h=t.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){var l=5==(r=h(o)).a.length&&1===r.a[0];if(l){try{l=!h('"\t"')}catch(e){}if(l)try{l=1!==h("01")}catch(e){}if(l)try{l=1!==h("1.")}catch(e){}}}}catch(e){l=!1}n=l}}return i[e]=!!n}e||(e=o.Object()),t||(t=o.Object());var s=e.Number||o.Number,a=e.String||o.String,c=e.Object||o.Object,u=e.Date||o.Date,f=e.SyntaxError||o.SyntaxError,h=e.TypeError||o.TypeError,l=e.Math||o.Math,d=e.JSON||o.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p,g,y,m=c.prototype,v=m.toString,b=new u(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!i("json")){var w=i("bug-string-char-index");if(!b)var _=l.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return k[t]+365*(e-1970)+_((e-1969+(t=+(t>1)))/4)-_((e-1901+t)/100)+_((e-1601+t)/400)};if((p=m.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=v?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),g=function(e,t){var n,i,o,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(o in i)p.call(i,o)&&s++;return n=i=null,s?g=2==s?function(e,t){var n,r={},i="[object Function]"==v.call(e);for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i="[object Function]"==v.call(e);for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,o,s="[object Function]"==v.call(e),a=!s&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)s&&"prototype"==n||!a.call(e,n)||t(n);for(o=i.length;n=i[--o];a.call(e,n)&&t(n));}),g(e,t)},!i("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x=function(e,t){return("000000"+(t||0)).slice(-e)},S=function(e){for(var t='"',n=0,r=e.length,i=!w||r>10,o=i&&(w?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=E[s];break;default:if(s<32){t+="\\u00"+x(2,s.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},C=function(e,t,n,r,i,o,s){var a,c,u,f,l,d,m,b,w,k,E,T,R,B,D,P;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(c=v.call(a))||p.call(a,"toJSON"))"function"==typeof a.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||p.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(A){for(l=_(a/864e5),u=_(l/365.2425)+1970-1;A(u+1,0)<=l;u++);for(f=_((l-A(u,0))/30.42);A(u,f+1)<=l;f++);l=1+l-A(u,f),m=_((d=(a%864e5+864e5)%864e5)/36e5)%24,b=_(d/6e4)%60,w=_(d/1e3)%60,k=d%1e3}else u=a.getUTCFullYear(),f=a.getUTCMonth(),l=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),k=a.getUTCMilliseconds();a=(u<=0||u>=1e4?(u<0?"-":"+")+x(6,u<0?-u:u):x(4,u))+"-"+x(2,f+1)+"-"+x(2,l)+"T"+x(2,m)+":"+x(2,b)+":"+x(2,w)+"."+x(3,k)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(c=v.call(a)))return""+a;if("[object Number]"==c)return a>-1/0&&a<1/0?""+a:"null";if("[object String]"==c)return S(""+a);if("object"==typeof a){for(B=s.length;B--;)if(s[B]===a)throw h();if(s.push(a),E=[],D=o,o+=i,"[object Array]"==c){for(R=0,B=a.length;R<B;R++)T=C(R,a,n,r,i,o,s),E.push(T===y?"null":T);P=E.length?i?"[\n"+o+E.join(",\n"+o)+"\n"+D+"]":"["+E.join(",")+"]":"[]"}else g(r||a,function(e){var t=C(e,a,n,r,i,o,s);t!==y&&E.push(S(e)+":"+(i?" ":"")+t)}),P=E.length?i?"{\n"+o+E.join(",\n"+o)+"\n"+D+"}":"{"+E.join(",")+"}":"{}";return s.pop(),P}};t.stringify=function(e,t,n){var i,o,s,a;if(r[typeof t]&&t)if("[object Function]"==(a=v.call(t)))o=t;else if("[object Array]"==a){s={};for(var c,u=0,f=t.length;u<f;c=t[u++],("[object String]"==(a=v.call(c))||"[object Number]"==a)&&(s[c]=1));}if(n)if("[object Number]"==(a=v.call(n))){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else"[object String]"==a&&(i=n.length<=10?n:n.slice(0,10));return C("",(c={},c[""]=e,c),o,s,i,"",[])}}if(!i("json-parse")){var T,R,B=a.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw T=R=null,f()},O=function(){for(var e,t,n,r,i,o=R,s=o.length;T<s;)switch(i=o.charCodeAt(T)){case 9:case 10:case 13:case 32:T++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=w?o.charAt(T):o[T],T++,e;case 34:for(e="@",T++;T<s;)if((i=o.charCodeAt(T))<32)P();else if(92==i)switch(i=o.charCodeAt(++T)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[i],T++;break;case 117:for(t=++T,n=T+4;T<n;T++)(i=o.charCodeAt(T))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||P();e+=B("0x"+o.slice(t,T));break;default:P()}else{if(34==i)break;for(i=o.charCodeAt(T),t=T;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++T);e+=o.slice(t,T)}if(34==o.charCodeAt(T))return T++,e;P();default:if(t=T,45==i&&(r=!0,i=o.charCodeAt(++T)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(T+1))>=48&&i<=57&&P(),r=!1;T<s&&(i=o.charCodeAt(T))>=48&&i<=57;T++);if(46==o.charCodeAt(T)){for(n=++T;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==T&&P(),T=n}if(101==(i=o.charCodeAt(T))||69==i){for(43!=(i=o.charCodeAt(++T))&&45!=i||T++,n=T;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==T&&P(),T=n}return+o.slice(t,T)}if(r&&P(),"true"==o.slice(T,T+4))return T+=4,!0;if("false"==o.slice(T,T+5))return T+=5,!1;if("null"==o.slice(T,T+4))return T+=4,null;P()}return"$"},I=function(e){var t,n;if("$"==e&&P(),"string"==typeof e){if("@"==(w?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=O());n||(n=!0))n&&(","==e?"]"==(e=O())&&P():P()),","==e&&P(),t.push(I(e));return t}if("{"==e){for(t={};"}"!=(e=O());n||(n=!0))n&&(","==e?"}"==(e=O())&&P():P()),","!=e&&"string"==typeof e&&"@"==(w?e.charAt(0):e[0])&&":"==O()||P(),t[e.slice(1)]=I(O());return t}P()}return e},j=function(e,t,n){var r=N(e,t,n);r===y?delete e[t]:e[t]=r},N=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if("[object Array]"==v.call(i))for(r=i.length;r--;)j(i,r,n);else g(i,function(e){j(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return T=0,R=""+e,n=I(O()),"$"!=O()&&P(),T=R=null,t&&"[object Function]"==v.call(t)?N((r={},r[""]=n,r),"",t):n}}}return t.runInContext=n,t}var r={function:!0,object:!0},i=r.object&&t&&!t.nodeType&&t,o=r[typeof window]&&window||this,s=i&&r.object&&e&&!e.nodeType&&"object"==typeof ta&&ta;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(o=s),i)n(o,i);else{var a=o.JSON,c=o.JSON3,u=!1,f=n(o,o.JSON3={noConflict:function(){return u||(u=!0,o.JSON=a,o.JSON3=c,a=c=null),f}});o.JSON={parse:f.parse,stringify:f.stringify}}}).call(ta)}),Md=Xo,zd={deconstructPacket:function(e){function t(e){if(!e)return e;if(Md(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(Array.isArray(e)){for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=t(e[o]);return i}if("object"==typeof e&&!(e instanceof Date)){i={};for(var s in e)i[s]=t(e[s]);return i}return e}var n=[],r=e.data,i=e;return i.data=t(r),i.attachments=n.length,{packet:i,buffers:n}},reconstructPacket:function(e,t){function n(e){if(e&&e._placeholder)return t[e.num];if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=n(e[r]);return e}if(e&&"object"==typeof e){for(var i in e)e[i]=n(e[i]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},removeBlobs:function(e,t){function n(e,o,s){if(!e)return e;if(ta.Blob&&e instanceof Blob||ta.File&&e instanceof File){r++;var a=new FileReader;a.onload=function(){s?s[o]=this.result:i=this.result,--r||t(i)},a.readAsArrayBuffer(e)}else if(Array.isArray(e))for(var c=0;c<e.length;c++)n(e[c],c,e);else if(e&&"object"==typeof e&&!Md(e))for(var u in e)n(e[u],u,e)}var r=0,i=e;n(i),r||t(i)}},Fd=x(function(e,t){function n(){}function r(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=Ud.stringify(e.data)),u("encoded %j as %s",e,n),n}function i(e,t){function n(e){var n=zd.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}zd.removeBlobs(e,n)}function o(){this.reconstructor=null}function s(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return c();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(n.attachments="";"-"!=e.charAt(++r);)n.attachments+=e.charAt(r);n.attachments=Number(n.attachments)}if("/"==e.charAt(r+1))for(n.nsp="";++r&&","!=(o=e.charAt(r))&&(n.nsp+=o,r+1!=e.length););else n.nsp="/";var i=e.charAt(r+1);if(""!=i&&Number(i)==i){for(n.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(n.id+=e.charAt(r),r+1==e.length)break}n.id=Number(n.id)}if(e.charAt(++r))try{n.data=Ud.parse(e.substr(r))}catch(e){return c()}return u("decoded %s as %j",e,n),n}function a(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error"}}var u=Ld("socket.io-parser");t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=o,n.prototype.encode=function(e,n){u("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type?i(e,n):n([r(e)])},Xa(o.prototype),o.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new a(n),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!Md(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){this.reconPack.data.data=this.buffers.reduce(function(e,t,n,r){return this._appendBuffer(e,t)}.bind(this)),zd.reconstructPacket(this.reconPack,[this.reconPack.data.data]);var t=this.reconPack;return this.finishedReconstruction(),t}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},a.prototype._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}}),qd=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Yd=Go,Hd=Qc("edgemesh:peer"),Kd=Xa.prototype.emit,Wd=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_u(this,t);var r=Eu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.peers=new Kc,r.peerOptions={config:au.signaling,channelName:"edgemesh"},r.peerId=n.peerId||e.id,r.decoder=new Fd.Decoder(r),r.decoder.on("decoded",r._ondecoded.bind(r)),r.options=Object.assign({maxPeers:10},n),r.socket=e,r.socket.on("offer",r._acceptConnection.bind(r)),r.socket.on("signal",r._activateConnection.bind(r)),Tu){var i=require("string_decoder").StringDecoder;r.textDecoder=new i("utf8"),r.textDecoder.decode=function(e){return this.end(Xt.from(e))},n.wrtc?r.peerOptions.wrtc=n.wrtc:console.warn("You are running Peer on node.js... Pass `wrtc` option.")}else r.textDecoder=new TextDecoder("utf-8");return r}return Au(t,e),ku(t,[{key:"destroy",value:function(){this.socket.removeAllListeners(),this.removeAllListeners(),this.peers.forEachRecord(function(e){e.peer.destroy()})}},{key:"connect",value:function(e){var t=this;return Hd("connecting to peer %s",e),this._closeStaleConnections(),new Promise(function(n,r){var i=t.peers.getRecord("o:"+e);if(i)i.peer._channelReady?n(i.peer):i.peer.once("connect",function(){n(i.peer)});else{var o=Object.assign({},t.peerOptions,{initiator:!0}),s=new Td(o);s.setMaxListeners(0),t._setupPeerEvents("o:"+e,s),s.on("signal",function(n){Hd("sending offer",n),t.socket.emit("peer-offer",{offer:n,fromPeerId:t.peerId,toPeerId:e})}),s.once("connect",function(){Hd("peer connected",e),s.emid=e,s.removeListener("error",r),t.emit("peer-connected",e),n(s)}),s.on("error",function(e){console.log(e),r(e)}),t.peers.addRecord({id:"o:"+e,peer:s,lastActive:new Date})}})}},{key:"send",value:function(e,t,n){var r=this;if("string"==typeof e)this.connect(e).then(function(e){r.send(e,t,n)}).catch(function(e){r.emit("peer-error",e)});else{Hd("sending message to peer %s on channel %s",e.emid,t),this.peers.addRecord({id:"o:"+e.emid,lastActive:new Date,peer:e});var i=new Fd.Encoder;[].shift.apply(arguments);var o=Fd.EVENT;Yd(arguments)&&(o=Fd.BINARY_EVENT);var s={type:o,data:Ic(arguments)};i.encode(s,function(t){if(t[1]instanceof ArrayBuffer)r._sendArray(e,t);else if(t)for(var n=0;n<t.length;n++){var i=Bu(t[n]),o=new ArrayBuffer(8);new DataView(o).setInt32(0,i.byteLength);var s=Pu(o,i);r._send(e,s)}else Hd("encoding error")})}}},{key:"disconnect",value:function(e){var t=this.peers.getRecord("o:"+e);t&&(t.peer.destroy(),this.peers.removeRecord(e),Hd("peer %s disconnected",e))}},{key:"getConnectedPeers",value:function(){return this.peers.getIdentifiers()}},{key:"getStats",value:function(){var e={},t=[];return this.peers.forEachRecord(function(n){t.push(new Promise(function(t){n.peer.getStats(function(r){e[n.id]=r,t()})}))}),Promise.all(t).then(function(){return e})}},{key:"_setupPeerEvents",value:function(e,t){var n=this;t.on("data",function(t){var r=n.peers.getRecord(e);n.peers.addRecord({id:r.id,peer:r.peer,lastActive:new Date});var i=Du(t),o=new DataView(i).getInt32(0),s=n.textDecoder.decode(new Uint8Array(i.slice(8,o+8))),a=new Uint8Array(i.slice(8+o,i.byteLength));n.decoder.add(s),0!==a.length&&n.decoder.add(a)}),t.on("close",function(){Hd("peer closed %s",e),n.emit("peer-disconnected",e),t.removeAllListeners(),t.destroy(),n.peers.removeRecord(e)}),t.on("error",function(e){t.removeAllListeners(),t.destroy(),n.emit("peer-error",e)})}},{key:"_acceptConnection",value:function(e){var t=this,n=this.peers.getRecord("i:"+e.fromPeerId);if(n&&!n.peer.destroyed)n.peer.signal(e.offer);else{var r=Object.assign({},this.peerOptions,{initiator:!1}),i=new Td(r);i.setMaxListeners(0),this._setupPeerEvents("i:"+e.fromPeerId,i),i.on("signal",function(n){Hd("sending signal %O",n);var r={signal:n,fromPeerId:t.peerId,toPeerId:e.fromPeerId};t.socket.emit("peer-signal",r)}),Hd("accepting connection %O",e.offer),i.destroyed||i.signal(e.offer),this.peers.addRecord({id:"i:"+e.fromPeerId,peer:i,lastActive:new Date})}}},{key:"_activateConnection",value:function(e){var t=this.peers.getRecord("o:"+e.fromPeerId);t&&!t.peer.destroyed&&(Hd("activating connection %O",e.signal),t.peer.signal(e.signal))}},{key:"_sendArray",value:function(e,t){var n=Bu(t[0]),r=t[1],i=new ArrayBuffer(8);new DataView(i).setInt32(0,n.byteLength);var o=Pu(i,n);o=Pu(o,r),this._send(e,o)}},{key:"_send",value:function(e,t){e.destroyed||e.send(t)}},{key:"_ondecoded",value:function(e){var t=e.data||[];Hd("packet decoded %O",t),Kd.apply(this,t)}},{key:"_closeStaleConnections",value:function(){var e=this.getConnectedPeers().length;if(e>=this.options.maxPeers)for(var t=this.peers.mapRecords(function(e){return{id:e.id,lastActive:e.lastActive}}).sort(function(e,t){return e-t}).reverse(),n=e+1-this.options.maxPeers,r=0;r<n;r++)this.disconnect(t[r].id.split(":")[1])}}]),t}(Xa),$d=Qc("edgemesh:peer:direct"),Vd=Xa.prototype.emit,Zd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_u(this,t);var n=Eu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(n.peerOptions={config:au.signaling,channelName:"edgemesh"},$d("instantiating DirectPeer instance"),!e.scope)throw new Error("postmessage scope required");return n.scope=e.scope,n.opts=e,n.decoder=new Fd.Decoder(n),n.encoder=new Fd.Encoder,n.textDecoder=new TextDecoder("utf-8"),n.decoder.on("decoded",n._ondecoded.bind(n)),n._setupPostmessage(),n.peer=new Td(Object.assign({initiator:e.initiator},n.peerOptions)),n.peer.setMaxListeners(0),n._setupPeerEvents(),n}return Au(t,e),ku(t,[{key:"signal",value:function(e){this.peer.signal(e)}},{key:"send",value:function(){var e=this,t=Fd.EVENT;Yd(arguments)&&(t=Fd.BINARY_EVENT);var n={type:t,data:Ic(arguments)};this.encoder.encode(n,function(t){if(t[1]instanceof ArrayBuffer)e._sendArray(t);else if(t)for(var n=0;n<t.length;n++){var r=Bu(t[n]),i=new ArrayBuffer(8);new DataView(i).setInt32(0,r.byteLength);var o=Pu(i,r);e._send(o)}else $d("encoding error")})}},{key:"disconnect",value:function(){this.peer.destroy()}},{key:"_sendArray",value:function(e){var t=Bu(e[0]),n=e[1],r=new ArrayBuffer(8);new DataView(r).setInt32(0,t.byteLength);var i=Pu(r,t);i=Pu(i,n),this._send(i)}},{key:"_send",value:function(e){this.peer.destroyed||this.peer.send(e)}},{key:"_setupPostmessage",value:function(){var e=this;window.addEventListener("message",function(t){var n=t.data;switch(n.channel){case"DIRECT_SIGNAL":return e.signal(n.data)}})}},{key:"_setupPeerEvents",value:function(){var e=this;this.peer.on("connect",function(){e.emit("connect"),$d(e.opts.initiator?"hub direct peer connected":"client direct peer connected")}),this.peer.on("error",function(e){$d("peer error %O",e)}),this.peer.on("signal",function(t){$d("sending signal %O",t),e.opts.initiator?parent.postMessage({channel:"DIRECT_SIGNAL",data:t},e.scope):document.getElementById("edgemesh-hub").contentWindow.postMessage({channel:"DIRECT_SIGNAL",data:t},e.scope)}),this.peer.on("data",function(t){var n=Du(t),r=new DataView(n).getInt32(0),i=e.textDecoder.decode(new Uint8Array(n.slice(8,r+8))),o=new Uint8Array(n.slice(8+r,n.byteLength));e.decoder.add(i),0!==o.length&&e.decoder.add(o)})}},{key:"_ondecoded",value:function(e){var t=e.data||[];$d("packet decoded %O",t),Vd.apply(this,t)}}]),t}(Xa),Jd=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t},Xd=(Qc("edgemesh:fetch"),x(function(e){!function(t,n,r){e.exports?e.exports=r():t.bowser=r()}(ta,0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var n,r=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=!/like android/i.test(e)&&/android/i.test(e),o=/nexus\s*[0-6]\s*/i.test(e),a=!o&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),u=/silk/i.test(e),f=/sailfish/i.test(e),h=/tizen/i.test(e),l=/(web|hpw)os/i.test(e),d=/windows phone/i.test(e),p=(/SamsungBrowser/i.test(e),!d&&/windows/i.test(e)),g=!r&&!u&&/macintosh/i.test(e),y=!i&&!f&&!h&&!l&&/linux/i.test(e),m=t(/edge\/(\d+(\.\d+)?)/i),v=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e),w=!b&&/[^-]mobi/i.test(e),_=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:s,version:v||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||v}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:s,version:v||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:s,version:v||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:s,version:v||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:d?(n={name:"Windows Phone",windowsphone:s},m?(n.msedge=s,n.version=m):(n.msie=s,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?n={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:s,version:m}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||v}:f?n={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=s)):u?n={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:s,version:v||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:l?(n={name:"WebOS",webos:s,version:v||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=s)):/bada/i.test(e)?n={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:h?n={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||v}:/chromium/i.test(e)?n={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||v}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?n={name:"Android",version:v}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:s},v&&(n.version=v)):r?(n={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},v&&(n.version=v)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||v}:{name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=s):(n.name=n.name||"Webkit",n.webkit=s),!n.version&&v&&(n.version=v)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=s,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||n.msedge||!i&&!n.silk?n.windowsphone||n.msedge||!r?g?n.mac=s:_?n.xbox=s:p?n.windows=s:y&&(n.linux=s):(n[r]=s,n.ios=s):n.android=s;var k="";n.windows?k=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?k=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?k=(k=t(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):r?k=(k=t(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):i?k=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?k=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?k=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?k=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(k=t(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(n.osversion=k);var A=!n.windows&&k.split(".")[0];return b||a||"ipad"==r||i&&(3==A||A>=4&&!w)||n.silk?n.tablet=s:(w||"iphone"==r||"ipod"==r||i||o||n.blackberry||n.webos||n.bada)&&(n.mobile=s),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=s:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=s:n.x=s,n}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),i=n(e,function(e){var i=r-t(e);return e+=new Array(i+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(t,n,i){var o=a;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=e(i));var s=""+o.version;for(var c in t)if(t.hasOwnProperty(c)&&o[c]){if("string"!=typeof t[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(t));return r([s,t[c]])<0}return n}function o(e,t,n){return!i(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=i,a.compareVersions=r,a.check=o,a._detect=e,a})}),!1),Gd=!1;Tu&&(Ps.window={navigator:{}}),Tu||(Xd=Boolean(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver),Gd=Boolean(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB));var Qd={webrtc:Td.WEBRTC_SUPPORT,websocket:Boolean(window.WebSocket),sharedWorker:Boolean(window.SharedWorker),serviceWorker:Boolean(window.navigator.serviceWorker),localStorage:Boolean(window.localStorage),mutationObserver:Xd,iddb:Gd,streams:Boolean(window.ReadableStream),fetch:Boolean(window.fetch),request:Boolean(window.Request),response:Boolean(window.Response)},ep={client:Qd.webrtc&&Qd.websocket&&Qd.mutationObserver&&Qd.serviceWorker,hub:Qd.webrtc&&Qd.websocket&&Qd.iddb&&Qd.localStorage&&Qd.sharedWorker,streams:Qd.streams&&Qd.fetch&&Qd.request,fetch:Qd.request&&Qd.response&&Qd.fetch},tp=Tu?{}:window.URL||window.webkitURL||window.mozURL||window.msURL,np=Qc("edgemesh:postmessage"),rp=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e){case"sw":return navigator.serviceWorker.controller?(np("posting %O to service worker on channel %s",n,t),navigator.serviceWorker.controller.postMessage({channel:t,data:n}),!0):(np("could not post %s to service worker. No service worker found.",t),!1);case"client":return np("posting %O to main thread on channel %s",n,t),parent.postMessage({channel:t,data:n},"https://"+this.origin),!0;case"hub":return np("posting %O to hub on channel %s",n,t),document.getElementById("edgemesh-hub").contentWindow.postMessage({channel:t,data:n},"https://"+this.host),!0;case"worker":return np("posting %O to shared worker on channel %s",n,t),this.worker.postMessage({channel:t,data:n}),!0}},ip=function(e){return new Promise(function(t){return window.addEventListener("message",e),t(!0)})},op=es;es.defer=ts;var sp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.maxParallel||6,n=e.processingFrequency||30,r={low:[],mid:[],high:[]},i=[],o=void 0,s=0,a=function(e){return function(){i.splice(i.indexOf(e))}};return{start:function(){o=setInterval(this.processQueue,n)},stop:function(){o&&clearInterval(o)},clear:function(e){r[e]=[]},enqueue:function(e){r[e.priority]?r[e.priority].unshift(e):console.warn("invalid priority: "+e.priority+" should be 'low' 'mid' or 'high'")},getQueuedTasks:function(){var e={totalQueued:0,processed:s,started:Boolean(o)};for(var t in r)t&&(e[t]=r[t].length,e.totalQueued+=r[t].length);return e},processQueue:function(){if(i.length<=t){var e=r.high.length>0?r.high.pop():r.mid.length>0?r.mid.pop():r.low.pop();e&&(i.push(e),e.execute().then(a(e),a(e)),s++)}}}},ap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{priority:"mid"},t=e.priority,n=e.callback,r=op();return{priority:t,promise:r.promise,execute:function(){return n().then(function(e){return r.resolve(e)},function(e){return r.reject(e)})}}},cp={locateTimeout:1e3,meshConnectTimeout:1e3,maxConnectedPeers:10,iddbName:"edgemesh",iddbVersion:1,iddbColumns:"++id",iddbDefaultMobileDisk:5,iddbDefaultDesktopDisk:50,maxParallelJobs:6,jobProcessingFrequency:30,hubSyncDelay:1e4,chunkSize:15360,chunkIdOffset:0,chunkPositionOffset:4,chunkReservedBytes:8,swPollMaxRetries:5,swPollInterval:200},up={extension:["jpg","jpeg","gif","png","bmp","svg","webp"]},fp={iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},hp={beaconUrl:"https://sig.edgeno.de/track",script:"edgemesh.track.min.js"},lp={logLevel:"warn",httpPort:80,httpsPort:443,wsAPIPort:3e3,wsCDNPort:9e3},dp={version:"1.6.0",client:cp,support:up,host:"sig.edgeno.de",clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:fp,tracking:hp,server:lp},pp=Object.freeze({version:"1.6.0",client:cp,support:up,host:"sig.edgeno.de",clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:fp,tracking:hp,server:lp,default:dp}),gp="EM_SET_HUB_ID",yp="HUB_ID",mp=100,vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},wp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Function.prototype.$asyncbind=function e(t,n){function r(){return i.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,i){return function o(s){for(;s;){if(s.then)return s=s.then(o,r),i?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function i(e,t){this.resolve=e,this.reject=t}function o(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(e){t(o,e,i)}return o}function s(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:i},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof process?"undefined":vp(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var i=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r==1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":vp(e))))try{var r=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&i(function(){for(var r=0,i=t.c.length;r<i;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&i(function(){for(var n=0,i=t.length;n<i;n++)r(t[n],e)})}},then:function(e,n){var r=new t,o={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var s=this.state,a=this.v;i(function(){s(o,a)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var i=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(t,arguments)}catch(e){return n(e)}}}};var _p=Ds("edgemesh:hub:tasks:sync-add"),kp=function e(){var t=this;return this.queue.clear("low"),new ap({priority:"low",callback:function(){return function(){return new Promise(function(n,r){(function(){return n()}).$asyncbind(this,r);var i,o=function(e){return _p("error getting primary keys from database %O",{err:e}),cu(t.coms.io,{level:"warn",host:t.id,func:e.func,code:e.code,string:e.string,input:{err:e}}),n(!1)}.$asyncbind(this,r);try{return bu(t.db).then(function(r){return i=r,fu(t.coms.io,{hubId:t.id,keys:i}),setTimeout(t.queue.enqueue.bind(t,e.call(t)),pp.client.hubSyncDelay),n(!0)}.$asyncbind(this,o),o)}catch(e){o(e)}}.$asyncbind(this))}()}})},Ap=Ds("edgemesh:hub:tasks:hub-replicate"),Ep=function(){var e=this;return this.queue.clear("mid"),new ap({priority:"mid",callback:function(){return new Promise(function(t){Ap("requesting keys from client"),e.directPeer.send("EM_GET_CLIENT_KEYS"),t()})}})},xp=Ds("edgemesh:hub:pm-events"),Sp=function(e){var t=e.data;switch(t.channel){case"EM_GET_CLIENT_KEYS":this.queue.enqueue(Ep.call(this));break;case"ASSET_STORE":xp("asset store received %O",t),this.storeAsset(t.data.meta,t.data.stats,!0,!0)}},Cp=Ds("edgemesh:hub:tasks:peer-mesh"),Tp=function(e){var t=this,n=e.originId,r=e.assetId,i=e.hubs,o=e.checksum;return new ap({priority:"high",callback:function(){return new Promise(function(e){var s=n+"|"+r,a={id:t.id,topic:0,io:t.coms.io,rtc:t.coms.rtc},c={protocol:"rtc_mesh",srcId:t.id,origin:n,asset:r,hubs:i,checksum:o},u=new Vl(a,c,function(n){var r=n.buffer,i=n.contentType;Cp("sync complete for %s",s);var o=new Uint8Array(r),a=new Blob([o],{type:i}),c=tp.createObjectURL(a);t.storeAsset({id:s,contentType:i,blobUrl:c}),t.inboundTransfers.removeRecord(s),Ru()&&t.updateState(t.getState()),e()},function(){t.inboundTransfers.removeRecord(s),Ru()&&t.updateState(t.getState()),e()});u.start(),t.inboundTransfers.addRecord({id:s,mesh:u}),Ru()&&u.on("metadata",function(){t.updateState(t.getState())})})}})},Rp=Ds("edgemesh:hub:stream-direct"),Bp=function(e,t){var n=this;return new ap({priority:"high",callback:function(){return new Promise(function(r,i){var o=e+"|"+t;Rp("streaming asset %s to client db",o),n.db.assets.where("id").equals(o).first(function(e){if(!e||!e.buffer)return Rp("asset %s not found in database",o),i(new Error("Asset not found in database."));var t=new Uu({name:o,mimeType:e.contentType,chunkSize:pp.client.chunkSize,arrayBuffer:e.buffer,compressed:e.compressed}),s=t.getTransferObject();n.directPeer.send("ASSET_META",t.getMetadata());for(var a=0;a<t.totalChunks;a++){var c=s.getChunk();n.directPeer.send("ASSET_CHUNK",{id:o,chunk:c,chunkId:a+1})}return r({success:!0})})})}})},Dp=Ds("edgemesh:hub:io-events"),Pp=function(e,t){var n=t.socket,r=t.host,i=t.level,o=t.func;try{return JSON.parse(e)}catch(t){var s={err:t,json:e};return cu(n,{host:r,level:i,code:102,func:o,message:"error parsing json",input:s}),void this.bail({level:i,code:102,func:o,message:"error parsing json",input:s})}},Op=function(e){var t=this;e.on("HUB_REGISTER-RESPONSE",function(n){var r=t.id,i="hub.ioEvents.hubRegister";if(n=Pp.call(t,n,{socket:e,host:r,level:"error",func:i})){if(!n.success){var o={data:n};return t.bail({level:"error",code:301,func:i,message:"error registering hub",input:o})}return t.startup()}}),e.on("HUB_SYNC_ADD-RESPONSE",function(n){var r=t.id;if(n=Pp.call(t,n.data,{socket:e,host:r,level:"error",func:"hub.ioEvents.syncAdd"})){var i=n,o=i.OriginID,s=i.AssetID,a=i.HubID,c=i.checksum;0===s.length?Dp("hub in sync"):(Dp("syncing hub"),s.forEach(function(e,n){t.queue.enqueue(Tp.call(t,{originId:o[n],assetId:e,hubs:a[n],checksum:c[n]}))}),t.queue.enqueue(Ep.call(t)))}}),e.on("HUB_REPLICATE-RESPONSE",function(n){var r=t.id;if(n=Pp.call(t,n.data,{socket:e,host:r,level:"error",func:"hub.ioEvents.hubReplicate"})){var i=n,o=i.OriginID,s=i.AssetID,a={originIds:[],assetIds:[]};i.action.forEach(function(e,n){switch(e){case 1:return t.queue.enqueue(Bp.call(t,o[n],s[n]));case-1:a.originIds.push(o[n]),a.assetIds.push(s[n])}}),0!==a.originIds.length&&t.directPeer.send("EM_ASSET_REMOVE",a)}}),e.on("HUB_DISABLE",function(e){"ERROR:HubID_already_Used"===e&&rp.call(t,"client","SESSION_START",{hubId:t.id}),t.disable()})},Ip=Ds("edgemesh:hub:stream-asset"),jp=function(e){var t=this;return new ap({priority:"high",callback:function(){return new Promise(function(n,r){var i=e.fromPeerId,o=e.origin,s=e.asset,a=e.chunks,c=o+"|"+s;Ip("asset %s requested from hub",c),t.coms.rtc.connect(i).then(function(e){t.db.assets.where("id").equals(c).first(function(r){if(!r||!r.buffer)return t.coms.rtc.send(i,"ASSET_NOT_FOUND",{id:c,hubId:t.id}),Ip("asset %s not found in database",c),n("Asset not found in database.");var o=new Uu({name:r.id,mimeType:r.contentType,chunkSize:pp.client.chunkSize,arrayBuffer:Du(r.buffer),compressed:r.compressed});t.outboundTransfers.addRecord({id:r.id,meta:o.getMetadata()}),Ru()&&t.updateState(t.getState());var s=o.getTransferObject();return a.forEach(function(n){if(0===n){Ip("full asset requested"),t.coms.rtc.send(e,"ASSET_META",o.getMetadata());for(var r=0;r<o.totalChunks;r++){var i=s.getChunk();t.coms.rtc.send(e,"ASSET_CHUNK",{id:c,chunk:i,chunkId:r+1}),t.bytesSaved+=i.byteLength}}else{Ip("partial asset requested %O",{chunks:a});var u=s.getChunk(n);t.coms.rtc.send(e,"ASSET_CHUNK",{id:c,chunk:u,chunkId:n}),t.bytesSaved+=u.byteLength}}),t.outboundTransfers.removeRecord(r.id),Ru()&&t.updateState(t.getState()),n({success:!0})})}).catch(r)})}})},Np=Ds("edgemesh:hub:rtc-events"),Lp=function(e){var t=this;e.on("EM_SET_CLIENT_KEYS",function(e){Np("client keys received %O",e.keys),bu(t.db).then(function(n){hu(t.coms.io,{topic:t.originHash,clientKeys:e.keys,hubKeys:n})})}),e.on("ASSET_STORE_META",function(e){var n=e.meta,r=e.stats;Np("asset store meta received %O",n);var i=r.contentType,o=n.name;r.transferStart=Hu(),r.id=o;var s=new Uu(n);s.onCompleted=function(e){e.getFile().then(function(e){var a=e.ArrayBuffer;r.transferEnd=Hu();var c=new Uint8Array(a),u=new Blob([c],{type:i}),f=tp.createObjectURL(u);t.storeAsset({id:o,contentType:i,blobUrl:f},r,!0,!0),t.inboundTransfers.removeRecord(n.name),s.clearData()})},t.inboundTransfers.addRecord({id:n.name,stats:r})}),e.on("ASSET_STORE_CHUNK",function(e){var t=e.chunk;Np("asset store chunk received"),Uu.submitChunk(Du(t))}),e.on("ASSET_META",function(e){Np("asset meta recieved %O",e);var n=t.inboundTransfers.getRecord(e.name);n&&n.mesh.metaReceived(e)}),e.on("ASSET_CHUNK",function(e){var n=e.id,r=e.chunk,i=e.chunkId;Np("asset chunk recieved for %s",n);var o=t.inboundTransfers.getRecord(n);o&&o.mesh.chunkReceived({chunk:r,chunkId:i})}),e.on("ASSET_NOT_FOUND",function(e){var n=e.id,r=e.hubId;Np("asset not found in hub %s",r);var i=t.inboundTransfers.getRecord(n);i&&i.mesh.tryNextHub()}),e.on("ASSET_REQUEST",function(e){Np("asset request recieved %O",e),t.queue.enqueue(jp.call(t,e))})},Up=Ds("edgemesh:hub:deconstructor"),Mp=function(){Up("cleaning up hub"),this.worker&&(tp.revokeObjectURL(this.worker.objectURL),this.worker=null),this.rtc&&(this.rtc.destroy(),this.rtc=null),this.io&&(this.io.removeAllListeners(),this.io.disconnect()),this.db&&(this.db.close(),this.db=null),Up("hub clean")};Function.prototype.$asyncbind=function e(t,n){function r(){return i.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,i){return function o(s){for(;s;){if(s.then)return s=s.then(o,r),i?void 0:s;try{if(s.pop){if(s.length)return s.pop()?t.call(e):s;s=n}else s=s.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function i(e,t){this.resolve=e,this.reject=t}function o(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(e){t(o,e,i)}return o}function s(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:i},s.resolve=function(e){return s.isThenable(e)?e:{then:function(t){return t(e)}}},s.isThenable=e,s}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof process?"undefined":vp(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var i=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r==1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":vp(e))))try{var r=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&i(function(){for(var r=0,i=t.c.length;r<i;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&i(function(){for(var n=0,i=t.length;n<i;n++)r(t[n],e)})}},then:function(e,n){var r=new t,o={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var s=this.state,a=this.v;i(function(){s(o,a)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var i=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(t,arguments)}catch(e){return n(e)}}}};var zp=Ds("edgemesh:hub"),Fp=function(){function e(){var t=this;if(bp(this,e),this.inboundTransfers=new ss,this.outboundTransfers=new ss,this.enabled=!1,this.bytesSaved=0,this.sessionStart=new Date,this.origin=document.location.hostname,this.clientId="superhub",this.host=pp.host,!ep.hub)return zp("the current browser is not supported"),!1;var n=window.name.split("|");2===n.length&&(this.origin=n[0],this.host=n[1]),this.originHash=Jd(this.origin),this.ua=navigator.userAgent;var r=qu.get(yp);r||(r=As.v4(),qu.set(yp,r)),this.id=r,rp.call(this,"client",gp,{hubId:r}),this._spawnWorker(),this.coms=new Su({scope:this,host:this.host,hubId:this.id},Op,Lp),this.directPeer=new Zd({initiator:!0,scope:"https://"+this.origin}),this.queue=new sp({maxParallel:pp.client.maxParallelJobs,processingFrequency:pp.client.jobProcessingFrequency}),this.queue.enqueue(kp.call(this)),Lp.call(this,this.directPeer),ns.call(this).then(function(e){if(!e.success)return t.bail({func:"Hub._bootstrap",message:"Unexpected error",code:mp,input:e});Qo.call(t),window.onbeforeunload=Mp.bind(t)}).catch(this.bail.bind(this))}return wp(e,[{key:"startup",value:function(){var e=this;zp("starting up hub"),this.enabled=!0,this.queue.start(),Ru()?(this.coms.rtc.on("peer-disconnected",function(){setTimeout(function(){e.updateState(e.getState())},1)}),this.coms.rtc.on("peer-connected",function(){setTimeout(function(){e.updateState(e.getState())},1)}),this.updateState(this.getState())):rp.call(this,"client","SESSION_START",{hubId:this.id})}},{key:"bail",value:function(e){zp("bailing %O",e),this.enabled=!1,Mp.call(this),Ru()&&this.updateState(this.getState())}},{key:"idle",value:function(){zp("hub tab inactive"),du(this.coms.io,{hubId:this.id})}},{key:"active",value:function(){zp("hub tab active."),this.enabled?lu(this.coms.io,{hubId:this.id}):(this.coms.reconnect(),this.queue&&this.queue.start(),this.enabled=!0,Ru()&&this.updateState(this.getState()))}},{key:"disable",value:function(){this.enabled=!1,this.queue&&this.queue.stop(),Ru()&&this.updateState(this.getState())}},{key:"dumpDebug",value:function(){var e=this,t=Hu(),n="em-debug-hub-"+this.id+".json",r={db:{open:!!this.db&&this.db.isOpen()},pc:{},io:{},connectedPeers:0,version:pp.version,client:this.clientId,hub:this.id,host:this.host,origin:this.origin,originHash:this.originHash,isSuperhub:Ru(),ua:this.ua,worker:this.worker?"online":"offline",queue:this.queue?this.queue.getQueuedTasks():{},ts:t},i=function(e){rs(n,e)};this.coms?this.coms.getStats().then(function(t){r.pc=t.pc,r.connectedPeers=t.connectedPeers,r.io=t.io,setTimeout(function(){i.call(e,r)},1e3)}):i.call(this,r)}},{key:"getState",value:function(e){var t={enabled:this.enabled,startTime:this.sessionStart,bandwidth:{bytes:this.bytesSaved},peers:[],outboundTransfers:this.outboundTransfers.getIdentifiers().length,inboundTransfers:this.inboundTransfers.getIdentifiers().length};return this.coms&&(t.peers=this.coms.rtc?this.coms.rtc.getConnectedPeers():[]),Object.assign({},e,t)}},{key:"updateState",value:function(){}},{key:"storeAsset",value:function(e,t){var n=e.id,r=e.contentType,i=e.blobUrl,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];rp.call(this,"worker","ASSET_STORE",{meta:{id:n,contentType:r,blobUrl:i},stats:t,register:o,record:s}),zp("sending asset %s to worker %O",n,{register:o,record:s})}},{key:"_spawnWorker",value:function(){if(!this.worker){zp("injecting worker");var e=new SharedWorker("https://"+pp.host+"/"+pp.version+"/edgemesh.worker.min.js","Edgemesh Worker");this.worker=e.port,this.worker.start(),rp.call(this,"worker","WORKER_REGISTER",{hubId:this.id,host:this.host})}}}]),e}();return window.hub=new Fp,Fp}();
