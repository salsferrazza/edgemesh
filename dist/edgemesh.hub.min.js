var Hub=function(){"use strict";function e(){}function t(e){"object"!=typeof e&&(e={}),this._identifier=e.identifier||"id",this._store=[],this._idx=[],e.emitEvents?(this._emitEvents=!0,this.events=new co):this._emitEvents=!1}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Io;case"days":case"day":case"d":return n*Po;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Bo;case"minutes":case"minute":case"mins":case"min":case"m":return n*Do;case"seconds":case"second":case"secs":case"sec":case"s":return n*Oo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(e){return e>=Po?Math.round(e/Po)+"d":e>=Bo?Math.round(e/Bo)+"h":e>=Do?Math.round(e/Do)+"m":e>=Oo?Math.round(e/Oo)+"s":e+"ms"}function o(e){return a(e,Po,"day")||a(e,Bo,"hour")||a(e,Do,"minute")||a(e,Oo,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function s(){}function u(e){"object"!=typeof e&&(e={}),this._identifier=e.identifier||"id",this._store=[],this._idx=[],e.emitEvents?(this._emitEvents=!0,this.events=new Lo):this._emitEvents=!1}function c(e,t){return t={exports:{}},e(t,t.exports),t.exports}function f(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function h(e){if(_a===setTimeout)return setTimeout(e,0);if((_a===f||!_a)&&setTimeout)return _a=setTimeout,setTimeout(e,0);try{return _a(e,0)}catch(t){try{return _a.call(null,e,0)}catch(t){return _a.call(this,e,0)}}}function d(e){if(wa===clearTimeout)return clearTimeout(e);if((wa===l||!wa)&&clearTimeout)return wa=clearTimeout,clearTimeout(e);try{return wa(e)}catch(t){try{return wa.call(null,e)}catch(t){return wa.call(this,e)}}}function p(){xa&&ka&&(xa=!1,ka.length?Ea=ka.concat(Ea):Aa=-1,Ea.length&&g())}function g(){if(!xa){var e=h(p);xa=!0;for(var t=Ea.length;t;){for(ka=Ea,Ea=[];++Aa<t;)ka&&ka[Aa].run();Aa=-1,t=Ea.length}ka=null,xa=!1,d(e)}}function v(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ea.push(new m(e,t)),1!==Ea.length||xa||h(g)}function m(e,t){this.fun=e,this.array=t}function y(){}function b(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Wa;case"days":case"day":case"d":return n*Ka;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ha;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ya;case"seconds":case"second":case"secs":case"sec":case"s":return n*qa;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function _(e){return e>=Ka?Math.round(e/Ka)+"d":e>=Ha?Math.round(e/Ha)+"h":e>=Ya?Math.round(e/Ya)+"m":e>=qa?Math.round(e/qa)+"s":e+"ms"}function w(e){return k(e,Ka,"day")||k(e,Ha,"hour")||k(e,Ya,"minute")||k(e,qa,"second")||e+" ms"}function k(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function E(e){for(var t=e.length;--t>=0;)e[t]=0}function x(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function A(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?As[e]:As[256+(e>>>7)]}function C(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function R(e,t,n){e.bi_valid>ds-n?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>ds-e.bi_valid,e.bi_valid+=n-ds):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function T(e,t,n){R(e,n[2*t],n[2*t+1])}function O(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function D(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function B(e,t){var n,r,i,o,a,s,u=t.dyn_tree,c=t.max_code,f=t.stat_desc.static_tree,l=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=hs;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<ls;n++)(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,g++),u[2*r+1]=o,r>c||(e.bl_count[o]++,a=0,r>=d&&(a=h[r-d]),s=u[2*r],e.opt_len+=s*(o+a),l&&(e.static_len+=s*(f[2*r+1]+a)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>c||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}function P(e,t,n){var r,i,o=new Array(hs+1),a=0;for(r=1;r<=hs;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=O(o[s]++,s))}}function I(){var e,t,n,r,i,o=new Array(hs+1);for(n=0,r=0;r<as-1;r++)for(Cs[r]=n,e=0;e<1<<bs[r];e++)Ss[n++]=r;for(Ss[n-1]=r,i=0,r=0;r<16;r++)for(Rs[r]=i,e=0;e<1<<_s[r];e++)As[i++]=r;for(i>>=7;r<cs;r++)for(Rs[r]=i<<7,e=0;e<1<<_s[r]-7;e++)As[256+i++]=r;for(t=0;t<=hs;t++)o[t]=0;for(e=0;e<=143;)Es[2*e+1]=8,e++,o[8]++;for(;e<=255;)Es[2*e+1]=9,e++,o[9]++;for(;e<=279;)Es[2*e+1]=7,e++,o[7]++;for(;e<=287;)Es[2*e+1]=8,e++,o[8]++;for(P(Es,us+1,o),e=0;e<cs;e++)xs[2*e+1]=5,xs[2*e]=O(e,5);Ts=new x(Es,bs,ss+1,us,hs),Os=new x(xs,_s,0,cs,hs),Ds=new x(new Array(0),ws,0,fs,ps)}function j(e){var t;for(t=0;t<us;t++)e.dyn_ltree[2*t]=0;for(t=0;t<cs;t++)e.dyn_dtree[2*t]=0;for(t=0;t<fs;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*gs]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function U(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function F(e,t,n,r){U(e),r&&(C(e,n),C(e,~n)),Xa.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function L(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function N(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&L(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!L(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function M(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?T(e,i,t):(T(e,(o=Ss[i])+ss+1,t),0!==(a=bs[o])&&R(e,i-=Cs[o],a),T(e,o=S(--r),n),0!==(a=_s[o])&&R(e,r-=Rs[o],a))}while(s<e.last_lit);T(e,gs,t)}function z(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=ls,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)N(e,o,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],N(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,N(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],B(e,t),P(o,c,e.bl_count)}function q(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<u&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*vs]++):s<=10?e.bl_tree[2*ms]++:e.bl_tree[2*ys]++,s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function Y(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<u&&i===a)){if(s<c)do{T(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(T(e,i,e.bl_tree),s--),T(e,vs,e.bl_tree),R(e,s-3,2)):s<=10?(T(e,ms,e.bl_tree),R(e,s-3,3)):(T(e,ys,e.bl_tree),R(e,s-11,7));s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}}function H(e){var t;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=fs-1;t>=3&&0===e.bl_tree[2*ks[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function K(e,t,n,r){var i;for(R(e,t-257,5),R(e,n-1,5),R(e,r-4,4),i=0;i<r;i++)R(e,e.bl_tree[2*ks[i]+1],3);Y(e,e.dyn_ltree,t-1),Y(e,e.dyn_dtree,n-1)}function W(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return es;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return ts;for(t=32;t<ss;t++)if(0!==e.dyn_ltree[2*t])return ts;return es}function $(e,t,n,r){R(e,(rs<<1)+(r?1:0),3),F(e,t,n,!0)}function Z(e,t){return e.msg=Ls[t],t}function V(e){return(e<<1)-(e>4?9:0)}function J(e){for(var t=e.length;--t>=0;)e[t]=0}function G(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(Xa.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function X(e,t){Is._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,G(e.strm)}function Q(e,t){e.pending_buf[e.pending++]=t}function ee(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function te(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,Xa.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=js(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Fs(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function ne(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-du?e.strstart-(e.w_size-du):0,c=e.window,f=e.w_mask,l=e.prev,h=e.strstart+hu,d=c[o+a-1],p=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+a]===p&&c[n+a-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(r=hu-(h-o),o=h-hu,r>a){if(e.match_start=t,a=r,r>=s)break;d=c[o+a-1],p=c[o+a]}}}while((t=l[t&f])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function re(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-du)){Xa.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=te(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=lu)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+lu-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<lu)););}while(e.lookahead<du&&0!==e.strm.avail_in)}function ie(e,t){for(var n,r;;){if(e.lookahead<du){if(re(e),e.lookahead<du&&t===Ns)return ku;if(0===e.lookahead)break}if(n=0,e.lookahead>=lu&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-du&&(e.match_length=ne(e,n)),e.match_length>=lu)if(r=Is._tr_tally(e,e.strstart-e.match_start,e.match_length-lu),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=lu){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Is._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(X(e,!1),0===e.strm.avail_out))return ku}return e.insert=e.strstart<lu-1?e.strstart:lu-1,t===qs?(X(e,!0),0===e.strm.avail_out?xu:Au):e.last_lit&&(X(e,!1),0===e.strm.avail_out)?ku:Eu}function oe(e,t){for(var n,r,i;;){if(e.lookahead<du){if(re(e),e.lookahead<du&&t===Ns)return ku;if(0===e.lookahead)break}if(n=0,e.lookahead>=lu&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=lu-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-du&&(e.match_length=ne(e,n),e.match_length<=5&&(e.strategy===Js||e.match_length===lu&&e.strstart-e.match_start>4096)&&(e.match_length=lu-1)),e.prev_length>=lu&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-lu,r=Is._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-lu),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+lu-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=lu-1,e.strstart++,r&&(X(e,!1),0===e.strm.avail_out))return ku}else if(e.match_available){if((r=Is._tr_tally(e,0,e.window[e.strstart-1]))&&X(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ku}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Is._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<lu-1?e.strstart:lu-1,t===qs?(X(e,!0),0===e.strm.avail_out?xu:Au):e.last_lit&&(X(e,!1),0===e.strm.avail_out)?ku:Eu}function ae(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=hu){if(re(e),e.lookahead<=hu&&t===Ns)return ku;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=lu&&e.strstart>0&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+hu;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=hu-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=lu?(n=Is._tr_tally(e,1,e.match_length-lu),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Is._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(X(e,!1),0===e.strm.avail_out))return ku}return e.insert=0,t===qs?(X(e,!0),0===e.strm.avail_out?xu:Au):e.last_lit&&(X(e,!1),0===e.strm.avail_out)?ku:Eu}function se(e,t){for(var n;;){if(0===e.lookahead&&(re(e),0===e.lookahead)){if(t===Ns)return ku;break}if(e.match_length=0,n=Is._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(X(e,!1),0===e.strm.avail_out))return ku}return e.insert=0,t===qs?(X(e,!0),0===e.strm.avail_out?xu:Au):e.last_lit&&(X(e,!1),0===e.strm.avail_out)?ku:Eu}function ue(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function ce(e){e.window_size=2*e.w_size,J(e.head),e.max_lazy_match=Bs[e.level].max_lazy,e.good_match=Bs[e.level].good_length,e.nice_match=Bs[e.level].nice_length,e.max_chain_length=Bs[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=lu-1,e.match_available=0,e.ins_h=0}function fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nu,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Xa.Buf16(2*cu),this.dyn_dtree=new Xa.Buf16(2*(2*su+1)),this.bl_tree=new Xa.Buf16(2*(2*uu+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Xa.Buf16(fu+1),this.heap=new Xa.Buf16(2*au+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Xa.Buf16(2*au+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=tu,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?gu:_u,e.adler=2===t.wrap?0:1,t.last_flush=Ns,Is._tr_init(t),Hs):Z(e,Ws)}function he(e){var t=le(e);return t===Hs&&ce(e.state),t}function de(e,t,n,r,i,o){if(!e)return Ws;var a=1;if(t===Vs&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>ru||n!==nu||r<8||r>15||t<0||t>9||o<0||o>Qs)return Z(e,Ws);8===r&&(r=9);var s=new fe;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+lu-1)/lu),s.window=new Xa.Buf8(2*s.w_size),s.head=new Xa.Buf16(s.hash_size),s.prev=new Xa.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Xa.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,he(e)}function pe(e,t){if(t<65537&&(e.subarray&&Tu||!e.subarray&&Ru))return String.fromCharCode.apply(null,Xa.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}function ge(e){if(!(this instanceof ge))return new ge(e);this.options=Xa.assign({level:Uu,method:Lu,chunkSize:16384,windowBits:15,memLevel:8,strategy:Fu,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pu,this.strm.avail_out=0;var n=Cu.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ju)throw new Error(Ls[n]);if(t.header&&Cu.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?Bu.string2buf(t.dictionary):"[object ArrayBuffer]"===Iu.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=Cu.deflateSetDictionary(this.strm,r))!==ju)throw new Error(Ls[n]);this._dict_set=!0}}function ve(e,t){var n=new ge(t);if(n.push(e,!0),n.err)throw n.msg||Ls[n.err];return n.result}function me(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Xa.Buf16(320),this.work=new Xa.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function be(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=uc,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Xa.Buf32(Mc),t.distcode=t.distdyn=new Xa.Buf32(zc),t.sane=1,t.back=-1,ec):rc}function _e(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,be(e)):rc}function we(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?rc:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,_e(e))):rc}function ke(e,t){var n,r;return e?(r=new ye,e.state=r,r.window=null,(n=we(e,t))!==ec&&(e.state=null),n):rc}function Ee(e){if(Yc){var t;for(Nu=new Xa.Buf32(512),Mu=new Xa.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($u(Vu,e.lens,0,288,Nu,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$u(Ju,e.lens,0,32,Mu,0,e.work,{bits:5}),Yc=!1}e.lencode=Nu,e.lenbits=9,e.distcode=Mu,e.distbits=5}function xe(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Xa.Buf8(o.wsize)),r>=o.wsize?(Xa.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),Xa.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(Xa.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function Ae(e){if(!(this instanceof Ae))return new Ae(e);this.options=Xa.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pu,this.strm.avail_out=0;var n=Hc.inflateInit2(this.strm,t.windowBits);if(n!==Kc.Z_OK)throw new Error(Ls[n]);this.header=new Wc,Hc.inflateGetHeader(this.strm,this.header)}function Se(e,t){var n=new Ae(t);if(n.push(e,!0),n.err)throw n.msg||Ls[n.err];return n.result}function Ce(){nf=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Qc[t]=e[t],ef[e.charCodeAt(t)]=t;ef["-".charCodeAt(0)]=62,ef["_".charCodeAt(0)]=63}function Re(e){nf||Ce();var t,n,r,i,o,a,s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new tf(3*s/4-o),r=o>0?s-4:s;var u=0;for(t=0,n=0;t<r;t+=4,n+=3)i=ef[e.charCodeAt(t)]<<18|ef[e.charCodeAt(t+1)]<<12|ef[e.charCodeAt(t+2)]<<6|ef[e.charCodeAt(t+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=ef[e.charCodeAt(t)]<<2|ef[e.charCodeAt(t+1)]>>4,a[u++]=255&i):1===o&&(i=ef[e.charCodeAt(t)]<<10|ef[e.charCodeAt(t+1)]<<4|ef[e.charCodeAt(t+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}function Te(e){return Qc[e>>18&63]+Qc[e>>12&63]+Qc[e>>6&63]+Qc[63&e]}function Oe(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(Te(r));return i.join("")}function De(e){nf||Ce();for(var t,n=e.length,r=n%3,i="",o=[],a=0,s=n-r;a<s;a+=16383)o.push(Oe(e,a,a+16383>s?s:a+16383));return 1===r?(t=e[n-1],i+=Qc[t>>2],i+=Qc[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=Qc[t>>10],i+=Qc[t>>4&63],i+=Qc[t<<2&63],i+="="),o.push(i),o.join("")}function Be(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)}function Pe(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*g}function Ie(){return Ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function je(e,t){if(Ie()<t)throw new RangeError("Invalid typed array length");return Ue.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ue.prototype:(null===e&&(e=new Ue(t)),e.length=t),e}function Ue(e,t,n){if(!(Ue.TYPED_ARRAY_SUPPORT||this instanceof Ue))return new Ue(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Me(this,e)}return Fe(this,e,t,n)}function Fe(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?Ye(e,t,n,r):"string"==typeof t?ze(e,t,n):He(e,t)}function Le(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ne(e,t,n,r){return Le(t),t<=0?je(e,t):void 0!==n?"string"==typeof r?je(e,t).fill(n,r):je(e,t).fill(n):je(e,t)}function Me(e,t){if(Le(t),e=je(e,t<0?0:0|Ke(t)),!Ue.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function ze(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Ue.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|$e(t,n),i=(e=je(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function qe(e,t){var n=t.length<0?0:0|Ke(t.length);e=je(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Ye(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Ue.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ue.prototype:e=qe(e,t),e}function He(e,t){if(We(t)){var n=0|Ke(t.length);return 0===(e=je(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||St(t.length)?je(e,0):qe(e,t);if("Buffer"===t.type&&of(t.data))return qe(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ke(e){if(e>=Ie())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ie().toString(16)+" bytes");return 0|e}function We(e){return!(null==e||!e._isBuffer)}function $e(e,t){if(We(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return wt(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return xt(e).length;default:if(r)return wt(e).length;t=(""+t).toLowerCase(),r=!0}}function Ze(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return ct(this,t,n);case"utf8":case"utf-8":return ot(this,t,n);case"ascii":return st(this,t,n);case"latin1":case"binary":return ut(this,t,n);case"base64":return it(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Ve(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Je(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Ue.from(t,r)),We(t))return 0===t.length?-1:Ge(e,t,n,r,i);if("number"==typeof t)return t&=255,Ue.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ge(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Ge(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*a}else-1!==f&&(c-=c-f),f=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var l=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){l=!1;break}if(l)return c}return-1}function Xe(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function Qe(e,t,n,r){return At(wt(t,e.length-n),e,n,r)}function et(e,t,n,r){return At(kt(t),e,n,r)}function tt(e,t,n,r){return et(e,t,n,r)}function nt(e,t,n,r){return At(xt(t),e,n,r)}function rt(e,t,n,r){return At(Et(t,e.length-n),e,n,r)}function it(e,t,n){return De(0===t&&n===e.length?e:e.slice(t,n))}function ot(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,f,l;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(u=e[i+1]))&&(l=(31&o)<<6|63&u)>127&&(a=l);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return at(r)}function at(e){var t=e.length;if(t<=af)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=af));return n}function st(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function ut(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function ct(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=_t(e[o]);return i}function ft(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function lt(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function ht(e,t,n,r,i,o){if(!We(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function dt(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function pt(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function gt(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function vt(e,t,n,r,i){return i||gt(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Pe(e,t,n,r,23,4),n+4}function mt(e,t,n,r,i){return i||gt(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Pe(e,t,n,r,52,8),n+8}function yt(e){if((e=bt(e).replace(sf,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function bt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function _t(e){return e<16?"0"+e.toString(16):e.toString(16)}function wt(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function kt(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Et(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function xt(e){return Re(yt(e))}function At(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function St(e){return e!==e}function Ct(e){return null!=e&&(!!e._isBuffer||Rt(e)||Tt(e))}function Rt(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Tt(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Rt(e.slice(0,0))}function Ot(){df=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ff[t]=e[t],lf[e.charCodeAt(t)]=t;lf["-".charCodeAt(0)]=62,lf["_".charCodeAt(0)]=63}function Dt(e){df||Ot();var t,n,r,i,o,a,s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new hf(3*s/4-o),r=o>0?s-4:s;var u=0;for(t=0,n=0;t<r;t+=4,n+=3)i=lf[e.charCodeAt(t)]<<18|lf[e.charCodeAt(t+1)]<<12|lf[e.charCodeAt(t+2)]<<6|lf[e.charCodeAt(t+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=lf[e.charCodeAt(t)]<<2|lf[e.charCodeAt(t+1)]>>4,a[u++]=255&i):1===o&&(i=lf[e.charCodeAt(t)]<<10|lf[e.charCodeAt(t+1)]<<4|lf[e.charCodeAt(t+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}function Bt(e){return ff[e>>18&63]+ff[e>>12&63]+ff[e>>6&63]+ff[63&e]}function Pt(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(Bt(r));return i.join("")}function It(e){df||Ot();for(var t,n=e.length,r=n%3,i="",o=[],a=0,s=n-r;a<s;a+=16383)o.push(Pt(e,a,a+16383>s?s:a+16383));return 1===r?(t=e[n-1],i+=ff[t>>2],i+=ff[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=ff[t>>10],i+=ff[t>>4&63],i+=ff[t<<2&63],i+="="),o.push(i),o.join("")}function jt(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)}function Ut(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*g}function Ft(){return Nt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Lt(e,t){if(Ft()<t)throw new RangeError("Invalid typed array length");return Nt.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Nt.prototype:(null===e&&(e=new Nt(t)),e.length=t),e}function Nt(e,t,n){if(!(Nt.TYPED_ARRAY_SUPPORT||this instanceof Nt))return new Nt(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Yt(this,e)}return Mt(this,e,t,n)}function Mt(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?Wt(e,t,n,r):"string"==typeof t?Ht(e,t,n):$t(e,t)}function zt(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function qt(e,t,n,r){return zt(t),t<=0?Lt(e,t):void 0!==n?"string"==typeof r?Lt(e,t).fill(n,r):Lt(e,t).fill(n):Lt(e,t)}function Yt(e,t){if(zt(t),e=Lt(e,t<0?0:0|Zt(t)),!Nt.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ht(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Nt.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Gt(t,n),i=(e=Lt(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function Kt(e,t){var n=t.length<0?0:0|Zt(t.length);e=Lt(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Wt(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Nt.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Nt.prototype:e=Kt(e,t),e}function $t(e,t){if(Jt(t)){var n=0|Zt(t.length);return 0===(e=Lt(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Dn(t.length)?Lt(e,0):Kt(e,t);if("Buffer"===t.type&&gf(t.data))return Kt(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Zt(e){if(e>=Ft())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ft().toString(16)+" bytes");return 0|e}function Vt(e){return+e!=e&&(e=0),Nt.alloc(+e)}function Jt(e){return!(null==e||!e._isBuffer)}function Gt(e,t){if(Jt(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Sn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Tn(e).length;default:if(r)return Sn(e).length;t=(""+t).toLowerCase(),r=!0}}function Xt(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return pn(this,t,n);case"utf8":case"utf-8":return fn(this,t,n);case"ascii":return hn(this,t,n);case"latin1":case"binary":return dn(this,t,n);case"base64":return cn(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gn(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Qt(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function en(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Nt.from(t,r)),Jt(t))return 0===t.length?-1:tn(e,t,n,r,i);if("number"==typeof t)return t&=255,Nt.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):tn(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function tn(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*a}else-1!==f&&(c-=c-f),f=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var l=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){l=!1;break}if(l)return c}return-1}function nn(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function rn(e,t,n,r){return On(Sn(t,e.length-n),e,n,r)}function on(e,t,n,r){return On(Cn(t),e,n,r)}function an(e,t,n,r){return on(e,t,n,r)}function sn(e,t,n,r){return On(Tn(t),e,n,r)}function un(e,t,n,r){return On(Rn(t,e.length-n),e,n,r)}function cn(e,t,n){return It(0===t&&n===e.length?e:e.slice(t,n))}function fn(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,f,l;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(u=e[i+1]))&&(l=(31&o)<<6|63&u)>127&&(a=l);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return ln(r)}function ln(e){var t=e.length;if(t<=mf)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=mf));return n}function hn(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function dn(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function pn(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=An(e[o]);return i}function gn(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function vn(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function mn(e,t,n,r,i,o){if(!Jt(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function yn(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function bn(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function _n(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function wn(e,t,n,r,i){return i||_n(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Ut(e,t,n,r,23,4),n+4}function kn(e,t,n,r,i){return i||_n(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Ut(e,t,n,r,52,8),n+8}function En(e){if((e=xn(e).replace(yf,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function xn(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function An(e){return e<16?"0"+e.toString(16):e.toString(16)}function Sn(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Cn(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Rn(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function Tn(e){return Dt(En(e))}function On(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Dn(e){return e!==e}function Bn(e){return null!=e&&(!!e._isBuffer||Pn(e)||In(e))}function Pn(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function In(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Pn(e.slice(0,0))}function jn(){}function Un(){Un.init.call(this)}function Fn(e){return void 0===e._maxListeners?Un.defaultMaxListeners:e._maxListeners}function Ln(e,t,n){if(t)e.call(n);else for(var r=e.length,i=Zn(e,r),o=0;o<r;++o)i[o].call(n)}function Nn(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=Zn(e,i),a=0;a<i;++a)o[a].call(n,r)}function Mn(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=Zn(e,o),s=0;s<o;++s)a[s].call(n,r,i)}function zn(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=Zn(e,a),u=0;u<a;++u)s[u].call(n,r,i,o)}function qn(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=Zn(e,i),a=0;a<i;++a)o[a].apply(n,r)}function Yn(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=new jn,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=Fn(e))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,Hn(s)}}else a=o[t]=n,++e._eventsCount;return e}function Hn(e){"function"==typeof console.warn?console.warn(e):console.log(e)}function Kn(e,t,n){function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}var i=!1;return r.listener=n,r}function Wn(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function $n(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function Zn(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function Vn(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Jn(e){if(!hr(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(Xn(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(Cf,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])fr(a)||!gr(a)?o+=" "+a:o+=" "+Xn(a);return o}function Gn(e,t){if(dr(ba.process))return function(){return Gn(e,t).apply(this,arguments)};if(!0===za.noDeprecation)return e;var n=!1;return function(){if(!n){if(za.throwDeprecation)throw new Error(t);za.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}function Xn(e,t){var n={seen:[],stylize:er};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),cr(t)?n.showHidden=t:t&&_r(n,t),dr(n.showHidden)&&(n.showHidden=!1),dr(n.depth)&&(n.depth=2),dr(n.colors)&&(n.colors=!1),dr(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Qn),nr(n,e,n.depth)}function Qn(e,t){var n=Xn.styles[t];return n?"["+Xn.colors[n][0]+"m"+e+"["+Xn.colors[n][1]+"m":e}function er(e,t){return e}function tr(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function nr(e,t,n){if(e.customInspect&&t&&yr(t.inspect)&&t.inspect!==Xn&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return hr(r)||(r=nr(e,r,n)),r}var i=rr(e,t);if(i)return i;var o=Object.keys(t),a=tr(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),mr(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return ir(t);if(0===o.length){if(yr(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(pr(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(vr(t))return e.stylize(Date.prototype.toString.call(t),"date");if(mr(t))return ir(t)}var u="",c=!1,f=["{","}"];if(ur(t)&&(c=!0,f=["[","]"]),yr(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),pr(t)&&(u=" "+RegExp.prototype.toString.call(t)),vr(t)&&(u=" "+Date.prototype.toUTCString.call(t)),mr(t)&&(u=" "+ir(t)),0===o.length&&(!c||0==t.length))return f[0]+u+f[1];if(n<0)return pr(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var l;return l=c?or(e,t,n,a,o):o.map(function(r){return ar(e,t,n,a,r,c)}),e.seen.pop(),sr(l,u,f)}function rr(e,t){if(dr(t))return e.stylize("undefined","undefined");if(hr(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return lr(t)?e.stylize(""+t,"number"):cr(t)?e.stylize(""+t,"boolean"):fr(t)?e.stylize("null","null"):void 0}function ir(e){return"["+Error.prototype.toString.call(e)+"]"}function or(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)wr(t,String(a))?o.push(ar(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(ar(e,t,n,r,i,!0))}),o}function ar(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),wr(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=fr(n)?nr(e,u.value,null):nr(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),dr(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function sr(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function ur(e){return Array.isArray(e)}function cr(e){return"boolean"==typeof e}function fr(e){return null===e}function lr(e){return"number"==typeof e}function hr(e){return"string"==typeof e}function dr(e){return void 0===e}function pr(e){return gr(e)&&"[object RegExp]"===br(e)}function gr(e){return"object"==typeof e&&null!==e}function vr(e){return gr(e)&&"[object Date]"===br(e)}function mr(e){return gr(e)&&("[object Error]"===br(e)||e instanceof Error)}function yr(e){return"function"==typeof e}function br(e){return Object.prototype.toString.call(e)}function _r(e,t){if(!t||!gr(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function wr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kr(){this.head=null,this.tail=null,this.length=0}function Er(e){if(e&&!Tf(e))throw new Error("Unknown encoding: "+e)}function xr(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),Er(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Sr;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Cr;break;default:return void(this.write=Ar)}this.charBuffer=new Nt(6),this.charReceived=0,this.charLength=0}function Ar(e){return e.toString(this.encoding)}function Sr(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Cr(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}function Rr(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function Tr(e,t){return e.listeners(t).length}function Or(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof wi&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new kr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new xr(e.encoding),this.encoding=e.encoding)}function Dr(e){if(!(this instanceof Dr))return new Dr(e);this._readableState=new Or(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),Un.call(this)}function Br(e,t,n,r,i){var o=Ur(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,Fr(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;!t.decoder||i||r||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&Lr(e))),Mr(e,t)}else i||(t.reading=!1);return Pr(t)}function Pr(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function Ir(e){return e>=Df?e=Df:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function jr(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Ir(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Ur(e,t){var n=null;return Ct(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function Fr(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,Lr(e)}}function Lr(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Of("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?v(Nr,e):Nr(e))}function Nr(e){Of("emit readable"),e.emit("readable"),Wr(e)}function Mr(e,t){t.readingMore||(t.readingMore=!0,v(zr,e,t))}function zr(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Of("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function qr(e){return function(){var t=e._readableState;Of("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,Wr(e))}}function Yr(e){Of("readable nexttick read 0"),e.read(0)}function Hr(e,t){t.resumeScheduled||(t.resumeScheduled=!0,v(Kr,e,t))}function Kr(e,t){t.reading||(Of("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Wr(e),t.flowing&&!t.reading&&e.read(0)}function Wr(e){var t=e._readableState;for(Of("flow",t.flowing);t.flowing&&null!==e.read(););}function $r(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=Zr(e,t.buffer,t.decoder),n}function Zr(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?Vr(e,t):Jr(e,t),r}function Vr(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function Jr(e,t){var n=Ue.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function Gr(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,v(Xr,t,e))}function Xr(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Qr(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function ei(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function ti(){}function ni(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function ri(e,t){Object.defineProperty(this,"buffer",{get:Gn(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof wi&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){hi(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new _i(this)}function ii(e){if(!(this instanceof ii||this instanceof wi))return new ii(e);this._writableState=new ri(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),Un.call(this)}function oi(e,t){var n=new Error("write after end");e.emit("error",n),v(t,n)}function ai(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):Nt.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),v(r,o),i=!1),i}function si(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Nt.from(t,n)),t}function ui(e,t,n,r,i){n=si(t,n,r),Nt.isBuffer(n)&&(r="buffer");var o=t.objectMode?1:n.length;t.length+=o;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new ni(n,r,i),s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else ci(e,t,!1,o,n,r,i);return a}function ci(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function fi(e,t,n,r,i){--t.pendingcb,n?v(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function li(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function hi(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(li(n),t)fi(e,n,r,t,i);else{var o=vi(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||gi(e,n),r?v(di,e,n,o,i):di(e,n,o,i)}}function di(e,t,n,r){n||pi(e,t),t.pendingcb--,r(),yi(e,t)}function pi(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function gi(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;ci(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new _i(t)}else{for(;n;){var s=n.chunk,u=n.encoding,c=n.callback;if(ci(e,t,!1,t.objectMode?1:s.length,s,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function vi(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function mi(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function yi(e,t){var n=vi(t);return n&&(0===t.pendingcb?(mi(e,t),t.finished=!0,e.emit("finish")):mi(e,t)),n}function bi(e,t,n){t.ending=!0,yi(e,t),n&&(t.finished?v(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function _i(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}function wi(e){if(!(this instanceof wi))return new wi(e);Dr.call(this,e),ii.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",ki)}function ki(){this.allowHalfOpen||this._writableState.ended||v(Ei,this)}function Ei(e){e.end()}function xi(e){this.afterTransform=function(t,n){return Ai(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Ai(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Si(e){if(!(this instanceof Si))return new Si(e);wi.call(this,e),this._transformState=new xi(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){Ci(t,e)}):Ci(t)})}function Ci(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function Ri(e){if(!(this instanceof Ri))return new Ri(e);Si.call(this,e)}function Ti(){Un.call(this)}function Oi(e){var t=this;if(!(t instanceof Oi))return new Oi(e);if(t._id=Ef(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1,objectMode:!0},e),Uf.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||Ef(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||Oi.channelConfig,t.config=e.config||Oi.config,t.constraints=t._transformConstraints(e.constraints||Oi.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t._earlyMessage=null,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:uf(),!t._wrtc)throw"undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._previousStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else t._pc.ondatachannel=function(e){t._setupData(e)};"addTrack"in t._pc?(t.stream&&t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)}),t._pc.ontrack=function(e){t._onTrack(e)}):(t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=function(e){t._onAddStream(e)}),t.initiator&&t._isWrtc&&t._pc.onnegotiationneeded(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function Di(){}function Bi(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Yf;case"days":case"day":case"d":return n*qf;case"hours":case"hour":case"hrs":case"hr":case"h":return n*zf;case"minutes":case"minute":case"mins":case"min":case"m":return n*Mf;case"seconds":case"second":case"secs":case"sec":case"s":return n*Nf;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function Pi(e){return e>=qf?Math.round(e/qf)+"d":e>=zf?Math.round(e/zf)+"h":e>=Mf?Math.round(e/Mf)+"m":e>=Nf?Math.round(e/Nf)+"s":e+"ms"}function Ii(e){return ji(e,qf,"day")||ji(e,zf,"hour")||ji(e,Mf,"minute")||ji(e,Nf,"second")||e+" ms"}function ji(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function Ui(){return"undefined"==typeof document||void 0===document.location?"":document.location.href}function Fi(e){this.name="RavenConfigError",this.message=e}function Li(){return+new Date}function Ni(e,t){return qi(t)?function(n){return t(n,e)}:t}function Mi(){this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!zi(xl),this._hasNavigator=!zi(Al),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=El.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=Li(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=El.location,this._lastHref=this._location&&this._location.href,this._resetBackoff();for(var e in this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}function zi(e){return void 0===e}function qi(e){return"function"==typeof e}function Yi(e){return"[object String]"===Sl.toString.call(e)}function Hi(e){for(var t in e)return!1;return!0}function Ki(e,t){var n,r;if(zi(e.length))for(n in e)Vi(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;n<r;n++)t.call(null,n,e[n])}function Wi(e,t){return t?(Ki(t,function(t,n){e[t]=n}),e):e}function $i(e){return!!Object.isFrozen&&Object.isFrozen(e)}function Zi(e,t){return!t||e.length<=t?e:e.substr(0,t)+"…"}function Vi(e,t){return Sl.hasOwnProperty.call(e,t)}function Ji(e){for(var t,n=[],r=0,i=e.length;r<i;r++)Yi(t=e[r])?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function Gi(e){var t=[];return Ki(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")}function Xi(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}}function Qi(){var e=El.crypto||El.msCrypto;if(!zi(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function eo(e){for(var t,n=[],r=0,i=0,o=" > ".length;e&&r++<5&&!("html"===(t=to(e))||r>1&&i+n.length*o+t.length>=80);)n.push(t),i+=t.length,e=e.parentNode;return n.reverse().join(" > ")}function to(e){var t,n,r,i,o,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#"+e.id),(t=e.className)&&Yi(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)a.push("."+n[o]);var s=["type","name","title","alt"];for(o=0;o<s.length;o++)r=s[o],(i=e.getAttribute(r))&&a.push("["+r+'="'+i+'"]');return a.join("")}function no(e,t){return!!(!!e^!!t)}function ro(e,t){return!no(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&io(e.stacktrace,t.stacktrace))}function io(e,t){if(no(e,t))return!1;var n=e.frames,r=t.frames;if(n.length!==r.length)return!1;for(var i,o,a=0;a<n.length;a++)if(i=n[a],o=r[a],i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1;return!0}function oo(e,t,n,r){var i=e[t];e[t]=n(i),r&&r.push([e,t,i])}function ao(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden?e.idle():e.active()},!1)}function so(e){return null==e&&(e=Mo.Promise),this instanceof so?uo(e,this):uo(e,Object.create(so.prototype))}function uo(e,t){return t.promise=new e(function(e,n){t.resolve=e,t.reject=n}),t}e.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var co=e;t.prototype.emitEvent=function(e,t,n){this._emitEvents&&!n&&this.events.emit(e,t)},t.prototype.getIdentifiers=function(){for(var e=[],t=this._store.length-1;t>=0;t-=1)e[e.length]=this._store[t][this._identifier];return e},t.prototype.getRecord=function(e){for(var t=this._store.length-1;t>=0;t-=1)if(this._store[t][this._identifier]===e)return this._store[t]},t.prototype.exists=function(e){return this.getIndex(e)>=0},t.prototype.getIndex=function(e){for(var t=this._idx.length-1;t>=0;t-=1)if(this._idx[t]===e)return t;return-1},t.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var t=this.removeRecord(e[this._identifier],!0);return this._idx[this._idx.length]=e[this._identifier],this._store[this._store.length]=e,setTimeout(function(){t?setTimeout(this.emitEvent.bind(this,"update",e),0):setTimeout(this.emitEvent.bind(this,"add",e),0)}.bind(this),0),!0},t.prototype.removeRecord=function(e,t){var n=this.getIndex(e);if(n<0)return!1;for(var r=n;r>=0;r-=1)if(this._store[r]&&this._store[r][this._identifier]===e)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;for(var i=this._store.length-1;i>=n;i-=1)if(this._store[i]&&this._store[i][this._identifier]===e)return this._store.splice(i,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;return!1},t.prototype.forEachRecord=function(e){var t=0,n=this,r=function(){};return setTimeout(function(){for(var i=n._store.length-1;i>=0;i-=1)t+=1,setTimeout(e.bind(null,n._store[i],i),0);setTimeout(r.bind(null,t),0)},0),{finally:function(e){r=e}}},t.prototype.mapRecords=function(e){for(var t=this,n=[],r=t._store.length-1;r>=0;r-=1)1,n.push(e(t._store[r],r));return n},t.prototype.getCount=function(){return this._store.length},t.prototype.removeAll=function(){for(var e=this._store.length-1;e>=0;e-=1)delete this._store[e];this._store=[]};var fo,lo=t,ho="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},po=ho.crypto||ho.msCrypto;if(po&&po.getRandomValues){var go=new Uint8Array(16);fo=function(){return po.getRandomValues(go),go}}if(!fo){var vo=new Array(16);fo=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),vo[t]=e>>>((3&t)<<3)&255;return vo}}for(var mo=fo,yo=[],bo=0;bo<256;++bo)yo[bo]=(bo+256).toString(16).substr(1);var _o=function(e,t){var n=t||0,r=yo;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]},wo=mo(),ko=[1|wo[0],wo[1],wo[2],wo[3],wo[4],wo[5]],Eo=16383&(wo[6]<<8|wo[7]),xo=0,Ao=0,So=function(e,t,n){var r=t&&n||0,i=t||[],o=void 0!==(e=e||{}).clockseq?e.clockseq:Eo,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:Ao+1,u=a-xo+(s-Ao)/1e4;if(u<0&&void 0===e.clockseq&&(o=o+1&16383),(u<0||a>xo)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");xo=a,Ao=s,Eo=o;var c=(1e4*(268435455&(a+=122192928e5))+s)%4294967296;i[r++]=c>>>24&255,i[r++]=c>>>16&255,i[r++]=c>>>8&255,i[r++]=255&c;var f=a/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var l=e.node||ko,h=0;h<6;++h)i[r+h]=l[h];return t||_o(i)},Co=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||mo)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||_o(i)},Ro=Co;Ro.v1=So,Ro.v4=Co;var To=Ro,Oo=1e3,Do=60*Oo,Bo=60*Do,Po=24*Bo,Io=365.25*Po,jo=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Uo=n(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,o=n-(i||n);e.diff=o,e.prev=i,e.curr=n,i=n;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=t.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(e,o),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=jo,t.names=[],t.skips=[],t.formatters={};var i}),Fo=n(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=Uo).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())});s.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var Lo=s;u.prototype.emitEvent=function(e,t,n){this._emitEvents&&!n&&this.events.emit(e,t)},u.prototype.getIdentifiers=function(){for(var e=[],t=this._store.length-1;t>=0;t-=1)e[e.length]=this._store[t][this._identifier];return e},u.prototype.getRecord=function(e){for(var t=this._store.length-1;t>=0;t-=1)if(this._store[t][this._identifier]===e)return this._store[t]},u.prototype.exists=function(e){return this.getIndex(e)>=0},u.prototype.getIndex=function(e){for(var t=this._idx.length-1;t>=0;t-=1)if(this._idx[t]===e)return t;return-1},u.prototype.addRecord=function(e){if("object"!=typeof e)throw new Error("cannot add non-object records.");if(!e[this._identifier])throw new Error("cannot add a record with no `"+this._identifier+"` property specified.");var t=this.removeRecord(e[this._identifier],!0);return this._idx[this._idx.length]=e[this._identifier],this._store[this._store.length]=e,setTimeout(function(){t?setTimeout(this.emitEvent.bind(this,"update",e),0):setTimeout(this.emitEvent.bind(this,"add",e),0)}.bind(this),0),!0},u.prototype.removeRecord=function(e,t){var n=this.getIndex(e);if(n<0)return!1;for(var r=n;r>=0;r-=1)if(this._store[r]&&this._store[r][this._identifier]===e)return this._store.splice(r,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;for(var i=this._store.length-1;i>=n;i-=1)if(this._store[i]&&this._store[i][this._identifier]===e)return this._store.splice(i,1),this._idx.splice(n,1),setTimeout(this.emitEvent.bind(this,"remove",e,t),0),!0;return!1},u.prototype.forEachRecord=function(e){var t=0,n=this,r=function(){};return setTimeout(function(){for(var i=n._store.length-1;i>=0;i-=1)t+=1,setTimeout(e.bind(null,n._store[i],i),0);setTimeout(r.bind(null,t),0)},0),{finally:function(e){r=e}}},u.prototype.mapRecords=function(e){for(var t=this,n=[],r=t._store.length-1;r>=0;r-=1)1,n.push(e(t._store[r],r));return n},u.prototype.getCount=function(){return this._store.length},u.prototype.removeAll=function(){for(var e=this._store.length-1;e>=0;e-=1)delete this._store[e];this._store=[]};var No=u,Mo="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zo=c(function(e,t){!function(t){e.exports=t()}(function(e){function t(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var r,i,o,a,s,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=c;r+=64)t(f,n(e.substring(r-64,r)));for(i=(e=e.substring(r-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)o[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(t(f,o),r=0;r<16;r+=1)o[r]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,t(f,o),f}function o(e){var n,i,o,a,s,u,c=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=c;n+=64)t(f,r(e.subarray(n-64,n)));for(i=(e=n-64<c?e.subarray(n-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)o[n>>2]|=e[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(f,o),n=0;n<16;n+=1)o[n]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),u=parseInt(a[1],16)||0,o[14]=s,o[15]=u,t(f,o),f}function a(e){var t,n="";for(t=0;t<4;t+=1)n+=p[e>>8*t+4&15]+p[e>>8*t&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}function f(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function l(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function h(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==s(i("hello"))&&function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,s,u=this.byteLength,c=t(n,u),f=u;return r!==e&&(f=t(r,u)),c>f?new ArrayBuffer(0):(i=f-c,o=new ArrayBuffer(i),a=new Uint8Array(o),s=new Uint8Array(this,c,i),a.set(s),o)}}(),d.prototype.append=function(e){return this.appendBinary(u(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},d.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=h(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,n){var r,i,o,a=n;if(e[a>>2]|=128<<(a%4<<3),a>55)for(t(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,t(this._hash,e)},d.hash=function(e,t){return d.hashBinary(u(e),t)},d.hashBinary=function(e,t){var n=s(i(e));return t?h(n):n},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(e){var n,i=l(this._buff.buffer,e,!0),o=i.length;for(this._length+=e.byteLength,n=64;n<=o;n+=64)t(this._hash,r(i.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=s(this._hash),e&&(n=h(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e=d.prototype.getState.call(this);return e.buff=f(e.buff),e},d.ArrayBuffer.prototype.setState=function(e){return e.buff=c(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){var n=s(o(new Uint8Array(e)));return t?h(n):n},d})}),qo={meshConnectTimeout:5e3,maxConnectedPeers:10,iddbName:"edgemesh",iddbVersion:1,iddbColumns:"++id",iddbDefaultMobileDisk:5,iddbDefaultDesktopDisk:50,maxParallelJobs:6,jobProcessingFrequency:30,hubSyncDelay:1e4,chunkSize:15360,chunkIdOffset:0,chunkPositionOffset:4,chunkReservedBytes:8,swPollMaxRetries:5,swPollInterval:200},Yo={extension:["jpg","jpeg","gif","png","bmp","svg","webp","webm"]},Ho="production",Ko="sig.edgeno.de",Wo={iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},$o={beaconUrl:"https://sig.edgeno.de/track",script:"edgemesh.track.min.js"},Zo={httpPort:80,httpsPort:443,wssPort:9e3},Vo={host:"e.edgeno.de",ignoreErrors:[],whitelistUrls:["sig.edgeno.de"],sampleRate:.5,autoBreadcrumbs:{console:!1,xhr:!0,dom:!0,location:!0},client:{id:2,key:"aa1cdc63123e46cdbca29469c7a88416"},hub:{id:3,key:"a36fb8e3eddc42a6a651884cca1b4f7b"},"worker-service":{id:4,key:"ee9e46bd992345f5b7deff07616de822"},"worker-shared":{id:5,key:"d7bb252e1e1e447e8b394cbd67e80eec"},"server-cdn":{id:6,key:"0265404bbacd497ca9237dbf6729af78:3492681cb939430db317cc9ef35c4602"},"server-portal":{id:7,key:"a2fe1e0a0fed4d778f2f54c596dcd098:9d0f5dfbf76e4a10a13b2639221b6e09"},supernode:{id:8,key:"d5351a9f5c5140059c23d6cd6a900f15:6783417eea9943bcbdfc4db2a3f39221"}},Jo={version:"1.7.2",client:qo,support:Yo,env:Ho,host:Ko,clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:Wo,tracking:$o,server:Zo,sentry:Vo},Go=Object.freeze({version:"1.7.2",client:qo,support:Yo,env:Ho,host:Ko,clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:Wo,tracking:$o,server:Zo,sentry:Vo,default:Jo}),Xo="undefined"==typeof window,Qo=function(){try{return window.self===window.top}catch(e){return!1}},ea=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},ta=function(e){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},na=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),ta(n)},ra=function(e,t,n){var r=new ArrayBuffer(n.byteLength+Go.client.chunkReservedBytes),i=new DataView(r);return i.setInt32(Go.client.chunkIdOffset,e),i.setInt32(Go.client.chunkPositionOffset,t),new Uint8Array(r,0,r.byteLength).set(new Uint8Array(n),Go.client.chunkReservedBytes),r},ia=function(e,t){var n=void 0;if(e._arrayBuffer){var r=e.payloadSize*(t+1)-e.payloadSize;if(r>=e.fileSize)return;var i=r+e.payloadSize;i=i>e.fileSize?e.fileSize:i,n=e._arrayBuffer.slice(r,i)}else e._chunks[t]&&(n=e._chunks[t]);return n},oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},sa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ua=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ca=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},fa=function(){function e(t){aa(this,e),this.scope=t,this.currentIndex=0}return sa(e,[{key:"forEachChunk",value:function(e,t){for(var n=0;this.currentIndex<this.scope.totalChunks;)n=this.currentIndex,void 0===this.getChunk()&&e(void 0,n);t()}},{key:"getChunk",value:function(e){var t=this.currentIndex,n=void 0;if("number"==typeof e){if(e<0)return;t=e}var r=ia(this.scope,t);return r&&(n=ra(this.scope.uid,this.currentIndex,r))&&"number"!=typeof e&&(this.currentIndex+=1),n}},{key:"getUnpackedChunk",value:function(e){var t=this.currentIndex;if("number"==typeof e){if(e<0)return;t=e}var n=ia(this.scope,t);return n&&"number"!=typeof e&&(this.currentIndex+=1),n}}]),e}(),la=new No({identifier:"uid"}),ha=function(){return Math.floor(65535*Math.random()+1)},da=function(){function e(t){aa(this,e);var n=void 0,r=void 0,i=void 0,o=void 0;if("object"!==(void 0===t?"undefined":oa(t)))throw new TypeError("metadata object must be passed in");if(!t.mimeType)throw new Error("no mimeType specified");if(!t.chunkSize)throw new Error("no chunkSize specified");if(!t.name)throw new Error("No name specified");if(t.arrayBuffer&&("function"!=typeof t.arrayBuffer.toString||"[object ArrayBuffer]"!==t.arrayBuffer.toString()))throw new Error("arrayBuffer must be an actual ArrayBuffer object");if(!t.arrayBuffer&&!t.uid)throw new Error("arrayBuffer or uid must be specified");if(t.arrayBuffer&&t.uid)throw new Error("cannot manually assign uid");t.uid||(t.uid=ha()),t.arrayBuffer?(r=t.chunkSize-Go.client.chunkReservedBytes,n=Math.ceil(t.arrayBuffer.byteLength/r),i=zo.ArrayBuffer.hash(t.arrayBuffer),o=!0):i=t.checksum,this.uid=t.uid,this.name=t.name,this.existsLocally=o||!1,this.mimeType=t.mimeType,this.chunkSize=t.chunkSize,this.compressed=t.compressed,this.payloadSize=r||t.payloadSize,this.reservedSize=Go.client.chunkReservedBytes,this.fileSize=t.arrayBuffer?t.arrayBuffer.byteLength:t.fileSize,this.totalChunks=n||(t.totalChunks?t.totalChunks:0),this.checksum=i,this.generatedChecksum=null,this.currentIndex=0,this.chunksReceived=0,this._arrayBuffer=t.arrayBuffer?t.arrayBuffer:null,this._chunks=[],la.addRecord(this)}return sa(e,[{key:"clearData",value:function(){la.removeRecord(this.uid),delete this._arrayBuffer}},{key:"getMetadata",value:function(){return{uid:this.uid,name:this.name,mimeType:this.mimeType,chunkSize:this.chunkSize,compressed:this.compressed,payloadSize:this.payloadSize,reservedSize:this.reservedSize,fileSize:this.fileSize,totalChunks:this.totalChunks,checksum:this.checksum}}},{key:"getFile",value:function(){var e=this;return new Promise(function(t){e._arrayBuffer=e._chunks[0];for(var n=1;n<e._chunks.length;n+=1)e._arrayBuffer=na(e._arrayBuffer,e._chunks[n]);e.generatedChecksum=zo.ArrayBuffer.hash(e._arrayBuffer),t({ArrayBuffer:e._arrayBuffer,checksum:e.generatedChecksum,getChecksum:zo.ArrayBuffer.hash})})}},{key:"getTransferObject",value:function(){return new fa(this)}},{key:"getFileObject",value:function(e){return la.getRecord(parseInt(e,10))}},{key:"onChunkReceived",value:function(){}},{key:"onCompleted",value:function(){}}],[{key:"unpack",value:function(e){var t=new DataView(e);return[t.getInt32(Go.client.chunkIdOffset),t.getInt32(Go.client.chunkPositionOffset),new Uint8Array(e.slice(Go.client.chunkReservedBytes))]}},{key:"submitChunk",value:function(e){var t=this.unpack(e),n=t[0],r=t[1],i=t[2],o=la.getRecord(n);return!!o&&(o._chunks[r]=i,o.chunksReceived+=1,o.onChunkReceived(i,r),o.chunksReceived===o.totalChunks&&(o.existsLocally=!0,o.onCompleted(o)),la.addRecord(o),!0)}}]),e}(),pa=window.localStorage,ga=function(e,t){return pa.setItem(e,t)},va=function(e){return pa.removeItem(e)},ma={get:function(e){var t=pa.getItem(e);try{var n=JSON.parse(t).value;return va(e),ga(e,n),n}catch(e){return t}},set:ga,remove:va},ya=c(function(e){function t(e){if(e)return n(e)}function n(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),ba="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_a=f,wa=l;"function"==typeof ba.setTimeout&&(_a=setTimeout),"function"==typeof ba.clearTimeout&&(wa=clearTimeout);var ka,Ea=[],xa=!1,Aa=-1;m.prototype.run=function(){this.fun.apply(null,this.array)};var Sa={},Ca=[],Ra={},Ta={},Oa={},Da=y,Ba=y,Pa=y,Ia=y,ja=y,Ua=y,Fa=y,La=ba.performance||{},Na=La.now||La.mozNow||La.msNow||La.oNow||La.webkitNow||function(){return(new Date).getTime()},Ma=new Date,za={nextTick:v,title:"browser",browser:!0,env:Sa,argv:Ca,version:"",versions:Ra,on:Da,addListener:Ba,once:Pa,off:Ia,removeListener:ja,removeAllListeners:Ua,emit:Fa,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Na.call(La),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:Ta,config:Oa,uptime:function(){return(new Date-Ma)/1e3}},qa=1e3,Ya=60*qa,Ha=60*Ya,Ka=24*Ha,Wa=365.25*Ka,$a=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return b(e);if("number"===n&&!1===isNaN(e))return t.long?w(e):_(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},Za=c(function(e,t){function n(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function r(e){function r(){if(r.enabled){var e=r,n=+new Date,o=n-(i||n);e.diff=o,e.prev=i,e.curr=n,i=n;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=t.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(e,o),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=$a,t.names=[],t.skips=[],t.formatters={};var i}),Va=c(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==za&&"env"in za&&(e=za.env.DEBUG),e}(t=e.exports=Za).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}),Ja=Va("edgemesh:mesh"),Ga=function(e){function t(e,n,r,i){aa(this,t);var o=ca(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.currentHubIndex=0,o.receivedChunks=0,o.complete=!1,o.locateData={},o.meta={},o.stats={},o.rtc=e.rtc,o.id=e.id,o.topic=n.topic||n.origin,o.locateData=n,o.rtc.on("peer-error",o.handleDisconnect.bind(o)),o.onCompleted=r||function(){},o.onFailure=i||function(){},o}return ua(t,ya),sa(t,[{key:"deconstructor",value:function(){this.rtc.removeListener("peer-error",this.handleDisconnect)}},{key:"start",value:function(){this.stats.dst=this.id,this.stats.topic=this.topic,this.stats.assetId=this.locateData.asset,this.stats.originId=this.locateData.origin,this.stats.protocol=this.locateData.protocol,this.stats.transferStart=Jl(),this.requestTransfer()}},{key:"requestTransfer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],n=this.locateData,r=n.origin,i=n.asset,o=n.hubs,a=n.checksum,s=n.reqId,u=o[this.currentHubIndex];if(!u)return Ja("no hubs found %O",{origin:r,asset:i}),this.onFailure("no hubs found",{origin:r,asset:i}),this.deconstructor();Ja("starting mesh transfer from hub %O",{hubId:u});var c=Gl();this.stats.src=u,this.checksum=a,this.connectionTimeout=setTimeout(this.tryNextHub.bind(this,[0],"connection timeout"),Go.client.meshConnectTimeout),this.rtc.connect(u).then(function(n){clearTimeout(e.connectionTimeout),Ja("connected to peer %s",u),e.stats.handshake=Gl()-c,n.send("ASSET_REQUEST",{origin:r,asset:i,reqId:s,fromPeerId:e.id,chunks:t})}).catch(function(t){Ja("error connecting to peer %s",u),Raven.error(t),e.tryNextHub([0],"connection failure")})}},{key:"metaReceived",value:function(e){this.meta=e,Ja("asset mesh meta received %O",e),this.emit("metadata",this.meta),new da(e).onCompleted=this.transferComplete.bind(this)}},{key:"chunkReceived",value:function(e){da.submitChunk(ta(e.chunk)),this.emit("chunkReceived",e.chunk),this.receivedChunks++}},{key:"transferComplete",value:function(e){var t=this,n=this.locateData.origin,r=this.locateData.asset;this.complete=!0,e.getFile().then(function(i){var o=i.ArrayBuffer;if(t.meta.compressed&&(o=Gc(o)),!o)return Ja("could not decompress asset"),t.emit("transfer",Object.assign({},t.stats,{chunkId:0,size:0,handshake:-1,transferEnd:Jl(),success:0})),t.tryNextHub([0],"error decompressing asset");o=ta(o);var a=i.getChecksum(o);if(t.checksum===a){t.emit("transfer",Object.assign({},t.stats,{chunkId:0,size:o.byteLength/1024,transferEnd:Jl(),success:1})),Ja("mesh transfer complete %O",e.getMetadata());var s={origin:n,asset:r,buffer:o,contentType:t.meta.mimeType};t.onCompleted(s),e.clearData(),t.deconstructor()}else Ja("checksum did not match %O",{expected:t.checksum,generated:a}),t.emit("transfer",Object.assign({},t.stats,{chunkId:0,size:0,handshake:-1,transferEnd:Jl(),success:0})),t.tryNextHub([0],"checksum mismatch")})}},{key:"handleDisconnect",value:function(){if(!this.complete&&this.receivedChunks<this.meta.totalChunks){if(Ja("peer disconnected midflight %O",{receivedChunks:this.recievedChunks,totalChunks:this.meta.totalChunks}),0===this.receivedChunks)return this.tryNextHub([0],"peer disconneted");for(var e=[],t=this.receivedChunks;t<this.meta.totalChunks;t++)e.push(t);return this.tryNextHub(e,"peer disconnected")}}},{key:"tryNextHub",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Ja("trying next hub: %s",t),"peer disconnected"!==t&&this.emit("error",new Error(t)),this.currentHubIndex++,this.requestTransfer(e)}}]),t}(),Xa=c(function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)}),Qa=4,es=0,ts=1,ns=2,rs=0,is=1,os=2,as=29,ss=256,us=ss+1+as,cs=30,fs=19,ls=2*us+1,hs=15,ds=16,ps=7,gs=256,vs=16,ms=17,ys=18,bs=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ws=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ks=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Es=new Array(2*(us+2));E(Es);var xs=new Array(2*cs);E(xs);var As=new Array(512);E(As);var Ss=new Array(256);E(Ss);var Cs=new Array(as);E(Cs);var Rs=new Array(cs);E(Rs);var Ts,Os,Ds,Bs,Ps=!1,Is={_tr_init:function(e){Ps||(I(),Ps=!0),e.l_desc=new A(e.dyn_ltree,Ts),e.d_desc=new A(e.dyn_dtree,Os),e.bl_desc=new A(e.bl_tree,Ds),e.bi_buf=0,e.bi_valid=0,j(e)},_tr_stored_block:$,_tr_flush_block:function(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===ns&&(e.strm.data_type=W(e)),z(e,e.l_desc),z(e,e.d_desc),a=H(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?$(e,t,n,r):e.strategy===Qa||o===i?(R(e,(is<<1)+(r?1:0),3),M(e,Es,xs)):(R(e,(os<<1)+(r?1:0),3),K(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),M(e,e.dyn_ltree,e.dyn_dtree)),j(e),r&&U(e)},_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ss[n]+ss+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){R(e,is<<1,3),T(e,gs,Es),D(e)}},js=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0},Us=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),Fs=function(e,t,n,r){var i=Us,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},Ls={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ns=0,Ms=1,zs=3,qs=4,Ys=5,Hs=0,Ks=1,Ws=-2,$s=-3,Zs=-5,Vs=-1,Js=1,Gs=2,Xs=3,Qs=4,eu=0,tu=2,nu=8,ru=9,iu=15,ou=8,au=286,su=30,uu=19,cu=2*au+1,fu=15,lu=3,hu=258,du=hu+lu+1,pu=32,gu=42,vu=69,mu=73,yu=91,bu=103,_u=113,wu=666,ku=1,Eu=2,xu=3,Au=4,Su=3;Bs=[new ue(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(re(e),0===e.lookahead&&t===Ns)return ku;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,X(e,!1),0===e.strm.avail_out))return ku;if(e.strstart-e.block_start>=e.w_size-du&&(X(e,!1),0===e.strm.avail_out))return ku}return e.insert=0,t===qs?(X(e,!0),0===e.strm.avail_out?xu:Au):(e.strstart>e.block_start&&(X(e,!1),e.strm.avail_out),ku)}),new ue(4,4,8,4,ie),new ue(4,5,16,8,ie),new ue(4,6,32,32,ie),new ue(4,4,16,16,oe),new ue(8,16,32,32,oe),new ue(8,16,128,128,oe),new ue(8,32,128,256,oe),new ue(32,128,258,1024,oe),new ue(32,258,258,4096,oe)];var Cu={deflateInit:function(e,t){return de(e,t,nu,iu,ou,eu)},deflateInit2:de,deflateReset:he,deflateResetKeep:le,deflateSetHeader:function(e,t){return e&&e.state?2!==e.state.wrap?Ws:(e.state.gzhead=t,Hs):Ws},deflate:function(e,t){var n,r,i,o;if(!e||!e.state||t>Ys||t<0)return e?Z(e,Ws):Ws;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===wu&&t!==qs)return Z(e,0===e.avail_out?Zs:Ws);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===gu)if(2===r.wrap)e.adler=0,Q(r,31),Q(r,139),Q(r,8),r.gzhead?(Q(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Q(r,255&r.gzhead.time),Q(r,r.gzhead.time>>8&255),Q(r,r.gzhead.time>>16&255),Q(r,r.gzhead.time>>24&255),Q(r,9===r.level?2:r.strategy>=Gs||r.level<2?4:0),Q(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Q(r,255&r.gzhead.extra.length),Q(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Fs(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=vu):(Q(r,0),Q(r,0),Q(r,0),Q(r,0),Q(r,0),Q(r,9===r.level?2:r.strategy>=Gs||r.level<2?4:0),Q(r,Su),r.status=_u);else{var a=nu+(r.w_bits-8<<4)<<8;a|=(r.strategy>=Gs||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=pu),a+=31-a%31,r.status=_u,ee(r,a),0!==r.strstart&&(ee(r,e.adler>>>16),ee(r,65535&e.adler)),e.adler=1}if(r.status===vu)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=Fs(e.adler,r.pending_buf,r.pending-i,i)),G(e),i=r.pending,r.pending!==r.pending_buf_size));)Q(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=Fs(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=mu)}else r.status=mu;if(r.status===mu)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Fs(e.adler,r.pending_buf,r.pending-i,i)),G(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Q(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=Fs(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=yu)}else r.status=yu;if(r.status===yu)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=Fs(e.adler,r.pending_buf,r.pending-i,i)),G(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Q(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=Fs(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=bu)}else r.status=bu;if(r.status===bu&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&G(e),r.pending+2<=r.pending_buf_size&&(Q(r,255&e.adler),Q(r,e.adler>>8&255),e.adler=0,r.status=_u)):r.status=_u),0!==r.pending){if(G(e),0===e.avail_out)return r.last_flush=-1,Hs}else if(0===e.avail_in&&V(t)<=V(n)&&t!==qs)return Z(e,Zs);if(r.status===wu&&0!==e.avail_in)return Z(e,Zs);if(0!==e.avail_in||0!==r.lookahead||t!==Ns&&r.status!==wu){var s=r.strategy===Gs?se(r,t):r.strategy===Xs?ae(r,t):Bs[r.level].func(r,t);if(s!==xu&&s!==Au||(r.status=wu),s===ku||s===xu)return 0===e.avail_out&&(r.last_flush=-1),Hs;if(s===Eu&&(t===Ms?Is._tr_align(r):t!==Ys&&(Is._tr_stored_block(r,0,0,!1),t===zs&&(J(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),G(e),0===e.avail_out))return r.last_flush=-1,Hs}return t!==qs?Hs:r.wrap<=0?Ks:(2===r.wrap?(Q(r,255&e.adler),Q(r,e.adler>>8&255),Q(r,e.adler>>16&255),Q(r,e.adler>>24&255),Q(r,255&e.total_in),Q(r,e.total_in>>8&255),Q(r,e.total_in>>16&255),Q(r,e.total_in>>24&255)):(ee(r,e.adler>>>16),ee(r,65535&e.adler)),G(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Hs:Ks)},deflateEnd:function(e){var t;return e&&e.state?(t=e.state.status)!==gu&&t!==vu&&t!==mu&&t!==yu&&t!==bu&&t!==_u&&t!==wu?Z(e,Ws):(e.state=null,t===_u?Z(e,$s):Hs):Ws},deflateSetDictionary:function(e,t){var n,r,i,o,a,s,u,c,f=t.length;if(!e||!e.state)return Ws;if(n=e.state,2===(o=n.wrap)||1===o&&n.status!==gu||n.lookahead)return Ws;for(1===o&&(e.adler=js(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(J(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new Xa.Buf8(n.w_size),Xa.arraySet(c,t,f-n.w_size,n.w_size,0),t=c,f=n.w_size),a=e.avail_in,s=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,re(n);n.lookahead>=lu;){r=n.strstart,i=n.lookahead-(lu-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+lu-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=lu-1,re(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=lu-1,n.match_available=0,e.next_in=s,e.input=u,e.avail_in=a,n.wrap=o,Hs},deflateInfo:"pako deflate (from Nodeca project)"},Ru=!0,Tu=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Ru=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Tu=!1}for(var Ou=new Xa.Buf8(256),Du=0;Du<256;Du++)Ou[Du]=Du>=252?6:Du>=248?5:Du>=240?4:Du>=224?3:Du>=192?2:1;Ou[254]=Ou[254]=1;var Bu={string2buf:function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Xa.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2binstring:function(e){return pe(e,e.length)},binstring2buf:function(e){for(var t=new Xa.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},buf2string:function(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=Ou[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return pe(s,r)},utf8border:function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+Ou[e[n]]>t?n:t}},Pu=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Iu=Object.prototype.toString,ju=0,Uu=-1,Fu=0,Lu=8;ge.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=Bu.string2buf(e):"[object ArrayBuffer]"===Iu.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Xa.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=Cu.deflate(i,r))&&n!==ju)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(Bu.buf2binstring(Xa.shrinkBuf(i.output,i.next_out))):this.onData(Xa.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=Cu.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ju):2!==r||(this.onEnd(ju),i.avail_out=0,!0)},ge.prototype.onData=function(e){this.chunks.push(e)},ge.prototype.onEnd=function(e){e===ju&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Xa.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Nu,Mu,zu={Deflate:ge,deflate:ve,deflateRaw:function(e,t){return t=t||{},t.raw=!0,ve(e,t)},gzip:function(e,t){return t=t||{},t.gzip=!0,ve(e,t)}},qu=function(e,t){var n,r,i,o,a,s,u,c,f,l,h,d,p,g,v,m,y,b,_,w,k,E,x,A,S;n=e.state,r=e.next_in,A=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,c=n.wsize,f=n.whave,l=n.wnext,h=n.window,d=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(d+=A[r++]<<p,p+=8,d+=A[r++]<<p,p+=8),b=g[d&m];t:for(;;){if(_=b>>>24,d>>>=_,p-=_,0===(_=b>>>16&255))S[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(_&=15)&&(p<_&&(d+=A[r++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=A[r++]<<p,p+=8,d+=A[r++]<<p,p+=8),b=v[d&y];n:for(;;){if(_=b>>>24,d>>>=_,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,_&=15,p<_&&(d+=A[r++]<<p,(p+=8)<_&&(d+=A[r++]<<p,p+=8)),(k+=d&(1<<_)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=_,p-=_,_=o-a,k>_){if((_=k-_)>f&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,x=h,0===l){if(E+=c-_,_<w){w-=_;do{S[o++]=h[E++]}while(--_);E=o-k,x=S}}else if(l<_){if(E+=c+l-_,(_-=l)<w){w-=_;do{S[o++]=h[E++]}while(--_);if(E=0,l<w){w-=_=l;do{S[o++]=h[E++]}while(--_);E=o-k,x=S}}}else if(E+=l-_,_<w){w-=_;do{S[o++]=h[E++]}while(--_);E=o-k,x=S}for(;w>2;)S[o++]=x[E++],S[o++]=x[E++],S[o++]=x[E++],w-=3;w&&(S[o++]=x[E++],w>1&&(S[o++]=x[E++]))}else{E=o-k;do{S[o++]=S[E++],S[o++]=S[E++],S[o++]=S[E++],w-=3}while(w>2);w&&(S[o++]=S[E++],w>1&&(S[o++]=S[E++]))}break}}break}}while(r<i&&o<s);r-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p},Yu=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Hu=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ku=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Wu=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],$u=function(e,t,n,r,i,o,a,s){var u,c,f,l,h,d,p,g,v,m=s.bits,y=0,b=0,_=0,w=0,k=0,E=0,x=0,A=0,S=0,C=0,R=null,T=0,O=new Xa.Buf16(16),D=new Xa.Buf16(16),B=null,P=0;for(y=0;y<=15;y++)O[y]=0;for(b=0;b<r;b++)O[t[n+b]]++;for(k=m,w=15;w>=1&&0===O[w];w--);if(k>w&&(k=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(_=1;_<w&&0===O[_];_++);for(k<_&&(k=_),A=1,y=1;y<=15;y++)if(A<<=1,(A-=O[y])<0)return-1;if(A>0&&(0===e||1!==w))return-1;for(D[1]=0,y=1;y<15;y++)D[y+1]=D[y]+O[y];for(b=0;b<r;b++)0!==t[n+b]&&(a[D[t[n+b]]++]=b);if(0===e?(R=B=a,d=19):1===e?(R=Yu,T-=257,B=Hu,P-=257,d=256):(R=Ku,B=Wu,d=-1),C=0,b=0,y=_,h=o,E=k,x=0,f=-1,S=1<<k,l=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){p=y-x,a[b]<d?(g=0,v=a[b]):a[b]>d?(g=B[P+a[b]],v=R[T+a[b]]):(g=96,v=0),u=1<<y-x,_=c=1<<E;do{i[h+(C>>x)+(c-=u)]=p<<24|g<<16|v|0}while(0!==c);for(u=1<<y-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,b++,0==--O[y]){if(y===w)break;y=t[n+a[b]]}if(y>k&&(C&l)!==f){for(0===x&&(x=k),h+=_,A=1<<(E=y-x);E+x<w&&!((A-=O[E+x])<=0);)E++,A<<=1;if(S+=1<<E,1===e&&S>852||2===e&&S>592)return 1;i[f=C&l]=k<<24|E<<16|h-o|0}}return 0!==C&&(i[h+C]=y-x<<24|64<<16|0),s.bits=k,0},Zu=0,Vu=1,Ju=2,Gu=4,Xu=5,Qu=6,ec=0,tc=1,nc=2,rc=-2,ic=-3,oc=-4,ac=-5,sc=8,uc=1,cc=2,fc=3,lc=4,hc=5,dc=6,pc=7,gc=8,vc=9,mc=10,yc=11,bc=12,_c=13,wc=14,kc=15,Ec=16,xc=17,Ac=18,Sc=19,Cc=20,Rc=21,Tc=22,Oc=23,Dc=24,Bc=25,Pc=26,Ic=27,jc=28,Uc=29,Fc=30,Lc=31,Nc=32,Mc=852,zc=592,qc=15,Yc=!0,Hc={inflateReset:_e,inflateReset2:we,inflateResetKeep:be,inflateInit:function(e){return ke(e,qc)},inflateInit2:ke,inflate:function(e,t){var n,r,i,o,a,s,u,c,f,l,h,d,p,g,v,m,y,b,_,w,k,E,x,A,S=0,C=new Xa.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return rc;(n=e.state).mode===bc&&(n.mode=_c),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,f=n.bits,l=s,h=u,E=ec;e:for(;;)switch(n.mode){case uc:if(0===n.wrap){n.mode=_c;break}for(;f<16;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(2&n.wrap&&35615===c){n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=Fs(n.check,C,2,0),c=0,f=0,n.mode=cc;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Fc;break}if((15&c)!==sc){e.msg="unknown compression method",n.mode=Fc;break}if(c>>>=4,f-=4,k=8+(15&c),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=Fc;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&c?mc:bc,c=0,f=0;break;case cc:for(;f<16;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(n.flags=c,(255&n.flags)!==sc){e.msg="unknown compression method",n.mode=Fc;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Fc;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Fs(n.check,C,2,0)),c=0,f=0,n.mode=fc;case fc:for(;f<32;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}n.head&&(n.head.time=c),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=Fs(n.check,C,4,0)),c=0,f=0,n.mode=lc;case lc:for(;f<16;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Fs(n.check,C,2,0)),c=0,f=0,n.mode=hc;case hc:if(1024&n.flags){for(;f<16;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Fs(n.check,C,2,0)),c=0,f=0}else n.head&&(n.head.extra=null);n.mode=dc;case dc:if(1024&n.flags&&((d=n.length)>s&&(d=s),d&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Xa.arraySet(n.head.extra,r,o,d,k)),512&n.flags&&(n.check=Fs(n.check,r,d,o)),s-=d,o+=d,n.length-=d),n.length))break e;n.length=0,n.mode=pc;case pc:if(2048&n.flags){if(0===s)break e;d=0;do{k=r[o+d++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&d<s);if(512&n.flags&&(n.check=Fs(n.check,r,d,o)),s-=d,o+=d,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=gc;case gc:if(4096&n.flags){if(0===s)break e;d=0;do{k=r[o+d++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&d<s);if(512&n.flags&&(n.check=Fs(n.check,r,d,o)),s-=d,o+=d,k)break e}else n.head&&(n.head.comment=null);n.mode=vc;case vc:if(512&n.flags){for(;f<16;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Fc;break}c=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=bc;break;case mc:for(;f<32;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}e.adler=n.check=me(c),c=0,f=0,n.mode=yc;case yc:if(0===n.havedict)return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=f,nc;e.adler=n.check=1,n.mode=bc;case bc:if(t===Xu||t===Qu)break e;case _c:if(n.last){c>>>=7&f,f-=7&f,n.mode=Ic;break}for(;f<3;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}switch(n.last=1&c,c>>>=1,f-=1,3&c){case 0:n.mode=wc;break;case 1:if(Ee(n),n.mode=Cc,t===Qu){c>>>=2,f-=2;break e}break;case 2:n.mode=xc;break;case 3:e.msg="invalid block type",n.mode=Fc}c>>>=2,f-=2;break;case wc:for(c>>>=7&f,f-=7&f;f<32;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Fc;break}if(n.length=65535&c,c=0,f=0,n.mode=kc,t===Qu)break e;case kc:n.mode=Ec;case Ec:if(d=n.length){if(d>s&&(d=s),d>u&&(d=u),0===d)break e;Xa.arraySet(i,r,o,d,a),s-=d,o+=d,u-=d,a+=d,n.length-=d;break}n.mode=bc;break;case xc:for(;f<14;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(n.nlen=257+(31&c),c>>>=5,f-=5,n.ndist=1+(31&c),c>>>=5,f-=5,n.ncode=4+(15&c),c>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Fc;break}n.have=0,n.mode=Ac;case Ac:for(;n.have<n.ncode;){for(;f<3;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}n.lens[R[n.have++]]=7&c,c>>>=3,f-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},E=$u(Zu,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,E){e.msg="invalid code lengths set",n.mode=Fc;break}n.have=0,n.mode=Sc;case Sc:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],v=S>>>24,m=S>>>16&255,y=65535&S,!(v<=f);){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(y<16)c>>>=v,f-=v,n.lens[n.have++]=y;else{if(16===y){for(A=v+2;f<A;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(c>>>=v,f-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=Fc;break}k=n.lens[n.have-1],d=3+(3&c),c>>>=2,f-=2}else if(17===y){for(A=v+3;f<A;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}f-=v,k=0,d=3+(7&(c>>>=v)),c>>>=3,f-=3}else{for(A=v+7;f<A;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}f-=v,k=0,d=11+(127&(c>>>=v)),c>>>=7,f-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Fc;break}for(;d--;)n.lens[n.have++]=k}}if(n.mode===Fc)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Fc;break}if(n.lenbits=9,x={bits:n.lenbits},E=$u(Vu,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,E){e.msg="invalid literal/lengths set",n.mode=Fc;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},E=$u(Ju,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,E){e.msg="invalid distances set",n.mode=Fc;break}if(n.mode=Cc,t===Qu)break e;case Cc:n.mode=Rc;case Rc:if(s>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=f,qu(e,h),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,f=n.bits,n.mode===bc&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],v=S>>>24,m=S>>>16&255,y=65535&S,!(v<=f);){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(m&&0==(240&m)){for(b=v,_=m,w=y;S=n.lencode[w+((c&(1<<b+_)-1)>>b)],v=S>>>24,m=S>>>16&255,y=65535&S,!(b+v<=f);){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}c>>>=b,f-=b,n.back+=b}if(c>>>=v,f-=v,n.back+=v,n.length=y,0===m){n.mode=Pc;break}if(32&m){n.back=-1,n.mode=bc;break}if(64&m){e.msg="invalid literal/length code",n.mode=Fc;break}n.extra=15&m,n.mode=Tc;case Tc:if(n.extra){for(A=n.extra;f<A;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Oc;case Oc:for(;S=n.distcode[c&(1<<n.distbits)-1],v=S>>>24,m=S>>>16&255,y=65535&S,!(v<=f);){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(0==(240&m)){for(b=v,_=m,w=y;S=n.distcode[w+((c&(1<<b+_)-1)>>b)],v=S>>>24,m=S>>>16&255,y=65535&S,!(b+v<=f);){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}c>>>=b,f-=b,n.back+=b}if(c>>>=v,f-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=Fc;break}n.offset=y,n.extra=15&m,n.mode=Dc;case Dc:if(n.extra){for(A=n.extra;f<A;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Fc;break}n.mode=Bc;case Bc:if(0===u)break e;if(d=h-u,n.offset>d){if((d=n.offset-d)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Fc;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),g=n.window}else g=i,p=a-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do{i[a++]=g[p++]}while(--d);0===n.length&&(n.mode=Rc);break;case Pc:if(0===u)break e;i[a++]=n.length,u--,n.mode=Rc;break;case Ic:if(n.wrap){for(;f<32;){if(0===s)break e;s--,c|=r[o++]<<f,f+=8}if(h-=u,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?Fs(n.check,i,h,a-h):js(n.check,i,h,a-h)),h=u,(n.flags?c:me(c))!==n.check){e.msg="incorrect data check",n.mode=Fc;break}c=0,f=0}n.mode=jc;case jc:if(n.wrap&&n.flags){for(;f<32;){if(0===s)break e;s--,c+=r[o++]<<f,f+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Fc;break}c=0,f=0}n.mode=Uc;case Uc:E=tc;break e;case Fc:E=ic;break e;case Lc:return oc;case Nc:default:return rc}return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=f,(n.wsize||h!==e.avail_out&&n.mode<Fc&&(n.mode<Ic||t!==Gu))&&xe(e,e.output,e.next_out,h-e.avail_out)?(n.mode=Lc,oc):(l-=e.avail_in,h-=e.avail_out,e.total_in+=l,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?Fs(n.check,i,h,e.next_out-h):js(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===bc?128:0)+(n.mode===Cc||n.mode===kc?256:0),(0===l&&0===h||t===Gu)&&E===ec&&(E=ac),E)},inflateEnd:function(e){if(!e||!e.state)return rc;var t=e.state;return t.window&&(t.window=null),e.state=null,ec},inflateGetHeader:function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?rc:(n.head=t,t.done=!1,ec):rc},inflateSetDictionary:function(e,t){var n,r,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==yc?rc:n.mode===yc&&(r=1,(r=js(r,t,i,0))!==n.check)?ic:xe(e,t,i,i)?(n.mode=Lc,oc):(n.havedict=1,ec):rc},inflateInfo:"pako inflate (from Nodeca project)"},Kc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Wc=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},$c=Object.prototype.toString;Ae.prototype.push=function(e,t){var n,r,i,o,a,s,u=this.strm,c=this.options.chunkSize,f=this.options.dictionary,l=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?Kc.Z_FINISH:Kc.Z_NO_FLUSH,"string"==typeof e?u.input=Bu.binstring2buf(e):"[object ArrayBuffer]"===$c.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new Xa.Buf8(c),u.next_out=0,u.avail_out=c),(n=Hc.inflate(u,Kc.Z_NO_FLUSH))===Kc.Z_NEED_DICT&&f&&(s="string"==typeof f?Bu.string2buf(f):"[object ArrayBuffer]"===$c.call(f)?new Uint8Array(f):f,n=Hc.inflateSetDictionary(this.strm,s)),n===Kc.Z_BUF_ERROR&&!0===l&&(n=Kc.Z_OK,l=!1),n!==Kc.Z_STREAM_END&&n!==Kc.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==Kc.Z_STREAM_END&&(0!==u.avail_in||r!==Kc.Z_FINISH&&r!==Kc.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Bu.utf8border(u.output,u.next_out),o=u.next_out-i,a=Bu.buf2string(u.output,i),u.next_out=o,u.avail_out=c-o,o&&Xa.arraySet(u.output,u.output,i,o,0),this.onData(a)):this.onData(Xa.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(l=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==Kc.Z_STREAM_END);return n===Kc.Z_STREAM_END&&(r=Kc.Z_FINISH),r===Kc.Z_FINISH?(n=Hc.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Kc.Z_OK):r!==Kc.Z_SYNC_FLUSH||(this.onEnd(Kc.Z_OK),u.avail_out=0,!0)},Ae.prototype.onData=function(e){this.chunks.push(e)},Ae.prototype.onEnd=function(e){e===Kc.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Xa.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Zc={Inflate:Ae,inflate:Se,inflateRaw:function(e,t){return t=t||{},t.raw=!0,Se(e,t)},ungzip:Se},Vc={};(0,Xa.assign)(Vc,zu,Zc,Kc);var Jc=Vc,Gc=function(e){try{return Jc.inflate(e)}catch(e){return e}},Xc=Va("edgemesh:direct-mesh"),Qc=(function(e){function t(e,n,r){aa(this,t);var i=ca(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.receivedChunks=0,i.complete=!1,i.meta={},i.meta=e,i.originId=e.name.split("|")[0],i.assetId=e.name.split("|")[1],i.onCompleted=n||function(){},i.onFailure=r||function(){},i.file=new da(i.meta),i.file.onCompleted=i.transferComplete.bind(i),i}ua(t,ya),sa(t,[{key:"chunkReceived",value:function(e){da.submitChunk(ta(e.chunk)),this.emit("chunkReceived",e.chunk),this.receivedChunks++}},{key:"transferComplete",value:function(e){var t=this;this.complete=!0,e.getFile().then(function(n){var r=n.ArrayBuffer;if(t.meta.compressed&&(r=Gc(r)),!r)return Xc("could not decompress asset");r=ta(r);var i={origin:t.originId,asset:t.assetId,buffer:r,contentType:t.meta.mimeType};t.onCompleted(i),e.clearData(),Xc("mesh transfer complete %O",e.getMetadata())})}}])}(),[]),ef=[],tf="undefined"!=typeof Uint8Array?Uint8Array:Array,nf=!1,rf={}.toString,of=Array.isArray||function(e){return"[object Array]"==rf.call(e)};Ue.TYPED_ARRAY_SUPPORT=void 0===ba.TYPED_ARRAY_SUPPORT||ba.TYPED_ARRAY_SUPPORT,Ue.poolSize=8192,Ue._augment=function(e){return e.__proto__=Ue.prototype,e},Ue.from=function(e,t,n){return Fe(null,e,t,n)},Ue.TYPED_ARRAY_SUPPORT&&(Ue.prototype.__proto__=Uint8Array.prototype,Ue.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Ue[Symbol.species]),Ue.alloc=function(e,t,n){return Ne(null,e,t,n)},Ue.allocUnsafe=function(e){return Me(null,e)},Ue.allocUnsafeSlow=function(e){return Me(null,e)},Ue.isBuffer=Ct,Ue.compare=function(e,t){if(!We(e)||!We(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Ue.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ue.concat=function(e,t){if(!of(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ue.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Ue.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!We(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Ue.byteLength=$e,Ue.prototype._isBuffer=!0,Ue.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ve(this,t,t+1);return this},Ue.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ve(this,t,t+3),Ve(this,t+1,t+2);return this},Ue.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ve(this,t,t+7),Ve(this,t+1,t+6),Ve(this,t+2,t+5),Ve(this,t+3,t+4);return this},Ue.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?ot(this,0,e):Ze.apply(this,arguments)},Ue.prototype.equals=function(e){if(!We(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ue.compare(this,e)},Ue.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Ue.prototype.compare=function(e,t,n,r,i){if(!We(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0},Ue.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ue.prototype.indexOf=function(e,t,n){return Je(this,e,t,n,!0)},Ue.prototype.lastIndexOf=function(e,t,n){return Je(this,e,t,n,!1)},Ue.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return Xe(this,e,t,n);case"utf8":case"utf-8":return Qe(this,e,t,n);case"ascii":return et(this,e,t,n);case"latin1":case"binary":return tt(this,e,t,n);case"base64":return nt(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return rt(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Ue.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var af=4096;Ue.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(Ue.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Ue.prototype;else{var i=t-e;r=new Ue(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},Ue.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||lt(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Ue.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||lt(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Ue.prototype.readUInt8=function(e,t){return t||lt(e,1,this.length),this[e]},Ue.prototype.readUInt16LE=function(e,t){return t||lt(e,2,this.length),this[e]|this[e+1]<<8},Ue.prototype.readUInt16BE=function(e,t){return t||lt(e,2,this.length),this[e]<<8|this[e+1]},Ue.prototype.readUInt32LE=function(e,t){return t||lt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ue.prototype.readUInt32BE=function(e,t){return t||lt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ue.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||lt(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},Ue.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||lt(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},Ue.prototype.readInt8=function(e,t){return t||lt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ue.prototype.readInt16LE=function(e,t){t||lt(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Ue.prototype.readInt16BE=function(e,t){t||lt(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Ue.prototype.readInt32LE=function(e,t){return t||lt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ue.prototype.readInt32BE=function(e,t){return t||lt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ue.prototype.readFloatLE=function(e,t){return t||lt(e,4,this.length),Be(this,e,!0,23,4)},Ue.prototype.readFloatBE=function(e,t){return t||lt(e,4,this.length),Be(this,e,!1,23,4)},Ue.prototype.readDoubleLE=function(e,t){return t||lt(e,8,this.length),Be(this,e,!0,52,8)},Ue.prototype.readDoubleBE=function(e,t){return t||lt(e,8,this.length),Be(this,e,!1,52,8)},Ue.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||ht(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Ue.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||ht(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Ue.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,1,255,0),Ue.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ue.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,2,65535,0),Ue.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):dt(this,e,t,!0),t+2},Ue.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,2,65535,0),Ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):dt(this,e,t,!1),t+2},Ue.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,4,4294967295,0),Ue.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):pt(this,e,t,!0),t+4},Ue.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,4,4294967295,0),Ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):pt(this,e,t,!1),t+4},Ue.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);ht(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Ue.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);ht(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Ue.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,1,127,-128),Ue.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ue.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,2,32767,-32768),Ue.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):dt(this,e,t,!0),t+2},Ue.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,2,32767,-32768),Ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):dt(this,e,t,!1),t+2},Ue.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,4,2147483647,-2147483648),Ue.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):pt(this,e,t,!0),t+4},Ue.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||ht(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ue.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):pt(this,e,t,!1),t+4},Ue.prototype.writeFloatLE=function(e,t,n){return vt(this,e,t,!0,n)},Ue.prototype.writeFloatBE=function(e,t,n){return vt(this,e,t,!1,n)},Ue.prototype.writeDoubleLE=function(e,t,n){return mt(this,e,t,!0,n)},Ue.prototype.writeDoubleBE=function(e,t,n){return mt(this,e,t,!1,n)},Ue.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Ue.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Ue.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ue.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=We(e)?e:wt(new Ue(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var sf=/[^+\/0-9A-Za-z-_]/g,uf=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null},cf=c(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),ff=[],lf=[],hf="undefined"!=typeof Uint8Array?Uint8Array:Array,df=!1,pf={}.toString,gf=Array.isArray||function(e){return"[object Array]"==pf.call(e)};Nt.TYPED_ARRAY_SUPPORT=void 0===ba.TYPED_ARRAY_SUPPORT||ba.TYPED_ARRAY_SUPPORT;var vf=Ft();Nt.poolSize=8192,Nt._augment=function(e){return e.__proto__=Nt.prototype,e},Nt.from=function(e,t,n){return Mt(null,e,t,n)},Nt.TYPED_ARRAY_SUPPORT&&(Nt.prototype.__proto__=Uint8Array.prototype,Nt.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Nt[Symbol.species]),Nt.alloc=function(e,t,n){return qt(null,e,t,n)},Nt.allocUnsafe=function(e){return Yt(null,e)},Nt.allocUnsafeSlow=function(e){return Yt(null,e)},Nt.isBuffer=Bn,Nt.compare=function(e,t){if(!Jt(e)||!Jt(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Nt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Nt.concat=function(e,t){if(!gf(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Nt.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Nt.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Jt(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Nt.byteLength=Gt,Nt.prototype._isBuffer=!0,Nt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Qt(this,t,t+1);return this},Nt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Qt(this,t,t+3),Qt(this,t+1,t+2);return this},Nt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Qt(this,t,t+7),Qt(this,t+1,t+6),Qt(this,t+2,t+5),Qt(this,t+3,t+4);return this},Nt.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?fn(this,0,e):Xt.apply(this,arguments)},Nt.prototype.equals=function(e){if(!Jt(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Nt.compare(this,e)},Nt.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Nt.prototype.compare=function(e,t,n,r,i){if(!Jt(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0},Nt.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Nt.prototype.indexOf=function(e,t,n){return en(this,e,t,n,!0)},Nt.prototype.lastIndexOf=function(e,t,n){return en(this,e,t,n,!1)},Nt.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return nn(this,e,t,n);case"utf8":case"utf-8":return rn(this,e,t,n);case"ascii":return on(this,e,t,n);case"latin1":case"binary":return an(this,e,t,n);case"base64":return sn(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return un(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Nt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var mf=4096;Nt.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(Nt.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Nt.prototype;else{var i=t-e;r=new Nt(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},Nt.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||vn(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Nt.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||vn(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Nt.prototype.readUInt8=function(e,t){return t||vn(e,1,this.length),this[e]},Nt.prototype.readUInt16LE=function(e,t){return t||vn(e,2,this.length),this[e]|this[e+1]<<8},Nt.prototype.readUInt16BE=function(e,t){return t||vn(e,2,this.length),this[e]<<8|this[e+1]},Nt.prototype.readUInt32LE=function(e,t){return t||vn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Nt.prototype.readUInt32BE=function(e,t){return t||vn(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Nt.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||vn(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},Nt.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||vn(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},Nt.prototype.readInt8=function(e,t){return t||vn(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Nt.prototype.readInt16LE=function(e,t){t||vn(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Nt.prototype.readInt16BE=function(e,t){t||vn(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Nt.prototype.readInt32LE=function(e,t){return t||vn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Nt.prototype.readInt32BE=function(e,t){return t||vn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Nt.prototype.readFloatLE=function(e,t){return t||vn(e,4,this.length),jt(this,e,!0,23,4)},Nt.prototype.readFloatBE=function(e,t){return t||vn(e,4,this.length),jt(this,e,!1,23,4)},Nt.prototype.readDoubleLE=function(e,t){return t||vn(e,8,this.length),jt(this,e,!0,52,8)},Nt.prototype.readDoubleBE=function(e,t){return t||vn(e,8,this.length),jt(this,e,!1,52,8)},Nt.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||mn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Nt.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||mn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Nt.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,1,255,0),Nt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Nt.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,2,65535,0),Nt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):yn(this,e,t,!0),t+2},Nt.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,2,65535,0),Nt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):yn(this,e,t,!1),t+2},Nt.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,4,4294967295,0),Nt.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):bn(this,e,t,!0),t+4},Nt.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,4,4294967295,0),Nt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):bn(this,e,t,!1),t+4},Nt.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);mn(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Nt.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);mn(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Nt.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,1,127,-128),Nt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Nt.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,2,32767,-32768),Nt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):yn(this,e,t,!0),t+2},Nt.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,2,32767,-32768),Nt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):yn(this,e,t,!1),t+2},Nt.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,4,2147483647,-2147483648),Nt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):bn(this,e,t,!0),t+4},Nt.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||mn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Nt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):bn(this,e,t,!1),t+4},Nt.prototype.writeFloatLE=function(e,t,n){return wn(this,e,t,!0,n)},Nt.prototype.writeFloatBE=function(e,t,n){return wn(this,e,t,!1,n)},Nt.prototype.writeDoubleLE=function(e,t,n){return kn(this,e,t,!0,n)},Nt.prototype.writeDoubleBE=function(e,t,n){return kn(this,e,t,!1,n)},Nt.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Nt.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Nt.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Nt.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=Jt(e)?e:Sn(new Nt(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var yf=/[^+\/0-9A-Za-z-_]/g,bf={Buffer:Nt,SlowBuffer:Vt,isBuffer:Bn},_f=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:vf,Buffer:Nt,SlowBuffer:Vt,isBuffer:Bn,default:bf}),wf=_f&&bf||_f,kf=c(function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return i(e,t,n)}var i=wf.Buffer;i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=wf:(n(wf,t),t.Buffer=r),n(i,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return wf.SlowBuffer(e)}}),Ef=c(function(e){var t=kf.Buffer,n=Mo.crypto||Mo.msCrypto;n&&n.getRandomValues?e.exports=function(e,r){if(e>65536)throw new Error("requested too many random bytes");var i=new Mo.Uint8Array(e);e>0&&n.getRandomValues(i);var o=t.from(i.buffer);return"function"==typeof r?v(function(){r(null,o)}):o}:e.exports=function(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}});jn.prototype=Object.create(null),Un.usingDomains=!1,Un.prototype.domain=void 0,Un.prototype._events=void 0,Un.prototype._maxListeners=void 0,Un.defaultMaxListeners=10,Un.init=function(){this.domain=null,Un.usingDomains&&(!(void 0).active||this instanceof(void 0).Domain||(this.domain=(void 0).active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new jn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Un.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Un.prototype.getMaxListeners=function(){return Fn(this)},Un.prototype.emit=function(e){var t,n,r,i,o,a,s,u="error"===e;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:Ln(n,f,this);break;case 2:Nn(n,f,this,arguments[1]);break;case 3:Mn(n,f,this,arguments[1],arguments[2]);break;case 4:zn(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];qn(n,f,this,i)}return!0},Un.prototype.addListener=function(e,t){return Yn(this,e,t,!1)},Un.prototype.on=Un.prototype.addListener,Un.prototype.prependListener=function(e,t){return Yn(this,e,t,!0)},Un.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Kn(this,e,t)),this},Un.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Kn(this,e,t)),this},Un.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new jn:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new jn,this;delete r[e]}else $n(n,i);r.removeListener&&this.emit("removeListener",e,a||t)}return this},Un.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new jn,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new jn:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new jn,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},Un.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:Vn(t):[]},Un.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Wn.call(e,t)},Un.prototype.listenerCount=Wn,Un.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var xf,Af,Sf=xf="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},Cf=/%[sdj%]/g,Rf={};Xn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Xn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},kr.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},kr.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},kr.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},kr.prototype.clear=function(){this.head=this.tail=null,this.length=0},kr.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},kr.prototype.concat=function(e){if(0===this.length)return Nt.alloc(0);if(1===this.length)return this.head.data;for(var t=Nt.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t};var Tf=Nt.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};xr.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var r=(t+=e.toString(this.encoding,0,r)).length-1,i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},xr.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},xr.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t},Dr.ReadableState=Or;var Of=function(e){dr(Af)&&(Af=za.env.NODE_DEBUG||""),e=e.toUpperCase(),Rf[e]||(new RegExp("\\b"+e+"\\b","i").test(Af)?Rf[e]=function(){var t=Jn.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:Rf[e]=function(){});return Rf[e]}("stream");Sf(Dr,Un),Dr.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=Ue.from(e,t),t=""),Br(this,n,e,t,!1)},Dr.prototype.unshift=function(e){return Br(this,this._readableState,e,"",!0)},Dr.prototype.isPaused=function(){return!1===this._readableState.flowing},Dr.prototype.setEncoding=function(e){return this._readableState.decoder=new xr(e),this._readableState.encoding=e,this};var Df=8388608;Dr.prototype.read=function(e){Of("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Of("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Gr(this):Lr(this),null;if(0===(e=jr(e,t))&&t.ended)return 0===t.length&&Gr(this),null;var r=t.needReadable;Of("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&Of("length less than watermark",r=!0),t.ended||t.reading?Of("reading or ended",r=!1):r&&(Of("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=jr(n,t)));var i;return null===(i=e>0?$r(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Gr(this)),null!==i&&this.emit("data",i),i},Dr.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Dr.prototype.pipe=function(e,t){function n(e){Of("onunpipe"),e===f&&i()}function r(){Of("onend"),e.end()}function i(){Of("cleanup"),e.removeListener("close",s),e.removeListener("finish",u),e.removeListener("drain",d),e.removeListener("error",a),e.removeListener("unpipe",n),f.removeListener("end",r),f.removeListener("end",i),f.removeListener("data",o),p=!0,!l.awaitDrain||e._writableState&&!e._writableState.needDrain||d()}function o(t){Of("ondata"),g=!1,!1!==e.write(t)||g||((1===l.pipesCount&&l.pipes===e||l.pipesCount>1&&-1!==ei(l.pipes,e))&&!p&&(Of("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,g=!0),f.pause())}function a(t){Of("onerror",t),c(),e.removeListener("error",a),0===Tr(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",u),c()}function u(){Of("onfinish"),e.removeListener("close",s),c()}function c(){Of("unpipe"),f.unpipe(e)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1,Of("pipe count=%d opts=%j",l.pipesCount,t);var h=!t||!1!==t.end?r:i;l.endEmitted?v(h):f.once("end",h),e.on("unpipe",n);var d=qr(f);e.on("drain",d);var p=!1,g=!1;return f.on("data",o),Rr(e,"error",a),e.once("close",s),e.once("finish",u),e.emit("pipe",f),l.flowing||(Of("pipe resume"),f.resume()),e},Dr.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=ei(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Dr.prototype.on=function(e,t){var n=Un.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Lr(this):v(Yr,this))}return n},Dr.prototype.addListener=Dr.prototype.on,Dr.prototype.resume=function(){var e=this._readableState;return e.flowing||(Of("resume"),e.flowing=!0,Hr(this,e)),this},Dr.prototype.pause=function(){return Of("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Of("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Dr.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(Of("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){Of("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return Qr(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){Of("wrapped _read",t),n&&(n=!1,e.resume())},r},Dr._fromList=$r,ii.WritableState=ri,Sf(ii,Un),ri.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},ii.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},ii.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),Nt.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=ti),r.ended?oi(this,n):ai(this,r,e,n)&&(r.pendingcb++,i=ui(this,r,e,t,n)),i},ii.prototype.cork=function(){this._writableState.corked++},ii.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||gi(this,e))},ii.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},ii.prototype._write=function(e,t,n){n(new Error("not implemented"))},ii.prototype._writev=null,ii.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||bi(this,r,n)},Sf(wi,Dr);for(var Bf=Object.keys(ii.prototype),Pf=0;Pf<Bf.length;Pf++){var If=Bf[Pf];wi.prototype[If]||(wi.prototype[If]=ii.prototype[If])}Sf(Si,wi),Si.prototype.push=function(e,t){return this._transformState.needTransform=!1,wi.prototype.push.call(this,e,t)},Si.prototype._transform=function(e,t,n){throw new Error("Not implemented")},Si.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Si.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Sf(Ri,Si),Ri.prototype._transform=function(e,t,n){n(null,e)},Sf(Ti,Un),Ti.Readable=Dr,Ti.Writable=ii,Ti.Duplex=wi,Ti.Transform=Si,Ti.PassThrough=Ri,Ti.Stream=Ti,Ti.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function i(){c||(c=!0,e.end())}function o(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(s(),0===Un.listenerCount(this,"error"))throw e}function s(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",i),u.removeListener("close",o),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",s),u.removeListener("close",s),e.removeListener("close",s)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(u.on("end",i),u.on("close",o));var c=!1;return u.on("error",a),e.on("error",a),u.on("end",s),u.on("close",s),e.on("close",s),e.emit("pipe",u),e};var jf=Object.freeze({default:Ti,Readable:Dr,Writable:ii,Duplex:wi,Transform:Si,PassThrough:Ri,Stream:Ti}),Uf=jf&&Ti||jf,Ff=Oi,Lf=Va("simple-peer");cf(Oi,Uf.Duplex),Oi.WEBRTC_SUPPORT=!!uf(),Oi.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},Oi.constraints={},Oi.channelConfig={},Object.defineProperty(Oi.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),Oi.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}},Oi.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._destroy(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},Oi.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),Di,function(e){t._destroy(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}},Oi.prototype.send=function(e){var t=this;t._isWrtc&&Ct(e)&&(e=new Uint8Array(e)),t._channel.send(e)},Oi.prototype.destroy=function(e){this._destroy(null,e)},Oi.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._previousStreams=null,n._earlyMessage=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._interval=null,n._reconnectTimeout=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"addTrack"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},Oi.prototype._setupData=function(e){var t=this;if(!e.channel)return t._destroy(new Error("Data channel event is missing `channel` property"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._channelReady?t._onChannelMessage(e):(t._earlyMessage=e,t._onChannelOpen())},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._channelReady||t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t._destroy(e)}},Oi.prototype._read=function(){},Oi.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(e){return r._destroy(e)}r._channel.bufferedAmount>65536?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},Oi.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},1e3)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},Oi.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.offerConstraints)},Oi.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,function(){e.destroyed||(e.trickle||e._iceComplete?n():e.once("_iceComplete",n))},function(t){e._destroy(t)}))},function(t){e._destroy(t)},e.answerConstraints)},Oi.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===t&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===t&&e._destroy(new Error("Ice connection failed.")),"closed"===t&&e._destroy()}},Oi.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(null,n)},function(t){e(t)}):t._pc.getStats.length>0?t._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(null,n)},function(t){e(t)}):e(null,[])},Oi.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,e.getStats(function(t,n){function r(t){var n=o[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1]));var r=i[t.remoteCandidateId];r&&r.ip?(e.remoteAddress=r.ip,e.remotePort=Number(r.port)):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=Number(r.portNumber)):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=Number(r[1])),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}if(!e.destroyed){t&&(n=[]),e._connecting=!1,e.connected=!0;var i={},o={},a={};if(n.forEach(function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(a[e.id]=e)}),n.forEach(function(e){"transport"===e.type&&r(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&r(e)}),e._chunk){try{e.send(e._chunk)}catch(t){return e._destroy(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var s=e._cb;e._cb=null,s(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect"),e._earlyMessage&&(e._onChannelMessage(e._earlyMessage),e._earlyMessage=null)}}))},Oi.prototype._onInterval=function(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()},Oi.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},Oi.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},Oi.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var n=e.data;n instanceof ArrayBuffer&&(n=Ue.from(n)),t.push(n)}},Oi.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},Oi.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},Oi.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},Oi.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},Oi.prototype._onTrack=function(e){var t=this;if(!t.destroyed){t._debug("on track");var n=e.streams[0].id;-1===t._previousStreams.indexOf(n)&&(t._previousStreams.push(n),t.emit("stream",e.streams[0]))}},Oi.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],Lf.apply(null,t)},Oi.prototype._transformConstraints=function(e){var t=this;if(0===Object.keys(e).length)return e;if((e.mandatory||e.optional)&&!t._isChromium){var n=Object.assign({},e.optional,e.mandatory);return void 0!==n.OfferToReceiveVideo&&(n.offerToReceiveVideo=n.OfferToReceiveVideo,delete n.OfferToReceiveVideo),void 0!==n.OfferToReceiveAudio&&(n.offerToReceiveAudio=n.OfferToReceiveAudio,delete n.OfferToReceiveAudio),n}return e.mandatory||e.optional||!t._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e})};var Nf=1e3,Mf=60*Nf,zf=60*Mf,qf=24*zf,Yf=365.25*qf,Hf=function(e,t){return t=t||{},"string"==typeof e?Bi(e):t.long?Ii(e):Pi(e)},Kf=c(function(e,t){function n(){return t.colors[i++%t.colors.length]}(t=e.exports=function(e){function i(){}function o(){var e=o,i=+new Date,a=i-(r||i);e.diff=a,e.prev=r,e.curr=i,r=i,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var i=t.formatters[r];if("function"==typeof i){var o=s[u];n=i.call(e,o),s.splice(u,1),u--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s)),(o.log||t.log||console.log.bind(console)).apply(e,s)}i.enabled=!1,o.enabled=!0;var a=t.enabled(e)?o:i;return a.namespace=e,a}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Hf,t.names=[],t.skips=[],t.formatters={};var r,i=0}),Wf=c(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=Kf).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color,i=0,o=0;return(e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(n())}),$f=c(function(e,t){(function(){function n(e,t){function i(e){if(i[e]!==v)return i[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=i("json-stringify")&&i("json-parse");else{var r,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,f="function"==typeof u&&b;if(f){(r=function(){return 1}).toJSON=r;try{f="0"===u(0)&&"0"===u(new a)&&'""'==u(new s)&&u(y)===v&&u(v)===v&&u()===v&&"1"===u(r)&&"[1]"==u([r])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,y,null])&&u({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===u(null,r)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(e){f=!1}}n=f}if("json-parse"==e){var l=t.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){var h=5==(r=l(o)).a.length&&1===r.a[0];if(h){try{h=!l('"\t"')}catch(e){}if(h)try{h=1!==l("01")}catch(e){}if(h)try{h=1!==l("1.")}catch(e){}}}}catch(e){h=!1}n=h}}return i[e]=!!n}e||(e=o.Object()),t||(t=o.Object());var a=e.Number||o.Number,s=e.String||o.String,u=e.Object||o.Object,c=e.Date||o.Date,f=e.SyntaxError||o.SyntaxError,l=e.TypeError||o.TypeError,h=e.Math||o.Math,d=e.JSON||o.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p,g,v,m=u.prototype,y=m.toString,b=new c(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!i("json")){var _=i("bug-string-char-index");if(!b)var w=h.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(e,t){return k[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((p=m.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),g=function(e,t){var n,i,o,a=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(o in i)p.call(i,o)&&a++;return n=i=null,a?g=2==a?function(e,t){var n,r={},i="[object Function]"==y.call(e);for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i="[object Function]"==y.call(e);for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var n,o,a="[object Function]"==y.call(e),s=!a&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)a&&"prototype"==n||!s.call(e,n)||t(n);for(o=i.length;n=i[--o];s.call(e,n)&&t(n));}),g(e,t)},!i("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A=function(e,t){return("000000"+(t||0)).slice(-e)},S=function(e){for(var t='"',n=0,r=e.length,i=!_||r>10,o=i&&(_?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=x[a];break;default:if(a<32){t+="\\u00"+A(2,a.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},C=function(e,t,n,r,i,o,a){var s,u,c,f,h,d,m,b,_,k,x,R,T,O,D,B;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if("[object Date]"!=(u=y.call(s))||p.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||p.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(E){for(h=w(s/864e5),c=w(h/365.2425)+1970-1;E(c+1,0)<=h;c++);for(f=w((h-E(c,0))/30.42);E(c,f+1)<=h;f++);h=1+h-E(c,f),m=w((d=(s%864e5+864e5)%864e5)/36e5)%24,b=w(d/6e4)%60,_=w(d/1e3)%60,k=d%1e3}else c=s.getUTCFullYear(),f=s.getUTCMonth(),h=s.getUTCDate(),m=s.getUTCHours(),b=s.getUTCMinutes(),_=s.getUTCSeconds(),k=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+A(6,c<0?-c:c):A(4,c))+"-"+A(2,f+1)+"-"+A(2,h)+"T"+A(2,m)+":"+A(2,b)+":"+A(2,_)+"."+A(3,k)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if("[object Boolean]"==(u=y.call(s)))return""+s;if("[object Number]"==u)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==u)return S(""+s);if("object"==typeof s){for(O=a.length;O--;)if(a[O]===s)throw l();if(a.push(s),x=[],D=o,o+=i,"[object Array]"==u){for(T=0,O=s.length;T<O;T++)R=C(T,s,n,r,i,o,a),x.push(R===v?"null":R);B=x.length?i?"[\n"+o+x.join(",\n"+o)+"\n"+D+"]":"["+x.join(",")+"]":"[]"}else g(r||s,function(e){var t=C(e,s,n,r,i,o,a);t!==v&&x.push(S(e)+":"+(i?" ":"")+t)}),B=x.length?i?"{\n"+o+x.join(",\n"+o)+"\n"+D+"}":"{"+x.join(",")+"}":"{}";return a.pop(),B}};t.stringify=function(e,t,n){var i,o,a,s;if(r[typeof t]&&t)if("[object Function]"==(s=y.call(t)))o=t;else if("[object Array]"==s){a={};for(var u,c=0,f=t.length;c<f;u=t[c++],("[object String]"==(s=y.call(u))||"[object Number]"==s)&&(a[u]=1));}if(n)if("[object Number]"==(s=y.call(n))){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else"[object String]"==s&&(i=n.length<=10?n:n.slice(0,10));return C("",(u={},u[""]=e,u),o,a,i,"",[])}}if(!i("json-parse")){var R,T,O=s.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},B=function(){throw R=T=null,f()},P=function(){for(var e,t,n,r,i,o=T,a=o.length;R<a;)switch(i=o.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?o.charAt(R):o[R],R++,e;case 34:for(e="@",R++;R<a;)if((i=o.charCodeAt(R))<32)B();else if(92==i)switch(i=o.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[i],R++;break;case 117:for(t=++R,n=R+4;R<n;R++)(i=o.charCodeAt(R))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||B();e+=O("0x"+o.slice(t,R));break;default:B()}else{if(34==i)break;for(i=o.charCodeAt(R),t=R;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++R);e+=o.slice(t,R)}if(34==o.charCodeAt(R))return R++,e;B();default:if(t=R,45==i&&(r=!0,i=o.charCodeAt(++R)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(R+1))>=48&&i<=57&&B(),r=!1;R<a&&(i=o.charCodeAt(R))>=48&&i<=57;R++);if(46==o.charCodeAt(R)){for(n=++R;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==R&&B(),R=n}if(101==(i=o.charCodeAt(R))||69==i){for(43!=(i=o.charCodeAt(++R))&&45!=i||R++,n=R;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==R&&B(),R=n}return+o.slice(t,R)}if(r&&B(),"true"==o.slice(R,R+4))return R+=4,!0;if("false"==o.slice(R,R+5))return R+=5,!1;if("null"==o.slice(R,R+4))return R+=4,null;B()}return"$"},I=function(e){var t,n;if("$"==e&&B(),"string"==typeof e){if("@"==(_?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=P());n||(n=!0))n&&(","==e?"]"==(e=P())&&B():B()),","==e&&B(),t.push(I(e));return t}if("{"==e){for(t={};"}"!=(e=P());n||(n=!0))n&&(","==e?"}"==(e=P())&&B():B()),","!=e&&"string"==typeof e&&"@"==(_?e.charAt(0):e[0])&&":"==P()||B(),t[e.slice(1)]=I(P());return t}B()}return e},j=function(e,t,n){var r=U(e,t,n);r===v?delete e[t]:e[t]=r},U=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if("[object Array]"==y.call(i))for(r=i.length;r--;)j(i,r,n);else g(i,function(e){j(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return R=0,T=""+e,n=I(P()),"$"!=P()&&B(),R=T=null,t&&"[object Function]"==y.call(t)?U((r={},r[""]=n,r),"",t):n}}}return t.runInContext=n,t}var r={function:!0,object:!0},i=r.object&&t&&!t.nodeType&&t,o=r[typeof window]&&window||this,a=i&&r.object&&e&&!e.nodeType&&"object"==typeof Mo&&Mo;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(o=a),i)n(o,i);else{var s=o.JSON,u=o.JSON3,c=!1,f=n(o,o.JSON3={noConflict:function(){return c||(c=!0,o.JSON=s,o.JSON3=u,s=u=null),f}});o.JSON={parse:f.parse,stringify:f.stringify}}}).call(Mo)}),Zf=function(e){return Mo.Buffer&&Mo.Buffer.isBuffer(e)||Mo.ArrayBuffer&&e instanceof ArrayBuffer||e instanceof Uint8Array},Vf={deconstructPacket:function(e){function t(e){if(!e)return e;if(Zf(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(Array.isArray(e)){for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=t(e[o]);return i}if("object"==typeof e&&!(e instanceof Date)){i={};for(var a in e)i[a]=t(e[a]);return i}return e}var n=[],r=e.data,i=e;return i.data=t(r),i.attachments=n.length,{packet:i,buffers:n}},reconstructPacket:function(e,t){function n(e){if(e&&e._placeholder)return t[e.num];if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=n(e[r]);return e}if(e&&"object"==typeof e){for(var i in e)e[i]=n(e[i]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},removeBlobs:function(e,t){function n(e,o,a){if(!e)return e;if(Mo.Blob&&e instanceof Blob||Mo.File&&e instanceof File){r++;var s=new FileReader;s.onload=function(){a?a[o]=this.result:i=this.result,--r||t(i)},s.readAsArrayBuffer(e)}else if(Array.isArray(e))for(var u=0;u<e.length;u++)n(e[u],u,e);else if(e&&"object"==typeof e&&!Zf(e))for(var c in e)n(e[c],c,e)}var r=0,i=e;n(i),r||t(i)}},Jf=c(function(e,t){function n(){}function r(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=$f.stringify(e.data)),c("encoded %j as %s",e,n),n}function i(e,t){Vf.removeBlobs(e,function(e){var n=Vf.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)})}function o(){this.reconstructor=null}function a(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return u();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(n.attachments="";"-"!=e.charAt(++r);)n.attachments+=e.charAt(r);n.attachments=Number(n.attachments)}if("/"==e.charAt(r+1))for(n.nsp="";++r&&","!=(o=e.charAt(r))&&(n.nsp+=o,r+1!=e.length););else n.nsp="/";var i=e.charAt(r+1);if(""!=i&&Number(i)==i){for(n.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(n.id+=e.charAt(r),r+1==e.length)break}n.id=Number(n.id)}if(e.charAt(++r))try{n.data=$f.parse(e.substr(r))}catch(e){return u()}return c("decoded %s as %j",e,n),n}function s(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:t.ERROR,data:"parser error"}}var c=Wf("socket.io-parser");t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=o,n.prototype.encode=function(e,n){c("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type?i(e,n):n([r(e)])},ya(o.prototype),o.prototype.add=function(e){var n;if("string"==typeof e)n=a(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new s(n),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!Zf(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},s.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){this.reconPack.data.data=this.buffers.reduce(function(e,t,n,r){return this._appendBuffer(e,t)}.bind(this)),Vf.reconstructPacket(this.reconPack,[this.reconPack.data.data]);var t=this.reconPack;return this.finishedReconstruction(),t}return null},s.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},s.prototype._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}}),Gf=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Xf=function(e){function t(e){if(!e)return!1;if(Mo.Buffer&&Mo.Buffer.isBuffer&&Mo.Buffer.isBuffer(e)||Mo.ArrayBuffer&&e instanceof ArrayBuffer||Mo.Blob&&e instanceof Blob||Mo.File&&e instanceof File)return!0;if(Gf(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0}return!1}return t(e)},Qf=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n},el=Va("edgemesh:peer"),tl=ya.prototype.emit,nl=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};aa(this,t);var i=ca(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.connected=!1,i.peerOptions={config:Go.signaling,channelName:"edgemesh"},el("instantiating Peer instance"),!e)throw new Error("fromPeerId is required");if(!n)throw new Error("toPeerId is required");if(i.fromPeerId=e,i.toPeerId=n,i.opts=r,Xo){var o=require("string_decoder").StringDecoder;if(i.textDecoder=new o("utf8"),i.textDecoder.decode=function(e){return this.end(Ue.from(e))},!r.wrtc)throw new Error("You are running peer on node.js... Pass `wrtc` option.")}else i.textDecoder=new TextDecoder("utf-8");i.decoder=new Jf.Decoder(i),i.encoder=new Jf.Encoder,i.decoder.on("decoded",i._ondecoded.bind(i));var a=Object.assign({},i.peerOptions,i.opts);return i.peer=new Ff(a),i.peer.setMaxListeners(0),i._setupPeerEvents(),i}return ua(t,ya),sa(t,[{key:"signal",value:function(e){if(!e)return el("no signal data"),Raven.error(new Error("no signal data"),{level:"warn",extra:this.peerId});this.peer.destroyed?(Raven.error(new Error("tried to signal a destroyed peer"),{level:"warn",extra:e}),el("tried to signal a destroyed peer %s",this.toPeerId)):this.peer.signal(e)}},{key:"disconnect",value:function(){this.peer.destroy()}},{key:"send",value:function(){var e=this,t=Jf.EVENT;Xf(arguments)&&(t=Jf.BINARY_EVENT);var n={type:t,data:Qf(arguments)};this.encoder.encode(n,function(t){if(t[1]instanceof ArrayBuffer)e._sendArray(t);else if(t)for(var n=0;n<t.length;n++){var r=ea(t[n]),i=new ArrayBuffer(8);new DataView(i).setInt32(0,r.byteLength);var o=na(i,r);e._send(o)}else el("encoding error"),e.emit("error",new Error("error encoding message"))})}},{key:"_setupPeerEvents",value:function(){var e=this;this.peer.on("connect",function(){e.connected=!0,e.emit("connect",e.peer),el(e.opts.initiator?"initiating peer connected":"receiving peer connected")}),this.peer.on("close",function(){e.connected=!1,el("peer closed %s",e.toPeerId),e.emit("close",e.toPeerId)}),this.peer.on("error",function(t){el("peer error %O",t),e.emit("error",t)}),this.peer.on("signal",function(t){var n="offer"===t.type?"offer":"signal";e.emit(n,{toPeerId:e.toPeerId,fromPeerId:e.fromPeerId,data:t})}),this.peer.on("data",function(t){var n=ta(t),r=new DataView(n).getInt32(0),i=e.textDecoder.decode(new Uint8Array(n.slice(8,r+8))),o=new Uint8Array(n.slice(8+r,n.byteLength));e.decoder.add(i),0!==o.length&&e.decoder.add(o)})}},{key:"_sendArray",value:function(e){var t=ea(e[0]),n=e[1],r=new ArrayBuffer(8);new DataView(r).setInt32(0,t.byteLength);var i=na(r,t);i=na(i,n),this._send(i)}},{key:"_send",value:function(e){!this.peer.destroyed&&this.connected&&this.peer.send(e)}},{key:"_ondecoded",value:function(e){var t=e.data||[];tl.apply(this,t)}}]),t}(),rl=Va("edgemesh:peer:manager"),il=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};aa(this,t);var i=ca(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.peers=new No,i.id=e,i.events=n,i.opts=r,rl("peer manager ready"),Raven.event({message:"peer manager ready",category:"lifecycle"}),i}return ua(t,ya),sa(t,[{key:"connect",value:function(e){var t=this;return rl("initiating connection to %s",e),new Promise(function(n){var r=t.peers.getRecord(e);if(r)r.connected?n(r.peer):t._peerConnectEvents(e,r.peer,n);else{var i=Object.assign({},{initiator:!0,maxPeers:Go.client.maxConnectedPeers},t.opts),o=new nl(t.id,e,i);t._peerConnectEvents(e,o,n),t._peerEvents(e,o),t.events(o),t.peers.addRecord({id:e,connected:!1,peer:o})}})}},{key:"getConnectedPeers",value:function(){return this.peers.getIdentifiers()}},{key:"_peerConnectEvents",value:function(e,t,n){var r=this;t.once("connect",function(){r.peers.addRecord({id:e,connected:!0,peer:t}),n(t),r.emit("peer-connected",e)})}},{key:"_peerEvents",value:function(e,t){var n=this;t.on("signal",this._sendSignal.bind(this)),t.on("offer",this._sendOffer.bind(this)),t.on("error",function(e){rl("peer %s threw an error %O",e),n.emit("peer-error",e),Raven.error(e)}),t.on("close",function(e){rl("peer %s was closed",e),n.emit("peer-disconnected",e),n.peers.removeRecord(e)})}},{key:"_sendSignal",value:function(e){rl("sending signal %O",e),this.emit("signal",e)}},{key:"receiveSignal",value:function(e){var t=e.fromPeerId,n=e.data;rl("signal received %O",n);var r=this.peers.getRecord(t);r?r.connected?rl("trying to signal connected peer?"):r.peer.signal(n):rl("trying to signal an unknown peer")}},{key:"_sendOffer",value:function(e){rl("sending offer %O",e),this.emit("offer",e)}},{key:"receiveOffer",value:function(e){var t=this,n=e.fromPeerId,r=e.data;rl("offer received %O",r);var i=Object.assign({},{initiator:!1,maxPeers:Go.client.maxConnectedPeers},this.opts),o=new nl(this.id,n,i);o.once("connect",function(){t.peers.addRecord({id:n,connected:!0,peer:o})}),o.once("connected",function(){t.peers.addRecord({id:n,connected:!0,peer:o}),t.emit("peer-connected",n)}),this._peerEvents(n,o),this.events(o),this.peers.addRecord({id:n,connected:!1,peer:o}),o.signal(r)}},{key:"disconnect",value:function(e){var t=this.peers.getRecord(e);t&&t.peer.disconnect()}},{key:"destroy",value:function(){var e=this;this.peers.forEachRecord(function(t){t.peer.disconnect(),e.peers.removeRecord(t.id)})}}]),t}(),ol=Va("edgemesh:peer:direct"),al=ya.prototype.emit,sl=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aa(this,t);var n=ca(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(n.connected=!1,n.peerOptions={config:Go.signaling,channelName:"edgemesh"},ol("instantiating DirectPeer instance"),!e.scope)throw new Error("postmessage scope required");return n.scope=e.scope,n.opts=e,n.decoder=new Jf.Decoder(n),n.encoder=new Jf.Encoder,n.textDecoder=new TextDecoder("utf-8"),n.decoder.on("decoded",n._ondecoded.bind(n)),n._setupPostmessage(),n.peer=new Ff(Object.assign({initiator:e.initiator},n.peerOptions)),n.peer.setMaxListeners(0),n._setupPeerEvents(),n}return ua(t,ya),sa(t,[{key:"signal",value:function(e){this.peer.destroyed||this.peer.signal(e)}},{key:"send",value:function(){var e=this,t=Jf.EVENT;Xf(arguments)&&(t=Jf.BINARY_EVENT);var n={type:t,data:Qf(arguments)};this.encoder.encode(n,function(t){if(t[1]instanceof ArrayBuffer)e._sendArray(t);else if(t)for(var n=0;n<t.length;n++){var r=ea(t[n]),i=new ArrayBuffer(8);new DataView(i).setInt32(0,r.byteLength);var o=na(i,r);e._send(o)}else ol("encoding error"),e.emit("error",new Error("error encoding message"))})}},{key:"disconnect",value:function(){this.peer.destroy(),this.connected=!1}},{key:"_sendArray",value:function(e){var t=ea(e[0]),n=e[1],r=new ArrayBuffer(8);new DataView(r).setInt32(0,t.byteLength);var i=na(r,t);i=na(i,n),this._send(i)}},{key:"_send",value:function(e){this.peer.destroyed||this.peer.send(e)}},{key:"_setupPostmessage",value:function(){var e=this;window.addEventListener("message",function(t){if(!e.opts.initiator||t.origin===e.scope){var n=t.data;switch(n.channel){case"DIRECT_SIGNAL":return ol(e.opts.initiator?"hub recieved signal":"client recieved signal"),e.signal(n.data)}}})}},{key:"_setupPeerEvents",value:function(){var e=this;this.peer.on("connect",function(){e.connected=!0,e.emit("connect"),e.opts.initiator?(setTimeout(function(){ol("sending connected"),e.send("connected")},1),ol("hub direct peer connected")):ol("client direct peer connected")}),this.peer.on("error",function(t){ol("peer error %O",t),e.emit("error",t)}),this.peer.on("signal",function(t){e.opts.initiator?(ol("sending signal to client %O",t),parent.postMessage({channel:"DIRECT_SIGNAL",data:t},e.scope)):(ol("sending signal to hub %O",t),document.getElementById("edgemesh-hub").contentWindow.postMessage({channel:"DIRECT_SIGNAL",data:t},e.scope))}),this.peer.on("data",function(t){var n=ta(t),r=new DataView(n).getInt32(0),i=e.textDecoder.decode(new Uint8Array(n.slice(8,r+8))),o=new Uint8Array(n.slice(8+r,n.byteLength));e.decoder.add(i),0!==o.length&&e.decoder.add(o)})}},{key:"_ondecoded",value:function(e){var t=e.data||[];al.apply(this,t)}}]),t}(),ul={isObject:function(e){return"object"==typeof e&&null!==e},isError:function(e){switch({}.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},wrappedCallback:function(e){return function(t,n){var r=e(t)||t;return n?n(r)||r:r}}},cl={collectWindowErrors:!0,debug:!1},fl="undefined"!=typeof window?window:void 0!==Mo?Mo:"undefined"!=typeof self?self:{},ll=[].slice,hl="?",dl=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;cl.report=function(){function e(e,t){var n=null;if(!t||cl.collectWindowErrors){for(var r in u)if(u.hasOwnProperty(r))try{u[r].apply(null,[e].concat(ll.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function t(t,n,r,o,s){if(l)cl.computeStackTrace.augmentStackTraceWithInitialElement(l,n,r,t),i();else if(s&&ul.isError(s))e(cl.computeStackTrace(s),!0);else{var u,c={url:n,line:r,column:o},f=void 0,h=t;"[object String]"==={}.toString.call(t)&&(u=t.match(dl))&&(f=u[1],h=u[2]),c.func=hl,e({name:f,message:h,url:Ui(),stack:[c]},!0)}return!!a&&a.apply(this,arguments)}function n(){s||(a=fl.onerror,fl.onerror=t,s=!0)}function r(){s&&(fl.onerror=a,s=!1,a=void 0)}function i(){var t=l,n=c;c=null,l=null,f=null,e.apply(null,[t,!1].concat(n))}function o(e,t){var n=ll.call(arguments,1);if(l){if(f===e)return;i()}var r=cl.computeStackTrace(e);if(l=r,f=e,c=n,setTimeout(function(){f===e&&i()},r.incomplete?2e3:0),!1!==t)throw e}var a,s,u=[],c=null,f=null,l=null;return o.subscribe=function(e){n(),u.push(e)},o.unsubscribe=function(e){for(var t=u.length-1;t>=0;--t)u[t]===e&&u.splice(t,1)},o.uninstall=function(){r(),u=[]},o}(),cl.computeStackTrace=function(){function e(e){if(void 0!==e.stack&&e.stack){for(var t,n,r,i=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=e.stack.split("\n"),f=[],l=(/^(.*) is undefined$/.exec(e.message),0),h=c.length;l<h;++l){if(n=i.exec(c[l])){var d=n[2]&&0===n[2].indexOf("native");(p=n[2]&&0===n[2].indexOf("eval"))&&(t=u.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:d?null:n[2],func:n[1]||hl,args:d?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=a.exec(c[l]))r={url:n[2],func:n[1]||hl,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=o.exec(c[l])))continue;var p=n[3]&&n[3].indexOf(" > eval")>-1;p&&(t=s.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==l||n[5]||void 0===e.columnNumber||(f[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||hl,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=hl),f.push(r)}return f.length?{name:e.name,message:e.message,url:Ui(),stack:f}:null}}function t(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func=hl),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,i){for(var o,a,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},f=!1,l=n.caller;l&&!f;l=l.caller)if(l!==r&&l!==cl.report){if(a={url:null,func:hl,line:null,column:null},l.name?a.func=l.name:(o=s.exec(l.toString()))&&(a.func=o[1]),void 0===a.func)try{a.func=o.input.substring(0,o.input.indexOf("{"))}catch(e){}c[""+l]?f=!0:c[""+l]=!0,u.push(a)}i&&u.splice(0,i);var h={name:e.name,message:e.message,url:Ui(),stack:u};return t(h,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),h}function r(t,r){var i=null;r=null==r?0:+r;try{if(i=e(t))return i}catch(e){if(cl.debug)throw e}try{if(i=n(t,r+1))return i}catch(e){if(cl.debug)throw e}return{name:t.name,message:t.message,url:Ui()}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r}();var pl=cl,gl=c(function(e,t){function n(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function r(e,t){var r=[],i=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,n(r,t)).join(".")+"]"}),function(o,a){if(r.length>0){var s=n(r,this);~s?r.splice(s+1):r.push(this),~s?i.splice(s,1/0,o):i.push(o),~n(r,a)&&(a=t.call(this,o,a))}else r.push(a);return null==e?a:e.call(this,o,a)}}(e.exports=function(e,t,n,i){return JSON.stringify(e,r(t,i),n)}).getSerialize=r});(Fi.prototype=new Error).constructor=Fi;var vl=Fi,ml={wrapMethod:function(e,t,n){var r=e[t],i=e;if(t in e){var o="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),t=""+e.join(" "),a={level:o,logger:"console",extra:{arguments:e}};n&&n(t,a),r&&Function.prototype.apply.call(r,i,e)}}}},yl=ul.isError,bl=ul.isObject,_l=ml.wrapMethod,wl="source protocol user pass host port path".split(" "),kl=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,El="undefined"!=typeof window?window:void 0!==Mo?Mo:"undefined"!=typeof self?self:{},xl=El.document,Al=El.navigator;Mi.prototype={VERSION:"3.17.0",debug:!1,TraceKit:pl,config:function(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var r=n._globalOptions;t&&Ki(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:r[e]=t}),n.setDSN(e),r.ignoreErrors.push(/^Script error\.?$/),r.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),r.ignoreErrors=Ji(r.ignoreErrors),r.ignoreUrls=!!r.ignoreUrls.length&&Ji(r.ignoreUrls),r.whitelistUrls=!!r.whitelistUrls.length&&Ji(r.whitelistUrls),r.includePaths=Ji(r.includePaths),r.maxBreadcrumbs=Math.max(0,Math.min(r.maxBreadcrumbs||100,100));var i={xhr:!0,console:!0,dom:!0,location:!0},o=r.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=Wi(i,o):!1!==o&&(o=i),r.autoBreadcrumbs=o;var a={tryCatch:!0},s=r.instrument;return"[object Object]"==={}.toString.call(s)?s=Wi(a,s):!1!==s&&(s=a),r.instrument=s,pl.collectWindowErrors=!!r.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(pl.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,n=t._parseDSN(e),r=n.path.lastIndexOf("/"),i=n.path.substr(1,r);t._dsn=e,t._globalKey=n.user,t._globalSecret=n.pass&&n.pass.substr(1),t._globalProject=n.path.substr(r+1),t._globalServer=t._getGlobalServer(n),t._globalEndpoint=t._globalServer+"/"+i+"api/"+t._globalProject+"/store/",this._resetBackoff()},context:function(e,t,n){return qi(e)&&(n=t||[],t=e,e=void 0),this.wrap(e,t).apply(this,n)},wrap:function(e,t,n){function r(){var r=[],o=arguments.length,a=!e||e&&!1!==e.deep;for(n&&qi(n)&&n.apply(this,arguments);o--;)r[o]=a?i.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,r)}catch(t){throw i._ignoreNextOnError(),i.captureException(t,e),t}}var i=this;if(zi(t)&&!qi(e))return e;if(qi(e)&&(t=e,e=void 0),!qi(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(e){return t}for(var o in t)Vi(t,o)&&(r[o]=t[o]);return r.prototype=t.prototype,t.__raven_wrapper__=r,r.__raven__=!0,r.__inner__=t,r},uninstall:function(){return pl.report.uninstall(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(e,t){if(!yl(e))return this.captureMessage(e,Wi({trimHeadFrames:1,stacktrace:!0},t));this._lastCapturedException=e;try{var n=pl.computeStackTrace(e);this._handleStackInfo(n,t)}catch(t){if(e!==t)throw t}return this},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var n=Wi({message:e+""},t=t||{});if(this._globalOptions.stacktrace||t&&t.stacktrace){var r;try{throw new Error(e)}catch(e){r=e}r.name=null,t=Wi({fingerprint:e,trimHeadFrames:(t.trimHeadFrames||0)+1},t);var i=pl.computeStackTrace(r),o=this._prepareFrames(i,t);n.stacktrace={frames:o.reverse()}}return this._send(n),this}},captureBreadcrumb:function(e){var t=Wi({timestamp:Li()/1e3},e);if(qi(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(bl(n)&&!Hi(n))t=n;else if(!1===n)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(gl(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=Ni(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=Ni(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=Ni(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=El.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(xl){var t=(e=e||{}).eventId||this.lastEventId();if(!t)throw new vl("Missing eventId");var n=e.dsn||this._dsn;if(!n)throw new vl("Missing DSN");var r=encodeURIComponent,i="";i+="?eventId="+r(t),i+="&dsn="+r(n);var o=e.user||this._globalContext.user;o&&(o.name&&(i+="&name="+r(o.name)),o.email&&(i+="&email="+r(o.email)));var a=this._getGlobalServer(this._parseDSN(n)),s=xl.createElement("script");s.async=!0,s.src=a+"/api/embed/error-page/"+i,(xl.head||xl.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var n,r;if(this._hasDocument){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),xl.createEvent?(n=xl.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=xl.createEventObject()).eventType=e;for(r in t)Vi(t,r)&&(n[r]=t[r]);if(xl.createEvent)xl.dispatchEvent(n);else try{xl.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(n){if(t._keypressTimeout=null,t._lastCapturedEvent!==n){t._lastCapturedEvent=n;var r;try{r=eo(n.target)}catch(e){r="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:r})}}},_keypressEventHandler:function(){var e=this;return function(t){var n;try{n=t.target}catch(e){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var i=e._keypressTimeout;i||e._breadcrumbEventHandler("input")(t),clearTimeout(i),e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},1e3)}}},_captureUrlChange:function(e,t){var n=Xi(this._location.href),r=Xi(t),i=Xi(e);this._lastHref=t,n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_instrumentTryCatch:function(){function e(e){return function(n,r){for(var i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];var a=i[0];return qi(a)&&(i[0]=t.wrap(a)),e.apply?e.apply(this,i):e(i[0],i[1])}}var t=this,n=t._wrappedBuiltIns,r=this._globalOptions.autoBreadcrumbs;oo(El,"setTimeout",e,n),oo(El,"setInterval",e,n),El.requestAnimationFrame&&oo(El,"requestAnimationFrame",function(e){return function(n){return e(t.wrap(n))}},n);for(var i=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],o=0;o<i.length;o++)!function(e){var i=El[e]&&El[e].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(oo(i,"addEventListener",function(n){return function(i,o,a,s){try{o&&o.handleEvent&&(o.handleEvent=t.wrap(o.handleEvent))}catch(e){}var u,c,f;return r&&r.dom&&("EventTarget"===e||"Node"===e)&&(c=t._breadcrumbEventHandler("click"),f=t._keypressEventHandler(),u=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?c(e):"keypress"===t?f(e):void 0}}),n.call(this,i,t.wrap(o,void 0,u),a,s)}},n),oo(i,"removeEventListener",function(e){return function(t,n,r,i){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(e){}return e.call(this,t,n,r,i)}},n))}(i[o])},_instrumentBreadcrumbs:function(){function e(e,n){e in n&&qi(n[e])&&oo(n,e,function(e){return t.wrap(e)})}var t=this,n=this._globalOptions.autoBreadcrumbs,r=t._wrappedBuiltIns;if(n.xhr&&"XMLHttpRequest"in El){var i=XMLHttpRequest.prototype;oo(i,"open",function(e){return function(n,r){return Yi(r)&&-1===r.indexOf(t._globalKey)&&(this.__raven_xhr={method:n,url:r,status_code:null}),e.apply(this,arguments)}},r),oo(i,"send",function(n){return function(r){function i(){if(o.__raven_xhr&&(1===o.readyState||4===o.readyState)){try{o.__raven_xhr.status_code=o.status}catch(e){}t.captureBreadcrumb({type:"http",category:"xhr",data:o.__raven_xhr})}}for(var o=this,a=["onload","onerror","onprogress"],s=0;s<a.length;s++)e(a[s],o);return"onreadystatechange"in o&&qi(o.onreadystatechange)?oo(o,"onreadystatechange",function(e){return t.wrap(e,void 0,i)}):o.onreadystatechange=i,n.apply(this,arguments)}},r)}n.xhr&&"fetch"in El&&oo(El,"fetch",function(e){return function(n,r){for(var i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];var a,s=i[0],u="GET";"string"==typeof s?a=s:(a=s.url,s.method&&(u=s.method)),i[1]&&i[1].method&&(u=i[1].method);var c={method:u,url:a,status_code:null};return t.captureBreadcrumb({type:"http",category:"fetch",data:c}),e.apply(this,i).then(function(e){return c.status_code=e.status,e})}},r),n.dom&&this._hasDocument&&(xl.addEventListener?(xl.addEventListener("click",t._breadcrumbEventHandler("click"),!1),xl.addEventListener("keypress",t._keypressEventHandler(),!1)):(xl.attachEvent("onclick",t._breadcrumbEventHandler("click")),xl.attachEvent("onkeypress",t._keypressEventHandler())));var o=El.chrome,a=!(o&&o.app&&o.app.runtime)&&El.history&&history.pushState;if(n.location&&a){var s=El.onpopstate;El.onpopstate=function(){var e=t._location.href;if(t._captureUrlChange(t._lastHref,e),s)return s.apply(this,arguments)},oo(history,"pushState",function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t._captureUrlChange(t._lastHref,n+""),e.apply(this,arguments)}},r)}if(n.console&&"console"in El&&console.log){var u=function(e,n){t.captureBreadcrumb({message:e,level:n.level,category:"console"})};Ki(["debug","info","warn","error","log"],function(e,t){_l(console,t,u)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],n=e[1],r=e[2];t[n]=r}},_drainPlugins:function(){var e=this;Ki(this._plugins,function(t,n){var r=n[0],i=n[1];r.apply(e,[e].concat(i))})},_parseDSN:function(e){var t=kl.exec(e),n={},r=7;try{for(;r--;)n[wl[r]]=t[r]||""}catch(t){throw new vl("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new vl("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(e,t){var n=this,r=[];if(e.stack&&e.stack.length&&(Ki(e.stack,function(e,t){var i=n._normalizeFrame(t);i&&r.push(i)}),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<r.length;i++)r[i].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e){if(e.url){var t={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return t.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t.function)||/raven\.(min\.)?js$/.test(t.filename)),t}},_processException:function(e,t,n,r,i,o){var a;if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t))&&(t+="",i&&i.length?(n=i[0].filename||n,i.reverse(),a={frames:i}):n&&(a={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var s=Wi({exception:{values:[{type:e,value:t,stacktrace:a}]},culprit:n},o);this._send(s)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=Zi(e.message,t)),e.exception){var n=e.exception.values[0];n.value=Zi(n.value,t)}var r=e.request;return r&&(r.url&&(r.url=Zi(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=Zi(r.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,n,r,i=["to","from","url"],o=0;o<e.values.length;++o)if((n=e.values[o]).hasOwnProperty("data")&&bl(n.data)&&!$i(n.data)){r=Wi({},n.data);for(var a=0;a<i.length;++a)t=i[a],r.hasOwnProperty(t)&&(r[t]=Zi(r[t],this._globalOptions.maxUrlLength));e.values[o].data=r}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&Al.userAgent&&(e.headers={"User-Agent":navigator.userAgent}),this._hasDocument&&(xl.location&&xl.location.href&&(e.url=xl.location.href),xl.referrer&&(e.headers||(e.headers={}),e.headers.Referer=xl.referrer)),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&Li()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.culprit!==t.culprit)&&(e.stacktrace||t.stacktrace?io(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||ro(e.exception,t.exception))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(e){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=Li()}}},_send:function(e){var t=this._globalOptions,n={project:this._globalProject,logger:t.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),e.trimHeadFrames&&delete e.trimHeadFrames,(e=Wi(n,e)).tags=Wi(Wi({},this._globalContext.tags),e.tags),e.extra=Wi(Wi({},this._globalContext.extra),e.extra),e.extra["session:duration"]=Li()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),Hi(e.tags)&&delete e.tags,this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),qi(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!Hi(e)&&(qi(t.shouldSendCallback)&&!t.shouldSendCallback(e)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",e):"number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_getUuid:function(){return Qi()},_sendProcessedPayload:function(e,t){var n=this,r=this._globalOptions;if(this.isSetup())if(this._lastEventId=e.event_id||(e.event_id=this._getUuid()),e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e)){this._lastData=e,this._logDebug("debug","Raven about to send:",e);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var o=e.exception&&e.exception.values[0];this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:e.message,event_id:e.event_id,level:e.level||"error"});var a=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:a,auth:i,data:e,options:r,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:e,src:a}),t&&t()},onError:function(r){n._logDebug("error","Raven transport failed to send: ",r),r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:e,src:a}),r=r||new Error("Raven send failed (no additional details provided)"),t&&t(r)}})}else this._logDebug("warn","Raven dropped repeat event: ",e)},_makeRequest:function(e){var t=new XMLHttpRequest;if("withCredentials"in t||"undefined"!=typeof XDomainRequest){var n=e.url;"withCredentials"in t?t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)e.onSuccess&&e.onSuccess();else if(e.onError){var n=new Error("Sentry error code: "+t.status);n.request=t,e.onError(n)}}:(t=new XDomainRequest,n=n.replace(/^https?:/,""),e.onSuccess&&(t.onload=e.onSuccess),e.onError&&(t.onerror=function(){var n=new Error("Sentry error code: XDomainRequest");n.request=t,e.onError(n)})),t.open("POST",n+"?"+Gi(e.auth)),t.send(gl(e.data))}},_logDebug:function(e){this._originalConsoleMethods[e]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){zi(t)?delete this._globalContext[e]:this._globalContext[e]=Wi(this._globalContext[e]||{},t)}};var Sl=Object.prototype;"undefined"!=typeof __DEV__&&__DEV__&&(Mi.utils={isUndefined:zi,isFunction:qi,isString:Yi,isObject:bl,isEmptyObject:Hi,isError:yl,each:Ki,objectMerge:Wi,truncate:Zi,hasKey:Vi,joinRegExp:Ji,urlencode:Gi,uuid4:Qi,htmlTreeAsString:eo,htmlElementAsString:to,parseUrl:Xi,fill:oo}),Mi.prototype.setUser=Mi.prototype.setUserContext,Mi.prototype.setReleaseContext=Mi.prototype.setRelease;var Cl=Mi,Rl="undefined"!=typeof window?window:void 0!==Mo?Mo:"undefined"!=typeof self?self:{},Tl=Rl.Raven,Ol=new Cl;Ol.noConflict=function(){return Rl.Raven=Tl,Ol},Ol.afterLoad();var Dl=Ol,Bl=function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}),t.join("&")},Pl={init:function(e){var t=void 0,n=void 0;switch(e){case"client":t=Go.sentry.client.id,n=Go.sentry.client.key;break;case"hub":t=Go.sentry.hub.id,n=Go.sentry.hub.key;break;case"service-worker":t=Go.sentry["worker-service"].id,n=Go.sentry["worker-service"].key;break;case"shared-worker":t=Go.sentry["worker-shared"].id,n=Go.sentry["worker-shared"].key;break;default:return}return Dl.error=Dl.captureException.bind(Dl),Dl.message=Dl.captureMessage.bind(Dl),Dl.event=Dl.captureBreadcrumb.bind(Dl),Dl.config("https://"+n+"@"+Go.sentry.host+"/"+t,{release:Go.version,environment:Go.env,ignoreErrors:Go.sentry.ignoreErrors,sampleRate:Go.sentry.sampleRate,whitelistUrls:Go.sentry.whitelistUrls,autoBreadcrumbs:Go.sentry.autoBreadcrumbs}).install()},workerTransport:function(e){var t=e.url+"?"+Bl(e.auth);fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e.data)}).then(function(e){return e.json()}).then(e.onSuccess).catch(e.onError)}},Il=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t},jl=c(function(e){!function(t,n,r){e.exports?e.exports=r():t.bowser=r()}(Mo,0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var n,r=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=!/like android/i.test(e)&&/android/i.test(e),a=/nexus\s*[0-6]\s*/i.test(e),s=!a&&/nexus\s*[0-9]+/i.test(e),u=/CrOS/.test(e),c=/silk/i.test(e),f=/sailfish/i.test(e),l=/tizen/i.test(e),h=/(web|hpw)os/i.test(e),d=/windows phone/i.test(e),p=(/SamsungBrowser/i.test(e),!d&&/windows/i.test(e)),g=!r&&!c&&/macintosh/i.test(e),v=!i&&!f&&!l&&!h&&/linux/i.test(e),m=t(/edge\/(\d+(\.\d+)?)/i),y=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e)&&!/tablet pc/i.test(e),_=!b&&/[^-]mobi/i.test(e),w=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:o,version:y||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:o,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:o,version:y||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:o,version:y||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:o,version:y||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:o,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:o,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:o,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:o,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:o,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:o,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:d?(n={name:"Windows Phone",windowsphone:o},m?(n.msedge=o,n.version=m):(n.msie=o,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:o,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?n={name:"Chrome",chromeos:o,chromeBook:o,chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:o,version:m}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:o,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||y}:f?n={name:"Sailfish",sailfish:o,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:o,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:o,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=o)):c?n={name:"Amazon Silk",silk:o,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:o,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:o,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:o,version:y||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(n={name:"WebOS",webos:o,version:y||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=o)):/bada/i.test(e)?n={name:"Bada",bada:o,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:l?n={name:"Tizen",tizen:o,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:o,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(e)?n={name:"Chromium",chromium:o,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?n={name:"Android",version:y}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:o},y&&(n.version=y)):r?(n={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},y&&(n.version=y)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:o,version:t(/googlebot\/(\d+(\.\d+))/i)||y}:{name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=o):(n.name=n.name||"Webkit",n.webkit=o),!n.version&&y&&(n.version=y)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=o,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||n.msedge||!i&&!n.silk?n.windowsphone||n.msedge||!r?g?n.mac=o:w?n.xbox=o:p?n.windows=o:v&&(n.linux=o):(n[r]=o,n.ios=o):n.android=o;var k="";n.windows?k=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?k=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?k=(k=t(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):r?k=(k=t(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):i?k=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?k=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?k=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?k=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(k=t(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(n.osversion=k);var E=!n.windows&&k.split(".")[0];return b||s||"ipad"==r||i&&(3==E||E>=4&&!_)||n.silk?n.tablet=o:(_||"iphone"==r||"ipod"==r||i||a||n.blackberry||n.webos||n.bada)&&(n.mobile=o),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=o:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=o:n.x=o,n}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),i=n(e,function(e){var i=r-t(e);return e+=new Array(i+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(t,n,i){var o=a;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=e(i));var s=""+o.version;for(var u in t)if(t.hasOwnProperty(u)&&o[u]){if("string"!=typeof t[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(t));return r([s,t[u]])<0}return n}var o=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=i,a.compareVersions=r,a.check=function(e,t,n){return!i(e,t,n)},a._detect=e,a})}),Ul=!1;Xo&&(ba.window={navigator:{}}),Xo||(Ul=Boolean(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB));var Fl={webrtc:Ff.WEBRTC_SUPPORT,websocket:Boolean(window.WebSocket),sharedWorker:Boolean(window.SharedWorker),serviceWorker:Boolean(window.navigator.serviceWorker),localStorage:Boolean(window.localStorage),iddb:Ul,request:Boolean(window.Request),response:Boolean(window.Response),browserVersion:jl.check({firefox:"53"})},Ll={client:Fl.browserVersion&&Fl.webrtc&&Fl.websocket&&Fl.serviceWorker,hub:Fl.browserVersion&&Fl.webrtc&&Fl.websocket&&Fl.iddb&&Fl.localStorage&&Fl.sharedWorker},Nl=c(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e){return function(){return!e.apply(null,s.call(arguments))}}function t(e){return function(){for(var t=i(arguments),n=t.length,r=0;r<n;r++)if(!e.call(null,t[r]))return!1;return!0}}function n(e){return function(){for(var t=i(arguments),n=t.length,r=0;r<n;r++)if(e.call(null,t[r]))return!0;return!1}}function r(e,t){var n=t+"",r=+(n.match(/\d+/)||NaN),i=n.match(/^[<>]=?|/)[0];return c[i]?c[i](e,r):e==r||r!==r}function i(e){var t=s.call(e);return 1===t.length&&o.array(t[0])&&(t=t[0]),t}var o={};o.VERSION="0.8.0",o.not={},o.all={},o.any={};var a=Object.prototype.toString,s=Array.prototype.slice,u=Object.prototype.hasOwnProperty,c={"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t}};o.arguments=function(e){return"[object Arguments]"===a.call(e)||null!=e&&"object"==typeof e&&"callee"in e},o.array=Array.isArray||function(e){return"[object Array]"===a.call(e)},o.boolean=function(e){return!0===e||!1===e||"[object Boolean]"===a.call(e)},o.char=function(e){return o.string(e)&&1===e.length},o.date=function(e){return"[object Date]"===a.call(e)},o.domNode=function(e){return o.object(e)&&e.nodeType>0},o.error=function(e){return"[object Error]"===a.call(e)},o.function=function(e){return"[object Function]"===a.call(e)||"function"==typeof e},o.json=function(e){return"[object Object]"===a.call(e)},o.nan=function(e){return e!==e},o.null=function(e){return null===e},o.number=function(e){return o.not.nan(e)&&"[object Number]"===a.call(e)},o.object=function(e){return Object(e)===e},o.regexp=function(e){return"[object RegExp]"===a.call(e)},o.sameType=function(e,t){var n=a.call(e);return n===a.call(t)&&("[object Number]"!==n||(!o.any.nan(e,t)||o.all.nan(e,t)))},o.sameType.api=["not"],o.string=function(e){return"[object String]"===a.call(e)},o.undefined=function(e){return void 0===e},o.windowObject=function(e){return null!=e&&"object"==typeof e&&"setInterval"in e},o.empty=function(e){if(o.object(e)){var t=Object.getOwnPropertyNames(e).length;return!!(0===t||1===t&&o.array(e)||2===t&&o.arguments(e))}return""===e},o.existy=function(e){return null!=e},o.falsy=function(e){return!e},o.truthy=e(o.falsy),o.above=function(e,t){return o.all.number(e,t)&&e>t},o.above.api=["not"],o.decimal=function(e){return o.number(e)&&e%1!=0},o.equal=function(e,t){return o.all.number(e,t)?e===t&&1/e==1/t:o.all.string(e,t)||o.all.regexp(e,t)?""+e==""+t:!!o.all.boolean(e,t)&&e===t},o.equal.api=["not"],o.even=function(e){return o.number(e)&&e%2==0},o.finite=isFinite||function(e){return o.not.infinite(e)&&o.not.nan(e)},o.infinite=function(e){return e===1/0||e===-1/0},o.integer=function(e){return o.number(e)&&e%1==0},o.negative=function(e){return o.number(e)&&e<0},o.odd=function(e){return o.number(e)&&e%2==1},o.positive=function(e){return o.number(e)&&e>0},o.under=function(e,t){return o.all.number(e,t)&&e<t},o.under.api=["not"],o.within=function(e,t,n){return o.all.number(e,t,n)&&e>t&&e<n},o.within.api=["not"];var f={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/};for(var l in f)f.hasOwnProperty(l)&&function(e,t){o[e]=function(n){return t[e].test(n)}}(l,f);o.ip=function(e){return o.ipv4(e)||o.ipv6(e)},o.capitalized=function(e){if(o.not.string(e))return!1;for(var t=e.split(" "),n=0;n<t.length;n++){var r=t[n];if(r.length){var i=r.charAt(0);if(i!==i.toUpperCase())return!1}}return!0},o.endWith=function(e,t){if(o.not.string(e))return!1;t+="";var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},o.endWith.api=["not"],o.include=function(e,t){return e.indexOf(t)>-1},o.include.api=["not"],o.lowerCase=function(e){return o.string(e)&&e===e.toLowerCase()},o.palindrome=function(e){if(o.not.string(e))return!1;for(var t=(e=e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()).length-1,n=0,r=Math.floor(t/2);n<=r;n++)if(e.charAt(n)!==e.charAt(t-n))return!1;return!0},o.space=function(e){if(o.not.char(e))return!1;var t=e.charCodeAt(0);return t>8&&t<14||32===t},o.startWith=function(e,t){return o.string(e)&&0===e.indexOf(t)},o.startWith.api=["not"],o.upperCase=function(e){return o.string(e)&&e===e.toUpperCase()};var h=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=["january","february","march","april","may","june","july","august","september","october","november","december"];o.day=function(e,t){return o.date(e)&&t.toLowerCase()===h[e.getDay()]},o.day.api=["not"],o.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),r=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<r},o.future=function(e){var t=new Date;return o.date(e)&&e.getTime()>t.getTime()},o.inDateRange=function(e,t,n){if(o.not.date(e)||o.not.date(t)||o.not.date(n))return!1;var r=e.getTime();return r>t.getTime()&&r<n.getTime()},o.inDateRange.api=["not"],o.inLastMonth=function(e){return o.inDateRange(e,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},o.inLastWeek=function(e){return o.inDateRange(e,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},o.inLastYear=function(e){return o.inDateRange(e,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},o.inNextMonth=function(e){return o.inDateRange(e,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},o.inNextWeek=function(e){return o.inDateRange(e,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},o.inNextYear=function(e){return o.inDateRange(e,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},o.leapYear=function(e){return o.number(e)&&(e%4==0&&e%100!=0||e%400==0)},o.month=function(e,t){return o.date(e)&&t.toLowerCase()===d[e.getMonth()]},o.month.api=["not"],o.past=function(e){var t=new Date;return o.date(e)&&e.getTime()<t.getTime()},o.quarterOfYear=function(e,t){return o.date(e)&&o.number(t)&&t===Math.floor((e.getMonth()+3)/3)},o.quarterOfYear.api=["not"],o.today=function(e){var t=(new Date).toDateString();return o.date(e)&&e.toDateString()===t},o.tomorrow=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()+1)).toDateString();return o.date(e)&&e.toDateString()===n},o.weekend=function(e){return o.date(e)&&(6===e.getDay()||0===e.getDay())},o.weekday=e(o.weekend),o.year=function(e,t){return o.date(e)&&o.number(t)&&t===e.getFullYear()},o.year.api=["not"],o.yesterday=function(e){var t=new Date,n=new Date(t.setDate(t.getDate()-1)).toDateString();return o.date(e)&&e.toDateString()===n};var p=o.windowObject("object"==typeof Mo&&Mo)&&Mo,g=o.windowObject("object"==typeof self&&self)&&self,v=o.windowObject("object"==typeof this&&this)&&this,m=p||g||v||Function("return this")(),y=g&&g.document,b=m.is,_=g&&g.navigator,w=(_&&_.appVersion||"").toLowerCase(),k=(_&&_.userAgent||"").toLowerCase(),E=(_&&_.vendor||"").toLowerCase();return o.android=function(){return/android/.test(k)},o.android.api=["not"],o.androidPhone=function(){return/android/.test(k)&&/mobile/.test(k)},o.androidPhone.api=["not"],o.androidTablet=function(){return/android/.test(k)&&!/mobile/.test(k)},o.androidTablet.api=["not"],o.blackberry=function(){return/blackberry/.test(k)||/bb10/.test(k)},o.blackberry.api=["not"],o.chrome=function(e){var t=/google inc/.test(E)?k.match(/(?:chrome|crios)\/(\d+)/):null;return null!==t&&r(t[1],e)},o.chrome.api=["not"],o.desktop=function(){return o.not.mobile()&&o.not.tablet()},o.desktop.api=["not"],o.edge=function(e){var t=k.match(/edge\/(\d+)/);return null!==t&&r(t[1],e)},o.edge.api=["not"],o.firefox=function(e){var t=k.match(/(?:firefox|fxios)\/(\d+)/);return null!==t&&r(t[1],e)},o.firefox.api=["not"],o.ie=function(e){var t=k.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&r(t[1],e)},o.ie.api=["not"],o.ios=function(){return o.iphone()||o.ipad()||o.ipod()},o.ios.api=["not"],o.ipad=function(e){var t=k.match(/ipad.+?os (\d+)/);return null!==t&&r(t[1],e)},o.ipad.api=["not"],o.iphone=function(e){var t=k.match(/iphone(?:.+?os (\d+))?/);return null!==t&&r(t[1]||1,e)},o.iphone.api=["not"],o.ipod=function(e){var t=k.match(/ipod.+?os (\d+)/);return null!==t&&r(t[1],e)},o.ipod.api=["not"],o.linux=function(){return/linux/.test(w)},o.linux.api=["not"],o.mac=function(){return/mac/.test(w)},o.mac.api=["not"],o.mobile=function(){return o.iphone()||o.ipod()||o.androidPhone()||o.blackberry()||o.windowsPhone()},o.mobile.api=["not"],o.offline=e(o.online),o.offline.api=["not"],o.online=function(){return!_||!0===_.onLine},o.online.api=["not"],o.opera=function(e){var t=k.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==t&&r(t[1],e)},o.opera.api=["not"],o.phantom=function(e){var t=k.match(/phantomjs\/(\d+)/);return null!==t&&r(t[1],e)},o.phantom.api=["not"],o.safari=function(e){var t=k.match(/version\/(\d+).+?safari/);return null!==t&&r(t[1],e)},o.safari.api=["not"],o.tablet=function(){return o.ipad()||o.androidTablet()||o.windowsTablet()},o.tablet.api=["not"],o.touchDevice=function(){return!!y&&("ontouchstart"in g||"DocumentTouch"in g&&y instanceof DocumentTouch)},o.touchDevice.api=["not"],o.windows=function(){return/win/.test(w)},o.windows.api=["not"],o.windowsPhone=function(){return o.windows()&&/phone/.test(k)},o.windowsPhone.api=["not"],o.windowsTablet=function(){return o.windows()&&o.not.windowsPhone()&&/touch/.test(k)},o.windowsTablet.api=["not"],o.propertyCount=function(e,t){if(o.not.object(e)||o.not.number(t))return!1;var n=0;for(var r in e)if(u.call(e,r)&&++n>t)return!1;return n===t},o.propertyCount.api=["not"],o.propertyDefined=function(e,t){return o.object(e)&&o.string(t)&&t in e},o.propertyDefined.api=["not"],o.inArray=function(e,t){if(o.not.array(t))return!1;for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},o.inArray.api=["not"],o.sorted=function(e,t){if(o.not.array(e))return!1;for(var n=c[t]||c[">="],r=1;r<e.length;r++)if(!n(e[r],e[r-1]))return!1;return!0},function(){var r=o;for(var i in r)if(u.call(r,i)&&o.function(r[i]))for(var a=r[i].api||["not","all","any"],s=0;s<a.length;s++)"not"===a[s]&&(o.not[i]=e(o[i])),"all"===a[s]&&(o.all[i]=t(o[i])),"any"===a[s]&&(o.any[i]=n(o[i]))}(),o.setNamespace=function(){return m.is=b,this},o.setRegexp=function(e,t){for(var n in f)u.call(f,n)&&t===n&&(f[n]=e)},o})}),Ml=c(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e,t){return"object"!=typeof t?e:(we(t).forEach(function(n){e[n]=t[n]}),e)}function t(e,t){return Ae.call(e,t)}function n(e,t){"function"==typeof t&&(t=t(xe(e))),we(t).forEach(function(n){r(e,n,t[n])})}function r(n,r,i,o){Object.defineProperty(n,r,e(i&&t(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function i(e){return{from:function(t){return e.prototype=Object.create(t.prototype),r(e.prototype,"constructor",e),{extend:n.bind(null,e.prototype)}}}}function o(e,t){var n;return Se(e,t)||(n=xe(e))&&o(n,t)}function a(e,t,n){return Ce.call(e,t,n)}function s(e,t){return t(e)}function u(e){var t=setTimeout(e,1e3);clearTimeout(t)}function c(e){if(!e)throw new Error("Assertion Failed")}function f(e){Ee.setImmediate?setImmediate(e):setTimeout(e,0)}function l(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function h(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function d(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function p(e,n){if(t(e,n))return e[n];if(!n)return e;if("string"!=typeof n){for(var r=[],i=0,o=n.length;i<o;++i){var a=p(e,n[i]);r.push(a)}return r}var s=n.indexOf(".");if(-1!==s){var u=e[n.substr(0,s)];return void 0===u?void 0:p(u,n.substr(s+1))}}function g(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){c("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)g(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var u=e[a];u||(u=e[a]={}),g(u,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function v(e){var n={};for(var r in e)t(e,r)&&(n[r]=e[r]);return n}function m(e){if(!e||"object"!=typeof e)return e;var n;if(ke(e)){n=[];for(var r=0,i=e.length;r<i;++r)n.push(m(e[r]))}else if(e instanceof Date)(n=new Date).setTime(e.getTime());else{n=e.constructor?Object.create(e.constructor.prototype):{};for(var o in e)t(e,o)&&(n[o]=m(e[o]))}return n}function y(e,n,r,i){return r=r||{},i=i||"",we(e).forEach(function(o){if(t(n,o)){var a=e[o],s=n[o];"object"==typeof a&&"object"==typeof s&&a&&s&&a.constructor===s.constructor?y(a,s,r,i+o+"."):a!==s&&(r[i+o]=n[o])}else r[i+o]=void 0}),we(n).forEach(function(o){t(e,o)||(r[i+o]=n[o])}),r}function b(e){var t,n,r,i;if(1===arguments.length){if(ke(e))return e.slice();if(this===Oe&&"string"==typeof e)return[e];if(i=Te(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function _(e){return De.apply([],e)}function w(){}function k(e){return e}function E(e,t){return null==e||e===k?t:function(n){return t(e(n))}}function x(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function A(e,t){return e===w?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?x(r,this.onsuccess):r),i&&(this.onerror=this.onerror?x(i,this.onerror):i),void 0!==o?o:n}}function S(e,t){return e===w?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?x(n,this.onsuccess):n),r&&(this.onerror=this.onerror?x(r,this.onerror):r)}}function C(t,n){return t===w?n:function(r){var i=t.apply(this,arguments);e(r,i);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?x(o,this.onsuccess):o),a&&(this.onerror=this.onerror?x(a,this.onerror):a),void 0===i?void 0===s?void 0:s:e(i,s)}}function R(e,t){return e===w?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function T(e,t){return e===w?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function O(e,t){Be=e,Pe=t}function D(){if(Ie)try{throw D.arguments,new Error}catch(e){return e}return new Error}function B(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Pe).map(function(e){return"\n"+e}).join("")):""}function P(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+B(D(),1)),t.apply(this,arguments)}}function I(e,t){this._e=D(),this.name=e,this.message=t}function j(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function U(e,t,n,r){this._e=D(),this.failures=t,this.failedKeys=r,this.successCount=n}function F(e,t){this._e=D(),this.name="BulkError",this.failures=t,this.message=j(e,t)}function L(e){function t(e,t,o){if("object"==typeof e)return n(e);t||(t=R),o||(o=w);var a={subscribers:[],fire:o,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=t(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(t,o)}};return r[e]=i[e]=a,a}function n(e){we(e).forEach(function(n){var r=e[n];if(ke(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new Me.InvalidArgument("Invalid event config");var i=t(n,k,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];i.subscribers.forEach(function(e){f(function(){e.apply(null,t)})})})}})}var r={},i=function(t,n){if(n){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[t].subscribe.apply(null,o),e}if("string"==typeof t)return r[t]};i.addEventType=t;for(var o=1,a=arguments.length;o<a;++o)t(arguments[o]);return i}function N(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=w,this._lib=!1;var t=this._PSD=et;if(Be&&(this._stackHolder=D(),this._prev=null,this._numPrev=0,$(this,Xe)),"function"!=typeof e){if(e!==Ye)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&q(this,this._value))}this._state=null,this._value=null,++t.ref,z(this,e)}function M(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=et}function z(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&V();t&&"function"==typeof t.then?z(e,function(e,n){t instanceof N?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Y(e)),n&&J()}},q.bind(null,e))}catch(t){q(e,t)}}function q(e,t){if(Ge.push(t),null===e._state){var n=e._lib&&V();t=Qe(t),e._state=!1,e._value=t,Be&&null!==t&&"object"==typeof t&&!t._promise&&d(function(){var n=o(t,"stack");t._promise=e,r(t,"stack",{get:function(){return Ke?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),Q(e),Y(e),n&&J()}}function Y(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)H(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===nt&&(++nt,$e(function(){0==--nt&&G()},[]))}function H(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++nt,$e(K,[n,e,t])}else e._listeners.push(t)}function K(e,t,n){var r=et,i=n.psd;try{i!==r&&(et=i),Xe=t;var o,a=t._value;t._state?o=e(a):(Ge.length&&(Ge=[]),o=e(a),-1===Ge.indexOf(a)&&ee(t)),n.resolve(o)}catch(e){n.reject(e)}finally{i!==r&&(et=r),Xe=null,0==--nt&&G(),--i.ref||i.finalize()}}function W(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=B(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return Be&&((r=B(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&W(e._prev,t,n)),t}function $(e,t){var n=t?t._numPrev+1:0;n<He&&(e._prev=t,e._numPrev=n)}function Z(){V()&&J()}function V(){var e=Ze;return Ze=!1,Ve=!1,e}function J(){var e,t,n;do{for(;tt.length>0;)for(e=tt,tt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(tt.length>0);Ze=!0,Ve=!0}function G(){var e=Je;Je=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=rt.slice(0),n=t.length;n;)t[--n]()}function X(e){function t(){e(),rt.splice(rt.indexOf(t),1)}rt.push(t),++nt,$e(function(){0==--nt&&G()},[])}function Q(e){Je.some(function(t){return t._value===e._value})||Je.push(e)}function ee(e){for(var t=Je.length;t;)if(Je[--t]._value===e._value)return void Je.splice(t,1)}function te(e){return new N(Ye,!1,e)}function ne(e,t){var n=et;return function(){var r=V(),i=et;try{return i!==n&&(et=n),e.apply(this,arguments)}catch(e){t&&t(e)}finally{i!==n&&(et=i),r&&J()}}}function re(e,t,n,r){var i=et,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=ie(o,e,t,n,r);return 0===o.ref&&o.finalize(),a}function ie(e,t,n,r,i){var o=et;try{return e!==o&&(et=e),t(n,r,i)}finally{e!==o&&(et=o)}}function oe(t,n){var r;try{r=n.onuncatched(t)}catch(e){}if(!1!==r)try{var i,o={promise:n,reason:t};if(Ee.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(ot,!0,!0),e(i,o)):Ee.CustomEvent&&e(i=new CustomEvent(ot,{detail:o}),o),i&&Ee.dispatchEvent&&(dispatchEvent(i),!Ee.PromiseRejectionEvent&&Ee.onunhandledrejection))try{Ee.onunhandledrejection(i)}catch(e){}i.defaultPrevented||N.on.error.fire(t,n)}catch(e){}}function ae(e,t){var n=N.reject(e);return t?n.uncaught(t):n}function se(o,f){function x(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function R(e,t,n){var r=nt._createTransaction(tt,Ze,We);r.create(t),r._completion.catch(n);var i=r._reject.bind(r);re(function(){et.trans=r,0===e?(we(We).forEach(function(e){I(t,e,We[e].primKey,We[e].indexes)}),N.follow(function(){return nt.on.populate.fire(r)}).catch(i)):O(e,r,t).catch(i)})}function O(e,t,n){function r(){return i.length?N.resolve(i.shift()(t.idbtrans)).then(r):N.resolve()}var i=[],o=$e.filter(function(t){return t._cfg.version===e})[0];if(!o)throw new Me.Upgrade("Dexie specification of currently installed DB version is missing");We=nt._dbSchema=o._cfg.dbschema;var a=!1;return $e.filter(function(t){return t._cfg.version>e}).forEach(function(e){i.push(function(){var r=We,i=e._cfg.dbschema;Ie(r,n),Ie(i,n),We=nt._dbSchema=i;var o=B(r,i);if(o.add.forEach(function(e){I(n,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new Me.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){z(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),z(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,N.follow(function(){e._cfg.contentUpgrade(t)})}),i.push(function(t){a&&ht||M(e._cfg.dbschema,t)})}),r().then(function(){j(We,n)})}function B(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName;for(var c in s)u[c]||a.del.push(c);for(c in u){var f=s[c],l=u[c];f?f.src!==l.src&&a.change.push(l):a.add.push(l)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,o])}return n}function I(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){z(i,e)}),i}function j(e,t){we(e).forEach(function(n){t.db.objectStoreNames.contains(n)||I(t,n,e[n].primKey,e[n].indexes)})}function M(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function z(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function q(e){return nt.on.error.fire(e)}function Y(e,t,n){if(Qe||et.letThrough){var r=nt._createTransaction(e,t,We);return r._promise(e,function(e,t){re(function(){et.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!Xe){if(!Ye)return ae(new Me.DatabaseClosed,q);nt.open().catch(w)}return rt.then(function(){return Y(e,t,n)})}function H(e,t,n){this.name=e,this.schema=t,this.hook=Ve[e]?Ve[e].hook:L(null,{creating:[A,w],reading:[E,k],updating:[C,w],deleting:[S,w]}),this._collClass=n||J}function K(e,t,n){H.call(this,e,t,n||X)}function W(e,t,n){return(n?de:he)(function(n){e.push(n),t&&t()})}function $(e,t,n,r,i){return new N(function(o,a){var s=n.length,u=s-1;if(0===s)return o();if(r){var c,f=de(a),l=le(null);d(function(){for(var r=0;r<s;++r){c={onsuccess:null,onerror:null};var a=n[r];i.call(c,a[0],a[1],t);var h=e.delete(a[0]);h._hookCtx=c,h.onerror=f,h.onsuccess=r===u?le(o):l}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var h=0;h<s;++h){var p=e.delete(n[h]);p.onerror=ne(he(a)),h===u&&(p.onsuccess=ne(function(){return o()}))}}).uncaught(q)}function Z(e,t,n,r){var i=this;this.db=nt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=L(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=n,this._resolve=null,this._reject=null,this._completion=new N(function(e,t){i._resolve=e,i._reject=t}).uncaught(q),this._completion.then(function(){i.on.complete.fire()},function(e){return i.on.error.fire(e),i.parent?i.parent._reject(e):i.active&&i.idbtrans&&i.idbtrans.abort(),i.active=!1,ae(e)})}function V(e,t,n){this._ctx={table:e,index:":id"===t?null:t,collClass:e._collClass,or:n}}function J(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function G(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function X(){J.apply(this,arguments)}function Q(e,t){return e._cfg.version-t._cfg.version}function ee(e,t,n,r){t.forEach(function(t){var i=nt._tableFactory(n,r[t]);e.forEach(function(e){t in e||(e[t]=i)})})}function te(e){e.forEach(function(e){for(var t in e)e[t]instanceof H&&delete e[t]})}function oe(e,t,n,r,i,o){var a=ne(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=he(i)),e.onsuccess=t?h(function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,function(e){o=e},r,i)&&a(n.value,n,function(e){o=e}),o()}else r()},i):h(function(){var t=e.result;if(t){var n=function(){t.continue()};a(t.value,t,function(e){n=e}),n()}else r()},i)}function ue(e){var t=[];return e.split(",").forEach(function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new me(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),ke(r),/\./.test(e)))}),t}function Ee(e,t){return He.cmp(e,t)}function xe(e,t){return Ee(e,t)<0?e:t}function Ae(e,t){return Ee(e,t)>0?e:t}function Se(e,t){return He.cmp(e,t)}function Ce(e,t){return He.cmp(t,e)}function Re(e,t){return e<t?-1:e===t?0:1}function Te(e,t){return e>t?-1:e===t?0:1}function De(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Pe(){if(nt.verno=Je.version/10,nt._dbSchema=We={},0!==(Ze=a(Je.objectStoreNames,0)).length){var e=Je.transaction(be(Ze),"readonly");Ze.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new me(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);i=(r=u.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var c=new me(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}We[t]=new ye(t,o,a,{})}),ee([Ve,Z.prototype],we(We),tt,We)}}function Ie(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],o=t.objectStore(i);Le="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var u=o.indexNames[s],c=o.index(u).keyPath,f="string"==typeof c?c:"["+a(c).join("+")+"]";if(e[i]){var l=e[i].idxByName[f];l&&(l.name=u)}}}}function je(e){nt.on("blocked").fire(e),ft.filter(function(e){return e.name===nt.name&&e!==nt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var Ue,Fe,Le,Ne=se.dependencies,ze=e({addons:se.addons,autoOpen:!0,indexedDB:Ne.indexedDB,IDBKeyRange:Ne.IDBKeyRange},f),qe=ze.addons,Ye=ze.autoOpen,He=ze.indexedDB,Ke=ze.IDBKeyRange,We=this._dbSchema={},$e=[],Ze=[],Ve={},Je=null,Ge=null,Xe=!1,Qe=!1,tt="readwrite",nt=this,rt=new N(function(e){Ue=e}),it=new N(function(e,t){Fe=t}),ot=!0,lt=!!_e(He);this.version=function(e){if(Je||Xe)throw new Me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=$e.filter(function(t){return t._cfg.version===e})[0];return t||(t=new x(e),$e.push(t),$e.sort(Q),t)},e(x.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,t):t;var n={};$e.forEach(function(t){e(n,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),We=nt._dbSchema=r,te([Ve,nt,Z.prototype]),ee([Ve,nt,Z.prototype,this._cfg.tables],we(r),tt,r),Ze=we(r),this},upgrade:function(e){var t=this;return gt(function(){e(nt._createTransaction(tt,we(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){we(e).forEach(function(n){if(null!==e[n]){var r={},i=ue(e[n]),o=i.shift();if(o.multi)throw new Me.Schema("Primary key cannot be multi-valued");o.keyPath&&g(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(e){if(e.auto)throw new Me.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Me.Schema("Index must have a name and cannot be an empty string");g(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new ye(n,o,i,r)}})}}),this._allTables=Ve,this._tableFactory=function(e,t){return"readonly"===e?new H(t.name,t,J):new K(t.name,t)},this._createTransaction=function(e,t,n,r){return new Z(e,t,n,r)},this._whenReady=function(e){return new N(vt||Qe||et.letThrough?e:function(t,n){if(!Xe){if(!Ye)return void n(new Me.DatabaseClosed);nt.open().catch(w)}rt.then(function(){e(t,n)})}).uncaught(q)},this.verno=0,this.open=function(){if(Xe||Je)return rt.then(function(){return Ge?ae(Ge,q):nt});Be&&(it._stackHolder=D()),Xe=!0,Ge=null,Qe=!1;var e=Ue,t=null;return N.race([it,new N(function(e,n){if(u(function(){return e()}),$e.length>0&&(ot=!1),!He)throw new Me.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var r=ot?He.open(o):He.open(o,Math.round(10*nt.verno));if(!r)throw new Me.MissingAPI("IndexedDB API not available");r.onerror=ne(he(n)),r.onblocked=ne(je),r.onupgradeneeded=ne(function(e){if(t=r.transaction,ot&&!nt._allowEmptyDB){r.onerror=pe,t.abort(),r.result.close();var i=He.deleteDatabase(o);i.onsuccess=i.onerror=ne(function(){n(new Me.NoSuchDatabase("Database "+o+" doesnt exist"))})}else t.onerror=ne(he(n)),R((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,t,n)},n),r.onsuccess=ne(function(){if(t=null,Je=r.result,ft.push(nt),ot)Pe();else if(Je.objectStoreNames.length>0)try{Ie(We,Je.transaction(be(Je.objectStoreNames),"readonly"))}catch(e){}Je.onversionchange=ne(function(e){nt._vcFired=!0,nt.on("versionchange").fire(e)}),lt||ge(function(e){if(-1===e.indexOf(o))return e.push(o)}),e()},n)})]).then(function(){return se.vip(nt.on.ready.fire)}).then(function(){return Xe=!1,nt}).catch(function(e){try{t&&t.abort()}catch(e){}return Xe=!1,nt.close(),Ge=e,ae(Ge,q)}).finally(function(){Qe=!0,e()})},this.close=function(){var e=ft.indexOf(nt);if(e>=0&&ft.splice(e,1),Je){try{Je.close()}catch(e){}Je=null}Ye=!1,Ge=new Me.DatabaseClosed,Xe&&Fe(Ge),rt=new N(function(e){Ue=e}),it=new N(function(e,t){Fe=t})},this.delete=function(){var e=arguments.length>0;return new N(function(t,n){function r(){nt.close();var e=He.deleteDatabase(o);e.onsuccess=ne(function(){lt||ge(function(e){var t=e.indexOf(o);if(t>=0)return e.splice(t,1)}),t()}),e.onerror=ne(he(n)),e.onblocked=je}if(e)throw new Me.InvalidArgument("Arguments not allowed in db.delete()");Xe?rt.then(r):r()}).uncaught(q)},this.backendDB=function(){return Je},this.isOpen=function(){return null!==Je},this.hasFailed=function(){return null!==Ge},this.dynamicallyOpened=function(){return ot},this.name=o,r(this,"tables",{get:function(){return we(Ve).map(function(e){return Ve[e]})}}),this.on=L(this,"error","populate","blocked","versionchange",{ready:[T,w]}),this.on.error.subscribe=P("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=P("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=s(this.on.ready.subscribe,function(e){return function(t,n){se.vip(function(){Qe?(Ge||N.resolve().then(t),n&&e(t)):(e(t),n||e(function e(){nt.on.ready.unsubscribe(t),nt.on.ready.unsubscribe(e)}))})}}),gt(function(){nt.on("populate").fire(nt._createTransaction(tt,Ze,We)),nt.on("error").fire(new Error)}),this.transaction=function(e,n,r){function i(n){var i=et;n(N.resolve().then(function(){return re(function(){et.transless=et.transless||i;var n=nt._createTransaction(e,f,We,u);et.trans=n,u?n.idbtrans=u.idbtrans:n.create();var o=f.map(function(e){return Ve[e]});o.push(n);var a;return N.follow(function(){if(a=r.apply(n,o))if("function"==typeof a.next&&"function"==typeof a.throw)a=ve(a);else if("function"==typeof a.then&&!t(a,"_PSD"))throw new Me.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+r.toString())}).uncaught(q).then(function(){return u&&n._resolve(),n._completion}).then(function(){return a}).catch(function(e){return n._reject(e),ae(e)})})}))}var o=arguments.length;if(o<2)throw new Me.InvalidArgument("Too few arguments");for(var a=new Array(o-1);--o;)a[o-1]=arguments[o];r=a.pop();var s=_(a),u=et.trans;u&&u.db===nt&&-1===e.indexOf("!")||(u=null);var c=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var f=s.map(function(e){var t=e instanceof H?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=tt)throw new Me.InvalidArgument("Invalid transaction mode: "+e);e=tt}if(u){if("readonly"===u.mode&&e===tt){if(!c)throw new Me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&f.forEach(function(e){if(u&&-1===u.storeNames.indexOf(e)){if(!c)throw new Me.SubTransaction("Table "+e+" not included in parent transaction.");u=null}})}}catch(e){return u?u._promise(null,function(t,n){n(e)}):ae(e,q)}return u?u._promise(e,i,"lock"):nt._whenReady(i)},this.table=function(e){if(vt&&ot)return new K(e);if(!t(Ve,e))throw new Me.InvalidTable("Table "+e+" does not exist");return Ve[e]},n(H.prototype,{_trans:function(e,t,n){var r=et.trans;return r&&r.db===nt?r._promise(e,t,n):Y(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){t(e,n,r.idbtrans.objectStore(o),r)}if(vt)return new N(t);var i=et.trans,o=this.name;return i&&i.db===nt?i._promise(e,r,n):Y(e,[this.name],r)},get:function(e,t){var n=this;return this._idbstore("readonly",function(t,r,i){vt&&t(n.schema.instanceTemplate);var o=i.get(e);o.onerror=he(r),o.onsuccess=ne(function(){t(n.hook.reading.fire(o.result))},r)}).then(t)},where:function(e){return new V(this,e)},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new this._collClass(new V(this,e))},toCollection:function(){return new this._collClass(new V(this))},mapToClass:function(e,n){this.schema.mappedClass=e;var r=Object.create(e.prototype);n&&ce(r,n),this.schema.instanceTemplate=r;var i=function(n){if(!n)return n;var r=Object.create(e.prototype);for(var i in n)if(t(n,i))try{r[i]=n[i]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e},defineClass:function(e){return this.mapToClass(se.defineClass(e),e)}}),i(K).from(H).extend({bulkDelete:function(e){return this.hook.deleting.fire===w?this._idbstore(tt,function(t,n,r,i){t($(r,i,e,!1,w))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(tt,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new Me.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new Me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,u=function(e){0===c.length?r(e):i(new F(n.name+".bulkPut(): "+c.length+" of "+f+" operations failed",c))},c=[],f=e.length,h=n;if(n.hook.creating.fire===w&&n.hook.updating.fire===w){s=W(c);for(var d=0,g=e.length;d<g;++d)(a=t?o.put(e[d],t[d]):o.put(e[d])).onerror=s;a.onerror=W(c,u),a.onsuccess=fe(u)}else{var v=t||o.keyPath&&e.map(function(e){return p(e,o.keyPath)}),m=v&&l(v,function(t,n){return null!=t&&[t,e[n]]});(v?h.where(":id").anyOf(v.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(U,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],i=v.length-1;i>=0;--i){var o=v[i];(null==o||m[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(m[o]=null))}return n.reverse(),t&&r.reverse(),h.bulkAdd(n,r)}).then(function(e){var t=v[v.length-1];return null!=t?t:e}):h.bulkAdd(e)).then(u).catch(F,function(e){c=c.concat(e.failures),u()}).catch(i)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(tt,function(i,o,a,s){function u(e){0===h.length?i(e):o(new F(n.name+".bulkAdd(): "+h.length+" of "+v+" operations failed",h))}if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new Me.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new Me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Me.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();var c,f,l,h=[],v=e.length;if(r!==w){var y,b=a.keyPath;f=W(h,null,!0),l=le(null),d(function(){for(var n=0,i=e.length;n<i;++n){y={onerror:null,onsuccess:null};var o=t&&t[n],u=e[n],h=t?o:b?p(u,b):void 0,d=r.call(y,h,u,s);null==h&&null!=d&&(b?g(u=m(u),b,d):o=d),(c=null!=o?a.add(u,o):a.add(u))._hookCtx=y,n<i-1&&(c.onerror=f,y.onsuccess&&(c.onsuccess=l))}},function(e){throw y.onerror&&y.onerror(e),e}),c.onerror=W(h,u,!0),c.onsuccess=le(u)}else{f=W(h);for(var _=0,k=e.length;_<k;++_)(c=t?a.add(e[_],t[_]):a.add(e[_])).onerror=f;c.onerror=W(h,u),c.onsuccess=fe(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(tt,function(r,i,o,a){var s={onsuccess:null,onerror:null};if(n!==w){var u=null!=t?t:o.keyPath?p(e,o.keyPath):void 0,c=n.call(s,u,e,a);null==u&&null!=c&&(o.keyPath?g(e,o.keyPath,c):t=c)}try{var f=null!=t?o.add(e,t):o.add(e);f._hookCtx=s,f.onerror=de(i),f.onsuccess=le(function(t){var n=o.keyPath;n&&g(e,n,t),r(t)})}catch(e){throw s.onerror&&s.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;return r!==w||i!==w?this._trans(tt,function(r,i,o){var a=void 0!==t?t:n.schema.primKey.keyPath&&p(e,n.schema.primKey.keyPath);null==a?n.add(e).then(r,i):(o._lock(),e=m(e),n.where(":id").equals(a).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):a}).finally(function(){o._unlock()}).then(r,i))}):this._idbstore(tt,function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=he(r),o.onsuccess=function(t){var r=i.keyPath;r&&g(e,r,t.target.result),n(o.result)}})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(tt,function(t,n,r){var i=r.delete(e);i.onerror=he(n),i.onsuccess=function(){t(i.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(tt,function(e,t,n){var r=n.clear();r.onerror=he(t),r.onsuccess=function(){e(r.result)}})},update:function(e,t){if("object"!=typeof t||ke(t))throw new Me.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||ke(e))return this.where(":id").equals(e).modify(t);we(t).forEach(function(n){g(e,n,t[n])});var n=p(e,this.schema.primKey.keyPath);return void 0===n?ae(new Me.InvalidArgument("Given object does not contain its primary key"),q):this.where(":id").equals(n).modify(t)}}),n(Z.prototype,{_lock:function(){return c(!et.global),1!==++this._reculock||et.global||(et.lockOwnerFor=this),this},_unlock:function(){if(c(!et.global),0==--this._reculock)for(et.global||(et.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ie(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&et.lockOwnerFor!==this},create:function(e){var t=this;if(c(!this.idbtrans),!e&&!Je)switch(Ge&&Ge.name){case"DatabaseClosedError":throw new Me.DatabaseClosed(Ge);case"MissingAPIError":throw new Me.MissingAPI(Ge.message,Ge);default:throw new Me.OpenFailed(Ge)}if(!this.active)throw new Me.TransactionInactive;return c(null===this._completion._state),e=this.idbtrans=e||Je.transaction(be(this.storeNames),this.mode),e.onerror=ne(function(n){pe(n),t._reject(e.error)}),e.onabort=ne(function(e){pe(e),t.active&&t._reject(new Me.Abort),t.active=!1,t.on("abort").fire(e)}),e.oncomplete=ne(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this,i=r._locked()?new N(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},et])}):re(function(){var i=r.active?new N(function(i,o){if(e===tt&&r.mode!==tt)throw new Me.ReadOnly("Transaction is readonly");!r.idbtrans&&e&&r.create(),n&&r._lock(),t(i,o,r)}):ae(new Me.TransactionInactive);return r.active&&n&&i.finally(function(){r._unlock()}),i});return i._lib=!0,i.uncaught(q)},abort:function(){this.active&&this._reject(new Me.Abort),this.active=!1},tables:{get:P("Transaction.tables",function(){return l(this.storeNames,function(e){return[e,Ve[e]]})},"Use db.tables()")},complete:P("Transaction.complete()",function(e){return this.on("complete",e)}),error:P("Transaction.error()",function(e){return this.on("error",e)}),table:P("Transaction.table()",function(e){if(-1===this.storeNames.indexOf(e))throw new Me.InvalidTable("Table "+e+" not in transaction");return Ve[e]})}),n(V.prototype,function(){function e(e,t,n){var r=e instanceof V?new e._ctx.collClass(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new e._ctx.collClass(e,function(){return Ke.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function i(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],c)<0&&(s=u)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function o(t,o,a,s){function u(e){c=n(e),f=r(e),l="next"===e?Re:Te;var t=a.map(function(e){return{lower:f(e),upper:c(e)}}).sort(function(e,t){return l(e.lower,t.lower)});h=t.map(function(e){return e.upper}),d=t.map(function(e){return e.lower}),p=e,g="next"===e?"":s}var c,f,l,h,d,p,g,v=a.length;if(!a.every(function(e){return"string"==typeof e}))return e(t,ct);u("next");var m=new t._ctx.collClass(t,function(){return Ke.bound(h[0],d[v-1]+s)});m._ondirectionchange=function(e){u(e)};var y=0;return m._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var a=f(r);if(o(a,d,y))return!0;for(var s=null,u=y;u<v;++u){var c=i(r,a,h[u],d[u],l,p);null===c&&null===s?y=u+1:(null===s||l(s,c)>0)&&(s=c)}return t(null!==s?function(){e.continue(s+g)}:n),!1}),m}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return Ee(n,r)>0||0===Ee(n,r)&&(i||o)&&(!i||!o)?t(this):new this._ctx.collClass(this,function(){return Ke.bound(n,r,!i,!o)})}catch(t){return e(this,ut)}},equals:function(e){return new this._ctx.collClass(this,function(){return Ke.only(e)})},above:function(e){return new this._ctx.collClass(this,function(){return Ke.lowerBound(e,!0)})},aboveOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ke.lowerBound(e)})},below:function(e){return new this._ctx.collClass(this,function(){return Ke.upperBound(e,!0)})},belowOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ke.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,ct):this.between(t,t+at,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):o(this,function(e,t){return 0===e.indexOf(t[0])},[e],at)},equalsIgnoreCase:function(e){return o(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=b.apply(Oe,arguments);return 0===e.length?t(this):o(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=b.apply(Oe,arguments);return 0===e.length?t(this):o(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,at)},anyOf:function(){var n=b.apply(Oe,arguments),r=Se;try{n.sort(r)}catch(t){return e(this,ut)}if(0===n.length)return t(this);var i=new this._ctx.collClass(this,function(){return Ke.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?Se:Ce,n.sort(r)};var o=0;return i._addAlgorithm(function(e,t,i){for(var a=e.key;r(a,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(a,n[o])||(t(function(){e.continue(n[o])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[-1/0,e],[e,st]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=b.apply(Oe,arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(Se)}catch(t){return e(this,ut)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return n.push([t[t.length-1],st]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function i(e,t){return f(e[0],t[0])}function o(e){return!h(e)&&!d(e)}var a=this._ctx;if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Se(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Me.InvalidArgument);var s,u=!r||!1!==r.includeLowers,c=r&&!0===r.includeUppers,f=Se;try{(s=n.reduce(function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(Ee(t[0],i[1])<0&&Ee(t[1],i[0])>0){i[0]=xe(i[0],t[0]),i[1]=Ae(i[1],t[1]);break}}return n===r&&e.push(t),e},[])).sort(i)}catch(t){return e(this,ut)}var l=0,h=c?function(e){return Se(e,s[l][1])>0}:function(e){return Se(e,s[l][1])>=0},d=u?function(e){return Ce(e,s[l][0])>0}:function(e){return Ce(e,s[l][0])>=0},p=h,g=new a.collClass(this,function(){return Ke.bound(s[0][0],s[s.length-1][1],!u,!c)});return g._ondirectionchange=function(e){"next"===e?(p=h,f=Se):(p=d,f=Ce),s.sort(i)},g._addAlgorithm(function(e,t,n){for(var r=e.key;p(r);)if(++l===s.length)return t(n),!1;return!!o(r)||0!==Ee(r,s[l][1])&&0!==Ee(r,s[l][0])&&(t(function(){f===Se?e.continue(s[l][0]):e.continue(s[l][1])}),!1)}),g},startsWithAnyOf:function(){var n=b.apply(Oe,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+at]})):e(this,"startsWithAnyOf() only works with strings")}}}),n(J.prototype,function(){function n(e,t){e.filter=De(e.filter,t)}function r(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return De(r(),t())}:t,e.justLimit=n&&!r}function i(e,t){e.isMatch=De(e.isMatch,t)}function o(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Me.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function a(e,t){var n=o(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function s(e,n,r,i,o){var s=e.replayFilter?De(e.filter,e.replayFilter()):e.filter;e.or?function(){function u(){2==++l&&r()}function c(e,r,o){if(!s||s(r,o,u,i)){var a=r.primaryKey.toString();t(f,a)||(f[a]=!0,n(e,r,o))}}var f={},l=0;e.or._iterate(c,u,i,o),oe(a(e,o),e.algorithm,c,u,i,!e.keysOnly&&e.valueMapper)}():oe(a(e,o),De(e.algorithm,s),n,r,i,!e.keysOnly&&e.valueMapper)}function u(e){return e.table.schema.instanceTemplate}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,function(e,t){t(n.error)}):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,function(e,n){n(t.error)}):t.table._idbstore(tt,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=De(t.algorithm,e)},_iterate:function(e,t,n,r){return s(this._ctx,e,t,n,r)},clone:function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&e(r,t),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;if(vt){var n=u(t),r=t.table.schema.primKey.keyPath,i=p(n,t.index?t.table.schema.idxByName[t.index].keyPath:r),o=p(n,r);e(n,{key:i,primaryKey:o})}return this._read(function(n,r,i){s(t,e,n,r,i)})},count:function(e){if(vt)return N.resolve(0).then(e);var t=this._ctx;if(G(t,!0))return this._read(function(e,n,r){var i=o(t,r),a=t.range?i.count(t.range):i.count();a.onerror=he(n),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,i){s(t,function(){return++n,!1},function(){e(n)},r,i)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[i[t]],t-1):e[o]}function r(e,t){var r=n(e,a),i=n(t,a);return r<i?-s:r>i?s:0}var i=e.split(".").reverse(),o=i[0],a=i.length-1,s="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(vt&&e([u(t)]),Le&&"next"===t.dir&&G(t,!0)&&t.limit>0){var i=t.table.hook.reading.fire,a=o(t,r),c=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);c.onerror=he(n),c.onsuccess=i===k?fe(e):ne(fe(function(t){try{e(t.map(i))}catch(e){n(e)}}))}else{var f=[];s(t,function(e){f.push(e)},function(){e(f)},n,r)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,G(t)?r(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):r(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),r(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(e,t){var r=this._ctx;return vt&&e(u(r)),n(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){return vt&&e(u(this._ctx)),n(this._ctx,function(t){return e(t.value)}),i(this._ctx,e),this},and:function(e){return this.filter(e)},or:function(e){return new V(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(Le&&"next"===t.dir&&G(t,!0)&&t.limit>0)return this._read(function(e,n,r){var i=o(t,r),a=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);a.onerror=he(n),a.onsuccess=fe(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var i={};return n(this._ctx,function(e){var n=e.primaryKey.toString(),r=t(i,n);return i[n]=!0,!r}),this}}}),i(X).from(J).extend({modify:function(n){var r=this,i=this._ctx,o=i.table.hook,a=o.updating.fire,s=o.deleting.fire;return vt&&"function"==typeof n&&n.call({value:i.table.schema.instanceTemplate},i.table.schema.instanceTemplate),this._write(function(i,o,u,c){function f(e){return e&&(S.push(e),C.push(R)),o(new U("Error modifying one or more objects",S,x,C))}function l(){A&&x+S.length===E&&(S.length>0?f():i(x))}var h;if("function"==typeof n)h=a===w&&s===w?n:function(e){var r=m(e);if(!1===n.call(this,e,this))return!1;if(t(this,"value")){var i=y(r,this.value),o=a.call(this,i,this.primKey,r,c);o&&(e=this.value,we(o).forEach(function(t){g(e,t,o[t])}))}else s.call(this,this.primKey,e,c)};else if(a===w){var b=we(n),_=b.length;h=function(e){for(var t=!1,r=0;r<_;++r){var i=b[r],o=n[i];p(e,i)!==o&&(g(e,i,o),t=!0)}return t}}else{var k=n;n=v(k),h=function(t){var r=!1,i=a.call(this,n,this.primKey,m(t),c);return i&&e(n,i),we(n).forEach(function(e){var i=n[e];p(t,e)!==i&&(g(t,e,i),r=!0)}),i&&(n=v(k)),r}}var E=0,x=0,A=!1,S=[],C=[],R=null;r.clone().raw()._iterate(function(e,n){function r(e){return S.push(e),C.push(i.primKey),l(),!0}R=n.primaryKey;var i={primKey:n.primaryKey,value:e,onsuccess:null,onerror:null};if(!1!==h.call(i,e,i)){var o=!t(i,"value");++E,d(function(){var e=o?n.delete():n.update(i.value);e._hookCtx=i,e.onerror=de(r),e.onsuccess=le(function(){++x,l()})},r)}else i.onsuccess&&i.onsuccess(i.value)},function(){A=!0,l()},f,u)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==w;if(!i&&G(t)&&(t.isPrimKey&&!dt||!n))return this._write(function(e,t,r){var i=he(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;d(function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var o=i?2e3:1e4;return this._write(function(n,a,s,u){var c=0,f=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),l=[],h=function(){return f.each(i?function(e,t){l.push([t.primaryKey,t.value])}:function(e,t){l.push(t.primaryKey)}).then(function(){return i?l.sort(function(e,t){return Se(e[0],t[0])}):l.sort(Se),$(s,u,l,i,r)}).then(function(){var e=l.length;return c+=e,l=[],e<o?c:h()})};n(h())})}}),e(this,{Collection:J,Table:H,Transaction:Z,Version:x,WhereClause:V,WriteableCollection:X,WriteableTable:K}),nt.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+nt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+nt.name+"'. Closing db now to resume the delete request."),nt.close()}),nt.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+nt.name+"') was blocked"):console.warn("Upgrade '"+nt.name+"' blocked by other connection holding version "+e.oldVersion/10)}),qe.forEach(function(e){e(nt)})}function ue(e){if("function"==typeof e)return new e;if(ke(e))return[ue(e[0])];if(e&&"object"==typeof e){var t={};return ce(t,e),t}return e}function ce(e,t){return we(t).forEach(function(n){var r=ue(t[n]);e[n]=r}),e}function fe(e){return function(t){e(t.target.result)}}function le(e){return ne(function(t){var n=t.target,r=n.result,i=n._hookCtx,o=i&&i.onsuccess;o&&o(r),e&&e(r)},e)}function he(e){return function(t){return pe(t),e(t.target.error),!1}}function de(e){return ne(function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),pe(t),e(r),!1})}function pe(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function ge(e){var t,n=se.dependencies.localStorage;if(!n)return e([]);try{t=JSON.parse(n.getItem("Dexie.DatabaseNames")||"[]")}catch(e){t=[]}e(t)&&n.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function ve(e){function t(e){return function(t){var n=e(t),o=n.value;return n.done?o:o&&"function"==typeof o.then?o.then(r,i):ke(o)?N.all(o).then(r,i):r(o)}}var n=function(t){return e.next(t)},r=t(n),i=t(function(t){return e.throw(t)});return t(n)()}function me(e,t,n,r,i,o,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+s}function ye(e,t,n,r){this.name=e,this.primKey=t||new me,this.indexes=n||[new me],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=l(n,function(e){return[e.name,e]})}function be(e){return 1===e.length?e[0]:e}function _e(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var we=Object.keys,ke=Array.isArray,Ee="undefined"!=typeof self?self:"undefined"!=typeof window?window:Mo,xe=Object.getPrototypeOf,Ae={}.hasOwnProperty,Se=Object.getOwnPropertyDescriptor,Ce=[].slice,Re="undefined"!=typeof Symbol&&Symbol.iterator,Te=Re?function(e){var t;return null!=e&&(t=e[Re])&&t.apply(e)}:function(){return null},Oe={},De=[].concat,Be="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Pe=function(){return!0},Ie=!new Error("").stack,je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ue=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"].concat(je),Fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};i(I).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+B(this._e,2))}},toString:function(){return this.name+": "+this.message}}),i(U).from(I),i(F).from(I);var Le=Ue.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ne=I,Me=Ue.reduce(function(e,t){function n(e,n){this._e=D(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Fe[t]||r,this.inner=null)}var r=t+"Error";return i(n).from(Ne),e[t]=n,e},{});Me.Syntax=SyntaxError,Me.Type=TypeError,Me.Range=RangeError;var ze=je.reduce(function(e,t){return e[t+"Error"]=Me[t],e},{}),qe=Ue.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Me[t]),e},{});qe.ModifyError=U,qe.DexieError=I,qe.BulkError=F;var Ye={},He=100,Ke=!1,We=Ee.setImmediate?setImmediate.bind(null,Z):Ee.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Z(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Z,0)},$e=function(e,t){tt.push([e,t]),Ve&&(We(),Ve=!1)},Ze=!0,Ve=!0,Je=[],Ge=[],Xe=null,Qe=k,et={global:!0,ref:0,unhandleds:[],onunhandled:oe,finalize:function(){this.unhandleds.forEach(function(e){try{oe(e[0],e[1])}catch(e){}})}},tt=[],nt=0,rt=[];n(N.prototype,{then:function(e,t){var n=this,r=new N(function(r,i){H(n,new M(e,t,r,i))});return Be&&(!this._prev||null===this._state)&&$(r,this),r},_then:function(e,t){H(this,new M(null,null,e,t))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):te(e)}):this.then(null,function(e){return e&&e.name===t?n(e):te(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),te(t)})},uncaught:function(e){var t=this;return this.onuncatched=R(this.onuncatched,e),!1===this._state&&-1===Je.indexOf(this)&&Je.some(function(e,n,r){return e._value===t._value&&(r[n]=t)}),this},stack:{get:function(){if(this._stack)return this._stack;try{Ke=!0;var e=W(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ke=!1}}}}),n(N,{all:function(){var e=b.apply(null,arguments);return new N(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return N.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof N?e:e&&"function"==typeof e.then?new N(function(t,n){e.then(t,n)}):new N(Ye,!0,e)},reject:te,race:function(){var e=b.apply(null,arguments);return new N(function(t,n){e.map(function(e){return N.resolve(e).then(t,n)})})},PSD:{get:function(){return et},set:function(e){return et=e}},newPSD:re,usePSD:ie,scheduler:{get:function(){return $e},set:function(e){$e=e}},rejectionMapper:{get:function(){return Qe},set:function(e){Qe=e}},follow:function(e){return new N(function(t,n){return re(function(t,n){var r=et;r.unhandleds=[],r.onunhandled=n,r.finalize=x(function(){var e=this;X(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n)})},on:L(null,{error:[R,function(e){console.warn("Unhandled rejection: "+(e.stack||e))}]})});var it=N.on.error;it.subscribe=P("Promise.on('error')",it.subscribe),it.unsubscribe=P("Promise.on('error').unsubscribe",it.unsubscribe);var ot="unhandledrejection";u(function(){$e=function(e,t){setTimeout(function(){e.apply(null,t)},0)}});var at=String.fromCharCode(65535),st=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return at}}(),ut="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ct="String expected.",ft=[],lt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ht=lt,dt=lt,pt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};O(Be,pt);var gt=function(){},vt=!1,mt=Ee.idbModules&&Ee.idbModules.shimIndexedDB?Ee.idbModules:{};return n(se,qe),n(se,{delete:function(e){var t=new se(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new se(e).open().then(function(e){return e.close(),!0}).catch(se.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){return new N(function(e,t){var n=_e(indexedDB);if(n){var r=n();r.onsuccess=function(t){e(a(t.target.result,0))},r.onerror=he(t)}else ge(function(t){return e(t),!1})}).then(e)},defineClass:function(t){return function(n){n?e(this,n):vt&&ce(this,t)}},applyStructure:ce,ignoreTransaction:function(e){return et.trans?ie(et.transless,e):e()},vip:function(e){return re(function(){return et.letThrough=!0,e()})},async:function(e){return function(){try{var t=ve(e.apply(this,arguments));return t&&"function"==typeof t.then?t:N.resolve(t)}catch(e){return ae(e)}}},spawn:function(e,t,n){try{var r=ve(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:N.resolve(r)}catch(e){return ae(e)}},currentTransaction:{get:function(){return et.trans||null}},Promise:N,debug:{get:function(){return Be},set:function(e){O(e,"dexie"===e?function(){return!0}:pt)}},derive:i,extend:e,props:n,override:s,Events:L,events:{get:P(function(){return L})},getByKeyPath:p,setByKeyPath:g,delByKeyPath:function(e,t){"string"==typeof t?g(e,t,void 0):"length"in t&&[].map.call(t,function(t){g(e,t,void 0)})},shallowClone:v,deepClone:m,getObjectDiff:y,asap:f,maxKey:st,addons:[],connections:ft,MultiModifyError:Me.Modify,errnames:Le,IndexSpec:me,TableSchema:ye,dependencies:{indexedDB:mt.shimIndexedDB||Ee.indexedDB||Ee.mozIndexedDB||Ee.webkitIndexedDB||Ee.msIndexedDB,IDBKeyRange:mt.IDBKeyRange||Ee.IDBKeyRange||Ee.webkitIDBKeyRange},semVer:"1.5.1",version:"1.5.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),fakeAutoComplete:gt,default:se}),d(function(){se.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:Ee.localStorage}),N.rejectionMapper=function(e,t){if(!e||e instanceof I||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ze[e.name])return e;var n=new ze[e.name](t||e.message,e);return"stack"in e&&r(n,"stack",{get:function(){return this.inner.stack}}),n},u(function(){se.fakeAutoComplete=gt=u,se.fake=vt=!0}),se})}),zl=function(){var e=new Ml(Go.client.iddbName);return e.version(Go.client.iddbVersion).stores({assets:Go.client.iddbColumns}),e.open()},ql=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"temporary";return new Promise(function(t,n){if(!e)return n(new Error("No type provided.  Must be one of `temporary` or `persistent`."));switch(e){case"temporary":case"TEMPORARY":if(!navigator.webkitTemporaryStorage)return t(Nl.desktop()?Go.client.iddbDefaultDesktopDisk:Go.client.iddbDefaultMobileDisk);navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(Nl.desktop()?Go.client.iddbDefaultDesktopDisk:Go.client.iddbDefaultMobileDisk)});break;case"persistent":case"PERSISTENT":if(!navigator.webkitPersistentStorage)return t(Nl.desktop()?Go.client.iddbDefaultDesktopDisk:Go.client.iddbDefaultMobileDisk);navigator.webkitPersistentStorage.queryUsageAndQuota(function(e,n){return t((e+n)/1048576)},function(){return t(Nl.desktop()?Go.client.iddbDefaultDesktopDisk:Go.client.iddbDefaultMobileDisk)})}})},Yl=function(e){return new Promise(function(t,n){var r=[],i=[];if(!e)return n(new Error("db is not connected"));e.assets.toCollection().eachPrimaryKey(function(e){i.push(parseInt(e.split("|")[0],10)),r.push(parseInt(e.split("|")[1],10))}).then(function(){return t({assets:r,origins:i})}).catch(n)})},Hl=Xo?{}:window.URL||window.webkitURL||window.mozURL||window.msURL,Kl=Va("edgemesh:postmessage"),Wl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Kl("posting %O to main thread on channel %s",n,t),parent.postMessage({channel:t,data:n},"https://"+e)},$l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Kl("posting %O to shared worker on channel %s",n,t),e.postMessage({channel:t,data:n})},Zl=function(e){return new Promise(function(t){return window.addEventListener("message",e),t(!0)})},Vl=c(function(e){(function(){var t,n,r,i,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==za&&null!==za&&za.hrtime?(e.exports=function(){return(t()-o)/1e6},n=za.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),a=1e9*za.uptime(),o=i-a):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(Mo)}),Jl=function(){return(new Date).toISOString()},Gl=function(){return Vl()},Xl=so;so.defer=uo;var Ql=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};aa(this,e),this.q={low:[],mid:[],high:[]},this.active=[],this.processedTasks=0,this.maxParallel=t.maxParallel||6,this.processingFrequency=t.processingFrequency||30}return sa(e,[{key:"start",value:function(){var e=this;this.interval=setInterval(function(){e.processQueue()},this.processingFrequency)}},{key:"stop",value:function(){this.interval&&(this.interval=clearInterval(this.interval))}},{key:"clear",value:function(e){this.q[e].length=0}},{key:"enqueue",value:function(e){this.q[e.priority]?this.q[e.priority].unshift(e):console.warn("invalid priority: "+e.priority+" should be 'low' 'mid' or 'high'")}},{key:"getQueuedTasks",value:function(){var e={totalQueued:0,processed:this.processedTasks,started:Boolean(this.interval)};for(var t in this.q)t&&(e[t]=this.q[t].length,e.totalQueued+=this.q[t].length);return e}},{key:"processQueue",value:function(){if(this.active.length<=this.maxParallel){var e=this.q.high.length>0?this.q.high.pop():this.q.mid.length>0?this.q.mid.pop():this.q.low.pop();e&&(this.active.push(e),e.execute().then(this._cleanup(e),this._cleanup(e)),this.processedTasks++)}}},{key:"_cleanup",value:function(e){this.active.splice(this.active.indexOf(e))}}]),e}(),eh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{priority:"mid"},t=e.priority,n=e.callback,r=Xl();return{priority:t,promise:r.promise,execute:function(){return n().then(function(e){return r.resolve(e)},function(e){return r.reject(e)})}}},th=navigator.connection,nh=function(){if(!th)return!1;switch(th.type){case"bluetooth":case"cellular":return!0;case"ethernet":case"wifi":case"wimax":case"mixed":case"unknown":case"other":case"none":default:return!1}},rh=function(e){th&&th.addEventListener("change",e)},ih={meshConnectTimeout:5e3,maxConnectedPeers:10,iddbName:"edgemesh",iddbVersion:1,iddbColumns:"++id",iddbDefaultMobileDisk:5,iddbDefaultDesktopDisk:50,maxParallelJobs:6,jobProcessingFrequency:30,hubSyncDelay:1e4,chunkSize:15360,chunkIdOffset:0,chunkPositionOffset:4,chunkReservedBytes:8,swPollMaxRetries:5,swPollInterval:200},oh={extension:["jpg","jpeg","gif","png","bmp","svg","webp","webm"]},ah={iceServers:[{url:"stun:sig.edgeno.de:3478"},{url:"stun:stun.l.google.com:19302"}]},sh={beaconUrl:"https://sig.edgeno.de/track",script:"edgemesh.track.min.js"},uh={httpPort:80,httpsPort:443,wssPort:9e3},ch={host:"e.edgeno.de",ignoreErrors:[],whitelistUrls:["sig.edgeno.de"],sampleRate:.5,autoBreadcrumbs:{console:!1,xhr:!0,dom:!0,location:!0},client:{id:2,key:"aa1cdc63123e46cdbca29469c7a88416"},hub:{id:3,key:"a36fb8e3eddc42a6a651884cca1b4f7b"},"worker-service":{id:4,key:"ee9e46bd992345f5b7deff07616de822"},"worker-shared":{id:5,key:"d7bb252e1e1e447e8b394cbd67e80eec"},"server-cdn":{id:6,key:"0265404bbacd497ca9237dbf6729af78:3492681cb939430db317cc9ef35c4602"},"server-portal":{id:7,key:"a2fe1e0a0fed4d778f2f54c596dcd098:9d0f5dfbf76e4a10a13b2639221b6e09"},supernode:{id:8,key:"d5351a9f5c5140059c23d6cd6a900f15:6783417eea9943bcbdfc4db2a3f39221"}},fh={version:"1.7.2",client:ih,support:oh,env:"production",host:"sig.edgeno.de",clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:ah,tracking:sh,server:uh,sentry:ch},lh=Object.freeze({version:"1.7.2",client:ih,support:oh,env:"production",host:"sig.edgeno.de",clientUrl:"https://edgemesh.com",portalUrl:"https://portal.edgemesh.com",grantApplyEmail:"frontier@edgemesh.com",contactEmail:"contact@edgemesh.com",signaling:ah,tracking:sh,server:uh,sentry:ch,default:fh}),hh="PEER_SIGNAL",dh="PEER_OFFER",ph="EM_SET_HUB_ID",gh="HUB_ID",vh=Fo("edgemesh:hub:tasks:peer-mesh"),mh=function(e){var t=this,n=e.originId,r=e.assetId,i=e.hubs,o=e.checksum;return new eh({priority:"low",callback:function(){return new Promise(function(e){var a=n+"|"+r,s=So(),u={id:t.id,topic:0,rtc:t.rtc},c={protocol:"rtc_mesh",srcId:t.id,origin:n,asset:r,reqId:s,hubs:i,checksum:o},f=new Ga(u,c,function(n){var r=n.buffer,i=n.contentType;vh("mesh complete for %s",a);var o=new Uint8Array(r),u=new Blob([o],{type:i}),c=Hl.createObjectURL(u);t.storeAsset({id:a,contentType:i,blobUrl:c}),t.inboundTransfers.removeRecord(s),Qo()&&t.updateState(t.getState()),e()},function(n){vh("mesh failed for %s: %s",a,n),t.inboundTransfers.removeRecord(s),Qo()&&t.updateState(t.getState()),e()});f.on("error",function(e){return Raven.error(e)}),f.on("transfer",function(e){$l(t.worker,"TRANSFER_RECORD",e)}),f.start(),t.inboundTransfers.addRecord({id:s,mesh:f})})}})},yh=Fo("edgemesh:hub:tasks:hub-replicate"),bh=function(){var e=this;return new eh({priority:"low",callback:function(){return new Promise(function(t,n){yh("requesting keys from client");try{e.directPeer.send("HUB_REQUEST_REPLICATE"),t()}catch(e){yh("error sending hub replicate %O",e),n(e)}})}})},_h=function(e,t){var n=t.id,r=t.chunkId,i=t.chunk;return new eh({priority:"mid",callback:function(){return new Promise(function(t){e.send("ASSET_CHUNK",{id:n,chunkId:r,chunk:i}),t()})}})},wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Eh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Function.prototype.$asyncbind=function e(t,n){function r(){return i.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,i){return function o(a){for(;a;){if(a.then)return a=a.then(o,r),i?void 0:a;try{if(a.pop){if(a.length)return a.pop()?t.call(e):a;a=n}else a=a.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function i(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(e){t(o,e,i)}return o}function o(e){this._resolver=e,this.then=i}return n.prototype={resolve:r,reject:r,then:function(e,t){this.resolve=e,this.reject=t}},o.resolve=function(e){return o.isThenable(e)?e:{then:function(t){return t(e)}}},o.isThenable=e,o}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof process?"undefined":wh(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var i=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r==1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":wh(e))))try{var r=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&i(function(){for(var r=0,i=t.c.length;r<i;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&i(function(){for(var n=0,i=t.length;n<i;n++)r(t[n],e)})}},then:function(e,n){var r=new t,o={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var a=this.state,s=this.v;i(function(){a(o,s)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var i=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(t,arguments)}catch(e){return n(e)}}}};var xh=Fo("edgemesh:hub:stream-direct"),Ah=function(e,t){var n=this,r=function(e){return new Promise(function(t,r){n.db.assets.where("id").equals(e).first(function(n){return n&&n.buffer?t(n):(xh("asset %s not found in database",e),r(new Error("asset not found in database")))})})};return new eh({priority:"low",callback:function(){return function(){return new Promise(function(i,o){(function(){return i()}).$asyncbind(this,o);var a,s,u,c,f,l,h,d,p=function(e){return i(e)}.$asyncbind(this,o);try{return a=e+"|"+t,xh("streaming asset %s to client db",a),r(a).then(function(e){for(u=new da({name:a,mimeType:(s=e).contentType,chunkSize:lh.client.chunkSize,arrayBuffer:s.buffer,compressed:s.compressed}),c=u.getTransferObject(),n.directPeer.send("ASSET_META",u.getMetadata()),f=0;f<u.totalChunks;f++)l=c.getChunk(),h=f+1,d=_h.call(n,n.directPeer,{id:a,chunkId:h,chunk:l}),n.queue.enqueue(d);return i(!0)}.$asyncbind(this,p),p)}catch(e){p(e)}}.$asyncbind(this))}()}})},Sh=Fo("edgemesh:hub:pm-events"),Ch=function(e){var t=this,n=e.data.channel,r=e.data.data;switch(n&&Sh("postmessage event received on channel %s %O",n,r),n){case"OFFER":this.rtc.receiveOffer(r);break;case"SIGNAL":this.rtc.receiveSignal(r);break;case"HUB_REQUEST_REPLICATE":if(Qo())return;var i=bh.call(this);i.promise.catch(function(e){return Raven.error(e)}),this.directPeer.connected?this.queue.enqueue(i):this.directPeer.once("connect",function(){t.queue.enqueue(i)});break;case"ASSET_STORE":Sh("asset store received %O",r),this.storeAsset(r.meta,r.stats,!0,!0);break;case"HUB_SYNC_ADD-RESPONSE":Sh("syncing hub");var o=r.OriginID,a=r.AssetID,s=r.HubID,u=r.checksum;a.forEach(function(e,n){var r=mh.call(t,{originId:o[n],assetId:e,hubs:s[n],checksum:u[n]});r.promise.catch(function(e){return Raven.error(e)}),t.queue.enqueue(r)});var c=bh.call(this);c.promise.catch(function(e){return Raven.error(e)}),this.queue.enqueue(c);break;case"HUB_REPLICATE-RESPONSE":if(Qo())return;var f=r.OriginID,l=r.AssetID,h={originIds:[],assetIds:[]};r.action.forEach(function(e,n){switch(e){case 1:var r=Ah.call(t,f[n],l[n]);return r.promise.catch(function(e){return Raven.error(e)}),t.queue.enqueue(r);case-1:h.originIds.push(f[n]),h.assetIds.push(l[n])}}),0!==h.originIds.length&&this.directPeer.send("EM_ASSET_REMOVE",h)}},Rh=function(e,t){return new eh({priority:"high",callback:function(){return new Promise(function(n){e.send("ASSET_META",t),n()})}})};Function.prototype.$asyncbind=function e(t,n){function r(){return i.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,i){return function o(a){for(;a;){if(a.then)return a=a.then(o,r),i?void 0:a;try{if(a.pop){if(a.length)return a.pop()?t.call(e):a;a=n}else a=a.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function i(r,i){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,i):t(o,n,r)},function(e){t(o,e,i)})}catch(e){t(o,e,i)}return o}function o(e){this._resolver=e,this.then=i}return n.prototype={resolve:r,reject:r,then:function(e,t){this.resolve=e,this.reject=t}},o.resolve=function(e){return o.isThenable(e)?e:{then:function(t){return t(e)}}},o.isThenable=e,o}(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory=function(e){function t(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function n(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function r(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===("undefined"==typeof process?"undefined":wh(process))&&process.nextTick||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,0)};var i=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===i&&(n.splice(0,i),r=0)}}var n=[],r=0,i=1024;return function(i){n.push(i),n.length-r==1&&e(t)}}();return t.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":wh(e))))try{var r=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){r++||t.resolve(e)},function(e){r++||t.reject(e)})}catch(e){return void(r||this.reject(e))}this.state=n,this.v=e,t.c&&i(function(){for(var r=0,i=t.c.length;r<i;r++)n(t.c[r],e)})}},reject:function(e){if(void 0===this.state){this.state=r,this.v=e;var t=this.c;t&&i(function(){for(var n=0,i=t.length;n<i;n++)r(t[n],e)})}},then:function(e,n){var r=new t,o={y:e,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var a=this.state,s=this.v;i(function(){a(o,s)})}return r}},t.resolve=function(e){if(e&&e instanceof t)return e;var n=new t;return n.resolve(e),n},t.reject=function(e){if(e&&e instanceof t)return e;var n=new t;return n.reject(e),n},t.version="2.3.3-nodent",t})());var i=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return i.apply(t,arguments)}catch(e){return n(e)}}}};var Th=Fo("edgemesh:hub:stream-asset"),Oh=function(e){var t=this,n=function(e,n,r){return new Promise(function(i,o){t.db.assets.where("id").equals(n).first(function(a){return a&&a.buffer?i(a):(t.rtc.connect(e).then(function(e){e.send("ASSET_NOT_FOUND",{id:r,hubId:t.id})}).catch(function(e){return Raven.error(e)}),Th("asset %s not found in database",n),o(new Error("asset not found in database")))})})};return new eh({priority:"low",callback:function(){return function(){return new Promise(function(r,i){(function(){return r()}).$asyncbind(this,i);var o,a,s,u,c,f,l,h,d,p,g=function(e){return Th("error streaming asset %O",e),r(e)}.$asyncbind(this,i);try{return o=e.fromPeerId,a=e.reqId,s=e.origin,u=e.asset,c=e.chunks,f=s+"|"+u,Th("asset %s requested from hub",f),t.rtc.connect(o).then(function(e){return l=e,n.call(t,o,f,a).then(function(e){return h=e,d=new da({name:a,mimeType:h.contentType,chunkSize:lh.client.chunkSize,arrayBuffer:ta(h.buffer),compressed:h.compressed}),t.outboundTransfers.addRecord({id:a,meta:d.getMetadata()}),Qo()&&t.updateState(t.getState()),p=d.getTransferObject(),c.forEach(function(e){if(0===e){Th("full asset requested");var n=Rh(l,d.getMetadata());t.queue.enqueue(n);for(var r=0;r<d.totalChunks;r++){var i=p.getChunk(),o=_h(l,{id:a,chunkId:e,chunk:i});t.queue.enqueue(o),t.bytesSaved+=i.byteLength}}else{Th("partial asset requested %O",{chunks:c});var s=p.getChunk(e),u=_h(l,{id:a,chunkId:e,chunk:s});t.queue.enqueue(u),t.bytesSaved+=s.byteLength}}),t.outboundTransfers.removeRecord(a),Qo()&&t.updateState(t.getState()),r(!0)}.$asyncbind(this,g),g)}.$asyncbind(this,g),g)}catch(e){g(e)}}.$asyncbind(this))}()}})},Dh=Fo("edgemesh:hub:rtc-events"),Bh=function(e){var t=this;e.on("HUB_RESPOND_REPLICATE",function(e){Dh("client keys received %O",e.keys),Yl(t.db).then(function(n){$l(t.worker,"HUB_RESPOND_REPLICATE",{topic:t.originHash,clientKeys:e.keys,hubKeys:n})}).catch(function(e){return Raven.error(e)})}),e.on("ASSET_STORE_META",function(e){var n=e.meta,r=e.stats;Dh("asset store meta received %O",n);var i=r.contentType,o=n.name;r.transferStart=Jl(),r.id=o;var a=new da(n);a.onCompleted=function(e){e.getFile().then(function(e){var s=e.ArrayBuffer;r.transferEnd=Jl();var u=new Uint8Array(s),c=new Blob([u],{type:i}),f=Hl.createObjectURL(c);t.storeAsset({id:o,contentType:i,blobUrl:f},r,!0,!0),t.inboundDirectTransfers.removeRecord(n.name),a.clearData()})},t.inboundDirectTransfers.addRecord({id:n.name,stats:r})}),e.on("ASSET_STORE_CHUNK",function(e){var t=e.chunk;da.submitChunk(ta(t))}),e.on("ASSET_META",function(e){Dh("asset meta recieved %O",e);var n=t.inboundTransfers.getRecord(e.name);n?n.mesh.metaReceived(e):Raven.error(new Error("mesh record not found"),{extra:{reqId:e.name}})}),e.on("ASSET_CHUNK",function(e){var n=e.id,r=e.chunk,i=e.chunkId,o=t.inboundTransfers.getRecord(n);o?o.mesh.chunkReceived({chunk:r,chunkId:i}):Raven.error(new Error("mesh record not found"),{extra:{id:n}})}),e.on("ASSET_NOT_FOUND",function(e){var n=e.id,r=e.hubId;Dh("asset not found in hub %s",r);var i=t.inboundTransfers.getRecord(n);i?i.mesh.tryNextHub([0],"asset not found"):Raven.error(new Error("mesh record not found"),{extra:{id:n}})}),e.on("ASSET_REQUEST",function(e){Dh("asset request recieved %O",e);var n=Oh.call(t,e);n.promise.catch(function(e){return Raven.error(e)}),t.queue.enqueue(n)})},Ph=Fo("edgemesh:hub:deconstructor"),Ih=function(){Ph("cleaning up hub"),$l(this.worker,"CLOSE_PORT"),!Qo()&&this.directPeer&&this.directPeer.disconnect(),this.rtc&&this.rtc.destroy(),this.db&&this.db.close(),Ph("hub clean")},jh=Fo("edgemesh:hub"),Uh=function(){function e(){var t=this;kh(this,e),this.enabled=!1,this.registered=!1,this.metered=nh(),this.inboundTransfers=new lo,this.outboundTransfers=new lo,this.inboundDirectTransfers=new lo,this.sessionStart=new Date,this.origin=document.location.hostname,this.clientId="superhub",this.host=lh.host,jh("starting up raven"),window.Raven=Pl.init("hub");var n=window.name.split("|");if(3!==n.length)return new Error("hub configuration options are not correct");if(this.host=n[0],this.origin=n[1],this.windowOrigin=n[2],!Ll.hub)return jh("the current browser is not supported"),!1;this.originHash=Il(this.origin),this.ua=navigator.userAgent;var r=ma.get(gh);r||(r=To.v4(),ma.set(gh,r)),this.id=r,Wl(this.windowOrigin,ph,{hubId:r}),Raven.setUserContext({hubId:this.id}),this._spawnWorker(),zl().then(function(e){t.db=e}).catch(function(e){return Raven.error(e)}),Qo()||(this.directPeer=new sl({initiator:!0,scope:"https://"+this.windowOrigin}),this.directPeer.on("error",Raven.error),this.directPeer.on("connect",this.startSession.bind(this)),Bh.call(this,this.directPeer)),this.rtc=new il(this.id,Bh.bind(this)),this.rtc.on("offer",function(e){$l(t.worker,dh,e)}),this.rtc.on("signal",function(e){$l(t.worker,hh,e)}),this.rtc.on("peer-error",function(e){jh("peer error %O",e),Raven.error(e)}),this.queue=new Ql({maxParallel:lh.client.maxParallelJobs,processingFrequency:lh.client.jobProcessingFrequency}),rh(this.connectionChanged.bind(this)),this.connectionChanged(),Zl(Ch.bind(this)),ao.call(this),window.onbeforeunload=Ih.bind(this),Raven.event({message:"constructed",category:"lifecycle"})}return Eh(e,[{key:"enable",value:function(){jh("enabling hub"),this.enabled=!0,this.queue.start(),$l(this.worker,"HUB_ENABLE"),Raven.event({message:"enabled",category:"lifecycle"})}},{key:"disable",value:function(){jh("disabling hub"),this.enabled=!1,this.queue&&this.queue.stop(),$l(this.worker,"HUB_DISABLE"),Raven.event({message:"disabled",category:"lifecycle"})}},{key:"idle",value:function(){jh("hub tab inactive"),Raven.event({message:"idle",category:"lifecycle"}),$l(this.worker,"HUB_IDLE",{hubId:this.id})}},{key:"active",value:function(){jh("hub tab active"),Raven.event({message:"active",category:"lifecycle"}),$l(this.worker,"HUB_ACTIVE",{hubId:this.id})}},{key:"startSession",value:function(){Qo()||!this.directPeer.connected||this.registered||(Wl(this.windowOrigin,"SESSION_START",{hubId:this.id}),this.registered=!0)}},{key:"connectionChanged",value:function(){nh()?(jh("connection has changed to metered"),this.disable()):(jh("connection has changed to unmetered"),this.enable())}},{key:"storeAsset",value:function(e,t){var n=e.id,r=e.contentType,i=e.blobUrl,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];$l(this.worker,"ASSET_STORE",{meta:{id:n,contentType:r,blobUrl:i},stats:t,register:o,record:a}),jh("sending asset %s to worker %O",n,{register:o,record:a})}},{key:"_spawnWorker",value:function(){var e=this;if(!this.worker){jh("injecting worker");try{var t=new SharedWorker("https://"+lh.host+"/"+lh.version+"/edgemesh.worker.min.js","Edgemesh Worker");this.worker=t.port,this.worker.start(),this.worker.onmessage=Ch.bind(this),ql().then(function(t){$l(e.worker,"WORKER_REGISTER",{hubId:e.id,host:e.host,ua:e.ua,size:t})})}catch(e){Raven.error(e)}}}}]),e}();return window.hub=new Uh,Uh}();

